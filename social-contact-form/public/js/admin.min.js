(function(){"use strict";var Ig=document.createElement("style");Ig.textContent=`.max-width[data-v-2bff511b]{width:calc(100% - 2px)}.pro-badge[data-v-6f8ab5ea]{position:absolute!important;top:0!important;right:0!important}.max-width[data-v-7fb13cf4]{width:calc(100% - 2px)}[contenteditable=true][data-v-8abdf9de]:empty:before{content:attr(dh-ph)}.slide-enter-active,.slide-leave-active{transition:all .3s ease}.slide-enter-from,.slide-leave-to{transform:translateY(-10px);opacity:0}.fm-card[data-v-0e65ea06]{background:#fff;border:1px solid #e6e8ef;border-radius:3px;display:flex;flex-direction:column;min-height:180px;transition:all .2s;box-shadow:0 1px 3px #0000001a}.fm-card[data-v-0e65ea06]:hover{transform:translateY(-2px);box-shadow:0 4px 6px -1px #0000001a;border-color:#cbd5e1}.is-upcoming[data-v-0e65ea06]{opacity:.7}.fm-card-body[data-v-0e65ea06]{display:flex;gap:16px;padding:18px;flex:1}.fm-icon[data-v-0e65ea06]{width:44px;height:44px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:16px;flex-shrink:0}.fm-content[data-v-0e65ea06]{flex:1}.fm-title[data-v-0e65ea06]{display:flex;align-items:center;gap:8px;font-weight:600;margin-bottom:6px;font-size:16px;color:#1f2937}.fm-badge[data-v-0e65ea06]{font-size:11px;background:#f2f3f7;border:1px solid #e1e4ef;border-radius:999px;padding:3px 8px;color:#6b7280;font-weight:500}.fm-desc[data-v-0e65ea06]{margin:0;color:#606776;font-size:13px;line-height:1.4}.fm-card-footer[data-v-0e65ea06]{margin-top:auto;display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-top:1px solid #eef1f6;height:60px}.fm-toggle[data-v-0e65ea06]{display:flex;align-items:center;gap:10px}.toggle-label[data-v-0e65ea06]{font-size:12px;color:#555;font-weight:500}.switch[data-v-0e65ea06]{position:relative;display:inline-block;width:38px;height:22px}.switch input[data-v-0e65ea06]{opacity:0;width:0;height:0}.slider[data-v-0e65ea06]{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:#d1d5db;transition:.2s;border-radius:999px}.slider[data-v-0e65ea06]:before{position:absolute;content:"";height:16px;width:16px;left:3px;bottom:3px;background-color:#fff;transition:.2s;border-radius:50%}.switch input:checked+.slider[data-v-0e65ea06]{background-color:#5163f1}.switch input:checked+.slider[data-v-0e65ea06]:before{transform:translate(16px)}.switch input:disabled+.slider[data-v-0e65ea06]{background-color:#e5e7eb;cursor:not-allowed}.fm-settings[data-v-0e65ea06]{border:none;background:#f5f7ff;border:1px solid #e0e6ff;color:#4654e1;border-radius:8px;padding:6px 8px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s}.fm-settings[data-v-0e65ea06]:hover:not(:disabled){background:#eef2ff;border-color:#c7d2fe}.fm-settings[data-v-0e65ea06]:disabled{opacity:.4;cursor:not-allowed}.fm-btn[data-v-0e65ea06]{padding:6px 12px;border-radius:20px;border:1px solid;cursor:pointer;font-size:12px;font-weight:500;text-decoration:none;display:inline-flex;align-items:center;gap:4px;transition:all .2s;text-transform:uppercase;letter-spacing:.5px}.fm-btn-secondary[data-v-0e65ea06]{border-color:#e5e7eb;color:#374151;background:#f9fafb}.fm-btn-secondary[data-v-0e65ea06]:hover{background:#f3f4f6;border-color:#d1d5db}.fm-btn-primary[data-v-0e65ea06]{background:#5163f1;border-color:#5163f1;color:#fff}.fm-btn-primary[data-v-0e65ea06]:hover{background:#4338ca;border-color:#4338ca}.fm-btn[data-v-0e65ea06]:disabled,.fm-btn.loading[data-v-0e65ea06]{opacity:.7;cursor:not-allowed}.fm-btn.loading[data-v-0e65ea06]:hover{border-color:inherit}.api-status-badge[data-v-0e65ea06]{font-size:10px;padding:2px 6px;border-radius:8px;font-weight:500;text-transform:uppercase;letter-spacing:.3px}.api-status-badge.connected[data-v-0e65ea06]{background:#d1fae5;color:#065f46;border:1px solid #6ee7b7}.api-status-badge.disconnected[data-v-0e65ea06]{background:#fee2e2;color:#991b1b;border:1px solid #fca5a5}.modal-enter-active[data-v-11a4259f],.modal-leave-active[data-v-11a4259f]{transition:all .3s ease}.modal-enter-from[data-v-11a4259f],.modal-leave-to[data-v-11a4259f]{opacity:0}.modal-enter-to[data-v-11a4259f],.modal-leave-from[data-v-11a4259f]{opacity:1}.backdrop-enter-active[data-v-11a4259f],.backdrop-leave-active[data-v-11a4259f]{transition:opacity .3s ease}.backdrop-enter-from[data-v-11a4259f],.backdrop-leave-to[data-v-11a4259f]{opacity:0}.backdrop-enter-to[data-v-11a4259f],.backdrop-leave-from[data-v-11a4259f]{opacity:1}.modal-content-enter-active[data-v-11a4259f],.modal-content-leave-active[data-v-11a4259f]{transition:all .3s cubic-bezier(.34,1.56,.64,1)}.modal-content-enter-from[data-v-11a4259f],.modal-content-leave-to[data-v-11a4259f]{opacity:0;transform:scale(.7) translateY(-50px)}.modal-content-enter-to[data-v-11a4259f],.modal-content-leave-from[data-v-11a4259f]{opacity:1;transform:scale(1) translateY(0)}@keyframes slide-in-4e197091{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}.animate-slide-in[data-v-4e197091]{animation:slide-in-4e197091 .3s ease-out}.slide-down-enter-active[data-v-783cff80]{animation:slide-down-783cff80 .2s}.slide-down-leave-active[data-v-783cff80]{animation:slide-down-783cff80 .3s reverse}@keyframes slide-down-783cff80{0%{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}#wpcontent[data-v-271e75d7]{padding-left:0!important}.fm-btn[data-v-271e75d7]{padding:8px 16px;border-radius:20px;border:1px solid;cursor:pointer;font-size:14px;font-weight:500;text-decoration:none;display:inline-flex;align-items:center;gap:6px;transition:all .2s;background:#e8e8e8}.fm-btn-secondary[data-v-271e75d7]{border-color:#e5e7eb;color:#374151}.fm-btn-secondary[data-v-271e75d7]:hover{background:#f9fafb;border-color:#d1d5db}.fm-integrations[data-v-b0268364]{display:grid;grid-template-columns:260px 1fr;gap:24px;min-height:100vh;background:#f6f7fb;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}.fm-sidebar[data-v-b0268364]{background:#fff;border:1px solid #e6e8ef;border-radius:8px;padding:16px;height:100vh;position:sticky;top:0;overflow-y:auto}.fm-sidebar-title[data-v-b0268364]{font-weight:600;margin-bottom:12px;color:#1f2937;font-size:16px}.fm-category-list[data-v-b0268364]{list-style:none;margin:0;padding:0}.fm-category-item[data-v-b0268364]{margin:0 0 4px}.fm-category-btn[data-v-b0268364]{display:flex;justify-content:space-between;align-items:center;width:100%;text-align:left;padding:10px 12px;border-radius:3px;border:1px solid transparent;background:transparent;cursor:pointer;color:#374151;font-size:14px;transition:all .2s}.fm-category-item.active .fm-category-btn[data-v-b0268364],.fm-category-btn[data-v-b0268364]:hover{color:#f2f5ff;border-color:#5163f1;background-color:#5163f1}.fm-content-area[data-v-b0268364]{padding:24px;display:flex;flex-direction:column}.fm-header[data-v-b0268364]{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:24px}.fm-header-content[data-v-b0268364]{flex:1}.fm-main-title[data-v-b0268364]{font-size:28px;font-weight:600;color:#1f2937;margin:0 0 8px}.fm-subtitle[data-v-b0268364]{color:#6b7280;font-size:16px;margin:0}.fm-header-actions[data-v-b0268364]{display:flex;gap:12px;align-items:center}.fm-btn[data-v-b0268364]{padding:8px 16px;border-radius:20px;border:1px solid;cursor:pointer;font-size:14px;font-weight:500;text-decoration:none;display:inline-flex;align-items:center;gap:6px;transition:all .2s;background:#e8e8e8}.fm-btn-secondary[data-v-b0268364]{border-color:#e5e7eb;color:#374151}.fm-btn-secondary[data-v-b0268364]:hover{background:#f9fafb;border-color:#d1d5db}.fm-btn-primary[data-v-b0268364]{background:#5163f1;border-color:#5163f1;color:#fff}.fm-btn-primary[data-v-b0268364]:hover{background:#4338ca;border-color:#4338ca}.fm-toolbar[data-v-b0268364]{display:flex;justify-content:flex-end;align-items:center;margin-bottom:24px}.fm-search[data-v-b0268364]{background:#fff;border:1px solid #e6e8ef;border-radius:3px;display:flex;gap:8px;align-items:center;min-width:300px;position:relative}.fm-search svg[data-v-b0268364]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9ca3af}.fm-search-input[data-v-b0268364]{border:none;outline:none;flex:1;font-size:14px;color:#374151;padding:8px 12px 8px 40px}.fm-search-input[data-v-b0268364]::placeholder{color:#9ca3af}@media (max-width: 1024px){.fm-integrations[data-v-b0268364]{grid-template-columns:1fr;gap:16px}.fm-sidebar[data-v-b0268364]{position:static;height:auto;margin-bottom:16px;padding:12px}.fm-content-area[data-v-b0268364]{padding:16px}.fm-header[data-v-b0268364]{flex-direction:column;gap:16px;align-items:stretch}.fm-header-actions[data-v-b0268364]{justify-content:flex-start;flex-wrap:wrap}.fm-search[data-v-b0268364]{min-width:auto;width:100%}.fm-toolbar[data-v-b0268364]{justify-content:stretch}}@media (max-width: 768px){.fm-integrations[data-v-b0268364]{min-height:auto;gap:12px}.fm-sidebar[data-v-b0268364]{padding:8px}.fm-content-area[data-v-b0268364]{padding:12px}.fm-header[data-v-b0268364]{margin-bottom:16px}.fm-main-title[data-v-b0268364]{font-size:22px}.fm-subtitle[data-v-b0268364]{font-size:14px}.fm-header-actions[data-v-b0268364]{flex-direction:column;gap:8px;align-items:stretch}.fm-btn[data-v-b0268364]{justify-content:center;width:100%}.fm-category-list[data-v-b0268364]{display:flex;gap:6px;overflow-x:auto;padding-bottom:8px;scrollbar-width:thin}.fm-category-list[data-v-b0268364]::-webkit-scrollbar{height:4px}.fm-category-list[data-v-b0268364]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:2px}.fm-category-list[data-v-b0268364]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:2px}.fm-category-btn[data-v-b0268364]{white-space:nowrap;min-width:max-content;font-size:13px;padding:8px 12px}.fm-sidebar-title[data-v-b0268364]{font-size:14px;margin-bottom:8px}.fm-toolbar[data-v-b0268364]{margin-bottom:16px}.fm-search[data-v-b0268364]{min-width:280px;padding:8px 12px}.fm-search-input[data-v-b0268364]{font-size:14px}}@media (max-width: 480px){.fm-content-area[data-v-b0268364]{padding:8px}.fm-header[data-v-b0268364]{margin-bottom:12px}.fm-main-title[data-v-b0268364]{font-size:20px}.fm-subtitle[data-v-b0268364]{font-size:13px}.fm-btn[data-v-b0268364]{font-size:13px;padding:8px 12px}.fm-search[data-v-b0268364]{min-width:240px;padding:6px 10px}.fm-toolbar[data-v-b0268364]{margin-bottom:12px}.fm-category-btn[data-v-b0268364]{font-size:12px;padding:6px 10px}}.cm-editor .cm-selectionBackground,.cm-editor.cm-focused .cm-selectionBackground{background-color:#3b82f6!important}.cm-editor .cm-selection{background-color:#3b82f6!important;color:#fff!important}.cm-editor .cm-content ::selection{background-color:#3b82f6!important;color:#fff!important}.cm-editor .cm-content ::-moz-selection{background-color:#3b82f6!important;color:#fff!important}nav a[data-v-53cf7338]:focus,nav a[data-v-53cf7338]:focus-visible{outline:none!important;box-shadow:none!important;border-color:transparent!important}.fm-header-actions[data-v-53cf7338]{display:flex;gap:12px;align-items:center}.fm-btn[data-v-53cf7338]{padding:8px 16px;border-radius:20px;border:1px solid;cursor:pointer;font-size:14px;font-weight:500;text-decoration:none;display:inline-flex;align-items:center;gap:6px;transition:all .2s;background:#e8e8e8}.fm-btn-secondary[data-v-53cf7338]{border-color:#e5e7eb;color:#374151}.fm-btn-secondary[data-v-53cf7338]:hover{background:#f9fafb;border-color:#d1d5db}.fade-enter-active[data-v-53cf7338],.fade-leave-active[data-v-53cf7338]{transition:opacity .3s ease}.fade-enter-from[data-v-53cf7338],.fade-leave-to[data-v-53cf7338]{opacity:0}.slide-enter-active[data-v-53cf7338],.slide-leave-active[data-v-53cf7338]{transition:transform .3s ease}.slide-enter-from[data-v-53cf7338],.slide-leave-to[data-v-53cf7338]{transform:translate(-100%)}.w-phone[data-v-ebfeb423]{width:260px;transition:width .2s}@media screen and (max-width: 768px){.w-phone[data-v-ebfeb423]{width:100%}}.w-desktop[data-v-ebfeb423]{width:100%;transition:width .2s}.whatsapp-btn[data-v-52ca86bc]:hover{background-color:var(--hover-bg)!important;color:var(--hover-text)!important}.slide-fade-enter-active[data-v-4d4f3085]{transition:all .3s ease-out}.slide-fade-leave-active[data-v-4d4f3085]{transition:all .2s cubic-bezier(1,.5,.8,1)}.slide-fade-enter-from[data-v-4d4f3085],.slide-fade-leave-to[data-v-4d4f3085]{transform:translateY(-10px);opacity:0}.bounce-enter-active[data-v-4d4f3085]{animation:bounce-in-4d4f3085 .5s}@keyframes bounce-in-4d4f3085{0%{transform:scale(0)}50%{transform:scale(1.2)}to{transform:scale(1)}}.whatsapp-btn[data-v-c8bb3ab6]:hover{background-color:var(--hover-bg)!important;color:var(--hover-text)!important}.slide-fade-enter-active[data-v-0d666c8c]{transition:all .3s ease-out}.slide-fade-leave-active[data-v-0d666c8c]{transition:all .2s cubic-bezier(1,.5,.8,1)}.slide-fade-enter-from[data-v-0d666c8c],.slide-fade-leave-to[data-v-0d666c8c]{transform:translateY(-10px);opacity:0}.bounce-enter-active[data-v-0d666c8c]{animation:bounce-in-0d666c8c .5s}@keyframes bounce-in-0d666c8c{0%{transform:scale(0)}50%{transform:scale(1.2)}to{transform:scale(1)}}
/*$vite$:1*/`,document.head.appendChild(Ig);/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Rg(s,e){const t=new Set(s.split(","));return n=>t.has(n)}const Bt={},jo=[],yn=()=>{},c4=()=>!1,zh=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),Fg=s=>s.startsWith("onUpdate:"),Ls=Object.assign,jh=(s,e)=>{const t=s.indexOf(e);t>-1&&s.splice(t,1)},u4=Object.prototype.hasOwnProperty,yt=(s,e)=>u4.call(s,e),tt=Array.isArray,Wo=s=>Cc(s)==="[object Map]",Bg=s=>Cc(s)==="[object Set]",nt=s=>typeof s=="function",fs=s=>typeof s=="string",no=s=>typeof s=="symbol",Ht=s=>s!==null&&typeof s=="object",Ng=s=>(Ht(s)||nt(s))&&nt(s.then)&&nt(s.catch),Vg=Object.prototype.toString,Cc=s=>Vg.call(s),d4=s=>Cc(s).slice(8,-1),zg=s=>Cc(s)==="[object Object]",Wh=s=>fs(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,Ra=Rg(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Oc=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},h4=/-(\w)/g,Zn=Oc(s=>s.replace(h4,(e,t)=>t?t.toUpperCase():"")),f4=/\B([A-Z])/g,Mc=Oc(s=>s.replace(f4,"-$1").toLowerCase()),Uh=Oc(s=>s.charAt(0).toUpperCase()+s.slice(1)),Hh=Oc(s=>s?`on${Uh(s)}`:""),pr=(s,e)=>!Object.is(s,e),Qh=(s,e)=>{for(let t=0;t<s.length;t++)s[t](e)},jg=(s,e,t,n=!1)=>{Object.defineProperty(s,e,{configurable:!0,enumerable:!1,writable:n,value:t})},p4=s=>{const e=parseFloat(s);return isNaN(e)?s:e};let Wg;const Ug=()=>Wg||(Wg=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function et(s){if(tt(s)){const e={};for(let t=0;t<s.length;t++){const n=s[t],i=fs(n)?y4(n):et(n);if(i)for(const r in i)e[r]=i[r]}return e}else if(fs(s)||Ht(s))return s}const m4=/;(?![^(]*\))/g,g4=/:([^]+)/,v4=/\/\*[^]*?\*\//g;function y4(s){const e={};return s.replace(v4,"").split(m4).forEach(t=>{if(t){const n=t.split(g4);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function X(s){let e="";if(fs(s))e=s;else if(tt(s))for(let t=0;t<s.length;t++){const n=X(s[t]);n&&(e+=n+" ")}else if(Ht(s))for(const t in s)s[t]&&(e+=t+" ");return e.trim()}const q=s=>fs(s)?s:s==null?"":tt(s)||Ht(s)&&(s.toString===Vg||!nt(s.toString))?JSON.stringify(s,Hg,2):String(s),Hg=(s,e)=>e&&e.__v_isRef?Hg(s,e.value):Wo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,i],r)=>(t[Yh(n,r)+" =>"]=i,t),{})}:Bg(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Yh(t))}:no(e)?Yh(e):Ht(e)&&!tt(e)&&!zg(e)?String(e):e,Yh=(s,e="")=>{var t;return no(s)?`Symbol(${(t=s.description)!=null?t:e})`:s};/**
* @vue/reactivity v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let rn;class Qg{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=rn,!e&&rn&&(this.index=(rn.scopes||(rn.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=rn;try{return rn=this,e()}finally{rn=t}}}on(){rn=this}off(){rn=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function Yg(s){return new Qg(s)}function _4(s,e=rn){e&&e.active&&e.effects.push(s)}function qg(){return rn}function b4(s){rn&&rn.cleanups.push(s)}let io;class qh{constructor(e,t,n,i){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,_4(this,i)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Ii();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(w4(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Ri()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=mr,t=io;try{return mr=!0,io=this,this._runnings++,Gg(this),this.fn()}finally{Kg(this),this._runnings--,io=t,mr=e}}stop(){this.active&&(Gg(this),Kg(this),this.onStop&&this.onStop(),this.active=!1)}}function w4(s){return s.value}function Gg(s){s._trackId++,s._depsLength=0}function Kg(s){if(s.deps.length>s._depsLength){for(let e=s._depsLength;e<s.deps.length;e++)Xg(s.deps[e],s);s.deps.length=s._depsLength}}function Xg(s,e){const t=s.get(e);t!==void 0&&e._trackId!==t&&(s.delete(e),s.size===0&&s.cleanup())}let mr=!0,Gh=0;const Jg=[];function Ii(){Jg.push(mr),mr=!1}function Ri(){const s=Jg.pop();mr=s===void 0?!0:s}function Kh(){Gh++}function Xh(){for(Gh--;!Gh&&Jh.length;)Jh.shift()()}function Zg(s,e,t){if(e.get(s)!==s._trackId){e.set(s,s._trackId);const n=s.deps[s._depsLength];n!==e?(n&&Xg(n,s),s.deps[s._depsLength++]=e):s._depsLength++}}const Jh=[];function e1(s,e,t){Kh();for(const n of s.keys()){let i;n._dirtyLevel<e&&(i??(i=s.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(i??(i=s.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&Jh.push(n.scheduler)))}Xh()}const t1=(s,e)=>{const t=new Map;return t.cleanup=s,t.computed=e,t},Ac=new WeakMap,ro=Symbol(""),Zh=Symbol("");function qs(s,e,t){if(mr&&io){let n=Ac.get(s);n||Ac.set(s,n=new Map);let i=n.get(t);i||n.set(t,i=t1(()=>n.delete(t))),Zg(io,i)}}function Fi(s,e,t,n,i,r){const o=Ac.get(s);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&tt(s)){const l=Number(n);o.forEach((c,u)=>{(u==="length"||!no(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":tt(s)?Wh(t)&&a.push(o.get("length")):(a.push(o.get(ro)),Wo(s)&&a.push(o.get(Zh)));break;case"delete":tt(s)||(a.push(o.get(ro)),Wo(s)&&a.push(o.get(Zh)));break;case"set":Wo(s)&&a.push(o.get(ro));break}Kh();for(const l of a)l&&e1(l,4);Xh()}function x4(s,e){const t=Ac.get(s);return t&&t.get(e)}const k4=Rg("__proto__,__v_isRef,__isVue"),s1=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(no)),n1=S4();function S4(){const s={};return["includes","indexOf","lastIndexOf"].forEach(e=>{s[e]=function(...t){const n=ht(this);for(let r=0,o=this.length;r<o;r++)qs(n,"get",r+"");const i=n[e](...t);return i===-1||i===!1?n[e](...t.map(ht)):i}}),["push","pop","shift","unshift","splice"].forEach(e=>{s[e]=function(...t){Ii(),Kh();const n=ht(this)[e].apply(this,t);return Xh(),Ri(),n}}),s}function C4(s){no(s)||(s=String(s));const e=ht(this);return qs(e,"has",s),e.hasOwnProperty(s)}class i1{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const i=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!i;if(t==="__v_isReadonly")return i;if(t==="__v_isShallow")return r;if(t==="__v_raw")return n===(i?r?p1:f1:r?h1:d1).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=tt(e);if(!i){if(o&&yt(n1,t))return Reflect.get(n1,t,n);if(t==="hasOwnProperty")return C4}const a=Reflect.get(e,t,n);return(no(t)?s1.has(t):k4(t))||(i||qs(e,"get",t),r)?a:is(a)?o&&Wh(t)?a:a.value:Ht(a)?i?g1(a):Es(a):a}}class r1 extends i1{constructor(e=!1){super(!1,e)}set(e,t,n,i){let r=e[t];if(!this._isShallow){const l=Fa(r);if(!Fc(n)&&!Fa(n)&&(r=ht(r),n=ht(n)),!tt(e)&&is(r)&&!is(n))return l?!1:(r.value=n,!0)}const o=tt(e)&&Wh(t)?Number(t)<e.length:yt(e,t),a=Reflect.set(e,t,n,i);return e===ht(i)&&(o?pr(n,r)&&Fi(e,"set",t,n):Fi(e,"add",t,n)),a}deleteProperty(e,t){const n=yt(e,t);e[t];const i=Reflect.deleteProperty(e,t);return i&&n&&Fi(e,"delete",t,void 0),i}has(e,t){const n=Reflect.has(e,t);return(!no(t)||!s1.has(t))&&qs(e,"has",t),n}ownKeys(e){return qs(e,"iterate",tt(e)?"length":ro),Reflect.ownKeys(e)}}class o1 extends i1{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const O4=new r1,M4=new o1,A4=new r1(!0),$4=new o1(!0),ef=s=>s,$c=s=>Reflect.getPrototypeOf(s);function Tc(s,e,t=!1,n=!1){s=s.__v_raw;const i=ht(s),r=ht(e);t||(pr(e,r)&&qs(i,"get",e),qs(i,"get",r));const{has:o}=$c(i),a=n?ef:t?sf:Ba;if(o.call(i,e))return a(s.get(e));if(o.call(i,r))return a(s.get(r));s!==i&&s.get(e)}function Pc(s,e=!1){const t=this.__v_raw,n=ht(t),i=ht(s);return e||(pr(s,i)&&qs(n,"has",s),qs(n,"has",i)),s===i?t.has(s):t.has(s)||t.has(i)}function Lc(s,e=!1){return s=s.__v_raw,!e&&qs(ht(s),"iterate",ro),Reflect.get(s,"size",s)}function a1(s){s=ht(s);const e=ht(this);return $c(e).has.call(e,s)||(e.add(s),Fi(e,"add",s,s)),this}function l1(s,e){e=ht(e);const t=ht(this),{has:n,get:i}=$c(t);let r=n.call(t,s);r||(s=ht(s),r=n.call(t,s));const o=i.call(t,s);return t.set(s,e),r?pr(e,o)&&Fi(t,"set",s,e):Fi(t,"add",s,e),this}function c1(s){const e=ht(this),{has:t,get:n}=$c(e);let i=t.call(e,s);i||(s=ht(s),i=t.call(e,s)),n&&n.call(e,s);const r=e.delete(s);return i&&Fi(e,"delete",s,void 0),r}function u1(){const s=ht(this),e=s.size!==0,t=s.clear();return e&&Fi(s,"clear",void 0,void 0),t}function Ec(s,e){return function(n,i){const r=this,o=r.__v_raw,a=ht(o),l=e?ef:s?sf:Ba;return!s&&qs(a,"iterate",ro),o.forEach((c,u)=>n.call(i,l(c),l(u),r))}}function Dc(s,e,t){return function(...n){const i=this.__v_raw,r=ht(i),o=Wo(r),a=s==="entries"||s===Symbol.iterator&&o,l=s==="keys"&&o,c=i[s](...n),u=t?ef:e?sf:Ba;return!e&&qs(r,"iterate",l?Zh:ro),{next(){const{value:d,done:f}=c.next();return f?{value:d,done:f}:{value:a?[u(d[0]),u(d[1])]:u(d),done:f}},[Symbol.iterator](){return this}}}}function gr(s){return function(...e){return s==="delete"?!1:s==="clear"?void 0:this}}function T4(){const s={get(r){return Tc(this,r)},get size(){return Lc(this)},has:Pc,add:a1,set:l1,delete:c1,clear:u1,forEach:Ec(!1,!1)},e={get(r){return Tc(this,r,!1,!0)},get size(){return Lc(this)},has:Pc,add:a1,set:l1,delete:c1,clear:u1,forEach:Ec(!1,!0)},t={get(r){return Tc(this,r,!0)},get size(){return Lc(this,!0)},has(r){return Pc.call(this,r,!0)},add:gr("add"),set:gr("set"),delete:gr("delete"),clear:gr("clear"),forEach:Ec(!0,!1)},n={get(r){return Tc(this,r,!0,!0)},get size(){return Lc(this,!0)},has(r){return Pc.call(this,r,!0)},add:gr("add"),set:gr("set"),delete:gr("delete"),clear:gr("clear"),forEach:Ec(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Dc(r,!1,!1),t[r]=Dc(r,!0,!1),e[r]=Dc(r,!1,!0),n[r]=Dc(r,!0,!0)}),[s,t,e,n]}const[P4,L4,E4,D4]=T4();function Ic(s,e){const t=e?s?D4:E4:s?L4:P4;return(n,i,r)=>i==="__v_isReactive"?!s:i==="__v_isReadonly"?s:i==="__v_raw"?n:Reflect.get(yt(t,i)&&i in n?t:n,i,r)}const I4={get:Ic(!1,!1)},R4={get:Ic(!1,!0)},F4={get:Ic(!0,!1)},B4={get:Ic(!0,!0)},d1=new WeakMap,h1=new WeakMap,f1=new WeakMap,p1=new WeakMap;function N4(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function V4(s){return s.__v_skip||!Object.isExtensible(s)?0:N4(d4(s))}function Es(s){return Fa(s)?s:Rc(s,!1,O4,I4,d1)}function m1(s){return Rc(s,!1,A4,R4,h1)}function g1(s){return Rc(s,!0,M4,F4,f1)}function pse(s){return Rc(s,!0,$4,B4,p1)}function Rc(s,e,t,n,i){if(!Ht(s)||s.__v_raw&&!(e&&s.__v_isReactive))return s;const r=i.get(s);if(r)return r;const o=V4(s);if(o===0)return s;const a=new Proxy(s,o===2?n:t);return i.set(s,a),a}function oo(s){return Fa(s)?oo(s.__v_raw):!!(s&&s.__v_isReactive)}function Fa(s){return!!(s&&s.__v_isReadonly)}function Fc(s){return!!(s&&s.__v_isShallow)}function v1(s){return s?!!s.__v_raw:!1}function ht(s){const e=s&&s.__v_raw;return e?ht(e):s}function tf(s){return Object.isExtensible(s)&&jg(s,"__v_skip",!0),s}const Ba=s=>Ht(s)?Es(s):s,sf=s=>Ht(s)?g1(s):s;class y1{constructor(e,t,n,i){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new qh(()=>e(this._value),()=>Bc(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const e=ht(this);return(!e._cacheable||e.effect.dirty)&&pr(e._value,e._value=e.effect.run())&&Bc(e,4),_1(e),e.effect._dirtyLevel>=2&&Bc(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function z4(s,e,t=!1){let n,i;const r=nt(s);return r?(n=s,i=yn):(n=s.get,i=s.set),new y1(n,i,r||!i,t)}function _1(s){var e;mr&&io&&(s=ht(s),Zg(io,(e=s.dep)!=null?e:s.dep=t1(()=>s.dep=void 0,s instanceof y1?s:void 0)))}function Bc(s,e=4,t){s=ht(s);const n=s.dep;n&&e1(n,e)}function is(s){return!!(s&&s.__v_isRef===!0)}function pe(s){return b1(s,!1)}function j4(s){return b1(s,!0)}function b1(s,e){return is(s)?s:new W4(s,e)}class W4{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:ht(e),this._value=t?e:Ba(e)}get value(){return _1(this),this._value}set value(e){const t=this.__v_isShallow||Fc(e)||Fa(e);e=t?e:ht(e),pr(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:Ba(e),Bc(this,4))}}function m(s){return is(s)?s.value:s}const U4={get:(s,e,t)=>m(Reflect.get(s,e,t)),set:(s,e,t,n)=>{const i=s[e];return is(i)&&!is(t)?(i.value=t,!0):Reflect.set(s,e,t,n)}};function w1(s){return oo(s)?s:new Proxy(s,U4)}function x1(s){const e=tt(s)?new Array(s.length):{};for(const t in s)e[t]=Q4(s,t);return e}class H4{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return x4(ht(this._object),this._key)}}function Q4(s,e,t){const n=s[e];return is(n)?n:new H4(s,e,t)}/**
* @vue/runtime-core v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const Na=[];function mse(s,...e){Ii();const t=Na.length?Na[Na.length-1].component:null,n=t&&t.appContext.config.warnHandler,i=Y4();if(n)Bi(n,t,11,[s+e.map(r=>{var o,a;return(a=(o=r.toString)==null?void 0:o.call(r))!=null?a:JSON.stringify(r)}).join(""),t&&t.proxy,i.map(({vnode:r})=>`at <${xv(t,r.type)}>`).join(`
`),i]);else{const r=[`[Vue warn]: ${s}`,...e];i.length&&r.push(`
`,...q4(i)),console.warn(...r)}Ri()}function Y4(){let s=Na[Na.length-1];if(!s)return[];const e=[];for(;s;){const t=e[0];t&&t.vnode===s?t.recurseCount++:e.push({vnode:s,recurseCount:0});const n=s.component&&s.component.parent;s=n&&n.vnode}return e}function q4(s){const e=[];return s.forEach((t,n)=>{e.push(...n===0?[]:[`
`],...G4(t))}),e}function G4({vnode:s,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",n=s.component?s.component.parent==null:!1,i=` at <${xv(s.component,s.type,n)}`,r=">"+t;return s.props?[i,...K4(s.props),r]:[i+r]}function K4(s){const e=[],t=Object.keys(s);return t.slice(0,3).forEach(n=>{e.push(...k1(n,s[n]))}),t.length>3&&e.push(" ..."),e}function k1(s,e,t){return fs(e)?(e=JSON.stringify(e),t?e:[`${s}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${s}=${e}`]:is(e)?(e=k1(s,ht(e.value),!0),t?e:[`${s}=Ref<`,e,">"]):nt(e)?[`${s}=fn${e.name?`<${e.name}>`:""}`]:(e=ht(e),t?e:[`${s}=`,e])}function Bi(s,e,t,n){try{return n?s(...n):s()}catch(i){Nc(i,e,t)}}function _n(s,e,t,n){if(nt(s)){const i=Bi(s,e,t,n);return i&&Ng(i)&&i.catch(r=>{Nc(r,e,t)}),i}if(tt(s)){const i=[];for(let r=0;r<s.length;r++)i.push(_n(s[r],e,t,n));return i}}function Nc(s,e,t,n=!0){const i=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;r;){const c=r.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](s,o,a)===!1)return}r=r.parent}const l=e.appContext.config.errorHandler;if(l){Ii(),Bi(l,null,10,[s,o,a]),Ri();return}}X4(s,t,i,n)}function X4(s,e,t,n=!0){console.error(s)}let Va=!1,nf=!1;const Ss=[];let ei=0;const Uo=[];let vr=null,ao=0;const S1=Promise.resolve();let rf=null;function za(s){const e=rf||S1;return s?e.then(this?s.bind(this):s):e}function J4(s){let e=ei+1,t=Ss.length;for(;e<t;){const n=e+t>>>1,i=Ss[n],r=ja(i);r<s||r===s&&i.pre?e=n+1:t=n}return e}function of(s){(!Ss.length||!Ss.includes(s,Va&&s.allowRecurse?ei+1:ei))&&(s.id==null?Ss.push(s):Ss.splice(J4(s.id),0,s),C1())}function C1(){!Va&&!nf&&(nf=!0,rf=S1.then(A1))}function Z4(s){const e=Ss.indexOf(s);e>ei&&Ss.splice(e,1)}function e3(s){tt(s)?Uo.push(...s):(!vr||!vr.includes(s,s.allowRecurse?ao+1:ao))&&Uo.push(s),C1()}function O1(s,e,t=Va?ei+1:0){for(;t<Ss.length;t++){const n=Ss[t];if(n&&n.pre){if(s&&n.id!==s.uid)continue;Ss.splice(t,1),t--,n()}}}function M1(s){if(Uo.length){const e=[...new Set(Uo)].sort((t,n)=>ja(t)-ja(n));if(Uo.length=0,vr){vr.push(...e);return}for(vr=e,ao=0;ao<vr.length;ao++)vr[ao]();vr=null,ao=0}}const ja=s=>s.id==null?1/0:s.id,t3=(s,e)=>{const t=ja(s)-ja(e);if(t===0){if(s.pre&&!e.pre)return-1;if(e.pre&&!s.pre)return 1}return t};function A1(s){nf=!1,Va=!0,Ss.sort(t3);try{for(ei=0;ei<Ss.length;ei++){const e=Ss[ei];e&&e.active!==!1&&Bi(e,null,14)}}finally{ei=0,Ss.length=0,M1(),Va=!1,rf=null,(Ss.length||Uo.length)&&A1()}}function s3(s,e,...t){if(s.isUnmounted)return;const n=s.vnode.props||Bt;let i=t;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in n){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=n[u]||Bt;f&&(i=t.map(p=>fs(p)?p.trim():p)),d&&(i=t.map(p4))}let a,l=n[a=Hh(e)]||n[a=Hh(Zn(e))];!l&&r&&(l=n[a=Hh(Mc(e))]),l&&_n(l,s,6,i);const c=n[a+"Once"];if(c){if(!s.emitted)s.emitted={};else if(s.emitted[a])return;s.emitted[a]=!0,_n(c,s,6,i)}}function $1(s,e,t=!1){const n=e.emitsCache,i=n.get(s);if(i!==void 0)return i;const r=s.emits;let o={},a=!1;if(!nt(s)){const l=c=>{const u=$1(c,e,!0);u&&(a=!0,Ls(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),s.extends&&l(s.extends),s.mixins&&s.mixins.forEach(l)}return!r&&!a?(Ht(s)&&n.set(s,null),null):(tt(r)?r.forEach(l=>o[l]=null):Ls(o,r),Ht(s)&&n.set(s,o),o)}function Vc(s,e){return!s||!zh(e)?!1:(e=e.slice(2).replace(/Once$/,""),yt(s,e[0].toLowerCase()+e.slice(1))||yt(s,Mc(e))||yt(s,e))}let rs=null,zc=null;function jc(s){const e=rs;return rs=s,zc=s&&s.type.__scopeId||null,e}function Ds(s){zc=s}function Is(){zc=null}function P(s,e=rs,t){if(!e||s._n)return s;const n=(...i)=>{n._d&&pv(-1);const r=jc(e);let o;try{o=s(...i)}finally{jc(r),n._d&&pv(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function gse(){}function T1(s){const{type:e,vnode:t,proxy:n,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:f,setupState:p,ctx:g,inheritAttrs:S}=s,k=jc(s);let O,$;try{if(t.shapeFlag&4){const b=i||n,w=b;O=si(c.call(w,b,u,d,p,f,g)),$=a}else{const b=e;O=si(b.length>1?b(d,{attrs:a,slots:o,emit:l}):b(d,null)),$=e.props?a:n3(a)}}catch(b){qa.length=0,Nc(b,s,1),O=y(an)}let M=O;if($&&S!==!1){const b=Object.keys($),{shapeFlag:w}=M;b.length&&w&7&&(r&&b.some(Fg)&&($=i3($,r)),M=_r(M,$,!1,!0))}return t.dirs&&(M=_r(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(t.dirs):t.dirs),t.transition&&(M.transition=t.transition),O=M,jc(k),O}const n3=s=>{let e;for(const t in s)(t==="class"||t==="style"||zh(t))&&((e||(e={}))[t]=s[t]);return e},i3=(s,e)=>{const t={};for(const n in s)(!Fg(n)||!(n.slice(9)in e))&&(t[n]=s[n]);return t};function r3(s,e,t){const{props:n,children:i,component:r}=s,{props:o,children:a,patchFlag:l}=e,c=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?P1(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const f=u[d];if(o[f]!==n[f]&&!Vc(c,f))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?P1(n,o,c):!0:!!o;return!1}function P1(s,e,t){const n=Object.keys(e);if(n.length!==Object.keys(s).length)return!0;for(let i=0;i<n.length;i++){const r=n[i];if(e[r]!==s[r]&&!Vc(t,r))return!0}return!1}function o3({vnode:s,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===s&&(n.el=s.el),n===s)(s=e.vnode).el=t,e=e.parent;else break}}const L1="components";function on(s,e){return D1(L1,s,!0,e)||s}const E1=Symbol.for("v-ndc");function Wa(s){return fs(s)?D1(L1,s,!1)||s:s||E1}function D1(s,e,t=!0,n=!1){const i=rs||ps;if(i){const r=i.type;{const a=wv(r,!1);if(a&&(a===e||a===Zn(e)||a===Uh(Zn(e))))return r}const o=I1(i[s]||r[s],e)||I1(i.appContext[s],e);return!o&&n?r:o}}function I1(s,e){return s&&(s[e]||s[Zn(e)]||s[Uh(Zn(e))])}const a3=s=>s.__isSuspense;function l3(s,e){e&&e.pendingBranch?tt(s)?e.effects.push(...s):e.effects.push(s):e3(s)}const c3=Symbol.for("v-scx"),u3=()=>wn(c3),Wc={};function Jt(s,e,t){return R1(s,e,t)}function R1(s,e,{immediate:t,deep:n,flush:i,once:r,onTrack:o,onTrigger:a}=Bt){if(e&&r){const R=e;e=(...T)=>{R(...T),w()}}const l=ps,c=R=>n===!0?R:lo(R,n===!1?1:void 0);let u,d=!1,f=!1;if(is(s)?(u=()=>s.value,d=Fc(s)):oo(s)?(u=()=>c(s),d=!0):tt(s)?(f=!0,d=s.some(R=>oo(R)||Fc(R)),u=()=>s.map(R=>{if(is(R))return R.value;if(oo(R))return c(R);if(nt(R))return Bi(R,l,2)})):nt(s)?e?u=()=>Bi(s,l,2):u=()=>(p&&p(),_n(s,l,3,[g])):u=yn,e&&n){const R=u;u=()=>lo(R())}let p,g=R=>{p=M.onStop=()=>{Bi(R,l,4),p=M.onStop=void 0}},S;if(su)if(g=yn,e?t&&_n(e,l,3,[u(),f?[]:void 0,g]):u(),i==="sync"){const R=u3();S=R.__watcherHandles||(R.__watcherHandles=[])}else return yn;let k=f?new Array(s.length).fill(Wc):Wc;const O=()=>{if(!(!M.active||!M.dirty))if(e){const R=M.run();(n||d||(f?R.some((T,E)=>pr(T,k[E])):pr(R,k)))&&(p&&p(),_n(e,l,3,[R,k===Wc?void 0:f&&k[0]===Wc?[]:k,g]),k=R)}else M.run()};O.allowRecurse=!!e;let $;i==="sync"?$=O:i==="post"?$=()=>Gs(O,l&&l.suspense):(O.pre=!0,l&&(O.id=l.uid),$=()=>of(O));const M=new qh(u,yn,$),b=qg(),w=()=>{M.stop(),b&&jh(b.effects,M)};return e?t?O():k=M.run():i==="post"?Gs(M.run.bind(M),l&&l.suspense):M.run(),S&&S.push(w),w}function d3(s,e,t){const n=this.proxy,i=fs(s)?s.includes(".")?F1(n,s):()=>n[s]:s.bind(n,n);let r;nt(e)?r=e:(r=e.handler,t=e);const o=Ka(this),a=R1(i,r.bind(n),t);return o(),a}function F1(s,e){const t=e.split(".");return()=>{let n=s;for(let i=0;i<t.length&&n;i++)n=n[t[i]];return n}}function lo(s,e=1/0,t){if(e<=0||!Ht(s)||s.__v_skip||(t=t||new Set,t.has(s)))return s;if(t.add(s),e--,is(s))lo(s.value,e,t);else if(tt(s))for(let n=0;n<s.length;n++)lo(s[n],e,t);else if(Bg(s)||Wo(s))s.forEach(n=>{lo(n,e,t)});else if(zg(s))for(const n in s)lo(s[n],e,t);return s}function xt(s,e){if(rs===null)return s;const t=nu(rs)||rs.proxy,n=s.dirs||(s.dirs=[]);for(let i=0;i<e.length;i++){let[r,o,a,l=Bt]=e[i];r&&(nt(r)&&(r={mounted:r,updated:r}),r.deep&&lo(o),n.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return s}function co(s,e,t,n){const i=s.dirs,r=e&&e.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let l=a.dir[n];l&&(Ii(),_n(l,t,8,[s.el,a,s,e]),Ri())}}const yr=Symbol("_leaveCb"),Uc=Symbol("_enterCb");function h3(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return os(()=>{s.isMounted=!0}),df(()=>{s.isUnmounting=!0}),s}const bn=[Function,Array],B1={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:bn,onEnter:bn,onAfterEnter:bn,onEnterCancelled:bn,onBeforeLeave:bn,onLeave:bn,onAfterLeave:bn,onLeaveCancelled:bn,onBeforeAppear:bn,onAppear:bn,onAfterAppear:bn,onAppearCancelled:bn},f3={name:"BaseTransition",props:B1,setup(s,{slots:e}){const t=eu(),n=h3();return()=>{const i=e.default&&z1(e.default(),!0);if(!i||!i.length)return;let r=i[0];if(i.length>1){for(const f of i)if(f.type!==an){r=f;break}}const o=ht(s),{mode:a}=o;if(n.isLeaving)return lf(r);const l=V1(r);if(!l)return lf(r);const c=af(l,o,n,t);cf(l,c);const u=t.subTree,d=u&&V1(u);if(d&&d.type!==an&&!ho(l,d)){const f=af(d,o,n,t);if(cf(d,f),a==="out-in"&&l.type!==an)return n.isLeaving=!0,f.afterLeave=()=>{n.isLeaving=!1,t.update.active!==!1&&(t.effect.dirty=!0,t.update())},lf(r);a==="in-out"&&l.type!==an&&(f.delayLeave=(p,g,S)=>{const k=N1(n,d);k[String(d.key)]=d,p[yr]=()=>{g(),p[yr]=void 0,delete c.delayedLeave},c.delayedLeave=S})}return r}}};function N1(s,e){const{leavingVNodes:t}=s;let n=t.get(e.type);return n||(n=Object.create(null),t.set(e.type,n)),n}function af(s,e,t,n){const{appear:i,mode:r,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:c,onEnterCancelled:u,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:S,onAppear:k,onAfterAppear:O,onAppearCancelled:$}=e,M=String(s.key),b=N1(t,s),w=(E,F)=>{E&&_n(E,n,9,F)},R=(E,F)=>{const K=F[1];w(E,F),tt(E)?E.every(W=>W.length<=1)&&K():E.length<=1&&K()},T={mode:r,persisted:o,beforeEnter(E){let F=a;if(!t.isMounted)if(i)F=S||a;else return;E[yr]&&E[yr](!0);const K=b[M];K&&ho(s,K)&&K.el[yr]&&K.el[yr](),w(F,[E])},enter(E){let F=l,K=c,W=u;if(!t.isMounted)if(i)F=k||l,K=O||c,W=$||u;else return;let A=!1;const D=E[Uc]=N=>{A||(A=!0,N?w(W,[E]):w(K,[E]),T.delayedLeave&&T.delayedLeave(),E[Uc]=void 0)};F?R(F,[E,D]):D()},leave(E,F){const K=String(s.key);if(E[Uc]&&E[Uc](!0),t.isUnmounting)return F();w(d,[E]);let W=!1;const A=E[yr]=D=>{W||(W=!0,F(),D?w(g,[E]):w(p,[E]),E[yr]=void 0,b[K]===s&&delete b[K])};b[K]=s,f?R(f,[E,A]):A()},clone(E){return af(E,e,t,n)}};return T}function lf(s){if(Hc(s))return s=_r(s),s.children=null,s}function V1(s){if(!Hc(s))return s;const{shapeFlag:e,children:t}=s;if(t){if(e&16)return t[0];if(e&32&&nt(t.default))return t.default()}}function cf(s,e){s.shapeFlag&6&&s.component?cf(s.component.subTree,e):s.shapeFlag&128?(s.ssContent.transition=e.clone(s.ssContent),s.ssFallback.transition=e.clone(s.ssFallback)):s.transition=e}function z1(s,e=!1,t){let n=[],i=0;for(let r=0;r<s.length;r++){let o=s[r];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===Ve?(o.patchFlag&128&&i++,n=n.concat(z1(o.children,e,a))):(e||o.type!==an)&&n.push(a!=null?_r(o,{key:a}):o)}if(i>1)for(let r=0;r<n.length;r++)n[r].patchFlag=-2;return n}/*! #__NO_SIDE_EFFECTS__ */function uf(s,e){return nt(s)?Ls({name:s.name},e,{setup:s}):s}const Ua=s=>!!s.type.__asyncLoader,Hc=s=>s.type.__isKeepAlive;function p3(s,e){j1(s,"a",e)}function m3(s,e){j1(s,"da",e)}function j1(s,e,t=ps){const n=s.__wdc||(s.__wdc=()=>{let i=t;for(;i;){if(i.isDeactivated)return;i=i.parent}return s()});if(Qc(e,n,t),t){let i=t.parent;for(;i&&i.parent;)Hc(i.parent.vnode)&&g3(n,e,t,i),i=i.parent}}function g3(s,e,t,n){const i=Qc(e,s,n,!0);W1(()=>{jh(n[e],i)},t)}function Qc(s,e,t=ps,n=!1){if(t){const i=t[s]||(t[s]=[]),r=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Ii();const a=Ka(t),l=_n(e,t,s,o);return a(),Ri(),l});return n?i.unshift(r):i.push(r),r}}const Ni=s=>(e,t=ps)=>(!su||s==="sp")&&Qc(s,(...n)=>e(...n),t),v3=Ni("bm"),os=Ni("m"),y3=Ni("bu"),_3=Ni("u"),df=Ni("bum"),W1=Ni("um"),b3=Ni("sp"),w3=Ni("rtg"),x3=Ni("rtc");function k3(s,e=ps){Qc("ec",s,e)}function ft(s,e,t,n){let i;const r=t;if(tt(s)||fs(s)){i=new Array(s.length);for(let o=0,a=s.length;o<a;o++)i[o]=e(s[o],o,void 0,r)}else if(typeof s=="number"){i=new Array(s);for(let o=0;o<s;o++)i[o]=e(o+1,o,void 0,r)}else if(Ht(s))if(s[Symbol.iterator])i=Array.from(s,(o,a)=>e(o,a,void 0,r));else{const o=Object.keys(s);i=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];i[a]=e(s[c],c,a,r)}}else i=[];return i}function ti(s,e,t={},n,i){if(rs.isCE||rs.parent&&Ua(rs.parent)&&rs.parent.isCE)return e!=="default"&&(t.name=e),y("slot",t,n);let r=s[e];r&&r._c&&(r._d=!1),v();const o=r&&U1(r(t)),a=qe(Ve,{key:t.key||o&&o.key||`_${e}`},o||[],o&&s._===1?64:-2);return!i&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function U1(s){return s.some(e=>Jc(e)?!(e.type===an||e.type===Ve&&!U1(e.children)):!0)?s:null}const hf=s=>s?yv(s)?nu(s)||s.proxy:hf(s.parent):null,Ha=Ls(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>hf(s.parent),$root:s=>hf(s.root),$emit:s=>s.emit,$options:s=>q1(s),$forceUpdate:s=>s.f||(s.f=()=>{s.effect.dirty=!0,of(s.update)}),$nextTick:s=>s.n||(s.n=za.bind(s.proxy)),$watch:s=>d3.bind(s)}),ff=(s,e)=>s!==Bt&&!s.__isScriptSetup&&yt(s,e),S3={get({_:s},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:n,data:i,props:r,accessCache:o,type:a,appContext:l}=s;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return n[e];case 2:return i[e];case 4:return t[e];case 3:return r[e]}else{if(ff(n,e))return o[e]=1,n[e];if(i!==Bt&&yt(i,e))return o[e]=2,i[e];if((c=s.propsOptions[0])&&yt(c,e))return o[e]=3,r[e];if(t!==Bt&&yt(t,e))return o[e]=4,t[e];pf&&(o[e]=0)}}const u=Ha[e];let d,f;if(u)return e==="$attrs"&&qs(s.attrs,"get",""),u(s);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==Bt&&yt(t,e))return o[e]=4,t[e];if(f=l.config.globalProperties,yt(f,e))return f[e]},set({_:s},e,t){const{data:n,setupState:i,ctx:r}=s;return ff(i,e)?(i[e]=t,!0):n!==Bt&&yt(n,e)?(n[e]=t,!0):yt(s.props,e)||e[0]==="$"&&e.slice(1)in s?!1:(r[e]=t,!0)},has({_:{data:s,setupState:e,accessCache:t,ctx:n,appContext:i,propsOptions:r}},o){let a;return!!t[o]||s!==Bt&&yt(s,o)||ff(e,o)||(a=r[0])&&yt(a,o)||yt(n,o)||yt(Ha,o)||yt(i.config.globalProperties,o)},defineProperty(s,e,t){return t.get!=null?s._.accessCache[e]=0:yt(t,"value")&&this.set(s,e,t.value,null),Reflect.defineProperty(s,e,t)}};function H1(s){return tt(s)?s.reduce((e,t)=>(e[t]=null,e),{}):s}let pf=!0;function C3(s){const e=q1(s),t=s.proxy,n=s.ctx;pf=!1,e.beforeCreate&&Q1(e.beforeCreate,s,"bc");const{data:i,computed:r,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:f,beforeUpdate:p,updated:g,activated:S,deactivated:k,beforeDestroy:O,beforeUnmount:$,destroyed:M,unmounted:b,render:w,renderTracked:R,renderTriggered:T,errorCaptured:E,serverPrefetch:F,expose:K,inheritAttrs:W,components:A,directives:D,filters:N}=e;if(c&&O3(c,n,null),o)for(const J in o){const ae=o[J];nt(ae)&&(n[J]=ae.bind(t))}if(i){const J=i.call(t,t);Ht(J)&&(s.data=Es(J))}if(pf=!0,r)for(const J in r){const ae=r[J],be=nt(ae)?ae.bind(t,t):nt(ae.get)?ae.get.bind(t,t):yn,We=!nt(ae)&&nt(ae.set)?ae.set.bind(t):yn,Xe=ie({get:be,set:We});Object.defineProperty(n,J,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:re=>Xe.value=re})}if(a)for(const J in a)Y1(a[J],n,t,J);if(l){const J=nt(l)?l.call(t):l;Reflect.ownKeys(J).forEach(ae=>{qc(ae,J[ae])})}u&&Q1(u,s,"c");function H(J,ae){tt(ae)?ae.forEach(be=>J(be.bind(t))):ae&&J(ae.bind(t))}if(H(v3,d),H(os,f),H(y3,p),H(_3,g),H(p3,S),H(m3,k),H(k3,E),H(x3,R),H(w3,T),H(df,$),H(W1,b),H(b3,F),tt(K))if(K.length){const J=s.exposed||(s.exposed={});K.forEach(ae=>{Object.defineProperty(J,ae,{get:()=>t[ae],set:be=>t[ae]=be})})}else s.exposed||(s.exposed={});w&&s.render===yn&&(s.render=w),W!=null&&(s.inheritAttrs=W),A&&(s.components=A),D&&(s.directives=D)}function O3(s,e,t=yn){tt(s)&&(s=mf(s));for(const n in s){const i=s[n];let r;Ht(i)?"default"in i?r=wn(i.from||n,i.default,!0):r=wn(i.from||n):r=wn(i),is(r)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[n]=r}}function Q1(s,e,t){_n(tt(s)?s.map(n=>n.bind(e.proxy)):s.bind(e.proxy),e,t)}function Y1(s,e,t,n){const i=n.includes(".")?F1(t,n):()=>t[n];if(fs(s)){const r=e[s];nt(r)&&Jt(i,r)}else if(nt(s))Jt(i,s.bind(t));else if(Ht(s))if(tt(s))s.forEach(r=>Y1(r,e,t,n));else{const r=nt(s.handler)?s.handler.bind(t):e[s.handler];nt(r)&&Jt(i,r,s)}}function q1(s){const e=s.type,{mixins:t,extends:n}=e,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=s.appContext,a=r.get(e);let l;return a?l=a:!i.length&&!t&&!n?l=e:(l={},i.length&&i.forEach(c=>Yc(l,c,o,!0)),Yc(l,e,o)),Ht(e)&&r.set(e,l),l}function Yc(s,e,t,n=!1){const{mixins:i,extends:r}=e;r&&Yc(s,r,t,!0),i&&i.forEach(o=>Yc(s,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=M3[o]||t&&t[o];s[o]=a?a(s[o],e[o]):e[o]}return s}const M3={data:G1,props:K1,emits:K1,methods:Qa,computed:Qa,beforeCreate:Rs,created:Rs,beforeMount:Rs,mounted:Rs,beforeUpdate:Rs,updated:Rs,beforeDestroy:Rs,beforeUnmount:Rs,destroyed:Rs,unmounted:Rs,activated:Rs,deactivated:Rs,errorCaptured:Rs,serverPrefetch:Rs,components:Qa,directives:Qa,watch:$3,provide:G1,inject:A3};function G1(s,e){return e?s?function(){return Ls(nt(s)?s.call(this,this):s,nt(e)?e.call(this,this):e)}:e:s}function A3(s,e){return Qa(mf(s),mf(e))}function mf(s){if(tt(s)){const e={};for(let t=0;t<s.length;t++)e[s[t]]=s[t];return e}return s}function Rs(s,e){return s?[...new Set([].concat(s,e))]:e}function Qa(s,e){return s?Ls(Object.create(null),s,e):e}function K1(s,e){return s?tt(s)&&tt(e)?[...new Set([...s,...e])]:Ls(Object.create(null),H1(s),H1(e??{})):e}function $3(s,e){if(!s)return e;if(!e)return s;const t=Ls(Object.create(null),s);for(const n in e)t[n]=Rs(s[n],e[n]);return t}function X1(){return{app:null,config:{isNativeTag:c4,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let T3=0;function P3(s,e){return function(n,i=null){nt(n)||(n=Ls({},n)),i!=null&&!Ht(i)&&(i=null);const r=X1(),o=new WeakSet;let a=!1;const l=r.app={_uid:T3++,_component:n,_props:i,_container:null,_context:r,_instance:null,version:rS,get config(){return r.config},set config(c){},use(c,...u){return o.has(c)||(c&&nt(c.install)?(o.add(c),c.install(l,...u)):nt(c)&&(o.add(c),c(l,...u))),l},mixin(c){return r.mixins.includes(c)||r.mixins.push(c),l},component(c,u){return u?(r.components[c]=u,l):r.components[c]},directive(c,u){return u?(r.directives[c]=u,l):r.directives[c]},mount(c,u,d){if(!a){const f=y(n,i);return f.appContext=r,d===!0?d="svg":d===!1&&(d=void 0),s(f,c,d),a=!0,l._container=c,c.__vue_app__=l,nu(f.component)||f.component.proxy}},unmount(){a&&(s(null,l._container),delete l._container.__vue_app__)},provide(c,u){return r.provides[c]=u,l},runWithContext(c){const u=Ho;Ho=l;try{return c()}finally{Ho=u}}};return l}}let Ho=null;function qc(s,e){if(ps){let t=ps.provides;const n=ps.parent&&ps.parent.provides;n===t&&(t=ps.provides=Object.create(n)),t[s]=e}}function wn(s,e,t=!1){const n=ps||rs;if(n||Ho){const i=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Ho._context.provides;if(i&&s in i)return i[s];if(arguments.length>1)return t&&nt(e)?e.call(n&&n.proxy):e}}function L3(){return!!(ps||rs||Ho)}const J1={},Z1=()=>Object.create(J1),ev=s=>Object.getPrototypeOf(s)===J1;function E3(s,e,t,n=!1){const i={},r=Z1();s.propsDefaults=Object.create(null),tv(s,e,i,r);for(const o in s.propsOptions[0])o in i||(i[o]=void 0);t?s.props=n?i:m1(i):s.type.props?s.props=i:s.props=r,s.attrs=r}function D3(s,e,t,n){const{props:i,attrs:r,vnode:{patchFlag:o}}=s,a=ht(i),[l]=s.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=s.vnode.dynamicProps;for(let d=0;d<u.length;d++){let f=u[d];if(Vc(s.emitsOptions,f))continue;const p=e[f];if(l)if(yt(r,f))p!==r[f]&&(r[f]=p,c=!0);else{const g=Zn(f);i[g]=gf(l,a,g,p,s,!1)}else p!==r[f]&&(r[f]=p,c=!0)}}}else{tv(s,e,i,r)&&(c=!0);let u;for(const d in a)(!e||!yt(e,d)&&((u=Mc(d))===d||!yt(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(i[d]=gf(l,a,d,void 0,s,!0)):delete i[d]);if(r!==a)for(const d in r)(!e||!yt(e,d))&&(delete r[d],c=!0)}c&&Fi(s.attrs,"set","")}function tv(s,e,t,n){const[i,r]=s.propsOptions;let o=!1,a;if(e)for(let l in e){if(Ra(l))continue;const c=e[l];let u;i&&yt(i,u=Zn(l))?!r||!r.includes(u)?t[u]=c:(a||(a={}))[u]=c:Vc(s.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(r){const l=ht(t),c=a||Bt;for(let u=0;u<r.length;u++){const d=r[u];t[d]=gf(i,l,d,c[d],s,!yt(c,d))}}return o}function gf(s,e,t,n,i,r){const o=s[t];if(o!=null){const a=yt(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&nt(l)){const{propsDefaults:c}=i;if(t in c)n=c[t];else{const u=Ka(i);n=c[t]=l.call(null,e),u()}}else n=l}o[0]&&(r&&!a?n=!1:o[1]&&(n===""||n===Mc(t))&&(n=!0))}return n}function sv(s,e,t=!1){const n=e.propsCache,i=n.get(s);if(i)return i;const r=s.props,o={},a=[];let l=!1;if(!nt(s)){const u=d=>{l=!0;const[f,p]=sv(d,e,!0);Ls(o,f),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),s.extends&&u(s.extends),s.mixins&&s.mixins.forEach(u)}if(!r&&!l)return Ht(s)&&n.set(s,jo),jo;if(tt(r))for(let u=0;u<r.length;u++){const d=Zn(r[u]);nv(d)&&(o[d]=Bt)}else if(r)for(const u in r){const d=Zn(u);if(nv(d)){const f=r[u],p=o[d]=tt(f)||nt(f)?{type:f}:Ls({},f);if(p){const g=ov(Boolean,p.type),S=ov(String,p.type);p[0]=g>-1,p[1]=S<0||g<S,(g>-1||yt(p,"default"))&&a.push(d)}}}const c=[o,a];return Ht(s)&&n.set(s,c),c}function nv(s){return s[0]!=="$"&&!Ra(s)}function iv(s){return s===null?"null":typeof s=="function"?s.name||"":typeof s=="object"&&s.constructor&&s.constructor.name||""}function rv(s,e){return iv(s)===iv(e)}function ov(s,e){return tt(e)?e.findIndex(t=>rv(t,s)):nt(e)&&rv(e,s)?0:-1}const av=s=>s[0]==="_"||s==="$stable",vf=s=>tt(s)?s.map(si):[si(s)],I3=(s,e,t)=>{if(e._n)return e;const n=P((...i)=>vf(e(...i)),t);return n._c=!1,n},lv=(s,e,t)=>{const n=s._ctx;for(const i in s){if(av(i))continue;const r=s[i];if(nt(r))e[i]=I3(i,r,n);else if(r!=null){const o=vf(r);e[i]=()=>o}}},cv=(s,e)=>{const t=vf(e);s.slots.default=()=>t},R3=(s,e)=>{const t=s.slots=Z1();if(s.vnode.shapeFlag&32){const n=e._;n?(Ls(t,e),jg(t,"_",n,!0)):lv(e,t)}else e&&cv(s,e)},F3=(s,e,t)=>{const{vnode:n,slots:i}=s;let r=!0,o=Bt;if(n.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:(Ls(i,e),!t&&a===1&&delete i._):(r=!e.$stable,lv(e,i)),o=e}else e&&(cv(s,e),o={default:1});if(r)for(const a in i)!av(a)&&o[a]==null&&delete i[a]};function yf(s,e,t,n,i=!1){if(tt(s)){s.forEach((f,p)=>yf(f,e&&(tt(e)?e[p]:e),t,n,i));return}if(Ua(n)&&!i)return;const r=n.shapeFlag&4?nu(n.component)||n.component.proxy:n.el,o=i?null:r,{i:a,r:l}=s,c=e&&e.r,u=a.refs===Bt?a.refs={}:a.refs,d=a.setupState;if(c!=null&&c!==l&&(fs(c)?(u[c]=null,yt(d,c)&&(d[c]=null)):is(c)&&(c.value=null)),nt(l))Bi(l,a,12,[o,u]);else{const f=fs(l),p=is(l);if(f||p){const g=()=>{if(s.f){const S=f?yt(d,l)?d[l]:u[l]:l.value;i?tt(S)&&jh(S,r):tt(S)?S.includes(r)||S.push(r):f?(u[l]=[r],yt(d,l)&&(d[l]=u[l])):(l.value=[r],s.k&&(u[s.k]=l.value))}else f?(u[l]=o,yt(d,l)&&(d[l]=o)):p&&(l.value=o,s.k&&(u[s.k]=o))};o?(g.id=-1,Gs(g,t)):g()}}}const Gs=l3;function B3(s){return N3(s)}function N3(s,e){const t=Ug();t.__VUE__=!0;const{insert:n,remove:i,patchProp:r,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:f,setScopeId:p=yn,insertStaticContent:g}=s,S=(V,j,Y,ne=null,ce=null,fe=null,ge=void 0,oe=null,we=!!j.dynamicChildren)=>{if(V===j)return;V&&!ho(V,j)&&(ne=Z(V),re(V,ce,fe,!0),V=null),j.patchFlag===-2&&(we=!1,j.dynamicChildren=null);const{type:he,ref:Re,shapeFlag:Ge}=j;switch(he){case Kc:k(V,j,Y,ne);break;case an:O(V,j,Y,ne);break;case Xc:V==null&&$(j,Y,ne,ge);break;case Ve:A(V,j,Y,ne,ce,fe,ge,oe,we);break;default:Ge&1?w(V,j,Y,ne,ce,fe,ge,oe,we):Ge&6?D(V,j,Y,ne,ce,fe,ge,oe,we):(Ge&64||Ge&128)&&he.process(V,j,Y,ne,ce,fe,ge,oe,we,je)}Re!=null&&ce&&yf(Re,V&&V.ref,fe,j||V,!j)},k=(V,j,Y,ne)=>{if(V==null)n(j.el=a(j.children),Y,ne);else{const ce=j.el=V.el;j.children!==V.children&&c(ce,j.children)}},O=(V,j,Y,ne)=>{V==null?n(j.el=l(j.children||""),Y,ne):j.el=V.el},$=(V,j,Y,ne)=>{[V.el,V.anchor]=g(V.children,j,Y,ne,V.el,V.anchor)},M=({el:V,anchor:j},Y,ne)=>{let ce;for(;V&&V!==j;)ce=f(V),n(V,Y,ne),V=ce;n(j,Y,ne)},b=({el:V,anchor:j})=>{let Y;for(;V&&V!==j;)Y=f(V),i(V),V=Y;i(j)},w=(V,j,Y,ne,ce,fe,ge,oe,we)=>{j.type==="svg"?ge="svg":j.type==="math"&&(ge="mathml"),V==null?R(j,Y,ne,ce,fe,ge,oe,we):F(V,j,ce,fe,ge,oe,we)},R=(V,j,Y,ne,ce,fe,ge,oe)=>{let we,he;const{props:Re,shapeFlag:Ge,transition:Ue,dirs:Ze}=V;if(we=V.el=o(V.type,fe,Re&&Re.is,Re),Ge&8?u(we,V.children):Ge&16&&E(V.children,we,null,ne,ce,_f(V,fe),ge,oe),Ze&&co(V,null,ne,"created"),T(we,V,V.scopeId,ge,ne),Re){for(const vt in Re)vt!=="value"&&!Ra(vt)&&r(we,vt,null,Re[vt],fe,V.children,ne,ce,Ye);"value"in Re&&r(we,"value",null,Re.value,fe),(he=Re.onVnodeBeforeMount)&&ni(he,ne,V)}Ze&&co(V,null,ne,"beforeMount");const lt=V3(ce,Ue);lt&&Ue.beforeEnter(we),n(we,j,Y),((he=Re&&Re.onVnodeMounted)||lt||Ze)&&Gs(()=>{he&&ni(he,ne,V),lt&&Ue.enter(we),Ze&&co(V,null,ne,"mounted")},ce)},T=(V,j,Y,ne,ce)=>{if(Y&&p(V,Y),ne)for(let fe=0;fe<ne.length;fe++)p(V,ne[fe]);if(ce){let fe=ce.subTree;if(j===fe){const ge=ce.vnode;T(V,ge,ge.scopeId,ge.slotScopeIds,ce.parent)}}},E=(V,j,Y,ne,ce,fe,ge,oe,we=0)=>{for(let he=we;he<V.length;he++){const Re=V[he]=oe?br(V[he]):si(V[he]);S(null,Re,j,Y,ne,ce,fe,ge,oe)}},F=(V,j,Y,ne,ce,fe,ge)=>{const oe=j.el=V.el;let{patchFlag:we,dynamicChildren:he,dirs:Re}=j;we|=V.patchFlag&16;const Ge=V.props||Bt,Ue=j.props||Bt;let Ze;if(Y&&uo(Y,!1),(Ze=Ue.onVnodeBeforeUpdate)&&ni(Ze,Y,j,V),Re&&co(j,V,Y,"beforeUpdate"),Y&&uo(Y,!0),he?K(V.dynamicChildren,he,oe,Y,ne,_f(j,ce),fe):ge||ae(V,j,oe,null,Y,ne,_f(j,ce),fe,!1),we>0){if(we&16)W(oe,j,Ge,Ue,Y,ne,ce);else if(we&2&&Ge.class!==Ue.class&&r(oe,"class",null,Ue.class,ce),we&4&&r(oe,"style",Ge.style,Ue.style,ce),we&8){const lt=j.dynamicProps;for(let vt=0;vt<lt.length;vt++){const Rt=lt[vt],ss=Ge[Rt],ks=Ue[Rt];(ks!==ss||Rt==="value")&&r(oe,Rt,ss,ks,ce,V.children,Y,ne,Ye)}}we&1&&V.children!==j.children&&u(oe,j.children)}else!ge&&he==null&&W(oe,j,Ge,Ue,Y,ne,ce);((Ze=Ue.onVnodeUpdated)||Re)&&Gs(()=>{Ze&&ni(Ze,Y,j,V),Re&&co(j,V,Y,"updated")},ne)},K=(V,j,Y,ne,ce,fe,ge)=>{for(let oe=0;oe<j.length;oe++){const we=V[oe],he=j[oe],Re=we.el&&(we.type===Ve||!ho(we,he)||we.shapeFlag&70)?d(we.el):Y;S(we,he,Re,null,ne,ce,fe,ge,!0)}},W=(V,j,Y,ne,ce,fe,ge)=>{if(Y!==ne){if(Y!==Bt)for(const oe in Y)!Ra(oe)&&!(oe in ne)&&r(V,oe,Y[oe],null,ge,j.children,ce,fe,Ye);for(const oe in ne){if(Ra(oe))continue;const we=ne[oe],he=Y[oe];we!==he&&oe!=="value"&&r(V,oe,he,we,ge,j.children,ce,fe,Ye)}"value"in ne&&r(V,"value",Y.value,ne.value,ge)}},A=(V,j,Y,ne,ce,fe,ge,oe,we)=>{const he=j.el=V?V.el:a(""),Re=j.anchor=V?V.anchor:a("");let{patchFlag:Ge,dynamicChildren:Ue,slotScopeIds:Ze}=j;Ze&&(oe=oe?oe.concat(Ze):Ze),V==null?(n(he,Y,ne),n(Re,Y,ne),E(j.children||[],Y,Re,ce,fe,ge,oe,we)):Ge>0&&Ge&64&&Ue&&V.dynamicChildren?(K(V.dynamicChildren,Ue,Y,ce,fe,ge,oe),(j.key!=null||ce&&j===ce.subTree)&&bf(V,j,!0)):ae(V,j,Y,Re,ce,fe,ge,oe,we)},D=(V,j,Y,ne,ce,fe,ge,oe,we)=>{j.slotScopeIds=oe,V==null?j.shapeFlag&512?ce.ctx.activate(j,Y,ne,ge,we):N(j,Y,ne,ce,fe,ge,we):Q(V,j,we)},N=(V,j,Y,ne,ce,fe,ge)=>{const oe=V.component=X3(V,ne,ce);if(Hc(V)&&(oe.ctx.renderer=je),J3(oe),oe.asyncDep){if(ce&&ce.registerDep(oe,H),!V.el){const we=oe.subTree=y(an);O(null,we,j,Y)}}else H(oe,V,j,Y,ce,fe,ge)},Q=(V,j,Y)=>{const ne=j.component=V.component;if(r3(V,j,Y))if(ne.asyncDep&&!ne.asyncResolved){J(ne,j,Y);return}else ne.next=j,Z4(ne.update),ne.effect.dirty=!0,ne.update();else j.el=V.el,ne.vnode=j},H=(V,j,Y,ne,ce,fe,ge)=>{const oe=()=>{if(V.isMounted){let{next:Re,bu:Ge,u:Ue,parent:Ze,vnode:lt}=V;{const to=uv(V);if(to){Re&&(Re.el=lt.el,J(V,Re,ge)),to.asyncDep.then(()=>{V.isUnmounted||oe()});return}}let vt=Re,Rt;uo(V,!1),Re?(Re.el=lt.el,J(V,Re,ge)):Re=lt,Ge&&Qh(Ge),(Rt=Re.props&&Re.props.onVnodeBeforeUpdate)&&ni(Rt,Ze,Re,lt),uo(V,!0);const ss=T1(V),ks=V.subTree;V.subTree=ss,S(ks,ss,d(ks.el),Z(ks),V,ce,fe),Re.el=ss.el,vt===null&&o3(V,ss.el),Ue&&Gs(Ue,ce),(Rt=Re.props&&Re.props.onVnodeUpdated)&&Gs(()=>ni(Rt,Ze,Re,lt),ce)}else{let Re;const{el:Ge,props:Ue}=j,{bm:Ze,m:lt,parent:vt}=V,Rt=Ua(j);uo(V,!1),Ze&&Qh(Ze),!Rt&&(Re=Ue&&Ue.onVnodeBeforeMount)&&ni(Re,vt,j),uo(V,!0);{const ss=V.subTree=T1(V);S(null,ss,Y,ne,V,ce,fe),j.el=ss.el}if(lt&&Gs(lt,ce),!Rt&&(Re=Ue&&Ue.onVnodeMounted)){const ss=j;Gs(()=>ni(Re,vt,ss),ce)}(j.shapeFlag&256||vt&&Ua(vt.vnode)&&vt.vnode.shapeFlag&256)&&V.a&&Gs(V.a,ce),V.isMounted=!0,j=Y=ne=null}},we=V.effect=new qh(oe,yn,()=>of(he),V.scope),he=V.update=()=>{we.dirty&&we.run()};he.id=V.uid,uo(V,!0),he()},J=(V,j,Y)=>{j.component=V;const ne=V.vnode.props;V.vnode=j,V.next=null,D3(V,j.props,ne,Y),F3(V,j.children,Y),Ii(),O1(V),Ri()},ae=(V,j,Y,ne,ce,fe,ge,oe,we=!1)=>{const he=V&&V.children,Re=V?V.shapeFlag:0,Ge=j.children,{patchFlag:Ue,shapeFlag:Ze}=j;if(Ue>0){if(Ue&128){We(he,Ge,Y,ne,ce,fe,ge,oe,we);return}else if(Ue&256){be(he,Ge,Y,ne,ce,fe,ge,oe,we);return}}Ze&8?(Re&16&&Ye(he,ce,fe),Ge!==he&&u(Y,Ge)):Re&16?Ze&16?We(he,Ge,Y,ne,ce,fe,ge,oe,we):Ye(he,ce,fe,!0):(Re&8&&u(Y,""),Ze&16&&E(Ge,Y,ne,ce,fe,ge,oe,we))},be=(V,j,Y,ne,ce,fe,ge,oe,we)=>{V=V||jo,j=j||jo;const he=V.length,Re=j.length,Ge=Math.min(he,Re);let Ue;for(Ue=0;Ue<Ge;Ue++){const Ze=j[Ue]=we?br(j[Ue]):si(j[Ue]);S(V[Ue],Ze,Y,null,ce,fe,ge,oe,we)}he>Re?Ye(V,ce,fe,!0,!1,Ge):E(j,Y,ne,ce,fe,ge,oe,we,Ge)},We=(V,j,Y,ne,ce,fe,ge,oe,we)=>{let he=0;const Re=j.length;let Ge=V.length-1,Ue=Re-1;for(;he<=Ge&&he<=Ue;){const Ze=V[he],lt=j[he]=we?br(j[he]):si(j[he]);if(ho(Ze,lt))S(Ze,lt,Y,null,ce,fe,ge,oe,we);else break;he++}for(;he<=Ge&&he<=Ue;){const Ze=V[Ge],lt=j[Ue]=we?br(j[Ue]):si(j[Ue]);if(ho(Ze,lt))S(Ze,lt,Y,null,ce,fe,ge,oe,we);else break;Ge--,Ue--}if(he>Ge){if(he<=Ue){const Ze=Ue+1,lt=Ze<Re?j[Ze].el:ne;for(;he<=Ue;)S(null,j[he]=we?br(j[he]):si(j[he]),Y,lt,ce,fe,ge,oe,we),he++}}else if(he>Ue)for(;he<=Ge;)re(V[he],ce,fe,!0),he++;else{const Ze=he,lt=he,vt=new Map;for(he=lt;he<=Ue;he++){const ds=j[he]=we?br(j[he]):si(j[he]);ds.key!=null&&vt.set(ds.key,he)}let Rt,ss=0;const ks=Ue-lt+1;let to=!1,No=0;const Gn=new Array(ks);for(he=0;he<ks;he++)Gn[he]=0;for(he=Ze;he<=Ge;he++){const ds=V[he];if(ss>=ks){re(ds,ce,fe,!0);continue}let gn;if(ds.key!=null)gn=vt.get(ds.key);else for(Rt=lt;Rt<=Ue;Rt++)if(Gn[Rt-lt]===0&&ho(ds,j[Rt])){gn=Rt;break}gn===void 0?re(ds,ce,fe,!0):(Gn[gn-lt]=he+1,gn>=No?No=gn:to=!0,S(ds,j[gn],Y,null,ce,fe,ge,oe,we),ss++)}const Vo=to?z3(Gn):jo;for(Rt=Vo.length-1,he=ks-1;he>=0;he--){const ds=lt+he,gn=j[ds],Ia=ds+1<Re?j[ds+1].el:ne;Gn[he]===0?S(null,gn,Y,Ia,ce,fe,ge,oe,we):to&&(Rt<0||he!==Vo[Rt]?Xe(gn,Y,Ia,2):Rt--)}}},Xe=(V,j,Y,ne,ce=null)=>{const{el:fe,type:ge,transition:oe,children:we,shapeFlag:he}=V;if(he&6){Xe(V.component.subTree,j,Y,ne);return}if(he&128){V.suspense.move(j,Y,ne);return}if(he&64){ge.move(V,j,Y,je);return}if(ge===Ve){n(fe,j,Y);for(let Ge=0;Ge<we.length;Ge++)Xe(we[Ge],j,Y,ne);n(V.anchor,j,Y);return}if(ge===Xc){M(V,j,Y);return}if(ne!==2&&he&1&&oe)if(ne===0)oe.beforeEnter(fe),n(fe,j,Y),Gs(()=>oe.enter(fe),ce);else{const{leave:Ge,delayLeave:Ue,afterLeave:Ze}=oe,lt=()=>n(fe,j,Y),vt=()=>{Ge(fe,()=>{lt(),Ze&&Ze()})};Ue?Ue(fe,lt,vt):vt()}else n(fe,j,Y)},re=(V,j,Y,ne=!1,ce=!1)=>{const{type:fe,props:ge,ref:oe,children:we,dynamicChildren:he,shapeFlag:Re,patchFlag:Ge,dirs:Ue}=V;if(oe!=null&&yf(oe,null,Y,V,!0),Re&256){j.ctx.deactivate(V);return}const Ze=Re&1&&Ue,lt=!Ua(V);let vt;if(lt&&(vt=ge&&ge.onVnodeBeforeUnmount)&&ni(vt,j,V),Re&6)Te(V.component,Y,ne);else{if(Re&128){V.suspense.unmount(Y,ne);return}Ze&&co(V,null,j,"beforeUnmount"),Re&64?V.type.remove(V,j,Y,ce,je,ne):he&&(fe!==Ve||Ge>0&&Ge&64)?Ye(he,j,Y,!1,!0):(fe===Ve&&Ge&384||!ce&&Re&16)&&Ye(we,j,Y),ne&&le(V)}(lt&&(vt=ge&&ge.onVnodeUnmounted)||Ze)&&Gs(()=>{vt&&ni(vt,j,V),Ze&&co(V,null,j,"unmounted")},Y)},le=V=>{const{type:j,el:Y,anchor:ne,transition:ce}=V;if(j===Ve){se(Y,ne);return}if(j===Xc){b(V);return}const fe=()=>{i(Y),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(V.shapeFlag&1&&ce&&!ce.persisted){const{leave:ge,delayLeave:oe}=ce,we=()=>ge(Y,fe);oe?oe(V.el,fe,we):we()}else fe()},se=(V,j)=>{let Y;for(;V!==j;)Y=f(V),i(V),V=Y;i(j)},Te=(V,j,Y)=>{const{bum:ne,scope:ce,update:fe,subTree:ge,um:oe}=V;ne&&Qh(ne),ce.stop(),fe&&(fe.active=!1,re(ge,V,j,Y)),oe&&Gs(oe,j),Gs(()=>{V.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},Ye=(V,j,Y,ne=!1,ce=!1,fe=0)=>{for(let ge=fe;ge<V.length;ge++)re(V[ge],j,Y,ne,ce)},Z=V=>V.shapeFlag&6?Z(V.component.subTree):V.shapeFlag&128?V.suspense.next():f(V.anchor||V.el);let ye=!1;const Oe=(V,j,Y)=>{V==null?j._vnode&&re(j._vnode,null,null,!0):S(j._vnode||null,V,j,null,null,null,Y),ye||(ye=!0,O1(),M1(),ye=!1),j._vnode=V},je={p:S,um:re,m:Xe,r:le,mt:N,mc:E,pc:ae,pbc:K,n:Z,o:s};return{render:Oe,hydrate:void 0,createApp:P3(Oe)}}function _f({type:s,props:e},t){return t==="svg"&&s==="foreignObject"||t==="mathml"&&s==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function uo({effect:s,update:e},t){s.allowRecurse=e.allowRecurse=t}function V3(s,e){return(!s||s&&!s.pendingBranch)&&e&&!e.persisted}function bf(s,e,t=!1){const n=s.children,i=e.children;if(tt(n)&&tt(i))for(let r=0;r<n.length;r++){const o=n[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=br(i[r]),a.el=o.el),t||bf(o,a)),a.type===Kc&&(a.el=o.el)}}function z3(s){const e=s.slice(),t=[0];let n,i,r,o,a;const l=s.length;for(n=0;n<l;n++){const c=s[n];if(c!==0){if(i=t[t.length-1],s[i]<c){e[n]=i,t.push(n);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,s[t[a]]<c?r=a+1:o=a;c<s[t[r]]&&(r>0&&(e[n]=t[r-1]),t[r]=n)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function uv(s){const e=s.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:uv(e)}const j3=s=>s.__isTeleport,Ya=s=>s&&(s.disabled||s.disabled===""),dv=s=>typeof SVGElement<"u"&&s instanceof SVGElement,hv=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,wf=(s,e)=>{const t=s&&s.to;return fs(t)?e?e(t):null:t},W3={name:"Teleport",__isTeleport:!0,process(s,e,t,n,i,r,o,a,l,c){const{mc:u,pc:d,pbc:f,o:{insert:p,querySelector:g,createText:S,createComment:k}}=c,O=Ya(e.props);let{shapeFlag:$,children:M,dynamicChildren:b}=e;if(s==null){const w=e.el=S(""),R=e.anchor=S("");p(w,t,n),p(R,t,n);const T=e.target=wf(e.props,g),E=e.targetAnchor=S("");T&&(p(E,T),o==="svg"||dv(T)?o="svg":(o==="mathml"||hv(T))&&(o="mathml"));const F=(K,W)=>{$&16&&u(M,K,W,i,r,o,a,l)};O?F(t,R):T&&F(T,E)}else{e.el=s.el;const w=e.anchor=s.anchor,R=e.target=s.target,T=e.targetAnchor=s.targetAnchor,E=Ya(s.props),F=E?t:R,K=E?w:T;if(o==="svg"||dv(R)?o="svg":(o==="mathml"||hv(R))&&(o="mathml"),b?(f(s.dynamicChildren,b,F,i,r,o,a),bf(s,e,!0)):l||d(s,e,F,K,i,r,o,a,!1),O)E?e.props&&s.props&&e.props.to!==s.props.to&&(e.props.to=s.props.to):Gc(e,t,w,c,1);else if((e.props&&e.props.to)!==(s.props&&s.props.to)){const W=e.target=wf(e.props,g);W&&Gc(e,W,null,c,0)}else E&&Gc(e,R,T,c,1)}fv(e)},remove(s,e,t,n,{um:i,o:{remove:r}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:d,props:f}=s;if(d&&r(u),o&&r(c),a&16){const p=o||!Ya(f);for(let g=0;g<l.length;g++){const S=l[g];i(S,e,t,p,!!S.dynamicChildren)}}},move:Gc,hydrate:U3};function Gc(s,e,t,{o:{insert:n},m:i},r=2){r===0&&n(s.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=s,d=r===2;if(d&&n(o,e,t),(!d||Ya(u))&&l&16)for(let f=0;f<c.length;f++)i(c[f],e,t,2);d&&n(a,e,t)}function U3(s,e,t,n,i,r,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=wf(e.props,l);if(u){const d=u._lpa||u.firstChild;if(e.shapeFlag&16)if(Ya(e.props))e.anchor=c(o(s),e,a(s),t,n,i,r),e.targetAnchor=d;else{e.anchor=o(s);let f=d;for(;f;)if(f=o(f),f&&f.nodeType===8&&f.data==="teleport anchor"){e.targetAnchor=f,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(d,e,u,t,n,i,r)}fv(e)}return e.anchor&&o(e.anchor)}const H3=W3;function fv(s){const e=s.ctx;if(e&&e.ut){let t=s.children[0].el;for(;t&&t!==s.targetAnchor;)t.nodeType===1&&t.setAttribute("data-v-owner",e.uid),t=t.nextSibling;e.ut()}}const Ve=Symbol.for("v-fgt"),Kc=Symbol.for("v-txt"),an=Symbol.for("v-cmt"),Xc=Symbol.for("v-stc"),qa=[];let Rn=null;function v(s=!1){qa.push(Rn=s?null:[])}function Q3(){qa.pop(),Rn=qa[qa.length-1]||null}let Ga=1;function pv(s){Ga+=s}function mv(s){return s.dynamicChildren=Ga>0?Rn||jo:null,Q3(),Ga>0&&Rn&&Rn.push(s),s}function C(s,e,t,n,i,r){return mv(h(s,e,t,n,i,r,!0))}function qe(s,e,t,n,i){return mv(y(s,e,t,n,i,!0))}function Jc(s){return s?s.__v_isVNode===!0:!1}function ho(s,e){return s.type===e.type&&s.key===e.key}const gv=({key:s})=>s??null,Zc=({ref:s,ref_key:e,ref_for:t})=>(typeof s=="number"&&(s=""+s),s!=null?fs(s)||is(s)||nt(s)?{i:rs,r:s,k:e,f:!!t}:s:null);function h(s,e=null,t=null,n=0,i=null,r=s===Ve?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:s,props:e,key:e&&gv(e),ref:e&&Zc(e),scopeId:zc,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:rs};return a?(xf(l,t),r&128&&s.normalize(l)):t&&(l.shapeFlag|=fs(t)?8:16),Ga>0&&!o&&Rn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&Rn.push(l),l}const y=Y3;function Y3(s,e=null,t=null,n=0,i=null,r=!1){if((!s||s===E1)&&(s=an),Jc(s)){const a=_r(s,e,!0);return t&&xf(a,t),Ga>0&&!r&&Rn&&(a.shapeFlag&6?Rn[Rn.indexOf(s)]=a:Rn.push(a)),a.patchFlag|=-2,a}if(iS(s)&&(s=s.__vccOpts),e){e=q3(e);let{class:a,style:l}=e;a&&!fs(a)&&(e.class=X(a)),Ht(l)&&(v1(l)&&!tt(l)&&(l=Ls({},l)),e.style=et(l))}const o=fs(s)?1:a3(s)?128:j3(s)?64:Ht(s)?4:nt(s)?2:0;return h(s,e,t,n,i,o,r,!0)}function q3(s){return s?v1(s)||ev(s)?Ls({},s):s:null}function _r(s,e,t=!1,n=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:l}=s,c=e?Ks(i||{},e):i,u={__v_isVNode:!0,__v_skip:!0,type:s.type,props:c,key:c&&gv(c),ref:e&&e.ref?t&&r?tt(r)?r.concat(Zc(e)):[r,Zc(e)]:Zc(e):r,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:a,target:s.target,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:e&&s.type!==Ve?o===-1?16:o|16:o,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:l,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&_r(s.ssContent),ssFallback:s.ssFallback&&_r(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return l&&n&&(u.transition=l.clone(u)),u}function B(s=" ",e=0){return y(Kc,null,s,e)}function Fs(s,e){const t=y(Xc,null,s);return t.staticCount=e,t}function z(s="",e=!1){return e?(v(),qe(an,null,s)):y(an,null,s)}function si(s){return s==null||typeof s=="boolean"?y(an):tt(s)?y(Ve,null,s.slice()):typeof s=="object"?br(s):y(Kc,null,String(s))}function br(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:_r(s)}function xf(s,e){let t=0;const{shapeFlag:n}=s;if(e==null)e=null;else if(tt(e))t=16;else if(typeof e=="object")if(n&65){const i=e.default;i&&(i._c&&(i._d=!1),xf(s,i()),i._c&&(i._d=!0));return}else{t=32;const i=e._;!i&&!ev(e)?e._ctx=rs:i===3&&rs&&(rs.slots._===1?e._=1:(e._=2,s.patchFlag|=1024))}else nt(e)?(e={default:e,_ctx:rs},t=32):(e=String(e),n&64?(t=16,e=[B(e)]):t=8);s.children=e,s.shapeFlag|=t}function Ks(...s){const e={};for(let t=0;t<s.length;t++){const n=s[t];for(const i in n)if(i==="class")e.class!==n.class&&(e.class=X([e.class,n.class]));else if(i==="style")e.style=et([e.style,n.style]);else if(zh(i)){const r=e[i],o=n[i];o&&r!==o&&!(tt(r)&&r.includes(o))&&(e[i]=r?[].concat(r,o):o)}else i!==""&&(e[i]=n[i])}return e}function ni(s,e,t,n=null){_n(s,e,7,[t,n])}const G3=X1();let K3=0;function X3(s,e,t){const n=s.type,i=(e?e.appContext:s.appContext)||G3,r={uid:K3++,vnode:s,type:n,parent:e,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new Qg(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:sv(n,i),emitsOptions:$1(n,i),emit:null,emitted:null,propsDefaults:Bt,inheritAttrs:n.inheritAttrs,ctx:Bt,data:Bt,props:Bt,attrs:Bt,slots:Bt,refs:Bt,setupState:Bt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=s3.bind(null,r),s.ce&&s.ce(r),r}let ps=null;const eu=()=>ps||rs;let tu,kf;{const s=Ug(),e=(t,n)=>{let i;return(i=s[t])||(i=s[t]=[]),i.push(n),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};tu=e("__VUE_INSTANCE_SETTERS__",t=>ps=t),kf=e("__VUE_SSR_SETTERS__",t=>su=t)}const Ka=s=>{const e=ps;return tu(s),s.scope.on(),()=>{s.scope.off(),tu(e)}},vv=()=>{ps&&ps.scope.off(),tu(null)};function yv(s){return s.vnode.shapeFlag&4}let su=!1;function J3(s,e=!1){e&&kf(e);const{props:t,children:n}=s.vnode,i=yv(s);E3(s,t,i,e),R3(s,n);const r=i?Z3(s,e):void 0;return e&&kf(!1),r}function Z3(s,e){const t=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,S3);const{setup:n}=t;if(n){const i=s.setupContext=n.length>1?tS(s):null,r=Ka(s);Ii();const o=Bi(n,s,0,[s.props,i]);if(Ri(),r(),Ng(o)){if(o.then(vv,vv),e)return o.then(a=>{_v(s,a)}).catch(a=>{Nc(a,s,0)});s.asyncDep=o}else _v(s,o)}else bv(s)}function _v(s,e,t){nt(e)?s.type.__ssrInlineRender?s.ssrRender=e:s.render=e:Ht(e)&&(s.setupState=w1(e)),bv(s)}function bv(s,e,t){const n=s.type;s.render||(s.render=n.render||yn);{const i=Ka(s);Ii();try{C3(s)}finally{Ri(),i()}}}const eS={get(s,e){return qs(s,"get",""),s[e]}};function tS(s){const e=t=>{s.exposed=t||{}};return{attrs:new Proxy(s.attrs,eS),slots:s.slots,emit:s.emit,expose:e}}function nu(s){if(s.exposed)return s.exposeProxy||(s.exposeProxy=new Proxy(w1(tf(s.exposed)),{get(e,t){if(t in e)return e[t];if(t in Ha)return Ha[t](s)},has(e,t){return t in e||t in Ha}}))}const sS=/(?:^|[-_])(\w)/g,nS=s=>s.replace(sS,e=>e.toUpperCase()).replace(/[-_]/g,"");function wv(s,e=!0){return nt(s)?s.displayName||s.name:s.name||e&&s.__name}function xv(s,e,t=!1){let n=wv(e);if(!n&&e.__file){const i=e.__file.match(/([^/\\]+)\.\w+$/);i&&(n=i[1])}if(!n&&s&&s.parent){const i=r=>{for(const o in r)if(r[o]===e)return o};n=i(s.components||s.parent.type.components)||i(s.appContext.components)}return n?nS(n):t?"App":"Anonymous"}function iS(s){return nt(s)&&"__vccOpts"in s}const ie=(s,e)=>z4(s,e,su);function ln(s,e,t){const n=arguments.length;return n===2?Ht(e)&&!tt(e)?Jc(e)?y(s,null,[e]):y(s,e):y(s,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&Jc(t)&&(t=[t]),y(s,e,t))}const rS="3.4.27";/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function oS(s,e){const t=new Set(s.split(","));return n=>t.has(n)}const aS=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),lS=s=>s.startsWith("onUpdate:"),Sf=Object.assign,ii=Array.isArray,iu=s=>Ov(s)==="[object Set]",kv=s=>Ov(s)==="[object Date]",Sv=s=>typeof s=="function",Xa=s=>typeof s=="string",Cv=s=>typeof s=="symbol",Cf=s=>s!==null&&typeof s=="object",cS=Object.prototype.toString,Ov=s=>cS.call(s),Mv=s=>{const e=Object.create(null);return t=>e[t]||(e[t]=s(t))},uS=/\B([A-Z])/g,Of=Mv(s=>s.replace(uS,"-$1").toLowerCase()),dS=Mv(s=>s.charAt(0).toUpperCase()+s.slice(1)),hS=(s,e)=>{for(let t=0;t<s.length;t++)s[t](e)},Mf=s=>{const e=parseFloat(s);return isNaN(e)?s:e},fS=s=>{const e=Xa(s)?Number(s):NaN;return isNaN(e)?s:e},pS=oS("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function Av(s){return!!s||s===""}function mS(s,e){if(s.length!==e.length)return!1;let t=!0;for(let n=0;t&&n<s.length;n++)t=fo(s[n],e[n]);return t}function fo(s,e){if(s===e)return!0;let t=kv(s),n=kv(e);if(t||n)return t&&n?s.getTime()===e.getTime():!1;if(t=Cv(s),n=Cv(e),t||n)return s===e;if(t=ii(s),n=ii(e),t||n)return t&&n?mS(s,e):!1;if(t=Cf(s),n=Cf(e),t||n){if(!t||!n)return!1;const i=Object.keys(s).length,r=Object.keys(e).length;if(i!==r)return!1;for(const o in s){const a=s.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!fo(s[o],e[o]))return!1}}return String(s)===String(e)}function Af(s,e){return s.findIndex(t=>fo(t,e))}/**
* @vue/runtime-dom v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const gS="http://www.w3.org/2000/svg",vS="http://www.w3.org/1998/Math/MathML",wr=typeof document<"u"?document:null,$v=wr&&wr.createElement("template"),yS={insert:(s,e,t)=>{e.insertBefore(s,t||null)},remove:s=>{const e=s.parentNode;e&&e.removeChild(s)},createElement:(s,e,t,n)=>{const i=e==="svg"?wr.createElementNS(gS,s):e==="mathml"?wr.createElementNS(vS,s):wr.createElement(s,t?{is:t}:void 0);return s==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:s=>wr.createTextNode(s),createComment:s=>wr.createComment(s),setText:(s,e)=>{s.nodeValue=e},setElementText:(s,e)=>{s.textContent=e},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>wr.querySelector(s),setScopeId(s,e){s.setAttribute(e,"")},insertStaticContent(s,e,t,n,i,r){const o=t?t.previousSibling:e.lastChild;if(i&&(i===r||i.nextSibling))for(;e.insertBefore(i.cloneNode(!0),t),!(i===r||!(i=i.nextSibling)););else{$v.innerHTML=n==="svg"?`<svg>${s}</svg>`:n==="mathml"?`<math>${s}</math>`:s;const a=$v.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},xr="transition",Ja="animation",Za=Symbol("_vtc"),ze=(s,{slots:e})=>ln(f3,_S(s),e);ze.displayName="Transition";const Tv={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};ze.props=Sf({},B1,Tv);const po=(s,e=[])=>{ii(s)?s.forEach(t=>t(...e)):s&&s(...e)},Pv=s=>s?ii(s)?s.some(e=>e.length>1):s.length>1:!1;function _S(s){const e={};for(const A in s)A in Tv||(e[A]=s[A]);if(s.css===!1)return e;const{name:t="v",type:n,duration:i,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=r,appearActiveClass:c=o,appearToClass:u=a,leaveFromClass:d=`${t}-leave-from`,leaveActiveClass:f=`${t}-leave-active`,leaveToClass:p=`${t}-leave-to`}=s,g=bS(i),S=g&&g[0],k=g&&g[1],{onBeforeEnter:O,onEnter:$,onEnterCancelled:M,onLeave:b,onLeaveCancelled:w,onBeforeAppear:R=O,onAppear:T=$,onAppearCancelled:E=M}=e,F=(A,D,N)=>{mo(A,D?u:a),mo(A,D?c:o),N&&N()},K=(A,D)=>{A._isLeaving=!1,mo(A,d),mo(A,p),mo(A,f),D&&D()},W=A=>(D,N)=>{const Q=A?T:$,H=()=>F(D,A,N);po(Q,[D,H]),Lv(()=>{mo(D,A?l:r),kr(D,A?u:a),Pv(Q)||Ev(D,n,S,H)})};return Sf(e,{onBeforeEnter(A){po(O,[A]),kr(A,r),kr(A,o)},onBeforeAppear(A){po(R,[A]),kr(A,l),kr(A,c)},onEnter:W(!1),onAppear:W(!0),onLeave(A,D){A._isLeaving=!0;const N=()=>K(A,D);kr(A,d),kr(A,f),kS(),Lv(()=>{A._isLeaving&&(mo(A,d),kr(A,p),Pv(b)||Ev(A,n,k,N))}),po(b,[A,N])},onEnterCancelled(A){F(A,!1),po(M,[A])},onAppearCancelled(A){F(A,!0),po(E,[A])},onLeaveCancelled(A){K(A),po(w,[A])}})}function bS(s){if(s==null)return null;if(Cf(s))return[$f(s.enter),$f(s.leave)];{const e=$f(s);return[e,e]}}function $f(s){return fS(s)}function kr(s,e){e.split(/\s+/).forEach(t=>t&&s.classList.add(t)),(s[Za]||(s[Za]=new Set)).add(e)}function mo(s,e){e.split(/\s+/).forEach(n=>n&&s.classList.remove(n));const t=s[Za];t&&(t.delete(e),t.size||(s[Za]=void 0))}function Lv(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let wS=0;function Ev(s,e,t,n){const i=s._endId=++wS,r=()=>{i===s._endId&&n()};if(t)return setTimeout(r,t);const{type:o,timeout:a,propCount:l}=xS(s,e);if(!o)return n();const c=o+"end";let u=0;const d=()=>{s.removeEventListener(c,f),r()},f=p=>{p.target===s&&++u>=l&&d()};setTimeout(()=>{u<l&&d()},a+1),s.addEventListener(c,f)}function xS(s,e){const t=window.getComputedStyle(s),n=g=>(t[g]||"").split(", "),i=n(`${xr}Delay`),r=n(`${xr}Duration`),o=Dv(i,r),a=n(`${Ja}Delay`),l=n(`${Ja}Duration`),c=Dv(a,l);let u=null,d=0,f=0;e===xr?o>0&&(u=xr,d=o,f=r.length):e===Ja?c>0&&(u=Ja,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?xr:Ja:null,f=u?u===xr?r.length:l.length:0);const p=u===xr&&/\b(transform|all)(,|$)/.test(n(`${xr}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function Dv(s,e){for(;s.length<e.length;)s=s.concat(s);return Math.max(...e.map((t,n)=>Iv(t)+Iv(s[n])))}function Iv(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function kS(){return document.body.offsetHeight}function SS(s,e,t){const n=s[Za];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?s.removeAttribute("class"):t?s.setAttribute("class",e):s.className=e}const Rv=Symbol("_vod"),CS=Symbol("_vsh"),OS=Symbol(""),MS=/(^|;)\s*display\s*:/;function AS(s,e,t){const n=s.style,i=Xa(t);let r=!1;if(t&&!i){if(e)if(Xa(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&ru(n,a,"")}else for(const o in e)t[o]==null&&ru(n,o,"");for(const o in t)o==="display"&&(r=!0),ru(n,o,t[o])}else if(i){if(e!==t){const o=n[OS];o&&(t+=";"+o),n.cssText=t,r=MS.test(t)}}else e&&s.removeAttribute("style");Rv in s&&(s[Rv]=r?n.display:"",s[CS]&&(n.display="none"))}const Fv=/\s*!important$/;function ru(s,e,t){if(ii(t))t.forEach(n=>ru(s,e,n));else if(t==null&&(t=""),e.startsWith("--"))s.setProperty(e,t);else{const n=$S(s,e);Fv.test(t)?s.setProperty(Of(n),t.replace(Fv,""),"important"):s[n]=t}}const Bv=["Webkit","Moz","ms"],Tf={};function $S(s,e){const t=Tf[e];if(t)return t;let n=Zn(e);if(n!=="filter"&&n in s)return Tf[e]=n;n=dS(n);for(let i=0;i<Bv.length;i++){const r=Bv[i]+n;if(r in s)return Tf[e]=r}return e}const Nv="http://www.w3.org/1999/xlink";function TS(s,e,t,n,i){if(n&&e.startsWith("xlink:"))t==null?s.removeAttributeNS(Nv,e.slice(6,e.length)):s.setAttributeNS(Nv,e,t);else{const r=pS(e);t==null||r&&!Av(t)?s.removeAttribute(e):s.setAttribute(e,r?"":t)}}function PS(s,e,t,n,i,r,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,i,r),s[e]=t??"";return}const a=s.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?s.getAttribute("value")||"":s.value,u=t??"";(c!==u||!("_value"in s))&&(s.value=u),t==null&&s.removeAttribute(e),s._value=t;return}let l=!1;if(t===""||t==null){const c=typeof s[e];c==="boolean"?t=Av(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{s[e]=t}catch{}l&&s.removeAttribute(e)}function Vi(s,e,t,n){s.addEventListener(e,t,n)}function LS(s,e,t,n){s.removeEventListener(e,t,n)}const Vv=Symbol("_vei");function ES(s,e,t,n,i=null){const r=s[Vv]||(s[Vv]={}),o=r[e];if(n&&o)o.value=n;else{const[a,l]=DS(e);if(n){const c=r[e]=FS(n,i);Vi(s,a,c,l)}else o&&(LS(s,a,o,l),r[e]=void 0)}}const zv=/(?:Once|Passive|Capture)$/;function DS(s){let e;if(zv.test(s)){e={};let n;for(;n=s.match(zv);)s=s.slice(0,s.length-n[0].length),e[n[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):Of(s.slice(2)),e]}let Pf=0;const IS=Promise.resolve(),RS=()=>Pf||(IS.then(()=>Pf=0),Pf=Date.now());function FS(s,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;_n(BS(n,t.value),e,5,[n])};return t.value=s,t.attached=RS(),t}function BS(s,e){if(ii(e)){const t=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{t.call(s),s._stopped=!0},e.map(n=>i=>!i._stopped&&n&&n(i))}else return e}const jv=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,NS=(s,e,t,n,i,r,o,a,l)=>{const c=i==="svg";e==="class"?SS(s,n,c):e==="style"?AS(s,t,n):aS(e)?lS(e)||ES(s,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):VS(s,e,n,c))?PS(s,e,n,r,o,a,l):(e==="true-value"?s._trueValue=n:e==="false-value"&&(s._falseValue=n),TS(s,e,n,c))};function VS(s,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in s&&jv(e)&&Sv(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&s.tagName==="INPUT"||e==="type"&&s.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const i=s.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return jv(e)&&Xa(t)?!1:e in s}const Sr=s=>{const e=s.props["onUpdate:modelValue"]||!1;return ii(e)?t=>hS(e,t):e};function zS(s){s.target.composing=!0}function Wv(s){const e=s.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const xn=Symbol("_assign"),Ot={created(s,{modifiers:{lazy:e,trim:t,number:n}},i){s[xn]=Sr(i);const r=n||i.props&&i.props.type==="number";Vi(s,e?"change":"input",o=>{if(o.target.composing)return;let a=s.value;t&&(a=a.trim()),r&&(a=Mf(a)),s[xn](a)}),t&&Vi(s,"change",()=>{s.value=s.value.trim()}),e||(Vi(s,"compositionstart",zS),Vi(s,"compositionend",Wv),Vi(s,"change",Wv))},mounted(s,{value:e}){s.value=e??""},beforeUpdate(s,{value:e,modifiers:{lazy:t,trim:n,number:i}},r){if(s[xn]=Sr(r),s.composing)return;const o=(i||s.type==="number")&&!/^0\d/.test(s.value)?Mf(s.value):s.value,a=e??"";o!==a&&(document.activeElement===s&&s.type!=="range"&&(t||n&&s.value.trim()===a)||(s.value=a))}},ou={deep:!0,created(s,e,t){s[xn]=Sr(t),Vi(s,"change",()=>{const n=s._modelValue,i=Qo(s),r=s.checked,o=s[xn];if(ii(n)){const a=Af(n,i),l=a!==-1;if(r&&!l)o(n.concat(i));else if(!r&&l){const c=[...n];c.splice(a,1),o(c)}}else if(iu(n)){const a=new Set(n);r?a.add(i):a.delete(i),o(a)}else o(Yv(s,r))})},mounted:Uv,beforeUpdate(s,e,t){s[xn]=Sr(t),Uv(s,e,t)}};function Uv(s,{value:e,oldValue:t},n){s._modelValue=e,ii(e)?s.checked=Af(e,n.props.value)>-1:iu(e)?s.checked=e.has(n.props.value):e!==t&&(s.checked=fo(e,Yv(s,!0)))}const jS={created(s,{value:e},t){s.checked=fo(e,t.props.value),s[xn]=Sr(t),Vi(s,"change",()=>{s[xn](Qo(s))})},beforeUpdate(s,{value:e,oldValue:t},n){s[xn]=Sr(n),e!==t&&(s.checked=fo(e,n.props.value))}},Hv={deep:!0,created(s,{value:e,modifiers:{number:t}},n){const i=iu(e);Vi(s,"change",()=>{const r=Array.prototype.filter.call(s.options,o=>o.selected).map(o=>t?Mf(Qo(o)):Qo(o));s[xn](s.multiple?i?new Set(r):r:r[0]),s._assigning=!0,za(()=>{s._assigning=!1})}),s[xn]=Sr(n)},mounted(s,{value:e,modifiers:{number:t}}){Qv(s,e)},beforeUpdate(s,e,t){s[xn]=Sr(t)},updated(s,{value:e,modifiers:{number:t}}){s._assigning||Qv(s,e)}};function Qv(s,e,t){const n=s.multiple,i=ii(e);if(!(n&&!i&&!iu(e))){for(let r=0,o=s.options.length;r<o;r++){const a=s.options[r],l=Qo(a);if(n)if(i){const c=typeof l;c==="string"||c==="number"?a.selected=e.some(u=>String(u)===String(l)):a.selected=Af(e,l)>-1}else a.selected=e.has(l);else if(fo(Qo(a),e)){s.selectedIndex!==r&&(s.selectedIndex=r);return}}!n&&s.selectedIndex!==-1&&(s.selectedIndex=-1)}}function Qo(s){return"_value"in s?s._value:s.value}function Yv(s,e){const t=e?"_trueValue":"_falseValue";return t in s?s[t]:e}const WS={created(s,e,t){au(s,e,t,null,"created")},mounted(s,e,t){au(s,e,t,null,"mounted")},beforeUpdate(s,e,t,n){au(s,e,t,n,"beforeUpdate")},updated(s,e,t,n){au(s,e,t,n,"updated")}};function US(s,e){switch(s){case"SELECT":return Hv;case"TEXTAREA":return Ot;default:switch(e){case"checkbox":return ou;case"radio":return jS;default:return Ot}}}function au(s,e,t,n,i){const o=US(s.tagName,t.props&&t.props.type)[i];o&&o(s,e,t,n)}const HS=["ctrl","shift","alt","meta"],QS={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,e)=>HS.some(t=>s[`${t}Key`]&&!e.includes(t))},Me=(s,e)=>{const t=s._withMods||(s._withMods={}),n=e.join(".");return t[n]||(t[n]=(i,...r)=>{for(let o=0;o<e.length;o++){const a=QS[e[o]];if(a&&a(i,e))return}return s(i,...r)})},YS={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Bs=(s,e)=>{const t=s._withKeys||(s._withKeys={}),n=e.join(".");return t[n]||(t[n]=i=>{if(!("key"in i))return;const r=Of(i.key);if(e.some(o=>o===r||YS[o]===r))return s(i)})},qS=Sf({patchProp:NS},yS);let qv;function GS(){return qv||(qv=B3(qS))}const el=(...s)=>{const e=GS().createApp(...s),{mount:t}=e;return e.mount=n=>{const i=XS(n);if(!i)return;const r=e._component;!Sv(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.innerHTML="";const o=t(i,!1,KS(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function KS(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function XS(s){return Xa(s)?document.querySelector(s):s}/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */let Gv;const lu=s=>Gv=s,Kv=Symbol();function Lf(s){return s&&typeof s=="object"&&Object.prototype.toString.call(s)==="[object Object]"&&typeof s.toJSON!="function"}var tl;(function(s){s.direct="direct",s.patchObject="patch object",s.patchFunction="patch function"})(tl||(tl={}));function sl(){const s=Yg(!0),e=s.run(()=>pe({}));let t=[],n=[];const i=tf({install(r){lu(i),i._a=r,r.provide(Kv,i),r.config.globalProperties.$pinia=i,n.forEach(o=>t.push(o)),n=[]},use(r){return this._a?t.push(r):n.push(r),this},_p:t,_a:null,_e:s,_s:new Map,state:e});return i}const Xv=()=>{};function Jv(s,e,t,n=Xv){s.push(e);const i=()=>{const r=s.indexOf(e);r>-1&&(s.splice(r,1),n())};return!t&&qg()&&b4(i),i}function Yo(s,...e){s.slice().forEach(t=>{t(...e)})}const JS=s=>s();function Ef(s,e){s instanceof Map&&e instanceof Map&&e.forEach((t,n)=>s.set(n,t)),s instanceof Set&&e instanceof Set&&e.forEach(s.add,s);for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t],i=s[t];Lf(i)&&Lf(n)&&s.hasOwnProperty(t)&&!is(n)&&!oo(n)?s[t]=Ef(i,n):s[t]=n}return s}const ZS=Symbol();function e6(s){return!Lf(s)||!s.hasOwnProperty(ZS)}const{assign:Cr}=Object;function t6(s){return!!(is(s)&&s.effect)}function s6(s,e,t,n){const{state:i,actions:r,getters:o}=e,a=t.state.value[s];let l;function c(){a||(t.state.value[s]=i?i():{});const u=x1(t.state.value[s]);return Cr(u,r,Object.keys(o||{}).reduce((d,f)=>(d[f]=tf(ie(()=>{lu(t);const p=t._s.get(s);return o[f].call(p,p)})),d),{}))}return l=Zv(s,c,e,t,n,!0),l}function Zv(s,e,t={},n,i,r){let o;const a=Cr({actions:{}},t),l={deep:!0};let c,u,d=[],f=[],p;const g=n.state.value[s];!r&&!g&&(n.state.value[s]={}),pe({});let S;function k(E){let F;c=u=!1,typeof E=="function"?(E(n.state.value[s]),F={type:tl.patchFunction,storeId:s,events:p}):(Ef(n.state.value[s],E),F={type:tl.patchObject,payload:E,storeId:s,events:p});const K=S=Symbol();za().then(()=>{S===K&&(c=!0)}),u=!0,Yo(d,F,n.state.value[s])}const O=r?function(){const{state:F}=t,K=F?F():{};this.$patch(W=>{Cr(W,K)})}:Xv;function $(){o.stop(),d=[],f=[],n._s.delete(s)}function M(E,F){return function(){lu(n);const K=Array.from(arguments),W=[],A=[];function D(H){W.push(H)}function N(H){A.push(H)}Yo(f,{args:K,name:E,store:w,after:D,onError:N});let Q;try{Q=F.apply(this&&this.$id===s?this:w,K)}catch(H){throw Yo(A,H),H}return Q instanceof Promise?Q.then(H=>(Yo(W,H),H)).catch(H=>(Yo(A,H),Promise.reject(H))):(Yo(W,Q),Q)}}const b={_p:n,$id:s,$onAction:Jv.bind(null,f),$patch:k,$reset:O,$subscribe(E,F={}){const K=Jv(d,E,F.detached,()=>W()),W=o.run(()=>Jt(()=>n.state.value[s],A=>{(F.flush==="sync"?u:c)&&E({storeId:s,type:tl.direct,events:p},A)},Cr({},l,F)));return K},$dispose:$},w=Es(b);n._s.set(s,w);const T=(n._a&&n._a.runWithContext||JS)(()=>n._e.run(()=>(o=Yg()).run(e)));for(const E in T){const F=T[E];if(is(F)&&!t6(F)||oo(F))r||(g&&e6(F)&&(is(F)?F.value=g[E]:Ef(F,g[E])),n.state.value[s][E]=F);else if(typeof F=="function"){const K=M(E,F);T[E]=K,a.actions[E]=F}}return Cr(w,T),Cr(ht(w),T),Object.defineProperty(w,"$state",{get:()=>n.state.value[s],set:E=>{k(F=>{Cr(F,E)})}}),n._p.forEach(E=>{Cr(w,o.run(()=>E({store:w,app:n._a,pinia:n,options:a})))}),g&&r&&t.hydrate&&t.hydrate(w.$state,g),c=!0,u=!0,w}function Or(s,e,t){let n,i;const r=typeof e=="function";typeof s=="string"?(n=s,i=r?t:e):(i=s,n=s.id);function o(a,l){const c=L3();return a=a||(c?wn(Kv,null):null),a&&lu(a),a=Gv,a._s.has(n)||(r?Zv(n,e,i,a):s6(n,i,a)),a._s.get(n)}return o.$id=n,o}/*!
  * vue-router v4.4.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const qo=typeof document<"u";function n6(s){return s.__esModule||s[Symbol.toStringTag]==="Module"}const Mt=Object.assign;function Df(s,e){const t={};for(const n in e){const i=e[n];t[n]=Fn(i)?i.map(s):s(i)}return t}const nl=()=>{},Fn=Array.isArray,ey=/#/g,i6=/&/g,r6=/\//g,o6=/=/g,a6=/\?/g,ty=/\+/g,l6=/%5B/g,c6=/%5D/g,sy=/%5E/g,u6=/%60/g,ny=/%7B/g,d6=/%7C/g,iy=/%7D/g,h6=/%20/g;function If(s){return encodeURI(""+s).replace(d6,"|").replace(l6,"[").replace(c6,"]")}function f6(s){return If(s).replace(ny,"{").replace(iy,"}").replace(sy,"^")}function Rf(s){return If(s).replace(ty,"%2B").replace(h6,"+").replace(ey,"%23").replace(i6,"%26").replace(u6,"`").replace(ny,"{").replace(iy,"}").replace(sy,"^")}function p6(s){return Rf(s).replace(o6,"%3D")}function m6(s){return If(s).replace(ey,"%23").replace(a6,"%3F")}function g6(s){return s==null?"":m6(s).replace(r6,"%2F")}function il(s){try{return decodeURIComponent(""+s)}catch{}return""+s}const v6=/\/$/,y6=s=>s.replace(v6,"");function Ff(s,e,t="/"){let n,i={},r="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),r=e.slice(l+1,a>-1?a:e.length),i=s(r)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=x6(n??e,t),{fullPath:n+(r&&"?")+r+o,path:n,query:i,hash:il(o)}}function _6(s,e){const t=e.query?s(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function ry(s,e){return!e||!s.toLowerCase().startsWith(e.toLowerCase())?s:s.slice(e.length)||"/"}function b6(s,e,t){const n=e.matched.length-1,i=t.matched.length-1;return n>-1&&n===i&&Go(e.matched[n],t.matched[i])&&oy(e.params,t.params)&&s(e.query)===s(t.query)&&e.hash===t.hash}function Go(s,e){return(s.aliasOf||s)===(e.aliasOf||e)}function oy(s,e){if(Object.keys(s).length!==Object.keys(e).length)return!1;for(const t in s)if(!w6(s[t],e[t]))return!1;return!0}function w6(s,e){return Fn(s)?ay(s,e):Fn(e)?ay(e,s):s===e}function ay(s,e){return Fn(e)?s.length===e.length&&s.every((t,n)=>t===e[n]):s.length===1&&s[0]===e}function x6(s,e){if(s.startsWith("/"))return s;if(!s)return e;const t=e.split("/"),n=s.split("/"),i=n[n.length-1];(i===".."||i===".")&&n.push("");let r=t.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")r>1&&r--;else break;return t.slice(0,r).join("/")+"/"+n.slice(o).join("/")}const Mr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var rl;(function(s){s.pop="pop",s.push="push"})(rl||(rl={}));var ol;(function(s){s.back="back",s.forward="forward",s.unknown=""})(ol||(ol={}));function k6(s){if(!s)if(qo){const e=document.querySelector("base");s=e&&e.getAttribute("href")||"/",s=s.replace(/^\w+:\/\/[^\/]+/,"")}else s="/";return s[0]!=="/"&&s[0]!=="#"&&(s="/"+s),y6(s)}const S6=/^[^#]+#/;function C6(s,e){return s.replace(S6,"#")+e}function O6(s,e){const t=document.documentElement.getBoundingClientRect(),n=s.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const cu=()=>({left:window.scrollX,top:window.scrollY});function M6(s){let e;if("el"in s){const t=s.el,n=typeof t=="string"&&t.startsWith("#"),i=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!i)return;e=O6(i,s)}else e=s;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function ly(s,e){return(history.state?history.state.position-e:-1)+s}const Bf=new Map;function A6(s,e){Bf.set(s,e)}function $6(s){const e=Bf.get(s);return Bf.delete(s),e}let T6=()=>location.protocol+"//"+location.host;function cy(s,e){const{pathname:t,search:n,hash:i}=e,r=s.indexOf("#");if(r>-1){let a=i.includes(s.slice(r))?s.slice(r).length:1,l=i.slice(a);return l[0]!=="/"&&(l="/"+l),ry(l,"")}return ry(t,s)+n+i}function P6(s,e,t,n){let i=[],r=[],o=null;const a=({state:f})=>{const p=cy(s,location),g=t.value,S=e.value;let k=0;if(f){if(t.value=p,e.value=f,o&&o===g){o=null;return}k=S?f.position-S.position:0}else n(p);i.forEach(O=>{O(t.value,g,{delta:k,type:rl.pop,direction:k?k>0?ol.forward:ol.back:ol.unknown})})};function l(){o=t.value}function c(f){i.push(f);const p=()=>{const g=i.indexOf(f);g>-1&&i.splice(g,1)};return r.push(p),p}function u(){const{history:f}=window;f.state&&f.replaceState(Mt({},f.state,{scroll:cu()}),"")}function d(){for(const f of r)f();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function uy(s,e,t,n=!1,i=!1){return{back:s,current:e,forward:t,replaced:n,position:window.history.length,scroll:i?cu():null}}function L6(s){const{history:e,location:t}=window,n={value:cy(s,t)},i={value:e.state};i.value||r(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(l,c,u){const d=s.indexOf("#"),f=d>-1?(t.host&&document.querySelector("base")?s:s.slice(d))+l:T6()+s+l;try{e[u?"replaceState":"pushState"](c,"",f),i.value=c}catch(p){console.error(p),t[u?"replace":"assign"](f)}}function o(l,c){const u=Mt({},e.state,uy(i.value.back,l,i.value.forward,!0),c,{position:i.value.position});r(l,u,!0),n.value=l}function a(l,c){const u=Mt({},i.value,e.state,{forward:l,scroll:cu()});r(u.current,u,!0);const d=Mt({},uy(n.value,l,null),{position:u.position+1},c);r(l,d,!1),n.value=l}return{location:n,state:i,push:a,replace:o}}function E6(s){s=k6(s);const e=L6(s),t=P6(s,e.state,e.location,e.replace);function n(r,o=!0){o||t.pauseListeners(),history.go(r)}const i=Mt({location:"",base:s,go:n,createHref:C6.bind(null,s)},e,t);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>e.state.value}),i}function dy(s){return s=location.host?s||location.pathname+location.search:"",s.includes("#")||(s+="#"),E6(s)}function D6(s){return typeof s=="string"||s&&typeof s=="object"}function hy(s){return typeof s=="string"||typeof s=="symbol"}const fy=Symbol("");var py;(function(s){s[s.aborted=4]="aborted",s[s.cancelled=8]="cancelled",s[s.duplicated=16]="duplicated"})(py||(py={}));function Ko(s,e){return Mt(new Error,{type:s,[fy]:!0},e)}function zi(s,e){return s instanceof Error&&fy in s&&(e==null||!!(s.type&e))}const my="[^/]+?",I6={sensitive:!1,strict:!1,start:!0,end:!0},R6=/[.+*?^${}()[\]/\\]/g;function F6(s,e){const t=Mt({},I6,e),n=[];let i=t.start?"^":"";const r=[];for(const c of s){const u=c.length?[]:[90];t.strict&&!c.length&&(i+="/");for(let d=0;d<c.length;d++){const f=c[d];let p=40+(t.sensitive?.25:0);if(f.type===0)d||(i+="/"),i+=f.value.replace(R6,"\\$&"),p+=40;else if(f.type===1){const{value:g,repeatable:S,optional:k,regexp:O}=f;r.push({name:g,repeatable:S,optional:k});const $=O||my;if($!==my){p+=10;try{new RegExp(`(${$})`)}catch(b){throw new Error(`Invalid custom RegExp for param "${g}" (${$}): `+b.message)}}let M=S?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;d||(M=k&&c.length<2?`(?:/${M})`:"/"+M),k&&(M+="?"),i+=M,p+=20,k&&(p+=-8),S&&(p+=-20),$===".*"&&(p+=-50)}u.push(p)}n.push(u)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}t.strict||(i+="/?"),t.end?i+="$":t.strict&&(i+="(?:/|$)");const o=new RegExp(i,t.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let f=1;f<u.length;f++){const p=u[f]||"",g=r[f-1];d[g.name]=p&&g.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const f of s){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of f)if(p.type===0)u+=p.value;else if(p.type===1){const{value:g,repeatable:S,optional:k}=p,O=g in c?c[g]:"";if(Fn(O)&&!S)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const $=Fn(O)?O.join("/"):O;if(!$)if(k)f.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${g}"`);u+=$}}return u||"/"}return{re:o,score:n,keys:r,parse:a,stringify:l}}function B6(s,e){let t=0;for(;t<s.length&&t<e.length;){const n=e[t]-s[t];if(n)return n;t++}return s.length<e.length?s.length===1&&s[0]===80?-1:1:s.length>e.length?e.length===1&&e[0]===80?1:-1:0}function gy(s,e){let t=0;const n=s.score,i=e.score;for(;t<n.length&&t<i.length;){const r=B6(n[t],i[t]);if(r)return r;t++}if(Math.abs(i.length-n.length)===1){if(vy(n))return 1;if(vy(i))return-1}return i.length-n.length}function vy(s){const e=s[s.length-1];return s.length>0&&e[e.length-1]<0}const N6={type:0,value:""},V6=/[a-zA-Z0-9_]/;function z6(s){if(!s)return[[]];if(s==="/")return[[N6]];if(!s.startsWith("/"))throw new Error(`Invalid path "${s}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,n=t;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,l,c="",u="";function d(){c&&(t===0?r.push({type:0,value:c}):t===1||t===2||t===3?(r.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function f(){c+=l}for(;a<s.length;){if(l=s[a++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),t=1):f();break;case 4:f(),t=n;break;case 1:l==="("?t=2:V6.test(l)?f():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),i}function j6(s,e,t){const n=F6(z6(s.path),t),i=Mt(n,{record:s,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function W6(s,e){const t=[],n=new Map;e=by({strict:!1,end:!0,sensitive:!1},e);function i(d){return n.get(d)}function r(d,f,p){const g=!p,S=U6(d);S.aliasOf=p&&p.record;const k=by(e,d),O=[S];if("alias"in d){const b=typeof d.alias=="string"?[d.alias]:d.alias;for(const w of b)O.push(Mt({},S,{components:p?p.record.components:S.components,path:w,aliasOf:p?p.record:S}))}let $,M;for(const b of O){const{path:w}=b;if(f&&w[0]!=="/"){const R=f.record.path,T=R[R.length-1]==="/"?"":"/";b.path=f.record.path+(w&&T+w)}if($=j6(b,f,k),p?p.alias.push($):(M=M||$,M!==$&&M.alias.push($),g&&d.name&&!_y($)&&o(d.name)),wy($)&&l($),S.children){const R=S.children;for(let T=0;T<R.length;T++)r(R[T],$,p&&p.children[T])}p=p||$}return M?()=>{o(M)}:nl}function o(d){if(hy(d)){const f=n.get(d);f&&(n.delete(d),t.splice(t.indexOf(f),1),f.children.forEach(o),f.alias.forEach(o))}else{const f=t.indexOf(d);f>-1&&(t.splice(f,1),d.record.name&&n.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return t}function l(d){const f=Y6(d,t);t.splice(f,0,d),d.record.name&&!_y(d)&&n.set(d.record.name,d)}function c(d,f){let p,g={},S,k;if("name"in d&&d.name){if(p=n.get(d.name),!p)throw Ko(1,{location:d});k=p.record.name,g=Mt(yy(f.params,p.keys.filter(M=>!M.optional).concat(p.parent?p.parent.keys.filter(M=>M.optional):[]).map(M=>M.name)),d.params&&yy(d.params,p.keys.map(M=>M.name))),S=p.stringify(g)}else if(d.path!=null)S=d.path,p=t.find(M=>M.re.test(S)),p&&(g=p.parse(S),k=p.record.name);else{if(p=f.name?n.get(f.name):t.find(M=>M.re.test(f.path)),!p)throw Ko(1,{location:d,currentLocation:f});k=p.record.name,g=Mt({},f.params,d.params),S=p.stringify(g)}const O=[];let $=p;for(;$;)O.unshift($.record),$=$.parent;return{name:k,path:S,params:g,matched:O,meta:Q6(O)}}s.forEach(d=>r(d));function u(){t.length=0,n.clear()}return{addRoute:r,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function yy(s,e){const t={};for(const n of e)n in s&&(t[n]=s[n]);return t}function U6(s){return{path:s.path,redirect:s.redirect,name:s.name,meta:s.meta||{},aliasOf:void 0,beforeEnter:s.beforeEnter,props:H6(s),children:s.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in s?s.components||null:s.component&&{default:s.component}}}function H6(s){const e={},t=s.props||!1;if("component"in s)e.default=t;else for(const n in s.components)e[n]=typeof t=="object"?t[n]:t;return e}function _y(s){for(;s;){if(s.record.aliasOf)return!0;s=s.parent}return!1}function Q6(s){return s.reduce((e,t)=>Mt(e,t.meta),{})}function by(s,e){const t={};for(const n in s)t[n]=n in e?e[n]:s[n];return t}function Y6(s,e){let t=0,n=e.length;for(;t!==n;){const r=t+n>>1;gy(s,e[r])<0?n=r:t=r+1}const i=q6(s);return i&&(n=e.lastIndexOf(i,n-1)),n}function q6(s){let e=s;for(;e=e.parent;)if(wy(e)&&gy(s,e)===0)return e}function wy({record:s}){return!!(s.name||s.components&&Object.keys(s.components).length||s.redirect)}function G6(s){const e={};if(s===""||s==="?")return e;const n=(s[0]==="?"?s.slice(1):s).split("&");for(let i=0;i<n.length;++i){const r=n[i].replace(ty," "),o=r.indexOf("="),a=il(o<0?r:r.slice(0,o)),l=o<0?null:il(r.slice(o+1));if(a in e){let c=e[a];Fn(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function xy(s){let e="";for(let t in s){const n=s[t];if(t=p6(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(Fn(n)?n.map(r=>r&&Rf(r)):[n&&Rf(n)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+t,r!=null&&(e+="="+r))})}return e}function K6(s){const e={};for(const t in s){const n=s[t];n!==void 0&&(e[t]=Fn(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return e}const X6=Symbol(""),ky=Symbol(""),uu=Symbol(""),Nf=Symbol(""),Vf=Symbol("");function al(){let s=[];function e(n){return s.push(n),()=>{const i=s.indexOf(n);i>-1&&s.splice(i,1)}}function t(){s=[]}return{add:e,list:()=>s.slice(),reset:t}}function Ar(s,e,t,n,i,r=o=>o()){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,l)=>{const c=f=>{f===!1?l(Ko(4,{from:t,to:e})):f instanceof Error?l(f):D6(f)?l(Ko(2,{from:e,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=r(()=>s.call(n&&n.instances[i],e,t,c));let d=Promise.resolve(u);s.length<3&&(d=d.then(c)),d.catch(f=>l(f))})}function zf(s,e,t,n,i=r=>r()){const r=[];for(const o of s)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(J6(l)){const u=(l.__vccOpts||l)[e];u&&r.push(Ar(u,t,n,o,a,i))}else{let c=l();r.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const d=n6(u)?u.default:u;o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Ar(p,t,n,o,a,i)()}))}}return r}function J6(s){return typeof s=="object"||"displayName"in s||"props"in s||"__vccOpts"in s}function Sy(s){const e=wn(uu),t=wn(Nf),n=ie(()=>{const l=m(s.to);return e.resolve(l)}),i=ie(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const f=d.findIndex(Go.bind(null,u));if(f>-1)return f;const p=Cy(l[c-2]);return c>1&&Cy(u)===p&&d[d.length-1].path!==p?d.findIndex(Go.bind(null,l[c-2])):f}),r=ie(()=>i.value>-1&&t8(t.params,n.value.params)),o=ie(()=>i.value>-1&&i.value===t.matched.length-1&&oy(t.params,n.value.params));function a(l={}){return e8(l)?e[m(s.replace)?"replace":"push"](m(s.to)).catch(nl):Promise.resolve()}return{route:n,href:ie(()=>n.value.href),isActive:r,isExactActive:o,navigate:a}}const Z6=uf({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Sy,setup(s,{slots:e}){const t=Es(Sy(s)),{options:n}=wn(uu),i=ie(()=>({[Oy(s.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[Oy(s.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const r=e.default&&e.default(t);return s.custom?r:ln("a",{"aria-current":t.isExactActive?s.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:i.value},r)}}});function e8(s){if(!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)&&!s.defaultPrevented&&!(s.button!==void 0&&s.button!==0)){if(s.currentTarget&&s.currentTarget.getAttribute){const e=s.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return s.preventDefault&&s.preventDefault(),!0}}function t8(s,e){for(const t in e){const n=e[t],i=s[t];if(typeof n=="string"){if(n!==i)return!1}else if(!Fn(i)||i.length!==n.length||n.some((r,o)=>r!==i[o]))return!1}return!0}function Cy(s){return s?s.aliasOf?s.aliasOf.path:s.path:""}const Oy=(s,e,t)=>s??e??t,s8=uf({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(s,{attrs:e,slots:t}){const n=wn(Vf),i=ie(()=>s.route||n.value),r=wn(ky,0),o=ie(()=>{let c=m(r);const{matched:u}=i.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=ie(()=>i.value.matched[o.value]);qc(ky,ie(()=>o.value+1)),qc(X6,a),qc(Vf,i);const l=pe();return Jt(()=>[l.value,a.value,s.name],([c,u,d],[f,p,g])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===f&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!Go(u,p)||!f)&&(u.enterCallbacks[d]||[]).forEach(S=>S(c))},{flush:"post"}),()=>{const c=i.value,u=s.name,d=a.value,f=d&&d.components[u];if(!f)return My(t.default,{Component:f,route:c});const p=d.props[u],g=p?p===!0?c.params:typeof p=="function"?p(c):p:null,k=ln(f,Mt({},g,e,{onVnodeUnmounted:O=>{O.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return My(t.default,{Component:k,route:c})||k}}});function My(s,e){if(!s)return null;const t=s(e);return t.length===1?t[0]:t}const n8=s8;function Ay(s){const e=W6(s.routes,s),t=s.parseQuery||G6,n=s.stringifyQuery||xy,i=s.history,r=al(),o=al(),a=al(),l=j4(Mr);let c=Mr;qo&&s.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=Df.bind(null,Z=>""+Z),d=Df.bind(null,g6),f=Df.bind(null,il);function p(Z,ye){let Oe,je;return hy(Z)?(Oe=e.getRecordMatcher(Z),je=ye):je=Z,e.addRoute(je,Oe)}function g(Z){const ye=e.getRecordMatcher(Z);ye&&e.removeRoute(ye)}function S(){return e.getRoutes().map(Z=>Z.record)}function k(Z){return!!e.getRecordMatcher(Z)}function O(Z,ye){if(ye=Mt({},ye||l.value),typeof Z=="string"){const Y=Ff(t,Z,ye.path),ne=e.resolve({path:Y.path},ye),ce=i.createHref(Y.fullPath);return Mt(Y,ne,{params:f(ne.params),hash:il(Y.hash),redirectedFrom:void 0,href:ce})}let Oe;if(Z.path!=null)Oe=Mt({},Z,{path:Ff(t,Z.path,ye.path).path});else{const Y=Mt({},Z.params);for(const ne in Y)Y[ne]==null&&delete Y[ne];Oe=Mt({},Z,{params:d(Y)}),ye.params=d(ye.params)}const je=e.resolve(Oe,ye),wt=Z.hash||"";je.params=u(f(je.params));const V=_6(n,Mt({},Z,{hash:f6(wt),path:je.path})),j=i.createHref(V);return Mt({fullPath:V,hash:wt,query:n===xy?K6(Z.query):Z.query||{}},je,{redirectedFrom:void 0,href:j})}function $(Z){return typeof Z=="string"?Ff(t,Z,l.value.path):Mt({},Z)}function M(Z,ye){if(c!==Z)return Ko(8,{from:ye,to:Z})}function b(Z){return T(Z)}function w(Z){return b(Mt($(Z),{replace:!0}))}function R(Z){const ye=Z.matched[Z.matched.length-1];if(ye&&ye.redirect){const{redirect:Oe}=ye;let je=typeof Oe=="function"?Oe(Z):Oe;return typeof je=="string"&&(je=je.includes("?")||je.includes("#")?je=$(je):{path:je},je.params={}),Mt({query:Z.query,hash:Z.hash,params:je.path!=null?{}:Z.params},je)}}function T(Z,ye){const Oe=c=O(Z),je=l.value,wt=Z.state,V=Z.force,j=Z.replace===!0,Y=R(Oe);if(Y)return T(Mt($(Y),{state:typeof Y=="object"?Mt({},wt,Y.state):wt,force:V,replace:j}),ye||Oe);const ne=Oe;ne.redirectedFrom=ye;let ce;return!V&&b6(n,je,Oe)&&(ce=Ko(16,{to:ne,from:je}),Xe(je,je,!0,!1)),(ce?Promise.resolve(ce):K(ne,je)).catch(fe=>zi(fe)?zi(fe,2)?fe:We(fe):ae(fe,ne,je)).then(fe=>{if(fe){if(zi(fe,2))return T(Mt({replace:j},$(fe.to),{state:typeof fe.to=="object"?Mt({},wt,fe.to.state):wt,force:V}),ye||ne)}else fe=A(ne,je,!0,j,wt);return W(ne,je,fe),fe})}function E(Z,ye){const Oe=M(Z,ye);return Oe?Promise.reject(Oe):Promise.resolve()}function F(Z){const ye=se.values().next().value;return ye&&typeof ye.runWithContext=="function"?ye.runWithContext(Z):Z()}function K(Z,ye){let Oe;const[je,wt,V]=i8(Z,ye);Oe=zf(je.reverse(),"beforeRouteLeave",Z,ye);for(const Y of je)Y.leaveGuards.forEach(ne=>{Oe.push(Ar(ne,Z,ye))});const j=E.bind(null,Z,ye);return Oe.push(j),Ye(Oe).then(()=>{Oe=[];for(const Y of r.list())Oe.push(Ar(Y,Z,ye));return Oe.push(j),Ye(Oe)}).then(()=>{Oe=zf(wt,"beforeRouteUpdate",Z,ye);for(const Y of wt)Y.updateGuards.forEach(ne=>{Oe.push(Ar(ne,Z,ye))});return Oe.push(j),Ye(Oe)}).then(()=>{Oe=[];for(const Y of V)if(Y.beforeEnter)if(Fn(Y.beforeEnter))for(const ne of Y.beforeEnter)Oe.push(Ar(ne,Z,ye));else Oe.push(Ar(Y.beforeEnter,Z,ye));return Oe.push(j),Ye(Oe)}).then(()=>(Z.matched.forEach(Y=>Y.enterCallbacks={}),Oe=zf(V,"beforeRouteEnter",Z,ye,F),Oe.push(j),Ye(Oe))).then(()=>{Oe=[];for(const Y of o.list())Oe.push(Ar(Y,Z,ye));return Oe.push(j),Ye(Oe)}).catch(Y=>zi(Y,8)?Y:Promise.reject(Y))}function W(Z,ye,Oe){a.list().forEach(je=>F(()=>je(Z,ye,Oe)))}function A(Z,ye,Oe,je,wt){const V=M(Z,ye);if(V)return V;const j=ye===Mr,Y=qo?history.state:{};Oe&&(je||j?i.replace(Z.fullPath,Mt({scroll:j&&Y&&Y.scroll},wt)):i.push(Z.fullPath,wt)),l.value=Z,Xe(Z,ye,Oe,j),We()}let D;function N(){D||(D=i.listen((Z,ye,Oe)=>{if(!Te.listening)return;const je=O(Z),wt=R(je);if(wt){T(Mt(wt,{replace:!0}),je).catch(nl);return}c=je;const V=l.value;qo&&A6(ly(V.fullPath,Oe.delta),cu()),K(je,V).catch(j=>zi(j,12)?j:zi(j,2)?(T(j.to,je).then(Y=>{zi(Y,20)&&!Oe.delta&&Oe.type===rl.pop&&i.go(-1,!1)}).catch(nl),Promise.reject()):(Oe.delta&&i.go(-Oe.delta,!1),ae(j,je,V))).then(j=>{j=j||A(je,V,!1),j&&(Oe.delta&&!zi(j,8)?i.go(-Oe.delta,!1):Oe.type===rl.pop&&zi(j,20)&&i.go(-1,!1)),W(je,V,j)}).catch(nl)}))}let Q=al(),H=al(),J;function ae(Z,ye,Oe){We(Z);const je=H.list();return je.length?je.forEach(wt=>wt(Z,ye,Oe)):console.error(Z),Promise.reject(Z)}function be(){return J&&l.value!==Mr?Promise.resolve():new Promise((Z,ye)=>{Q.add([Z,ye])})}function We(Z){return J||(J=!Z,N(),Q.list().forEach(([ye,Oe])=>Z?Oe(Z):ye()),Q.reset()),Z}function Xe(Z,ye,Oe,je){const{scrollBehavior:wt}=s;if(!qo||!wt)return Promise.resolve();const V=!Oe&&$6(ly(Z.fullPath,0))||(je||!Oe)&&history.state&&history.state.scroll||null;return za().then(()=>wt(Z,ye,V)).then(j=>j&&M6(j)).catch(j=>ae(j,Z,ye))}const re=Z=>i.go(Z);let le;const se=new Set,Te={currentRoute:l,listening:!0,addRoute:p,removeRoute:g,clearRoutes:e.clearRoutes,hasRoute:k,getRoutes:S,resolve:O,options:s,push:b,replace:w,go:re,back:()=>re(-1),forward:()=>re(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:H.add,isReady:be,install(Z){const ye=this;Z.component("RouterLink",Z6),Z.component("RouterView",n8),Z.config.globalProperties.$router=ye,Object.defineProperty(Z.config.globalProperties,"$route",{enumerable:!0,get:()=>m(l)}),qo&&!le&&l.value===Mr&&(le=!0,b(i.location).catch(wt=>{}));const Oe={};for(const wt in Mr)Object.defineProperty(Oe,wt,{get:()=>l.value[wt],enumerable:!0});Z.provide(uu,ye),Z.provide(Nf,m1(Oe)),Z.provide(Vf,l);const je=Z.unmount;se.add(Z),Z.unmount=function(){se.delete(Z),se.size<1&&(c=Mr,D&&D(),D=null,l.value=Mr,le=!1,J=!1),je()}}};function Ye(Z){return Z.reduce((ye,Oe)=>ye.then(()=>F(Oe)),Promise.resolve())}return Te}function i8(s,e){const t=[],n=[],i=[],r=Math.max(e.matched.length,s.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(s.matched.find(c=>Go(c,a))?n.push(a):t.push(a));const l=s.matched[o];l&&(e.matched.find(c=>Go(c,l))||i.push(l))}return[t,n,i]}function jf(){return wn(uu)}function Wf(s){return wn(Nf)}const r8={class:"z-10 flex items-center justify-center gap-2 whitespace-nowrap"},ct={__name:"Button",props:{outline:{type:Boolean},a:{type:Boolean,default:!1},color:{type:String,default:"primary"}},setup(s){const e=s,t={primary:{solid:"bg-indigo-600 text-white border-indigo-600 hover:border-indigo-500",outline:"bg-transparent text-indigo-600 border-indigo-600  hover:bg-indigo-600 hover:text-white"},secondary:{solid:"bg-gray-600 text-white border-gray-600 hover:border-gray-500",outline:"bg-transparent text-gray-600 border-gray-400 hover:bg-gray-600 hover:text-white hover:border-gray-600"},danger:{solid:"bg-red-600 text-white border-red-600  hover:border-red-500",outline:"bg-transparent text-red-600 border-red-600 hover:bg-red-600 hover:text-white"}},n=ie(()=>t[e.color]);return(i,r)=>(v(),qe(Wa(s.a?"a":"button"),Ks({class:["relative group px-6 h-10 flex items-center gap-2 border rounded transition focus:ring-0 active:grayscale-100 active:opacity-95 overflow-hidden",{[n.value.solid]:!s.outline,[n.value.outline]:s.outline}]},i.$attrs),{default:P(()=>[h("div",{class:X([{[n.value.outline]:s.outline,"duration-300":s.outline,"bg-white opacity-0 group-hover:opacity-10 duration-200 group-hover:scale-110":!s.outline},"absolute z-0 h-full w-full scale-0 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 transition"])},null,2),h("div",r8,[ti(i.$slots,"default")])]),_:3},16,["class"]))}},o8={class:"flex items-center gap-3"},a8=["innerHTML"],At={__name:"Toggle",props:{modelValue:{type:Boolean},hints:{type:String},locked:{type:Boolean,default:!1}},setup(s){const e=s,t=ie(()=>e.locked&&!formychat_admin_vars.is_premium);return(n,i)=>(v(),C("div",o8,[h("div",Ks({class:"w-fit z-0 flex items-center gap-3 text-slate-800 cursor-pointer group"},n.$attrs,{onClick:i[0]||(i[0]=r=>t.value?null:(e.modelValue=!e.modelValue,n.$emit("update:modelValue",e.modelValue),n.$emit("change",e.modelValue))),class:{"formychat-locked opacity-60":t.value}}),[h("div",{class:X(["rounded-full h-[18px] w-10 cursor-pointer relative transition",{"bg-indigo-600 border border-indigo-600":e.modelValue,"bg-slate-200 border border-slate-200":!e.modelValue}])},[h("span",{class:X(["bg-white ring-1 group-active:scale-95 ring-gray-200 shadow group-hover:shadow-lg w-[22px] h-[22px] rounded-full flex absolute z-0 top-1/2 -translate-y-1/2 scale-110 transition duration-200",{"translate-x-full ":e.modelValue}])},null,2)],2),ti(n.$slots,"default")],16),e.hints?(v(),qe(m(Xs),{key:0},{default:P(()=>[h("div",{innerHTML:e.hints},null,8,a8)]),_:1})):z("",!0),e.locked?(v(),qe(m(Vt),{key:1})):z("",!0)]))}},l8={class:"flex items-center justify-between flex-col-reverse sm:flex-row gap-3"},c8={class:"flex items-center justify-end gap-1 relative text-slate-600"},u8=h("span",{class:"px-2 text-slate-300"},"|",-1),d8={key:0,class:"absolute z-50 w-28 bottom-full mb-2 bg-white divide-y divide-slate-100 shadow-lg flex flex-col child:cursor-pointer child:px-5 child:py-2 child-hover:bg-indigo-50 child-hover:border-indigo-200 child:transition rounded overflow-hidden"},h8=["onClick"],f8={class:"flex items-center justify-start child:cursor-pointer child:px-4 child:h-8 child:flex child:ring-0 child:transition child:items-center rounded overflow-hidden child-hover:opacity-90 child-focus:outline-none"},p8=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 17l-5-5m0 0l5-5m-5 5h12"})],-1)],m8=["onClick"],g8=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 fill-current",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)],v8={__name:"Pagination",props:{page:{type:Number,default:1},perPage:{type:Number,default:20},total:{type:Number,default:0},label:{type:String,default:"widget"},all:{type:String,default:"All"},disabled:{type:[Number,Boolean],default:!1}},emits:["update:page","update:perPage"],setup(s,{emit:e}){const t=s,n=e,i=pe(t.page),r=pe(t.perPage),o=ie(()=>r.value===-1?1:Math.ceil(t.total/r.value)),a=new URL(window.location.href),l=d=>{d<1||d>o.value||(i.value=d,a.searchParams.set("p",d),n("update:page",d),window.history.pushState({},"",a))};os(()=>{const d=a.searchParams.get("p");l(d?Number(d):1)});const c=pe(!1),u=ie(()=>{if(r.value===-1)return t.total;const d=(i.value-1)*r.value,f=Math.min(d+r.value,t.total);return Math.min(t.total,f-d)});return(d,f)=>(v(),C("div",l8,[h("div",c8,[B(" Showing "+q(u.value)+" / "+q(t.total)+" ",1),u8,B(" Per page "),h("div",{class:"outline-none cursor-pointer font-medium text-indigo-500 lowercase",onKeydown:f[0]||(f[0]=Me(p=>c.value=!1,["prevent"])),tabindex:"1",onClick:f[1]||(f[1]=Me(p=>c.value=!c.value,["prevent"])),onBlur:f[2]||(f[2]=p=>c.value=!1)},q(r.value===-1?s.total:Math.min(r.value,s.total)),33),y(ze,{name:"bounce"},{default:P(()=>[c.value?(v(),C("div",d8,[(v(!0),C(Ve,null,ft([t.all,500,100,50,20],p=>(v(),C("span",{onClick:Me(g=>(r.value=Number(p)?p:-1,c.value=!1,d.$emit("update:perPage",p)),["prevent"])},q(p),9,h8))),256))])):z("",!0)]),_:1})]),h("div",f8,[h("a",{href:"#",onClick:f[3]||(f[3]=Me(p=>l(i.value-1),["prevent"])),class:X(["text-gray-700 bg-gray-100 border-r border-slate-50",{"opacity-30 pointer-events-none":i.value<2||i.value>=t.disabled&&t.disabled!==!1}])},p8,2),(v(!0),C(Ve,null,ft(o.value,p=>(v(),C("a",{key:p,href:"javascript:;",class:X(["border-r border-slate-50",{"bg-indigo-600 text-white hover:text-white border-indigo-600":p==i.value,"text-gray-700 bg-gray-100 hover:text-indigo-500 ":p!=i.value,"opacity-30 pointer-events-none":t.disabled!==!1&&p>=t.disabled}]),onClick:Me(g=>l(p),["prevent"])},q(p),11,m8))),128)),h("a",{href:"#",onClick:f[4]||(f[4]=Me(p=>l(i.value+1),["prevent"])),class:X(["text-gray-700 bg-gray-100",{"opacity-30 pointer-events-none":i.value>=o.value||i.value>=t.disabled&&t.disabled!==!1}])},g8,2)])]))}},y8={class:"inline-flex items-center justify-center cursor-pointer text-slate-600"},_8=[h("path",{d:"M6 10.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5m-2-3a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-11a.5.5 0 0 1-.5-.5"},null,-1)],Uf={__name:"Sort",props:{asc:{type:Boolean,default:!1}},setup(s){return(e,t)=>(v(),C("div",y8,[(v(),C("svg",{xmlns:"http://www.w3.org/2000/svg",class:X(["fill-current w-4 h-4 transition duration-300",{"rotate-180":s.asc}]),viewBox:"0 0 16 16"},_8,2))]))}},Nt=(s,e)=>{const t=s.__vccOpts||s;for(const[n,i]of e)t[n]=i;return t},b8={};function w8(s,e){return v(),C("div",Ks({class:"border-2 w-5 h-5 rounded-full border-r-transparent border-current transition animate-spin"},s.$attrs),null,16)}const Bn=Nt(b8,[["render",w8]]),x8=["type","id"],Gt=Nt({__name:"Text",props:{modelValue:{type:Number},type:{type:String,default:"text"},error:{type:Boolean,default:!1},id:{type:String,default:""},white:{type:Boolean,default:!1}},setup(s){const e=s,t=pe(!1),n=ie(()=>{const i=eu();return e.id||i.parent.props.id||"formychat-element-"+i.parent.uid});return(i,r)=>xt((v(),C("input",Ks({type:e.type,onFocus:r[0]||(r[0]=o=>t.value=!0),onBlur:r[1]||(r[1]=o=>t.value=!1),"onUpdate:modelValue":r[2]||(r[2]=o=>e.modelValue=o),class:"h-10 focus:ring-[2px] text-[14px] shadow-sm hover:shadow border-0 ring-1 relative appearance-none focus:outline-none ring-gray-200 focus:bg-white transition w-full px-4 rounded text-gray-700 disabled:opacity-60 disabled:bg-gray-200 disabled:ring-gray-300 placeholder:text-gray-400 placeholder:text-[13px]"},i.$attrs,{id:n.value,class:{"bg-gray-50":!e.white,"bg-white":e.white,"focus:ring-indigo-400":!e.error,"focus:ring-red-500":e.error}}),null,16,x8)),[[WS,e.modelValue]])}},[["__scopeId","data-v-2bff511b"]]),k8=[h("path",{d:"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16m.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2"},null,-1)],Xs={__name:"Tooltip",props:{position:{type:String,default:"top"}},setup(s){const e=pe(null),t=pe(!1),n=(r=500)=>{clearTimeout(e.value),e.value=setTimeout(()=>{t.value=!0,clearTimeout(e.value)},r)},i=(r=500)=>{clearTimeout(e.value),e.value=setTimeout(()=>{t.value=!1,clearTimeout(e.value)},r)};return(r,o)=>(v(),C("div",{class:"w-content relative",onMouseleave:o[3]||(o[3]=a=>i(300))},[h("div",Ks(r.$attrs,{onMouseenter:o[1]||(o[1]=a=>n(800))}),[r.$slots.content?ti(r.$slots,"default",{key:0}):(v(),C("svg",{key:1,onClick:o[0]||(o[0]=Me(a=>t.value?i(0):n(0),["prevent"])),tabindex:"1",xmlns:"http://www.w3.org/2000/svg",class:"outline-none fill-current w-4 cursor-pointer opacity-40 hover:opacity-100 transition",viewBox:"0 0 16 16"},k8))],16),y(ze,{name:"slide"},{default:P(()=>[t.value?(v(),C("div",{key:0,onClick:o[2]||(o[2]=Me(()=>{},["stop"])),class:"absolute font-normal z-30 top-1/2 -translate-y-1/2 left-8 text-sm w-max min-w-xs max-w-sm py-2 px-4 sm:px-6 sm:py-4 shadow-lg rounded-md bg-slate-800 text-slate-100 before:content-[''] before:absolute before:top-1/2 before:-translate-y-1/2 before:bg-slate-800 before:w-6 before:h-6 before:rotate-45 before:right-full before:translate-x-5"},[ti(r.$slots,r.$slots.content?"content":"default")])):z("",!0)]),_:3})],32))}},S8=h("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",class:"fill-current w-[11px] -mt-0.5",viewBox:"0 0 30 30"},[h("path",{d:"M 15 2 C 11.145666 2 8 5.1456661 8 9 L 8 11 L 6 11 C 4.895 11 4 11.895 4 13 L 4 25 C 4 26.105 4.895 27 6 27 L 24 27 C 25.105 27 26 26.105 26 25 L 26 13 C 26 11.895 25.105 11 24 11 L 22 11 L 22 9 C 22 5.2715823 19.036581 2.2685653 15.355469 2.0722656 A 1.0001 1.0001 0 0 0 15 2 z M 15 4 C 17.773666 4 20 6.2263339 20 9 L 20 11 L 10 11 L 10 9 C 10 6.2263339 12.226334 4 15 4 z"})],-1),C8=["innerHTML"],Vt={__name:"ProBadge",props:{text:{type:String,default:"Ultimate"}},setup(s){const e=s,t=ie(()=>!formychat_admin_vars.is_premium);return(n,i)=>t.value?(v(),qe(ct,Ks({key:0,class:["formychat-locked",{"rounded-full px-0 w-5 h-5 flex items-center justify-center":!e.text,"px-1.5 h-6 text-[12px] child:gap-1 rounded-2xl text-xs font-medium":e.text}]},n.$attrs),{default:P(()=>[S8,e.text?(v(),C("span",{key:0,innerHTML:e.text},null,8,C8)):z("",!0)]),_:1},16,["class"])):z("",!0)}},O8={class:"flex flex-col gap-3"},M8={class:"flex items-center justify-between"},A8={class:"font-bold text-base text-gray-700 tracking-wide border-l-4 pl-3 border-indigo-600"},$8={key:1},T8=[h("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"},null,-1)],ji={__name:"Group",props:{title:{type:String,default:"Title"},gap:{type:Boolean,default:!0}},setup(s){const e=s,t=pe(!0);return(n,i)=>(v(),C("div",O8,[h("div",M8,[h("h3",A8,[n.$slots.title?ti(n.$slots,"title",{key:0}):(v(),C("span",$8,q(e.title),1))]),h("div",{onClick:i[0]||(i[0]=r=>t.value=!t.value),class:"w-8 h-8 hover:bg-gray-100 transition cursor-pointer flex items-center justify-center rounded-sm"},[(v(),C("svg",{class:X([{"rotate-180":t.value},"fill-current w-5 transition duration-200"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},T8,2))])]),y(ze,{name:"slide"},{default:P(()=>[t.value?(v(),C("div",Ks({key:0,class:["rounded-sm flex flex-col gap-5",{"bg-slate-50 p-5":e.gap}]},n.$attrs),[ti(n.$slots,"default")],16)):z("",!0)]),_:3})]))}},P8={class:"w-fit ring-inset font-medium p-1 h-11 ring-1 gap-0 ring-slate-200 bg-white rounded shadow-sm"},L8=["onClick"],E8={key:0,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",class:"fill-current w-[14px]",viewBox:"0 0 30 30"},D8=[h("path",{d:"M 15 2 C 11.145666 2 8 5.1456661 8 9 L 8 11 L 6 11 C 4.895 11 4 11.895 4 13 L 4 25 C 4 26.105 4.895 27 6 27 L 24 27 C 25.105 27 26 26.105 26 25 L 26 13 C 26 11.895 25.105 11 24 11 L 22 11 L 22 9 C 22 5.2715823 19.036581 2.2685653 15.355469 2.0722656 A 1.0001 1.0001 0 0 0 15 2 z M 15 4 C 17.773666 4 20 6.2263339 20 9 L 20 11 L 10 11 L 10 9 C 10 6.2263339 12.226334 4 15 4 z"},null,-1)],Nn={__name:"Tabs",props:{options:{type:Object,default:()=>({one:"One",two:"Two",three:"Three"})},modelValue:{type:String,default:"one"},width:{type:String,default:"85px"},locked:{type:Array,default:()=>["custom"]}},emits:["update:modelValue","change"],setup(s,{emit:e}){const t=s,n=ie(()=>{const l=Object.keys(t.options).indexOf(t.modelValue);return l==0?`transform: translateX(0); width: ${t.width};`:`transform: translateX(${l*100}%); width: ${t.width};`}),i=e,r=l=>{t.locked.includes(l)&&a.value||(t.modelValue=l,i("update:modelValue",l),i("change",l))},o=l=>{const c=Object.keys(t.options),u=c.indexOf(t.modelValue);if(l=="next"&&u<c.length-1){if(t.locked.includes(c[u+1]))return o("next");r(c[u+1])}else if(l=="prev"&&u>0){if(t.locked.includes(c[u-1]))return o("prev");r(c[u-1])}},a=ie(()=>!formychat_admin_vars.is_premium);return(l,c)=>(v(),C("div",P8,[h("div",{class:"relative text-slate-500 flex items-center justify-center h-full child:flex child:items-center child:justify-center cursor-pointer child:transition overflow-hidden",tabindex:"1",onKeydown:[c[0]||(c[0]=Bs(u=>o("next"),["right"])),c[1]||(c[1]=Bs(u=>o("prev"),["left"]))]},[(v(!0),C(Ve,null,ft(t.options,(u,d)=>(v(),C("div",{key:d,class:X(["z-10 h-full transition outline-none flex items-center gap-1",{"text-white":t.modelValue==d,"hover:text-indigo-600":t.modelValue!==d&&!t.locked.includes(d),"opacity-60 formychat-locked":t.locked.includes(d)&&a.value}]),style:et({width:t.width}),onClick:Me(f=>r(d),["prevent"])},[t.locked.includes(d)&&a.value?(v(),C("svg",E8,D8)):z("",!0),B(" "+q(u),1)],14,L8))),128)),h("div",{class:"absolute rounded bg-indigo-600 left-0 z-0 h-full top-0 transition-all duration-200",style:et(n.value)},null,4)],32)]))}},I8=["for"],Pe={__name:"InputLabel",props:{hints:{type:String,default:""},for:{type:String,default:""},locked:{type:Boolean,default:!1}},setup(s){const e=s,t=ie(()=>{const i=eu();return e.for||i.parent.props.id||"formychat-element-"+i.parent.uid}),n=ie(()=>e.locked&&!formychat_admin_vars.is_premium?"formychat-locked child:pointer-events-none opacity-60":null);return(i,r)=>(v(),C("div",Ks({class:"flex items-center gap-3 w-fit"},i.$attrs),[h("label",{class:X(["font-normal text-slate-600 tracking-wide text-sm",n.value]),for:t.value},[ti(i.$slots,"default")],10,I8),e.hints?(v(),qe(Xs,{key:0},{default:P(()=>[B(q(e.hints),1)]),_:1})):z("",!0),n.value?(v(),qe(Vt,{key:1})):z("",!0)],16))}},R8={key:0,class:"absolute right-0 top-0"},_e=Nt({__name:"InputGroup",props:{locked:{type:Boolean,default:!1},fit:{type:Boolean,default:!1},condition:{default:!0},blur:{type:Boolean,default:!1}},setup(s){const e=s,t=ie(()=>e.locked&&!formychat_admin_vars.is_premium?"formychat-locked child:pointer-events-none opacity-60":null);return(n,i)=>(v(),qe(ze,{name:"no"},{default:P(()=>[e.condition?(v(),C("div",{key:0,class:X(["relative w-full",{"opacity-50 pointer-events-none":e.blur}])},[h("div",Ks(n.$attrs,{class:["flex flex-col gap-2",{"opacity-60 pointer-events-none w-fit":t.value,"w-fit":s.fit}]}),[ti(n.$slots,"default",{},void 0,!0)],16),t.value?(v(),C("div",R8,[y(Vt)])):z("",!0)],2)):z("",!0)]),_:3}))}},[["__scopeId","data-v-6f8ab5ea"]]),F8={class:"flex items-center child:shadow-sm child-hover:shadow gap-4 w-fit child:w-[70px] child:h-[70px] child:overflow-hidden child:rounded child:flex child:items-center child:bg-gray-100 child:justify-center child:cursor-pointer child:transition-all child-hover:bg-white"},B8=["src"],N8=["src"],V8={key:1,xmlns:"http://www.w3.org/2000/svg",class:"w-1/3 fill-current",viewBox:"0 0 16 16"},z8=[h("path",{d:"M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"},null,-1),h("path",{d:"M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z"},null,-1)],j8={key:2,class:"translate-y-20 transition-all group-hover:translate-y-0 absolute bottom-0 w-full bg-white flex items-center justify-center py-1"},W8=[h("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"},null,-1)],U8={key:3,class:"rounded group-hover:flex hidden justify-center items-center absolute left-0 top-0 w-full h-full formychat-locked"},H8=h("div",{class:"bg-white absolute left-0 top-0 w-full h-full rounded z-0 opacity-50"},null,-1),du={__name:"IconUploader",props:{modelValue:{type:String,default:""},custom:{type:String,default:""},default:{type:String,default:()=>formychat_admin_vars.public+"/images/whatsapp.svg"},locked:{type:Boolean,default:!1}},emits:["update:modelValue","change","update:custom"],setup(s,{emit:e}){const t=s,n=e,i=pe(t.custom),r=pe(t.modelValue||t.default),o=u=>{r.value=u,n("update:modelValue",u),n("change",u)},a=()=>{c.value||(wp.media.editor.send.attachment=function(u,d){i.value=d.url,n("update:custom",d.url),o(i.value)},wp.media.editor.open())},l=ie(()=>r.value==t.default);os(()=>{t.modelValue||o(t.default)});const c=ie(()=>t.locked&&!formychat_admin_vars.is_premium);return(u,d)=>(v(),C("div",F8,[h("div",{class:X(["ring-1 ring-gray-200",{"ring-indigo-500 ring-[2px]":l.value}]),onClick:d[0]||(d[0]=f=>o(t.default))},[h("img",{class:"h-auto w-[80%]",src:t.default,alt:""},null,8,B8)],2),h("div",{onClick:d[2]||(d[2]=Me(f=>i.value?o(i.value):a(),["prevent"])),class:X([{"ring-indigo-500 ring-[2px]":!l.value},"group relative ring-1 ring-gray-200 text-gray-500 hover:text-gray-700"])},[i.value?(v(),C("img",{key:0,class:"h-auto w-full",src:i.value,alt:""},null,8,N8)):(v(),C("svg",V8,z8)),i.value?(v(),C("div",j8,[(v(),C("svg",{onClick:d[1]||(d[1]=Me(f=>(o(t.default),i.value="",u.$emit("update:custom","")),["stop"])),xmlns:"http://www.w3.org/2000/svg",class:"text-red-300 hover:text-red-600 transition fill-current w-4",viewBox:"0 0 16 16"},W8))])):z("",!0),c.value?(v(),C("div",U8,[H8,y(Vt,{text:""})])):z("",!0)],2)]))}},Q8=["innerHTML"],Y8={key:0,xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4",viewBox:"0 0 16 16"},q8=[h("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"},null,-1)],G8={key:0},K8={class:"sticky top-0"},X8=["data-value","onClick"],J8=["innerHTML"],Z8={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 fill-indigo-500 text-white",viewBox:"0 0 16 16"},eC=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],tC={key:1},sC={class:"py-2.5 px-5 text-sm text-slate-500"},nC={class:"sticky top-0"},iC=["data-value","onClick"],rC=["innerHTML"],oC={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 fill-indigo-500 text-white",viewBox:"0 0 16 16"},aC=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],lC={key:1},cC={class:"py-2.5 px-5 text-sm text-slate-500"},uC=["name","value"],$t={__name:"Select",props:{options:{type:Array,default:()=>[]},modelValue:{type:[String,Number],default:""},placeholder:{type:String,default:"Select an option"},search:{type:String,default:"Search.."},not_found:{type:String,default:"No results found"},cursor:{type:Boolean,default:!0},direction:{type:String,default:"down"},white:{type:Boolean,default:!1},excerpt:{type:Number,default:50},name:{type:String,default:""},default:{type:String,default:""},size:{type:String,default:"w-fit max-w-64"},readonly:{type:Boolean,default:!1},teleport:{type:Boolean,default:!1}},emits:["update:modelValue","select","locked"],setup(s,{emit:e}){const t=s,n=pe(t.modelValue||""),i=e,r=($,M)=>{if(M){i("locked",$),S();return}t.modelValue=$,n.value=$,i("update:modelValue",$),i("select",$),S()},o=($,M="...")=>$.length>t.excerpt?$.substring(0,t.excerpt)+M:$,a=pe(!1),l=pe(""),c=ie(()=>{const $=t.options.map(b=>({...b,name:b.name||b.label,label:b.label?o(b.label):null,locked:b.locked||!1})),M=l.value.toLowerCase();return M?$.filter(b=>{const w=String(b.value||"").toLowerCase(),R=String(b.label||"").toLowerCase(),T=String(b.name||"").toLowerCase();return w.includes(M)||R.includes(M)||T.includes(M)}):$}),u=ie(()=>{const $=t.options.find(b=>String(b.value)===String(t.modelValue)),M=$?$.name||$.label||$.value:t.placeholder;return o(String(M))}),d=pe(null),f=pe({top:0,left:0,width:0}),p=()=>{if(!t.teleport||!O.value)return;const $=O.value.getBoundingClientRect(),M=288;t.direction==="up"?f.value={top:$.top+window.scrollY-M-4,left:$.left+window.scrollX,width:$.width}:f.value={top:$.bottom+window.scrollY+4,left:$.left+window.scrollX,width:$.width}},g=()=>{a.value=!0,t.teleport&&za(()=>{p()}),setTimeout(()=>{if(d.value){const $=d.value.querySelector("input");$&&$.focus();const M=d.value.querySelector(`[data-value="${t.modelValue}"]`);M&&M.scrollIntoView({block:"nearest",inline:"nearest"})}},50)},S=()=>{a.value=!1,l.value=""},k=($="prev")=>{if(!t.options||t.options.length===0)return;const M=t.options.map(T=>T.value),b=M.indexOf(n.value);let w=$==="prev"?b-1:b+1;if(w<0&&(w=M.length-1),w>=M.length&&(w=0),t.options[w].locked){k($);return}n.value=M[w];const R=d.value.querySelector(`[data-value="${n.value}"]`);R&&R.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},O=pe(null);return os(()=>{setTimeout(()=>{window.addEventListener("click",$=>{O.value&&!O.value.contains($.target)&&S()})},50),t.default&&(t.modelValue=t.default)}),($,M)=>(v(),C("div",{class:X(["relative outline-none",{"z-20":a.value,"pointer-events-none opacity-75":t.readonly}]),ref_key:"selectbox",ref:O,onKeypress:[M[9]||(M[9]=Bs(b=>a.value?null:g(),["enter"])),M[10]||(M[10]=Bs(b=>a.value?null:g(),["space"]))],tabindex:"0"},[h("div",Ks($.$attrs,{onClick:M[0]||(M[0]=b=>a.value?S():g()),tabindex:"1",class:["h-11 flex focus:border-[2px] focus:border-indigo-400 items-center justify-center gap-2 px-4 border rounded border-slate-200 cursor-pointer hover:bg-white transition",{"hover:shadow bg-gray-50":!t.white,"bg-white":t.white,[t.size]:t.size}]}),[h("div",{class:"flex items-center gap-2 w-full whitespace-nowrap",innerHTML:u.value},null,8,Q8),t.cursor?(v(),C("svg",Y8,q8)):z("",!0)],16),t.teleport?z("",!0):(v(),qe(ze,{key:0,name:t.direction==="up"?"form_slide":"slide"},{default:P(()=>[a.value?(v(),C("div",G8,[h("div",{ref_key:"dropdown",ref:d,onKeydown:[Bs(S,["esc"]),M[2]||(M[2]=Bs(Me(b=>k("prev"),["prevent"]),["up"])),M[3]||(M[3]=Bs(Me(b=>k("next"),["prevent"]),["down"])),M[4]||(M[4]=Bs(Me(b=>a.value?r(n.value):g,["prevent"]),["enter"]))],tabindex:"0",class:X(["absolute text-sm max-h-72 overflow-y-scroll scrollbar-thin rounded translate-y-1 scrollbar-track-slate-50 scrollbar-thumb-indigo-500 bg-white shadow-lg flex flex-col rounded-b-sm overflow-hidden border border-slate-200 z-40",{"bottom-full":t.direction!=="down","top-full":t.direction==="down",[t.size]:t.size}])},[h("div",K8,[t.search?(v(),qe(Gt,{key:0,modelValue:l.value,"onUpdate:modelValue":M[1]||(M[1]=b=>l.value=b),placeholder:t.search,type:"search",class:"text-sm mb-0.5 h-[40px] rounded-none"},null,8,["modelValue","placeholder"])):z("",!0)]),c.value.length?(v(!0),C(Ve,{key:0},ft(c.value,b=>(v(),C("div",{key:b.value,"data-value":b.value,onClick:w=>r(b.value,b.locked),class:X(["first:mt-11 py-2.5 px-5 mb-px cursor-pointer transition outline-none border-b border-gray-50 flex items-center justify-between gap-2 child:whitespace-nowrap",{"bg-gray-50 text-indigo-600":n.value===b.value,"hover:bg-gray-50 text-slate-600":n.value!==b.value&&!b.locked,"bg-gray-100 -z-10 formychat-locked":b.locked}])},[h("div",{class:X(["flex items-center gap-3",{"opacity-100":b.locked}]),innerHTML:b.label},null,10,J8),y(ze,{name:"bounce"},{default:P(()=>[n.value==b.value?(v(),C("svg",Z8,eC)):z("",!0)]),_:2},1024),b.locked?(v(),qe(Vt,{key:0,text:""})):z("",!0)],10,X8))),128)):(v(),C("div",tC,[h("div",sC,q(s.not_found),1)]))],34)])):z("",!0)]),_:1},8,["name"])),t.teleport?(v(),qe(H3,{key:1,to:"body"},[y(ze,{name:t.direction==="up"?"form_slide":"slide"},{default:P(()=>[a.value?(v(),C("div",{key:0,ref_key:"dropdown",ref:d,onKeydown:[Bs(S,["esc"]),M[6]||(M[6]=Bs(Me(b=>k("prev"),["prevent"]),["up"])),M[7]||(M[7]=Bs(Me(b=>k("next"),["prevent"]),["down"])),M[8]||(M[8]=Bs(Me(b=>a.value?r(n.value):g,["prevent"]),["enter"]))],tabindex:"0",class:"fixed text-sm max-h-72 overflow-y-scroll scrollbar-thin rounded scrollbar-track-slate-50 scrollbar-thumb-indigo-500 bg-white shadow-lg flex flex-col rounded-b-sm overflow-hidden border border-slate-200 z-[9999]",style:et({top:f.value.top+"px",left:f.value.left+"px",width:f.value.width+"px"})},[h("div",nC,[t.search?(v(),qe(Gt,{key:0,modelValue:l.value,"onUpdate:modelValue":M[5]||(M[5]=b=>l.value=b),placeholder:t.search,type:"search",class:"text-sm mb-0.5 h-[40px] rounded-none"},null,8,["modelValue","placeholder"])):z("",!0)]),c.value.length?(v(!0),C(Ve,{key:0},ft(c.value,b=>(v(),C("div",{key:b.value,"data-value":b.value,onClick:w=>r(b.value,b.locked),class:X(["first:mt-11 py-2.5 px-5 mb-px cursor-pointer transition outline-none border-b border-gray-50 flex items-center justify-between gap-2 child:whitespace-nowrap",{"bg-gray-50 text-indigo-600":n.value===b.value,"hover:bg-gray-50 text-slate-600":n.value!==b.value&&!b.locked,"bg-gray-100 -z-10 formychat-locked":b.locked}])},[h("div",{class:X(["flex items-center gap-3",{"opacity-100":b.locked}]),innerHTML:b.label},null,10,rC),y(ze,{name:"bounce"},{default:P(()=>[n.value==b.value?(v(),C("svg",oC,aC)):z("",!0)]),_:2},1024),b.locked?(v(),qe(Vt,{key:0,text:""})):z("",!0)],10,iC))),128)):(v(),C("div",lC,[h("div",cC,q(s.not_found),1)]))],36)):z("",!0)]),_:1},8,["name"])])):z("",!0),h("input",{type:"hidden",name:t.name,value:t.modelValue},null,8,uC)],34))}},dC=["id"],Wi=Nt({__name:"Textarea",props:{modelValue:{type:Number},error:{type:Boolean,default:!1},white:{type:Boolean,default:!1}},setup(s){const e=s,t=pe(!1),n=ie(()=>{const i=eu();return e.id||i.parent.props.id||"formychat-element-"+i.parent.uid});return(i,r)=>xt((v(),C("textarea",Ks({onFocus:r[0]||(r[0]=o=>t.value=!0),onBlur:r[1]||(r[1]=o=>t.value=!1),"onUpdate:modelValue":r[2]||(r[2]=o=>e.modelValue=o),class:"text-[14px] relative shadow-sm hover:shadow resize-y focus:outline-none border-0 ring-1 ring-gray-200 focus:bg-white focus:ring-[2px] focus:ring-indigo-400 transition w-full px-4 rounded text-gray-700 disabled:opacity-60 disabled:bg-gray-200 disabled:ring-gray-300 placeholder:text-gray-400 placeholder:text-[13px]"},i.$attrs,{id:n.value,class:{"bg-gray-50":!e.white,"bg-white":e.white}}),null,16,dC)),[[Ot,e.modelValue]])}},[["__scopeId","data-v-7fb13cf4"]]),Ns={__name:"ColorPicker",props:{modelValue:{type:String,default:"#000000"}},setup(s){const t=pe(s.modelValue||"#000000");return(n,i)=>(v(),C("label",Ks({tabindex:"2",class:"flex items-center justify-between gap-3 shadow-sm hover:shadow whitespace-nowrap ring-1 focus:ring-[2px] focus:ring-indigo-400 ring-gray-200 rounded hover:bg-white transition h-10 cursor-pointer bg-gray-50 px-5"},n.$attrs),[h("div",{class:"w-5 h-5 rounded-full shadow-sm",style:et({background:t.value})},null,4),h("div",null,[ti(n.$slots,"default")]),xt(h("input",{type:"color","onUpdate:modelValue":i[0]||(i[0]=r=>t.value=r),class:"w-0 h-0 opacity-0",onInput:i[1]||(i[1]=r=>n.$emit("update:modelValue",t.value))},null,544),[[Ot,t.value]])],16))}},hC={class:"bounce-enter-active bg-white ring-1 ring-gray-200 text-gray-600 hover:ring-gray-300 shadow-sm h-8 pl-2 rounded flex items-center justify-between gap-2"},fC=["onClick"],pC=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"})],-1)],mC=["placeholder"],gC={key:0},vC={class:"absolute z-30 opacity-100 translate-y-1 w-72 bg-white shadow-lg rounded border-gray-200 max-h-56 overflow-y-scroll scrollbar-thin scrollbar-track-slate-50 scrollbar-thumb-indigo-500"},yC=["onClick"],_C={key:0,d:"M10.97 4.97a.75.75 0 0 1 1.07 1.05l-3.99 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425z"},bC={key:1,d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"},wC={key:1,class:"px-4 py-3 text-sm text-gray-400"},Xo={__name:"MultiSelect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]}},emits:["update:modelValue","select"],setup(s,{emit:e}){const t=s,n=pe(""),i=pe(null),r=ie(()=>{const S=n.value.toLowerCase();return S===""?t.options:t.options.filter(k=>k.label.toString().toLowerCase().includes(S)||k.value.toString().toLowerCase().includes(S))}),o=ie(()=>t.options.filter(S=>t.modelValue.includes(S.value))),a=e,l=S=>{t.modelValue.includes(S)?t.modelValue=t.modelValue.filter(k=>k!==S):(t.modelValue.push(S),n.value="",f()),a("update:modelValue",t.modelValue),a("select",t.modelValue)},c=pe(!1),u=()=>{c.value=!0,f()},d=()=>{c.value=!1,n.value=""},f=()=>{setTimeout(()=>{i.value.focus()},50)},p=pe(null);document.addEventListener("click",S=>{p.value&&!p.value.contains(S.target)&&d()});const g=()=>{n.value===""&&t.modelValue.length&&(t.modelValue=t.modelValue.slice(0,-1),a("update:modelValue",t.modelValue),a("select",t.modelValue))};return(S,k)=>(v(),C("div",{class:X(["relative w-full outline-none",{"z-10":c.value}]),ref_key:"multiselect",ref:p,tabindex:"0",onKeydown:Bs(d,["esc"])},[h("div",{onClick:k[1]||(k[1]=O=>c.value?f():u()),class:"w-full ring-1 ring-gray-100 p-1.5 bg-white hover:shadow-sm rounded hover:ring-gray-300 flex items-center justify-start gap-1.5 flex-wrap"},[o.value.length?(v(!0),C(Ve,{key:0},ft(o.value,O=>(v(),C("div",hC,[B(q(O.label)+" ",1),h("div",{onClick:Me($=>l(O.value),["prevent"]),class:"h-full w-12 flex items-center justify-center cursor-pointer text-gray-400 hover:text-red-500 transition active:scale-75 outline-none",tabindex:"1"},pC,8,fC)]))),256)):z("",!0),c.value||!o.value.length?xt((v(),C("input",{key:1,type:"text",onKeydown:Bs(g,["delete"]),"onUpdate:modelValue":k[0]||(k[0]=O=>n.value=O),ref_key:"searchInput",ref:i,contenteditable:"true",class:X(["outline-none border-0 h-8 focus:ring-0 placeholder:text-sm placeholder:text-gray-400",{"w-20":o.value.length,"w-fit":!o.value.length}]),placeholder:o.value.length>0?"":"Select pages"},null,42,mC)),[[Ot,n.value]]):z("",!0)]),y(ze,{name:"slide"},{default:P(()=>[c.value?(v(),C("div",gC,[h("div",vC,[r.value.length?(v(!0),C(Ve,{key:0},ft(r.value,O=>(v(),C("div",{onClick:Me($=>l(O.value),["prevent"]),class:X(["flex group items-center justify-between cursor-pointer px-4 py-2.5 text-sm hover:bg-gray-50 transition mb-px border-b border-gray-50",{"text-indigo-600":t.modelValue.includes(O.value)}])},[B(q(O.label||O.value)+" ",1),(v(),C("svg",{class:X([{"text-indigo-500":t.modelValue.includes(O.value),"text-transparent group-hover:text-gray-600":!t.modelValue.includes(O.value)},"fill-current w-5 transition-all"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},[t.modelValue.includes(O.value)?(v(),C("path",_C)):(v(),C("path",bC))],2))],10,yC))),256)):(v(),C("div",wC,"No page found"))])])):z("",!0)]),_:1})],34))}},xC=["contenteditable"],Vs=Nt({__name:"Editable",props:{modelValue:String,placeholder:String,readonly:Boolean},emits:"update:modelValue",setup(s,{emit:e}){const t=s;return(n,i)=>t.modelValue?(v(),C("span",Ks({key:0,class:"w-fit outline-none",onInput:i[0]||(i[0]=r=>n.$emit("update:modelValue",r.target.innerText)),contenteditable:!t.readonly},n.$attrs),q(t.modelValue||t.placeholder),17,xC)):z("",!0)}},[["__scopeId","data-v-8abdf9de"]]),kC={},SC={class:"inline-flex items-center justify-center px-1.5 h-6 text-[12px] rounded-2xl border border-green-600 text-green-600"},CC=h("span",null,"New",-1);function OC(s,e){return v(),C("div",SC,[s.$slots.default?ti(s.$slots,"default",{key:0}):z("",!0),CC])}const hu=Nt(kC,[["render",OC]]),$r=Or("useUpgrade",()=>{const s=pe(!1),e=ie(()=>s.value);return{open:s,isShown:e,show:()=>{s.value=!0},hide:()=>{s.value=!1}}}),MC={key:0,class:"z-50"},AC={key:0,class:"flex items-center h-full w-full justify-center z-50"},$C={class:"flex items-center justify-center"},TC={class:"fixed w-full max-w-lg flex flex-col gap-4 h-auto top-1/2 -translate-y-1/2 z-50 rounded-xl shadow-lg drop-shadow-lg"},PC=["src"],LC=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)],EC={class:"absolute bottom-4 left-1/2 -translate-x-1/2"},DC={key:0,class:"flex items-center justify-center gap-3 pb-7"},IC={class:"w-20 h-20 bg-gray-50 bg-opacity-[.05] rounded-lg text-xs uppercase text-gray-300 flex flex-col gap-2 items-center justify-center"},RC={class:"text-4xl tracking-wider font-medium text-white"},FC=h("span",null,"DAYS",-1),BC={class:"w-20 h-20 bg-gray-50 bg-opacity-[.05] rounded-lg text-xs uppercase text-gray-300 flex flex-col gap-2 items-center justify-center"},NC={class:"text-4xl tracking-wider font-medium text-white"},VC=h("span",null,"HOURS",-1),zC={class:"w-20 h-20 bg-gray-50 bg-opacity-[.05] rounded-lg text-xs uppercase text-gray-300 flex flex-col gap-2 items-center justify-center"},jC={class:"text-4xl tracking-wider font-medium text-white"},WC=h("span",null,"MINUTES",-1),UC={class:"w-20 h-20 bg-gray-50 bg-opacity-[.05] rounded-lg text-xs uppercase text-gray-300 flex flex-col gap-2 items-center justify-center"},HC={class:"text-4xl tracking-wider font-medium text-white"},QC=h("span",null,"SECONDS",-1),YC=h("div",{class:"text-center mt-4"},[h("a",{href:"https://lnk.wppool.dev/tBWyyUk",class:"text-indigo-200 cursor-pointer hover:text-white transition text-base",target:"_blank"},"Try a free demo")],-1),fu={__name:"Upgrade",setup(s){const e=formychat_admin_vars||{},t=$r(),n=pe(new Date),i={link:"https://lnk.wppool.dev/wdB8OqQ",text:"Grab Your Deals!",image:"campaign.png",start:"2025-11-17 16:00:00",end:"2025-12-04 16:00:00"},r=ie(()=>{const u=new Date;return u>new Date(i.start)&&u<new Date(i.end)}),o=ie(()=>{const u=n.value,f=new Date(i.end)-u,p=Math.floor(f/(1e3*60*60*24)),g=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),S=Math.floor(f%(1e3*60*60)/(1e3*60)),k=Math.floor(f%(1e3*60)/1e3);return{days:p,hours:g,minutes:S,seconds:k}}),a=ie(()=>r.value?i.image:"upgrade.png"),l=ie(()=>r.value?i.text:"GET PREMIUM"),c=ie(()=>r.value?i.link:"https://lnk.wppool.dev/bTUp5Cu");return os(()=>{document.addEventListener("click",u=>{u.target.closest(".formychat-locked")&&(u.preventDefault(),t.show())}),setInterval(()=>{n.value=new Date},1e3)}),(u,d)=>m(e).is_premium?z("",!0):(v(),C("div",MC,[y(ze,{name:"fast-fade"},{default:P(()=>[m(t).isShown?(v(),C("div",AC,[h("div",{onClick:d[0]||(d[0]=(...f)=>m(t).hide&&m(t).hide(...f)),class:"absolute z-40 left-0 top-0 w-full h-full bg-black opacity-20"}),h("div",$C,[h("div",TC,[h("img",{src:u.Image(a.value),class:"h-full w-auto mx-auto"},null,8,PC),(v(),C("svg",{onClick:d[1]||(d[1]=(...f)=>m(t).hide&&m(t).hide(...f)),xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-gray-500 absolute hover:scale-125 transition right-4 top-4 cursor-pointer",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},LC)),h("div",EC,[r.value?(v(),C("div",DC,[h("div",IC,[h("span",RC,q(o.value.days),1),B(),FC]),h("div",BC,[h("span",NC,q(o.value.hours),1),B(),VC]),h("div",zC,[h("span",jC,q(o.value.minutes),1),B(),WC]),h("div",UC,[h("span",HC,q(o.value.seconds),1),B(),QC])])):z("",!0),y(m(ct),{class:"font-medium px-6 h-12 text-base text-center flex items-center justify-center",a:"",href:c.value,target:"_blank"},{default:P(()=>[B(q(l.value),1)]),_:1},8,["href"]),YC])])])])):z("",!0)]),_:1})]))}},Tr=Or("formychat_modal",()=>{const s=pe({title:"Hello World",message:"This is a message",cancel:"Cancel",ok:"OK",outsideClick:!0,escClose:!0,close:!0,cancelColor:"secondary",okColor:"primary"}),e=pe(!1),t=pe(null),n=ie(()=>s.value),i=ie(()=>e.value),r=d=>{t.value=null,s.value={...s.value,...d},e.value=!0},o=()=>{e.value=!1},a=()=>{t.value={ok:!0,cancel:!1},o()},l=()=>{t.value={ok:!1,cancel:!0},o()},c=(d=null)=>(o(),r(d),new Promise(f=>{const p=setInterval(()=>{t.value!==null&&(clearInterval(p),f(t.value),t.value=null),e.value===!1&&(clearInterval(p),f({ok:!1,cancel:!1,close:!0}),t.value=null)},100)}));return{getOptions:n,isOpen:i,show:r,close:o,ok:a,cancel:l,fire:c,prompt:async d=>{let f={ok:"Yes, delete!",cancel:"Cancel",okColor:"danger",...d};return await c(f)}}}),qC={class:"w-full relative flex flex-col gap-4"},GC={xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},KC=h("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"},null,-1),XC=h("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"},null,-1),JC={key:0,d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"},ZC=h("div",{class:"whitespace-nowrap"},"Toggle Preview of Preset Message",-1),e7={key:0,class:"ring-1 ring-gray-100 rounded"},t7={class:"border-b border-gray-100 py-2 px-2"},s7={class:"flex sm:hidden items-center gap-2 flex-wrap mb-2"},n7=["innerHTML","title","onClick"],i7={class:"flex sm:hidden items-center gap-2 flex-wrap"},r7=["innerHTML","title","onClick"],o7={key:0},a7={class:"absolute translate-y-px top-full left-0 w-44 max-h-56 overflow-scroll bg-white shadow-lg rounded flex-col flex"},l7=["onClick"],c7={class:"hidden sm:flex items-center gap-2"},u7=["innerHTML","title","onClick"],d7={key:0},h7={class:"absolute translate-y-px top-full left-0 w-44 max-h-56 overflow-scroll bg-white shadow-lg rounded flex-col flex"},f7=["onClick"],p7=["value"],m7={class:"text-xs text-gray-500 px-3 py-2"},g7={class:"flex items-center justify-between"},v7=h("div",{class:"whitespace-nowrap"},[B(" Keyboard Shortcuts: "),h("code",null,"CTRL/CMD + B, I, S")],-1),y7=h("div",{class:"mt-1.5"},[B(" Some formatting rules are not supported in the WhatsApp Windows "),h("a",{class:"text-blue-500 hover:underline",target:"_blank",href:"https://faq.whatsapp.com/539178204879377/?cms_platform=web"},"Learn more"),B(". ")],-1),_7={key:1,class:"border-0 ring-1 translate-y-px ring-gray-100 rounded"},b7=h("div",{class:"flex items-center gap-2 border-b border-gray-100 h-12 px-4 font-medium"}," Preview Message ",-1),w7=["innerHTML"],pu={__name:"MessagePreset",props:{modelValue:{type:String,default:""},fields:{type:Object,default:()=>({name:"Name",email:"Email",phone:"Phone",message:"Message"})},form:{type:String,default:""},defaultMessage:{type:String,default:""},customTags:{type:[Object,Boolean],default:!0}},emits:["update:modelValue"],setup(s,{emit:e}){const t=Tr(),n=s,i=e,r=Es({showInserts:!1,presetPreview:!1}),o=pe(null),a=pe(null),l=ie(()=>{let k=n.modelValue||"";return Object.keys(c.value).forEach(O=>{k=k.replace(new RegExp(`{${O}}`,"g"),c.value[O])}),Object.values(u).forEach(O=>{O.pattern instanceof RegExp&&(k=k.replace(new RegExp(O.pattern,"g"),(...$)=>typeof O.html=="function"?O.html(...$):$.reduce((M,b,w)=>M.replace(new RegExp("\\$"+w,"g"),b||""),O.html)))}),k=k.replace(/<\/ul><ul>/g,"").replace(/<\/ol><ol>/g,""),k}),c=ie(()=>{const k={...n.fields};return n.customTags===!1?k:n.customTags===!0?{...k,...formychat_admin_vars.data.custom_tags||{}}:typeof n.customTags=="object"?{...k,...n.customTags}:k}),u={bold:{pattern:/\*(.*?)\*/,code:"*$1*",html:"<strong>$1</strong>",label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-type-bold" viewBox="0 0 16 16">
  <path d="M8.21 13c2.106 0 3.412-1.087 3.412-2.823 0-1.306-.984-2.283-2.324-2.386v-.055a2.176 2.176 0 0 0 1.852-2.14c0-1.51-1.162-2.46-3.014-2.46H3.843V13zM5.908 4.674h1.696c.963 0 1.517.451 1.517 1.244 0 .834-.629 1.32-1.73 1.32H5.908V4.673zm0 6.788V8.598h1.73c1.217 0 1.88.492 1.88 1.415 0 .943-.643 1.449-1.832 1.449H5.907z"/>
</svg>`,description:"Bold"},italic:{pattern:/_([^}]*)_/,code:"_$1_",html:"<em>$1</em>",label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-type-italic" viewBox="0 0 16 16">
  <path d="M7.991 11.674 9.53 4.455c.123-.595.246-.71 1.347-.807l.11-.52H7.211l-.11.52c1.06.096 1.128.212 1.005.807L6.57 11.674c-.123.595-.246.71-1.346.806l-.11.52h3.774l.11-.52c-1.06-.095-1.129-.211-1.006-.806z"/>
</svg>`,description:"Italic"},del:{pattern:/~(.*?)~/,code:"~$1~",html:"<del>$1</del>",label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-type-strikethrough" viewBox="0 0 16 16">
  <path d="M6.333 5.686c0 .31.083.581.27.814H5.166a2.8 2.8 0 0 1-.099-.76c0-1.627 1.436-2.768 3.48-2.768 1.969 0 3.39 1.175 3.445 2.85h-1.23c-.11-1.08-.964-1.743-2.25-1.743-1.23 0-2.18.602-2.18 1.607zm2.194 7.478c-2.153 0-3.589-1.107-3.705-2.81h1.23c.144 1.06 1.129 1.703 2.544 1.703 1.34 0 2.31-.705 2.31-1.675 0-.827-.547-1.374-1.914-1.675L8.046 8.5H1v-1h14v1h-3.504c.468.437.675.994.675 1.697 0 1.826-1.436 2.967-3.644 2.967"/>
</svg>`,description:"Strikethrough"},code:{pattern:/`(.*?)`/,code:"`$1`",html:"<code>$1</code>",label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-code-slash" viewBox="0 0 16 16">
  <path d="M10.478 1.647a.5.5 0 1 0-.956-.294l-4 13a.5.5 0 0 0 .956.294zM4.854 4.146a.5.5 0 0 1 0 .708L1.707 8l3.147 3.146a.5.5 0 0 1-.708.708l-3.5-3.5a.5.5 0 0 1 0-.708l3.5-3.5a.5.5 0 0 1 .708 0m6.292 0a.5.5 0 0 0 0 .708L14.293 8l-3.147 3.146a.5.5 0 0 0 .708.708l3.5-3.5a.5.5 0 0 0 0-.708l-3.5-3.5a.5.5 0 0 0-.708 0"/>
</svg>`,description:"Inline Code"},monospace:{pattern:/```(.*?)```/,code:"```$1```",label:'<pre class="text-xs font-light">pre</pre>',html:"<pre>$1</pre>",description:"Monospace"},bulletList:{pattern:/^[*-]\s(.*)$/gm,code:"* $1",html:(k,O)=>`<ul><li>${O}</li></ul>`,label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-task" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M2 2.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V3a.5.5 0 0 0-.5-.5zM3 3H2v1h1z"/>
  <path d="M5 3.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M5.5 7a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 4a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z"/>
  <path fill-rule="evenodd" d="M1.5 7a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H2a.5.5 0 0 1-.5-.5zM2 7h1v1H2zm0 3.5a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5v-1a.5.5 0 0 0-.5-.5zm1 .5H2v1h1z"/>
</svg>`,description:"Bullet List"},numberedList:{pattern:/^\d+\.\s(.*)$/gm,code:"1. $1",html:(k,O)=>`<ol><li>${O}</li></ol>`,label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list-ol" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M5 11.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5"/>
  <path d="M1.713 11.865v-.474H2c.217 0 .363-.137.363-.317 0-.185-.158-.31-.361-.31-.223 0-.367.152-.373.31h-.59c.016-.467.373-.787.986-.787.588-.002.954.291.957.703a.595.595 0 0 1-.492.594v.033a.615.615 0 0 1 .569.631c.003.533-.502.8-1.051.8-.656 0-1-.37-1.008-.794h.582c.008.178.186.306.422.309.254 0 .424-.145.422-.35-.002-.195-.155-.348-.414-.348h-.3zm-.004-4.699h-.604v-.035c0-.408.295-.844.958-.844.583 0 .96.326.96.756 0 .389-.257.617-.476.848l-.537.572v.03h1.054V9H1.143v-.395l.957-.99c.138-.142.293-.304.293-.508 0-.18-.147-.32-.342-.32a.33.33 0 0 0-.342.338zM2.564 5h-.635V2.924h-.031l-.598.42v-.567l.629-.443h.635z"/>
</svg>`,description:"Numbered List"},newline:{pattern:/\n/,code:`
`,html:"<br>",label:"",description:"New Line"},quote:{pattern:/^>\s(.*)$/gm,code:"> $1",html:"<blockquote>$1</blockquote>",label:`<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-quote" viewBox="0 0 16 16">
  <path d="M12 12a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1h-1.388q0-.527.062-1.054.093-.558.31-.992t.559-.683q.34-.279.868-.279V3q-.868 0-1.52.372a3.3 3.3 0 0 0-1.085.992 4.9 4.9 0 0 0-.62 1.458A7.7 7.7 0 0 0 9 7.558V11a1 1 0 0 0 1 1zm-6 0a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1H4.612q0-.527.062-1.054.094-.558.31-.992.217-.434.559-.683.34-.279.868-.279V3q-.868 0-1.52.372a3.3 3.3 0 0 0-1.085.992 4.9 4.9 0 0 0-.62 1.458A7.7 7.7 0 0 0 3 7.558V11a1 1 0 0 0 1 1z"/>
</svg>`,description:"Quote"}},d=k=>{if(!o.value)return;const O=o.value,$=O.selectionStart,M=O.selectionEnd,b=O.value,w=b.substring($,M),R=$!==M;let T="",E=$,F=M;const K=new InputEvent("input",{inputType:"insertText",data:null,isComposing:!1,bubbles:!0});if(k===u.bulletList||k===u.numberedList){const W=w.split(`
`);if(u.bulletList,W.every(D=>D.trim().startsWith("* ")||D.trim().startsWith("- ")||D.trim().match(/^\d+\.\s/))){const D=W.map(N=>N.replace(/^[*-]\s|^\d+\.\s/,"")).join(`
`);T=b.substring(0,$)+D+b.substring(M),F=$+D.length}else{const D=W.map((N,Q)=>N.trim()?k===u.numberedList?`${Q+1}. ${N.trim()}`:`* ${N.trim()}`:N).join(`
`);T=b.substring(0,$)+D+b.substring(M),F=$+D.length}}else if(w.match(k.pattern)){const W=w.replace(k.pattern,"$1");T=b.substring(0,$)+W+b.substring(M),F=$+W.length}else{const W=k.code.replace("$1",w||" ");if(T=b.substring(0,$)+W+b.substring(M),R)F=$+W.length;else{const A=Math.floor(W.length/2);E=$+A,F=E}}O.value=T,O.dispatchEvent(K),i("update:modelValue",T),setTimeout(()=>{O.focus(),O.setSelectionRange(E,F)},0)},f=k=>{if(k.key==="Enter"&&!k.shiftKey){const O=o.value,$=O.value,M=O.selectionStart,b=$.substring(0,M),w=$.substring(M),R=b.split(`
`),T=R[R.length-1],E=T.match(/^([*-])\s(.*)/),F=T.match(/^(\d+)\.\s(.*)/),K=(E==null?void 0:E[2])||(F==null?void 0:F[2])||"";if(E||F){if(k.preventDefault(),!K.trim()){R[R.length-1]="";const N=R.join(`
`)+w;O.value=N,i("update:modelValue",N),O.setSelectionRange(M-T.length,M-T.length);return}const W=E?E[1]+" ":`${parseInt(F[1])+1}. `,A=b+`
`+W+w;O.value=A,i("update:modelValue",A);const D=M+1+W.length;O.setSelectionRange(D,D)}}},p=k=>{if(!o.value)return;const O=o.value,$=O.selectionStart,M=O.selectionEnd,b=O.value,w=`{${k}}`,R=b.substring(0,$)+w+b.substring(M),T=new InputEvent("input",{inputType:"insertText",data:w,isComposing:!1,bubbles:!0});O.value=R,O.dispatchEvent(T),i("update:modelValue",R),setTimeout(()=>{O.focus();const E=$+w.length;O.setSelectionRange(E,E)},0),r.showInserts=!1},g=k=>{f(k),(k.ctrlKey||k.metaKey)&&k.key==="b"&&(k.preventDefault(),d(u.bold)),(k.ctrlKey||k.metaKey)&&k.key==="i"&&(k.preventDefault(),d(u.italic)),(k.ctrlKey||k.metaKey)&&k.key==="s"&&(k.preventDefault(),d(u.del))};window.addEventListener("click",k=>{a.value&&!a.value.contains(k.target)&&(r.showInserts=!1)});const S=async()=>{if(!(await t.prompt({title:"Reset Message Template",message:"Are you sure you want to reset the message template?",ok:"Yes, reset!"})).ok)return;let O="";if(n.defaultMessage)O=n.defaultMessage;else for(let $ of Object.keys(n.fields)){const M=n.form==="formychat"&&$==="message",b=$.replace(/[-_]/g," ").split(" ").map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(" ");O+=`${b}:${M?`
`:" "}{${$}}
`}o.value.value=O,i("update:modelValue",O)};return(k,O)=>{const $=on("Tooltip"),M=on("Button");return v(),C("div",qC,[h("div",{class:X(["absolute z-10 right-3 top-3 cursor-pointer hover:opacity-100 transition",{"opacity-50":!r.presetPreview}]),onClick:O[0]||(O[0]=b=>r.presetPreview=!r.presetPreview)},[y($,null,{content:P(()=>[ZC]),default:P(()=>[(v(),C("svg",GC,[KC,XC,r.presetPreview?z("",!0):(v(),C("path",JC))]))]),_:1})],2),r.presetPreview?(v(),C("div",_7,[b7,h("div",{class:"px-4 py-2",innerHTML:l.value},null,8,w7)])):(v(),C("div",e7,[h("div",t7,[h("div",s7,[(v(),C(Ve,null,ft(u,(b,w,R)=>(v(),C(Ve,{key:w},[R<6&&b.label?(v(),C("span",{key:0,class:"flex items-center justify-center cursor-pointer h-8 w-8 rounded border border-gray-200 hover:bg-gray-100 transition duration-75 bg-gray-50 active:scale-90 text-gray-700 shadow-sm",innerHTML:b.html.replace?b.html.replace(b.html,b.label):b.label,title:b.description,onClick:Me(T=>d(b),["prevent"])},null,8,n7)):z("",!0)],64))),64))]),h("div",i7,[(v(),C(Ve,null,ft(u,(b,w,R)=>(v(),C(Ve,{key:w},[R>=6&&b.label?(v(),C("span",{key:0,class:"flex items-center justify-center cursor-pointer h-8 w-8 rounded border border-gray-200 hover:bg-gray-100 transition duration-75 bg-gray-50 active:scale-90 text-gray-700 shadow-sm",innerHTML:b.html.replace?b.html.replace(b.html,b.label):b.label,title:b.description,onClick:Me(T=>d(b),["prevent"])},null,8,r7)):z("",!0)],64))),64)),h("div",{ref_key:"insert_vars",ref:a,class:"relative h-8 w-16 border border-gray-200 hover:bg-gray-100 transition duration-75 bg-gray-50 cursor-pointer sm:hidden"},[h("span",{onClick:O[1]||(O[1]=b=>r.showInserts=!r.showInserts),class:"flex items-center justify-center w-full h-full"}," Insert "),y(ze,{name:"slide"},{default:P(()=>[r.showInserts?(v(),C("div",o7,[h("div",a7,[(v(!0),C(Ve,null,ft(Object.keys(c.value),b=>(v(),C("span",{key:b,class:"px-4 py-2 text-sm border-b border-gray-50 last:border-0 cursor-pointer hover:bg-gray-50 transition",onClick:w=>p(b)},q("{"+b+"}"),9,l7))),128))])])):z("",!0)]),_:1})],512)]),h("div",c7,[(v(),C(Ve,null,ft(u,(b,w)=>(v(),C(Ve,{key:w},[b.label?(v(),C("span",{key:0,class:"flex items-center justify-center cursor-pointer h-8 w-8 rounded border border-gray-200 hover:bg-gray-100 transition duration-75 bg-gray-50 active:scale-90 text-gray-700 shadow-sm",innerHTML:b.html.replace?b.html.replace(b.html,b.label):b.label,title:b.description,onClick:Me(R=>d(b),["prevent"])},null,8,u7)):z("",!0)],64))),64)),h("div",{ref_key:"insert_vars",ref:a,class:"relative h-8 w-16 border border-gray-200 hover:bg-gray-100 transition duration-75 bg-gray-50 cursor-pointer"},[h("span",{onClick:O[2]||(O[2]=b=>r.showInserts=!r.showInserts),class:"flex items-center justify-center w-full h-full"}," Insert "),y(ze,{name:"slide"},{default:P(()=>[r.showInserts?(v(),C("div",d7,[h("div",h7,[(v(!0),C(Ve,null,ft(Object.keys(c.value),b=>(v(),C("span",{key:b,class:"px-4 py-2 text-sm border-b border-gray-50 last:border-0 cursor-pointer hover:bg-gray-50 transition",onClick:w=>p(b)},q("{"+b+"}"),9,f7))),128))])])):z("",!0)]),_:1})],512)])]),h("textarea",{class:"w-full bg-gray-50 text-sm ring-1 ring-gray-200 outline-none border-0 rounded px-4 py-2 focus:ring focus:ring-indigo-500 focus:outline-none transition",style:{resize:"vertical !important","min-height":"80px !important","max-height":"600px !important",height:"80px"},onInput:O[3]||(O[3]=b=>k.$emit("update:modelValue",b.target.value)),ref_key:"template",ref:o,value:n.modelValue,onKeydown:g},`
            `,40,p7),h("div",m7,[h("div",g7,[v7,h("div",null,[y(M,{class:"text-xs bg-indigo-500 text-white px-2 py-1 rounded",onClick:S},{default:P(()=>[B("Reset")]),_:1})])]),y7])]))])}}},ll=s=>(Ds("data-v-0e65ea06"),s=s(),Is(),s),x7={class:"bg-white rounded border border-gray-200 hover:-translate-y-1 hover:shadow transition-all duration-300"},k7={class:"flex flex-col gap-3 p-5 group"},S7=["src"],C7={class:"font-semibold text-base flex items-center gap-2"},O7=["href"],M7=[ll(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-box-arrow-up-right",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"}),h("path",{"fill-rule":"evenodd",d:"M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z"})],-1))],A7={class:"text-sm text-gray-500"},$7={class:"fm-card-footer"},T7={key:0,class:"fm-toggle"},P7=[ll(()=>h("span",{class:"toggle-label border border-gray-200 rounded-full px-3 py-1.5"},"Upcoming",-1))],L7={key:1,class:"fm-toggle"},E7={key:0,disabled:"",class:"fm-btn fm-btn-primary loading"},D7=ll(()=>h("span",{class:"inline-block w-4 h-4 align-middle"},[h("svg",{class:"animate-spin w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},[h("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"currentColor","stroke-width":"5","stroke-linecap":"round","stroke-dasharray":"31.415, 31.415",transform:"rotate(72 25 25)"},[h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"1s",repeatCount:"indefinite"})])])],-1)),I7={key:1,disabled:"",class:"fm-btn fm-btn-secondary loading"},R7=ll(()=>h("span",{class:"inline-block w-4 h-4 align-middle"},[h("svg",{class:"animate-spin w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50"},[h("circle",{cx:"25",cy:"25",r:"20",fill:"none",stroke:"currentColor","stroke-width":"5","stroke-linecap":"round","stroke-dasharray":"31.415, 31.415",transform:"rotate(72 25 25)"},[h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 25 25",to:"360 25 25",dur:"1s",repeatCount:"indefinite"})])])],-1)),F7=[ll(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-gear",viewBox:"0 0 16 16"},[h("path",{d:"M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"}),h("path",{d:"M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"})],-1))],B7=Nt({__name:"IntegrationCard",props:{integration:{type:Object,required:!0}},emits:["toggle","settings","install","activate"],setup(s){const e=s,t=ie(()=>e.integration.status==="available"),n=ie(()=>e.integration.status==="upcoming"),i=ie(()=>e.integration.type==="api"),r=ie(()=>i.value?!0:e.integration.is_plugin_installed),o=ie(()=>i.value?!0:e.integration.is_plugin_active),a=ie(()=>e.integration.installing),l=ie(()=>e.integration.activating),c=ie(()=>formychat_admin_vars.is_premium!=1);return(u,d)=>(v(),C("div",x7,[h("div",k7,[h("img",{src:s.integration.logo,alt:"",class:"w-12 h-auto rounded-full"},null,8,S7),h("h3",C7,[B(q(s.integration.title)+" ",1),s.integration.link?(v(),C("a",{key:0,href:s.integration.link||"https://wppool.dev/formychat/",target:"_blank",class:"opacity-0 group-hover:opacity-100 transition-all duration-300"},M7,8,O7)):z("",!0)]),h("p",A7,q(s.integration.description),1)]),h("div",$7,[n.value?(v(),C("div",T7,P7)):t.value?(v(),C("div",L7,[a.value?(v(),C("button",E7,[D7,B(" Installing... ")])):l.value?(v(),C("button",I7,[R7,B(" Activating... ")])):r.value&&o.value?(v(),qe(m(At),{key:2,modelValue:s.integration.enabled,"onUpdate:modelValue":d[0]||(d[0]=f=>s.integration.enabled=f),locked:s.integration.id!=="google_sheets",onChange:d[1]||(d[1]=f=>u.$emit("toggle",s.integration))},null,8,["modelValue","locked"])):z("",!0),r.value&&o.value&&i.value&&!c.value&&s.integration.enabled&&s.integration.connection_status_checked?(v(),C("span",{key:3,class:X(["api-status-badge",s.integration.api_connected?"connected":"disconnected"])},q(s.integration.api_connected?"Connected":"Not Connected"),3)):r.value&&!o.value?(v(),C("button",{key:4,onClick:d[2]||(d[2]=f=>u.$emit("activate",s.integration)),class:"fm-btn fm-btn-secondary"}," Activate ")):r.value?z("",!0):(v(),C("button",{key:5,onClick:d[3]||(d[3]=f=>u.$emit("install",s.integration)),class:"fm-btn fm-btn-primary"}," Install "))])):z("",!0),t.value&&r.value&&o.value&&s.integration.enabled&&!(s.integration.id==="mailchimp"&&c.value)?(v(),C("button",{key:2,onClick:d[4]||(d[4]=f=>u.$emit("settings",s.integration)),class:"fm-settings","aria-label":"Settings"},F7)):z("",!0)])]))}},[["__scopeId","data-v-0e65ea06"]]),N7={name:"FluentCrmSetup",components:{Button:ct},data(){return{}},methods:{watchTutorial(){console.log("Opening tutorial...")}}},V7=s=>(Ds("data-v-e19be989"),s=s(),Is(),s),z7={class:"bg-white"},j7={class:"bg-gradient-to-r from-purple-200 to-purple-300 px-8 py-6 text-center"},W7={class:"flex items-center justify-center gap-3"},U7={class:"rounded-full p-2"},H7=["src"],Q7=V7(()=>h("h1",{class:"text-3xl text-purple-500 italic font-light"},[B(" fluent"),h("span",{class:"text-purple-900 not-italic font-semibold"},"CRM")],-1)),Y7=Fs('<div class="px-8 py-8" data-v-e19be989><p class="text-gray-600 mb-8 leading-relaxed text-sm" data-v-e19be989> No extra setup needed. Just keep it enabled, and you can instantly connect any FormyChat widget with FluentCRM. </p><div class="mb-8" data-v-e19be989><h2 class="font-semibold text-gray-800 mb-4 text-base" data-v-e19be989>Instructions:</h2><ol class="list-decimal list-inside space-y-3 text-sm text-gray-600" data-v-e19be989><li class="leading-relaxed" data-v-e19be989>Create or edit a FormyChat widget.</li><li class="leading-relaxed" data-v-e19be989>Go to <span class="font-semibold text-gray-800" data-v-e19be989>Triggers &amp; Targeting</span> stepper.</li><li class="leading-relaxed" data-v-e19be989>Search for &quot;<span class="font-semibold text-gray-800" data-v-e19be989>Send leads to FluentCRM</span>&quot; and <span class="font-semibold text-gray-800" data-v-e19be989>enable</span> it.</li><li class="leading-relaxed" data-v-e19be989>Then setup with your preferred lists, tags, and other options.</li></ol></div><div class="mb-8" data-v-e19be989><p class="text-gray-600 text-sm" data-v-e19be989>  That&#39;s it - your leads will start flowing directly into FluentCRM! </p></div><div class="text-center flex items-center justify-center" data-v-e19be989><a href="https://www.youtube.com/watch?v=5VFeUIqw3cg" target="_blank" class="bg-gray-100 hover:bg-transparent transition duration-150 rounded-full cursor-pointer px-3 py-1.5 border border-gray-100 inline-flex items-center justify-center gap-1" data-v-e19be989><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48" data-v-e19be989><path fill="#FF3D00" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z" data-v-e19be989></path><path fill="#FFF" d="M20 31L20 17 32 24z" data-v-e19be989></path></svg> Watch Tutorial </a></div></div>',1);function q7(s,e,t,n,i,r){return v(),C("div",z7,[h("div",j7,[h("div",W7,[h("div",U7,[h("img",{src:s.Image("integrations/fluent-crm.png"),class:"w-8 h-auto",alt:"FluentCRM"},null,8,H7)]),Q7])]),Y7])}const G7=Nt(N7,[["render",q7],["__scopeId","data-v-e19be989"]]);function $y(s,e){return function(){return s.apply(e,arguments)}}const{toString:K7}=Object.prototype,{getPrototypeOf:Hf}=Object,mu=(s=>e=>{const t=K7.call(e);return s[t]||(s[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=s=>(s=s.toLowerCase(),e=>mu(e)===s),gu=s=>e=>typeof e===s,{isArray:Jo}=Array,cl=gu("undefined");function X7(s){return s!==null&&!cl(s)&&s.constructor!==null&&!cl(s.constructor)&&cn(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const Ty=Vn("ArrayBuffer");function J7(s){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(s):e=s&&s.buffer&&Ty(s.buffer),e}const Z7=gu("string"),cn=gu("function"),Py=gu("number"),vu=s=>s!==null&&typeof s=="object",eO=s=>s===!0||s===!1,yu=s=>{if(mu(s)!=="object")return!1;const e=Hf(s);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in s)&&!(Symbol.iterator in s)},tO=Vn("Date"),sO=Vn("File"),nO=Vn("Blob"),iO=Vn("FileList"),rO=s=>vu(s)&&cn(s.pipe),oO=s=>{let e;return s&&(typeof FormData=="function"&&s instanceof FormData||cn(s.append)&&((e=mu(s))==="formdata"||e==="object"&&cn(s.toString)&&s.toString()==="[object FormData]"))},aO=Vn("URLSearchParams"),[lO,cO,uO,dO]=["ReadableStream","Request","Response","Headers"].map(Vn),hO=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ul(s,e,{allOwnKeys:t=!1}={}){if(s===null||typeof s>"u")return;let n,i;if(typeof s!="object"&&(s=[s]),Jo(s))for(n=0,i=s.length;n<i;n++)e.call(null,s[n],n,s);else{const r=t?Object.getOwnPropertyNames(s):Object.keys(s),o=r.length;let a;for(n=0;n<o;n++)a=r[n],e.call(null,s[a],a,s)}}function Ly(s,e){e=e.toLowerCase();const t=Object.keys(s);let n=t.length,i;for(;n-- >0;)if(i=t[n],e===i.toLowerCase())return i;return null}const go=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ey=s=>!cl(s)&&s!==go;function Qf(){const{caseless:s}=Ey(this)&&this||{},e={},t=(n,i)=>{const r=s&&Ly(e,i)||i;yu(e[r])&&yu(n)?e[r]=Qf(e[r],n):yu(n)?e[r]=Qf({},n):Jo(n)?e[r]=n.slice():e[r]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&ul(arguments[n],t);return e}const fO=(s,e,t,{allOwnKeys:n}={})=>(ul(e,(i,r)=>{t&&cn(i)?s[r]=$y(i,t):s[r]=i},{allOwnKeys:n}),s),pO=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),mO=(s,e,t,n)=>{s.prototype=Object.create(e.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:e.prototype}),t&&Object.assign(s.prototype,t)},gO=(s,e,t,n)=>{let i,r,o;const a={};if(e=e||{},s==null)return e;do{for(i=Object.getOwnPropertyNames(s),r=i.length;r-- >0;)o=i[r],(!n||n(o,s,e))&&!a[o]&&(e[o]=s[o],a[o]=!0);s=t!==!1&&Hf(s)}while(s&&(!t||t(s,e))&&s!==Object.prototype);return e},vO=(s,e,t)=>{s=String(s),(t===void 0||t>s.length)&&(t=s.length),t-=e.length;const n=s.indexOf(e,t);return n!==-1&&n===t},yO=s=>{if(!s)return null;if(Jo(s))return s;let e=s.length;if(!Py(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=s[e];return t},_O=(s=>e=>s&&e instanceof s)(typeof Uint8Array<"u"&&Hf(Uint8Array)),bO=(s,e)=>{const n=(s&&s[Symbol.iterator]).call(s);let i;for(;(i=n.next())&&!i.done;){const r=i.value;e.call(s,r[0],r[1])}},wO=(s,e)=>{let t;const n=[];for(;(t=s.exec(e))!==null;)n.push(t);return n},xO=Vn("HTMLFormElement"),kO=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,i){return n.toUpperCase()+i}),Dy=(({hasOwnProperty:s})=>(e,t)=>s.call(e,t))(Object.prototype),SO=Vn("RegExp"),Iy=(s,e)=>{const t=Object.getOwnPropertyDescriptors(s),n={};ul(t,(i,r)=>{let o;(o=e(i,r,s))!==!1&&(n[r]=o||i)}),Object.defineProperties(s,n)},CO=s=>{Iy(s,(e,t)=>{if(cn(s)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const n=s[t];if(cn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},OO=(s,e)=>{const t={},n=i=>{i.forEach(r=>{t[r]=!0})};return Jo(s)?n(s):n(String(s).split(e)),t},MO=()=>{},AO=(s,e)=>s!=null&&Number.isFinite(s=+s)?s:e;function $O(s){return!!(s&&cn(s.append)&&s[Symbol.toStringTag]==="FormData"&&s[Symbol.iterator])}const TO=s=>{const e=new Array(10),t=(n,i)=>{if(vu(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const r=Jo(n)?[]:{};return ul(n,(o,a)=>{const l=t(o,i+1);!cl(l)&&(r[a]=l)}),e[i]=void 0,r}}return n};return t(s,0)},PO=Vn("AsyncFunction"),LO=s=>s&&(vu(s)||cn(s))&&cn(s.then)&&cn(s.catch),Ry=((s,e)=>s?setImmediate:e?((t,n)=>(go.addEventListener("message",({source:i,data:r})=>{i===go&&r===t&&n.length&&n.shift()()},!1),i=>{n.push(i),go.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",cn(go.postMessage)),EO=typeof queueMicrotask<"u"?queueMicrotask.bind(go):typeof process<"u"&&process.nextTick||Ry,te={isArray:Jo,isArrayBuffer:Ty,isBuffer:X7,isFormData:oO,isArrayBufferView:J7,isString:Z7,isNumber:Py,isBoolean:eO,isObject:vu,isPlainObject:yu,isReadableStream:lO,isRequest:cO,isResponse:uO,isHeaders:dO,isUndefined:cl,isDate:tO,isFile:sO,isBlob:nO,isRegExp:SO,isFunction:cn,isStream:rO,isURLSearchParams:aO,isTypedArray:_O,isFileList:iO,forEach:ul,merge:Qf,extend:fO,trim:hO,stripBOM:pO,inherits:mO,toFlatObject:gO,kindOf:mu,kindOfTest:Vn,endsWith:vO,toArray:yO,forEachEntry:bO,matchAll:wO,isHTMLForm:xO,hasOwnProperty:Dy,hasOwnProp:Dy,reduceDescriptors:Iy,freezeMethods:CO,toObjectSet:OO,toCamelCase:kO,noop:MO,toFiniteNumber:AO,findKey:Ly,global:go,isContextDefined:Ey,isSpecCompliantForm:$O,toJSONObject:TO,isAsyncFn:PO,isThenable:LO,setImmediate:Ry,asap:EO};function it(s,e,t,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}te.inherits(it,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:te.toJSONObject(this.config),code:this.code,status:this.status}}});const Fy=it.prototype,By={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{By[s]={value:s}}),Object.defineProperties(it,By),Object.defineProperty(Fy,"isAxiosError",{value:!0}),it.from=(s,e,t,n,i,r)=>{const o=Object.create(Fy);return te.toFlatObject(s,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),it.call(o,s.message,e,t,n,i),o.cause=s,o.name=s.name,r&&Object.assign(o,r),o};const DO=null;function Yf(s){return te.isPlainObject(s)||te.isArray(s)}function Ny(s){return te.endsWith(s,"[]")?s.slice(0,-2):s}function Vy(s,e,t){return s?s.concat(e).map(function(i,r){return i=Ny(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function IO(s){return te.isArray(s)&&!s.some(Yf)}const RO=te.toFlatObject(te,{},null,function(e){return/^is[A-Z]/.test(e)});function _u(s,e,t){if(!te.isObject(s))throw new TypeError("target must be an object");e=e||new FormData,t=te.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,k){return!te.isUndefined(k[S])});const n=t.metaTokens,i=t.visitor||u,r=t.dots,o=t.indexes,l=(t.Blob||typeof Blob<"u"&&Blob)&&te.isSpecCompliantForm(e);if(!te.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(te.isDate(g))return g.toISOString();if(!l&&te.isBlob(g))throw new it("Blob is not supported. Use a Buffer instead.");return te.isArrayBuffer(g)||te.isTypedArray(g)?l&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function u(g,S,k){let O=g;if(g&&!k&&typeof g=="object"){if(te.endsWith(S,"{}"))S=n?S:S.slice(0,-2),g=JSON.stringify(g);else if(te.isArray(g)&&IO(g)||(te.isFileList(g)||te.endsWith(S,"[]"))&&(O=te.toArray(g)))return S=Ny(S),O.forEach(function(M,b){!(te.isUndefined(M)||M===null)&&e.append(o===!0?Vy([S],b,r):o===null?S:S+"[]",c(M))}),!1}return Yf(g)?!0:(e.append(Vy(k,S,r),c(g)),!1)}const d=[],f=Object.assign(RO,{defaultVisitor:u,convertValue:c,isVisitable:Yf});function p(g,S){if(!te.isUndefined(g)){if(d.indexOf(g)!==-1)throw Error("Circular reference detected in "+S.join("."));d.push(g),te.forEach(g,function(O,$){(!(te.isUndefined(O)||O===null)&&i.call(e,O,te.isString($)?$.trim():$,S,f))===!0&&p(O,S?S.concat($):[$])}),d.pop()}}if(!te.isObject(s))throw new TypeError("data must be an object");return p(s),e}function zy(s){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function qf(s,e){this._pairs=[],s&&_u(s,this,e)}const jy=qf.prototype;jy.append=function(e,t){this._pairs.push([e,t])},jy.toString=function(e){const t=e?function(n){return e.call(this,n,zy)}:zy;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function FO(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wy(s,e,t){if(!e)return s;const n=t&&t.encode||FO;te.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let r;if(i?r=i(e,t):r=te.isURLSearchParams(e)?e.toString():new qf(e,t).toString(n),r){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class Uy{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){te.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Hy={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},BO={isBrowser:!0,classes:{URLSearchParams:typeof URLSearchParams<"u"?URLSearchParams:qf,FormData:typeof FormData<"u"?FormData:null,Blob:typeof Blob<"u"?Blob:null},protocols:["http","https","file","blob","url","data"]},Gf=typeof window<"u"&&typeof document<"u",Kf=typeof navigator=="object"&&navigator||void 0,NO=Gf&&(!Kf||["ReactNative","NativeScript","NS"].indexOf(Kf.product)<0),VO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",zO=Gf&&window.location.href||"http://localhost",Cs={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gf,hasStandardBrowserEnv:NO,hasStandardBrowserWebWorkerEnv:VO,navigator:Kf,origin:zO},Symbol.toStringTag,{value:"Module"})),...BO};function jO(s,e){return _u(s,new Cs.classes.URLSearchParams,Object.assign({visitor:function(t,n,i,r){return Cs.isNode&&te.isBuffer(t)?(this.append(n,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function WO(s){return te.matchAll(/\w+|\[(\w*)]/g,s).map(e=>e[0]==="[]"?"":e[1]||e[0])}function UO(s){const e={},t=Object.keys(s);let n;const i=t.length;let r;for(n=0;n<i;n++)r=t[n],e[r]=s[r];return e}function Qy(s){function e(t,n,i,r){let o=t[r++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=r>=t.length;return o=!o&&te.isArray(i)?i.length:o,l?(te.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!a):((!i[o]||!te.isObject(i[o]))&&(i[o]=[]),e(t,n,i[o],r)&&te.isArray(i[o])&&(i[o]=UO(i[o])),!a)}if(te.isFormData(s)&&te.isFunction(s.entries)){const t={};return te.forEachEntry(s,(n,i)=>{e(WO(n),i,t,0)}),t}return null}function HO(s,e,t){if(te.isString(s))try{return(e||JSON.parse)(s),te.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(s)}const dl={transitional:Hy,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",i=n.indexOf("application/json")>-1,r=te.isObject(e);if(r&&te.isHTMLForm(e)&&(e=new FormData(e)),te.isFormData(e))return i?JSON.stringify(Qy(e)):e;if(te.isArrayBuffer(e)||te.isBuffer(e)||te.isStream(e)||te.isFile(e)||te.isBlob(e)||te.isReadableStream(e))return e;if(te.isArrayBufferView(e))return e.buffer;if(te.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return jO(e,this.formSerializer).toString();if((a=te.isFileList(e))||n.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return _u(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),HO(e)):e}],transformResponse:[function(e){const t=this.transitional||dl.transitional,n=t&&t.forcedJSONParsing,i=this.responseType==="json";if(te.isResponse(e)||te.isReadableStream(e))return e;if(e&&te.isString(e)&&(n&&!this.responseType||i)){const o=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?it.from(a,it.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Cs.classes.FormData,Blob:Cs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};te.forEach(["delete","get","head","post","put","patch"],s=>{dl.headers[s]={}});const QO=te.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),YO=s=>{const e={};let t,n,i;return s&&s.split(`
`).forEach(function(o){i=o.indexOf(":"),t=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!t||e[t]&&QO[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e},Yy=Symbol("internals");function hl(s){return s&&String(s).trim().toLowerCase()}function bu(s){return s===!1||s==null?s:te.isArray(s)?s.map(bu):String(s)}function qO(s){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=t.exec(s);)e[n[1]]=n[2];return e}const GO=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Xf(s,e,t,n,i){if(te.isFunction(n))return n.call(this,e,t);if(i&&(e=t),!!te.isString(e)){if(te.isString(n))return e.indexOf(n)!==-1;if(te.isRegExp(n))return n.test(e)}}function KO(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function XO(s,e){const t=te.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+t,{value:function(i,r,o){return this[n].call(this,e,i,r,o)},configurable:!0})})}let Js=class{constructor(e){e&&this.set(e)}set(e,t,n){const i=this;function r(a,l,c){const u=hl(l);if(!u)throw new Error("header name must be a non-empty string");const d=te.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||l]=bu(a))}const o=(a,l)=>te.forEach(a,(c,u)=>r(c,u,l));if(te.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(te.isString(e)&&(e=e.trim())&&!GO(e))o(YO(e),t);else if(te.isHeaders(e))for(const[a,l]of e.entries())r(l,a,n);else e!=null&&r(t,e,n);return this}get(e,t){if(e=hl(e),e){const n=te.findKey(this,e);if(n){const i=this[n];if(!t)return i;if(t===!0)return qO(i);if(te.isFunction(t))return t.call(this,i,n);if(te.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=hl(e),e){const n=te.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||Xf(this,this[n],n,t)))}return!1}delete(e,t){const n=this;let i=!1;function r(o){if(o=hl(o),o){const a=te.findKey(n,o);a&&(!t||Xf(n,n[a],a,t))&&(delete n[a],i=!0)}}return te.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let n=t.length,i=!1;for(;n--;){const r=t[n];(!e||Xf(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,n={};return te.forEach(this,(i,r)=>{const o=te.findKey(n,r);if(o){t[o]=bu(i),delete t[r];return}const a=e?KO(r):String(r).trim();a!==r&&delete t[r],t[a]=bu(i),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return te.forEach(this,(n,i)=>{n!=null&&n!==!1&&(t[i]=e&&te.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[Yy]=this[Yy]={accessors:{}}).accessors,i=this.prototype;function r(o){const a=hl(o);n[a]||(XO(i,o),n[a]=!0)}return te.isArray(e)?e.forEach(r):r(e),this}};Js.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),te.reduceDescriptors(Js.prototype,({value:s},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>s,set(n){this[t]=n}}}),te.freezeMethods(Js);function Jf(s,e){const t=this||dl,n=e||t,i=Js.from(n.headers);let r=n.data;return te.forEach(s,function(a){r=a.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function qy(s){return!!(s&&s.__CANCEL__)}function Zo(s,e,t){it.call(this,s??"canceled",it.ERR_CANCELED,e,t),this.name="CanceledError"}te.inherits(Zo,it,{__CANCEL__:!0});function Gy(s,e,t){const n=t.config.validateStatus;!t.status||!n||n(t.status)?s(t):e(new it("Request failed with status code "+t.status,[it.ERR_BAD_REQUEST,it.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function JO(s){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return e&&e[1]||""}function ZO(s,e){s=s||10;const t=new Array(s),n=new Array(s);let i=0,r=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=n[r];o||(o=c),t[i]=l,n[i]=c;let d=r,f=0;for(;d!==i;)f+=t[d++],d=d%s;if(i=(i+1)%s,i===r&&(r=(r+1)%s),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function e9(s,e){let t=0,n=1e3/e,i,r;const o=(c,u=Date.now())=>{t=u,i=null,r&&(clearTimeout(r),r=null),s.apply(null,c)};return[(...c)=>{const u=Date.now(),d=u-t;d>=n?o(c,u):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},n-d)))},()=>i&&o(i)]}const wu=(s,e,t=3)=>{let n=0;const i=ZO(50,250);return e9(r=>{const o=r.loaded,a=r.lengthComputable?r.total:void 0,l=o-n,c=i(l),u=o<=a;n=o;const d={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:c||void 0,estimated:c&&a&&u?(a-o)/c:void 0,event:r,lengthComputable:a!=null,[e?"download":"upload"]:!0};s(d)},t)},Ky=(s,e)=>{const t=s!=null;return[n=>e[0]({lengthComputable:t,total:s,loaded:n}),e[1]]},Xy=s=>(...e)=>te.asap(()=>s(...e)),t9=Cs.hasStandardBrowserEnv?((s,e)=>t=>(t=new URL(t,Cs.origin),s.protocol===t.protocol&&s.host===t.host&&(e||s.port===t.port)))(new URL(Cs.origin),Cs.navigator&&/(msie|trident)/i.test(Cs.navigator.userAgent)):()=>!0,s9=Cs.hasStandardBrowserEnv?{write(s,e,t,n,i,r){const o=[s+"="+encodeURIComponent(e)];te.isNumber(t)&&o.push("expires="+new Date(t).toGMTString()),te.isString(n)&&o.push("path="+n),te.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const e=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function n9(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function i9(s,e){return e?s.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):s}function Jy(s,e,t){let n=!n9(e);return s&&(n||t==!1)?i9(s,e):e}const Zy=s=>s instanceof Js?{...s}:s;function vo(s,e){e=e||{};const t={};function n(c,u,d,f){return te.isPlainObject(c)&&te.isPlainObject(u)?te.merge.call({caseless:f},c,u):te.isPlainObject(u)?te.merge({},u):te.isArray(u)?u.slice():u}function i(c,u,d,f){if(te.isUndefined(u)){if(!te.isUndefined(c))return n(void 0,c,d,f)}else return n(c,u,d,f)}function r(c,u){if(!te.isUndefined(u))return n(void 0,u)}function o(c,u){if(te.isUndefined(u)){if(!te.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function a(c,u,d){if(d in e)return n(c,u);if(d in s)return n(void 0,c)}const l={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u,d)=>i(Zy(c),Zy(u),d,!0)};return te.forEach(Object.keys(Object.assign({},s,e)),function(u){const d=l[u]||i,f=d(s[u],e[u],u);te.isUndefined(f)&&d!==a||(t[u]=f)}),t}const e_=s=>{const e=vo({},s);let{data:t,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:a}=e;e.headers=o=Js.from(o),e.url=Wy(Jy(e.baseURL,e.url,e.allowAbsoluteUrls),s.params,s.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(te.isFormData(t)){if(Cs.hasStandardBrowserEnv||Cs.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[c,...u]=l?l.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([c||"multipart/form-data",...u].join("; "))}}if(Cs.hasStandardBrowserEnv&&(n&&te.isFunction(n)&&(n=n(e)),n||n!==!1&&t9(e.url))){const c=i&&r&&s9.read(r);c&&o.set(i,c)}return e},r9=typeof XMLHttpRequest<"u"&&function(s){return new Promise(function(t,n){const i=e_(s);let r=i.data;const o=Js.from(i.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:c}=i,u,d,f,p,g;function S(){p&&p(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let k=new XMLHttpRequest;k.open(i.method.toUpperCase(),i.url,!0),k.timeout=i.timeout;function O(){if(!k)return;const M=Js.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),w={data:!a||a==="text"||a==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:M,config:s,request:k};Gy(function(T){t(T),S()},function(T){n(T),S()},w),k=null}"onloadend"in k?k.onloadend=O:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(O)},k.onabort=function(){k&&(n(new it("Request aborted",it.ECONNABORTED,s,k)),k=null)},k.onerror=function(){n(new it("Network Error",it.ERR_NETWORK,s,k)),k=null},k.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const w=i.transitional||Hy;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),n(new it(b,w.clarifyTimeoutError?it.ETIMEDOUT:it.ECONNABORTED,s,k)),k=null},r===void 0&&o.setContentType(null),"setRequestHeader"in k&&te.forEach(o.toJSON(),function(b,w){k.setRequestHeader(w,b)}),te.isUndefined(i.withCredentials)||(k.withCredentials=!!i.withCredentials),a&&a!=="json"&&(k.responseType=i.responseType),c&&([f,g]=wu(c,!0),k.addEventListener("progress",f)),l&&k.upload&&([d,p]=wu(l),k.upload.addEventListener("progress",d),k.upload.addEventListener("loadend",p)),(i.cancelToken||i.signal)&&(u=M=>{k&&(n(!M||M.type?new Zo(null,s,k):M),k.abort(),k=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const $=JO(i.url);if($&&Cs.protocols.indexOf($)===-1){n(new it("Unsupported protocol "+$+":",it.ERR_BAD_REQUEST,s));return}k.send(r||null)})},o9=(s,e)=>{const{length:t}=s=s?s.filter(Boolean):[];if(e||t){let n=new AbortController,i;const r=function(c){if(!i){i=!0,a();const u=c instanceof Error?c:this.reason;n.abort(u instanceof it?u:new Zo(u instanceof Error?u.message:u))}};let o=e&&setTimeout(()=>{o=null,r(new it(`timeout ${e} of ms exceeded`,it.ETIMEDOUT))},e);const a=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),s=null)};s.forEach(c=>c.addEventListener("abort",r));const{signal:l}=n;return l.unsubscribe=()=>te.asap(a),l}},a9=function*(s,e){let t=s.byteLength;if(t<e){yield s;return}let n=0,i;for(;n<t;)i=n+e,yield s.slice(n,i),n=i},l9=async function*(s,e){for await(const t of c9(s))yield*a9(t,e)},c9=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const e=s.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},t_=(s,e,t,n)=>{const i=l9(s,e);let r=0,o,a=l=>{o||(o=!0,n&&n(l))};return new ReadableStream({async pull(l){try{const{done:c,value:u}=await i.next();if(c){a(),l.close();return}let d=u.byteLength;if(t){let f=r+=d;t(f)}l.enqueue(new Uint8Array(u))}catch(c){throw a(c),c}},cancel(l){return a(l),i.return()}},{highWaterMark:2})},xu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",s_=xu&&typeof ReadableStream=="function",u9=xu&&(typeof TextEncoder=="function"?(s=>e=>s.encode(e))(new TextEncoder):async s=>new Uint8Array(await new Response(s).arrayBuffer())),n_=(s,...e)=>{try{return!!s(...e)}catch{return!1}},d9=s_&&n_(()=>{let s=!1;const e=new Request(Cs.origin,{body:new ReadableStream,method:"POST",get duplex(){return s=!0,"half"}}).headers.has("Content-Type");return s&&!e}),i_=64*1024,Zf=s_&&n_(()=>te.isReadableStream(new Response("").body)),ku={stream:Zf&&(s=>s.body)};xu&&(s=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ku[e]&&(ku[e]=te.isFunction(s[e])?t=>t[e]():(t,n)=>{throw new it(`Response type '${e}' is not supported`,it.ERR_NOT_SUPPORT,n)})})})(new Response);const h9=async s=>{if(s==null)return 0;if(te.isBlob(s))return s.size;if(te.isSpecCompliantForm(s))return(await new Request(Cs.origin,{method:"POST",body:s}).arrayBuffer()).byteLength;if(te.isArrayBufferView(s)||te.isArrayBuffer(s))return s.byteLength;if(te.isURLSearchParams(s)&&(s=s+""),te.isString(s))return(await u9(s)).byteLength},f9=async(s,e)=>{const t=te.toFiniteNumber(s.getContentLength());return t??h9(e)},ep={http:DO,xhr:r9,fetch:xu&&(async s=>{let{url:e,method:t,data:n,signal:i,cancelToken:r,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:f}=e_(s);c=c?(c+"").toLowerCase():"text";let p=o9([i,r&&r.toAbortSignal()],o),g;const S=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let k;try{if(l&&d9&&t!=="get"&&t!=="head"&&(k=await f9(u,n))!==0){let w=new Request(e,{method:"POST",body:n,duplex:"half"}),R;if(te.isFormData(n)&&(R=w.headers.get("content-type"))&&u.setContentType(R),w.body){const[T,E]=Ky(k,wu(Xy(l)));n=t_(w.body,i_,T,E)}}te.isString(d)||(d=d?"include":"omit");const O="credentials"in Request.prototype;g=new Request(e,{...f,signal:p,method:t.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:O?d:void 0});let $=await fetch(g);const M=Zf&&(c==="stream"||c==="response");if(Zf&&(a||M&&S)){const w={};["status","statusText","headers"].forEach(F=>{w[F]=$[F]});const R=te.toFiniteNumber($.headers.get("content-length")),[T,E]=a&&Ky(R,wu(Xy(a),!0))||[];$=new Response(t_($.body,i_,T,()=>{E&&E(),S&&S()}),w)}c=c||"text";let b=await ku[te.findKey(ku,c)||"text"]($,s);return!M&&S&&S(),await new Promise((w,R)=>{Gy(w,R,{data:b,headers:Js.from($.headers),status:$.status,statusText:$.statusText,config:s,request:g})})}catch(O){throw S&&S(),O&&O.name==="TypeError"&&/fetch/i.test(O.message)?Object.assign(new it("Network Error",it.ERR_NETWORK,s,g),{cause:O.cause||O}):it.from(O,O&&O.code,s,g)}})};te.forEach(ep,(s,e)=>{if(s){try{Object.defineProperty(s,"name",{value:e})}catch{}Object.defineProperty(s,"adapterName",{value:e})}});const r_=s=>`- ${s}`,p9=s=>te.isFunction(s)||s===null||s===!1,o_={getAdapter:s=>{s=te.isArray(s)?s:[s];const{length:e}=s;let t,n;const i={};for(let r=0;r<e;r++){t=s[r];let o;if(n=t,!p9(t)&&(n=ep[(o=String(t)).toLowerCase()],n===void 0))throw new it(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+r]=n}if(!n){const r=Object.entries(i).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?r.length>1?`since :
`+r.map(r_).join(`
`):" "+r_(r[0]):"as no adapter specified";throw new it("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:ep};function tp(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new Zo(null,s)}function a_(s){return tp(s),s.headers=Js.from(s.headers),s.data=Jf.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),o_.getAdapter(s.adapter||dl.adapter)(s).then(function(n){return tp(s),n.data=Jf.call(s,s.transformResponse,n),n.headers=Js.from(n.headers),n},function(n){return qy(n)||(tp(s),n&&n.response&&(n.response.data=Jf.call(s,s.transformResponse,n.response),n.response.headers=Js.from(n.response.headers))),Promise.reject(n)})}const l_="1.8.4",Su={};["object","boolean","number","function","string","symbol"].forEach((s,e)=>{Su[s]=function(n){return typeof n===s||"a"+(e<1?"n ":" ")+s}});const c_={};Su.transitional=function(e,t,n){function i(r,o){return"[Axios v"+l_+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,a)=>{if(e===!1)throw new it(i(o," has been removed"+(t?" in "+t:"")),it.ERR_DEPRECATED);return t&&!c_[o]&&(c_[o]=!0,console.warn(i(o," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,o,a):!0}},Su.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function m9(s,e,t){if(typeof s!="object")throw new it("options must be an object",it.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let i=n.length;for(;i-- >0;){const r=n[i],o=e[r];if(o){const a=s[r],l=a===void 0||o(a,r,s);if(l!==!0)throw new it("option "+r+" must be "+l,it.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new it("Unknown option "+r,it.ERR_BAD_OPTION)}}const Cu={assertOptions:m9,validators:Su},ri=Cu.validators;let yo=class{constructor(e){this.defaults=e,this.interceptors={request:new Uy,response:new Uy}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=vo(this.defaults,t);const{transitional:n,paramsSerializer:i,headers:r}=t;n!==void 0&&Cu.assertOptions(n,{silentJSONParsing:ri.transitional(ri.boolean),forcedJSONParsing:ri.transitional(ri.boolean),clarifyTimeoutError:ri.transitional(ri.boolean)},!1),i!=null&&(te.isFunction(i)?t.paramsSerializer={serialize:i}:Cu.assertOptions(i,{encode:ri.function,serialize:ri.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Cu.assertOptions(t,{baseUrl:ri.spelling("baseURL"),withXsrfToken:ri.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=r&&te.merge(r.common,r[t.method]);r&&te.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),t.headers=Js.concat(o,r);const a=[];let l=!0;this.interceptors.request.forEach(function(S){typeof S.runWhen=="function"&&S.runWhen(t)===!1||(l=l&&S.synchronous,a.unshift(S.fulfilled,S.rejected))});const c=[];this.interceptors.response.forEach(function(S){c.push(S.fulfilled,S.rejected)});let u,d=0,f;if(!l){const g=[a_.bind(this),void 0];for(g.unshift.apply(g,a),g.push.apply(g,c),f=g.length,u=Promise.resolve(t);d<f;)u=u.then(g[d++],g[d++]);return u}f=a.length;let p=t;for(d=0;d<f;){const g=a[d++],S=a[d++];try{p=g(p)}catch(k){S.call(this,k);break}}try{u=a_.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=vo(this.defaults,e);const t=Jy(e.baseURL,e.url,e.allowAbsoluteUrls);return Wy(t,e.params,e.paramsSerializer)}};te.forEach(["delete","get","head","options"],function(e){yo.prototype[e]=function(t,n){return this.request(vo(n||{},{method:e,url:t,data:(n||{}).data}))}}),te.forEach(["post","put","patch"],function(e){function t(n){return function(r,o,a){return this.request(vo(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}yo.prototype[e]=t(),yo.prototype[e+"Form"]=t(!0)});let g9=class Zk{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(a=>{n.subscribe(a),r=a}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},e(function(r,o,a){n.reason||(n.reason=new Zo(r,o,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new Zk(function(i){e=i}),cancel:e}}};function v9(s){return function(t){return s.apply(null,t)}}function y9(s){return te.isObject(s)&&s.isAxiosError===!0}const sp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(sp).forEach(([s,e])=>{sp[e]=s});function u_(s){const e=new yo(s),t=$y(yo.prototype.request,e);return te.extend(t,yo.prototype,e,{allOwnKeys:!0}),te.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return u_(vo(s,i))},t}const Zt=u_(dl);Zt.Axios=yo,Zt.CanceledError=Zo,Zt.CancelToken=g9,Zt.isCancel=qy,Zt.VERSION=l_,Zt.toFormData=_u,Zt.AxiosError=it,Zt.Cancel=Zt.CanceledError,Zt.all=function(e){return Promise.all(e)},Zt.spread=v9,Zt.isAxiosError=y9,Zt.mergeConfig=vo,Zt.AxiosHeaders=Js,Zt.formToJSON=s=>Qy(te.isHTMLForm(s)?new FormData(s):s),Zt.getAdapter=o_.getAdapter,Zt.HttpStatusCode=sp,Zt.default=Zt;const{Axios:qse,AxiosError:Gse,CanceledError:Kse,isCancel:Xse,CancelToken:Jse,VERSION:Zse,all:ene,Cancel:tne,isAxiosError:sne,spread:nne,toFormData:ine,AxiosHeaders:rne,HttpStatusCode:one,formToJSON:ane,getAdapter:lne,mergeConfig:cne}=Zt;class _9{instance(){return Zt.create({baseURL:formychat_admin_vars.rest_endpoint+"/",headers:{"X-WP-Nonce":formychat_admin_vars.rest_nonce||""}})}get(e){return this.instance().get(e)}post(e,t){return this.instance().post(e,t)}put(e,t){return this.instance().put(e,t)}delete(e,t){return this.instance().delete(e,t)}}const Ke=new _9,b9={name:"MailchimpSetup",data(){return{apiKey:"",savedApiKey:"",isConnecting:!1,isRemoving:!1,showRemoveConfirmation:!1,connectionStatus:null,errorMessage:""}},computed:{maskedApiKey(){if(!this.savedApiKey)return this.apiKey;const s=this.savedApiKey;return s.length<=8?s:s.substring(0,4)+"*".repeat(s.length-8)+s.substring(s.length-4)}},props:{integration:{type:Object,required:!0}},mounted(){this.loadExistingApiKey()},methods:{async loadExistingApiKey(){try{const s=await Ke.get("integrations/get_mailchimp_key");s.data&&s.data.api_key&&(this.apiKey=s.data.api_key,this.savedApiKey=s.data.api_key,this.connectionStatus="success",this.$emit("connected",{api_key:s.data.api_key}))}catch{console.log("No existing API key found")}},async connectMailchimp(){var s,e,t;if(!(!this.apiKey||!this.apiKey.trim())){this.isConnecting=!0,this.connectionStatus=null,this.errorMessage="";try{const n=await Ke.post("integrations/save_mailchimp_key",{api_key:this.apiKey.trim()});if(!n.data||!n.data.success)throw new Error("Failed to save API key");await new Promise(r=>setTimeout(r,100));const i=await Ke.get("integrations/mailchimp_meta");i.data&&i.data.success?(this.connectionStatus="success",this.savedApiKey=this.apiKey,await Ke.post("integrations",{integration_id:"mailchimp",enabled:!0}),this.$emit("connected",{api_key:this.apiKey,lists:i.data.lists||[],tags:i.data.tags||[],fields:i.data.fields||[]})):(this.connectionStatus="error",this.errorMessage=((s=i.data)==null?void 0:s.message)||"Invalid API key or connection failed.")}catch(n){this.connectionStatus="error",this.errorMessage=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||n.message||"Connection failed. Please check your API key.",console.error("Connection error:",n)}finally{this.isConnecting=!1}}},async confirmRemoveApiKey(){var s,e;this.isRemoving=!0,this.errorMessage="";try{await Ke.post("integrations/remove_mailchimp_key"),await Ke.post("integrations",{integration_id:"mailchimp",enabled:!1}),this.apiKey="",this.savedApiKey="",this.connectionStatus=null,this.showRemoveConfirmation=!1,this.$emit("disconnected")}catch(t){this.connectionStatus="error",this.errorMessage=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.message)||t.message||"Failed to remove API key.",console.error("API key removal error:",t)}finally{this.isRemoving=!1}}}},Ui=s=>(Ds("data-v-aa5887f5"),s=s(),Is(),s),w9={class:"bg-white"},x9={class:"bg-gradient-to-r from-yellow-100 to-yellow-200 px-8 py-6 text-center"},k9={class:"flex items-center justify-center gap-3"},S9={class:"rounded-full p-2"},C9=["src"],O9=Ui(()=>h("h1",{class:"text-3xl text-gray-800 font-bold"}," Mailchimp ",-1)),M9={class:"px-8 py-8"},A9=Fs('<h2 class="text-2xl font-semibold text-gray-800 mb-2" data-v-aa5887f5>Connect Mailchimp</h2><p class="text-gray-600 mb-6 leading-relaxed" data-v-aa5887f5> Login to your <a href="https://mailchimp.com/login/" target="_blank" class="text-blue-600 hover:underline font-semibold" data-v-aa5887f5> Mailchimp account </a> to get your API key. </p><div class="mb-8" data-v-aa5887f5><a href="https://youtu.be/x70qZf2KWwg" target="_blank" class="inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 transition duration-150 rounded-full px-4 py-2 border border-gray-200 text-sm font-medium text-gray-700" data-v-aa5887f5><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48" data-v-aa5887f5><path fill="#FF3D00" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z" data-v-aa5887f5></path><path fill="#FFF" d="M20 31L20 17 32 24z" data-v-aa5887f5></path></svg> Watch Tutorial </a></div>',3),$9={class:"mb-6"},T9=Fs('<div class="flex items-center gap-2 mb-3" data-v-aa5887f5><label class="text-gray-800 font-semibold text-base" data-v-aa5887f5>API Key</label><button type="button" class="text-gray-400 hover:text-gray-600" title="Get your API key from Mailchimp profile &gt; Extras &gt; API keys" data-v-aa5887f5><svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor" data-v-aa5887f5><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-aa5887f5></path></svg></button></div><p class="text-sm text-gray-500 mb-3" data-v-aa5887f5> Get your API key from Mailchimp profile &gt; Extras &gt; API keys. <a href="https://mailchimp.com/help/about-api-keys/" target="_blank" class="text-blue-600 hover:underline" data-v-aa5887f5> Read how to get it  </a></p>',2),P9={class:"flex gap-2"},L9={class:"relative flex-1"},E9=["disabled"],D9=["value"],I9=["disabled"],R9={key:0,class:"inline-block w-4 h-4"},F9=[Ui(()=>h("svg",{class:"animate-spin w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))],B9={key:1},N9={key:2},V9=Ui(()=>h("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)),z9={key:0,class:"mb-6 p-3 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2"},j9=[Ui(()=>h("svg",{class:"w-4 h-4 text-green-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),Ui(()=>h("p",{class:"text-green-800 text-sm font-medium"},"Connected successfully",-1))],W9={key:1,class:"mb-6 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},U9=Ui(()=>h("svg",{class:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),H9={class:"flex-1"},Q9={class:"text-red-800 text-sm font-medium"},Y9={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},q9={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},G9=Ui(()=>h("h3",{class:"text-xl font-semibold text-gray-800 mb-3"},"Remove API Key",-1)),K9=Ui(()=>h("p",{class:"text-gray-600 mb-6"},"Are you sure you want to remove the API key? This will disconnect your integration.",-1)),X9={class:"flex justify-end gap-3"},J9=["disabled"],Z9=["disabled"],eM={key:0,class:"inline-block w-5 h-5"},tM=[Ui(()=>h("svg",{class:"animate-spin w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))],sM={key:1},nM={key:2};function iM(s,e,t,n,i,r){return v(),C("div",w9,[h("div",x9,[h("div",k9,[h("div",S9,[h("img",{src:s.Image("integrations/mailchimp.png"),class:"w-16 h-auto",alt:"Mailchimp"},null,8,C9)]),O9])]),h("div",M9,[A9,h("div",$9,[T9,h("div",P9,[h("div",L9,[i.savedApiKey?(v(),C("input",{key:1,type:"text",value:r.maskedApiKey,disabled:"",class:"w-full px-4 py-3 border-2 border-blue-500 rounded-lg focus:outline-none focus:border-blue-600 font-mono text-sm bg-gray-50"},null,8,D9)):xt((v(),C("input",{key:0,"onUpdate:modelValue":e[0]||(e[0]=o=>i.apiKey=o),type:"text",placeholder:"Ex: ca7*****************************-us14",class:"w-full px-4 py-3 border-2 border-blue-500 rounded-lg focus:outline-none focus:border-blue-600 font-mono text-sm",disabled:i.isConnecting},null,8,E9)),[[Ot,i.apiKey]])]),i.savedApiKey?(v(),C("button",{key:1,onClick:e[2]||(e[2]=o=>i.showRemoveConfirmation=!0),type:"button",class:"bg-red-50 hover:bg-red-100 text-red-600 font-semibold px-6 py-3 rounded-lg transition duration-150 flex items-center justify-center gap-2 w-36"},[V9,B(" Remove ")])):(v(),C("button",{key:0,onClick:e[1]||(e[1]=(...o)=>r.connectMailchimp&&r.connectMailchimp(...o)),disabled:!i.apiKey||i.isConnecting,class:"bg-blue-600 hover:bg-blue-700 text-white font-semibold px-6 py-3 rounded-lg transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 w-36"},[i.isConnecting?(v(),C("span",R9,F9)):z("",!0),i.isConnecting?(v(),C("span",N9,"Connecting...")):(v(),C("span",B9,"Connect"))],8,I9))])]),i.connectionStatus==="success"?(v(),C("div",z9,j9)):z("",!0),i.connectionStatus==="error"?(v(),C("div",W9,[U9,h("div",H9,[h("p",Q9,q(i.errorMessage||"Connection failed. Please check your API key."),1)])])):z("",!0),i.showRemoveConfirmation?(v(),C("div",Y9,[h("div",q9,[G9,K9,h("div",X9,[h("button",{onClick:e[3]||(e[3]=o=>i.showRemoveConfirmation=!1),disabled:i.isRemoving,class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-6 py-3 rounded-lg transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,J9),h("button",{onClick:e[4]||(e[4]=(...o)=>r.confirmRemoveApiKey&&r.confirmRemoveApiKey(...o)),disabled:i.isRemoving,class:"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-3 rounded-lg transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[i.isRemoving?(v(),C("span",eM,tM)):z("",!0),i.isRemoving?(v(),C("span",nM,"Removing...")):(v(),C("span",sM,"Yes, remove it!"))],8,Z9)])])])):z("",!0)])])}const rM=Nt(b9,[["render",iM],["__scopeId","data-v-aa5887f5"]]),oM={name:"GoogleSheetsSetup",components:{Select:$t,Button:ct,Text:Gt,InputLabel:Pe},data(){return{isLoading:!0,isFetchingUserInfo:!1,isConnected:!1,isRevoked:!1,connectedEmail:"",connectedPicture:"",isDisconnecting:!1,showRemoveConfirmation:!1,connectionStatus:null,errorMessage:"",syncSettings:{spreadsheet_id:"",spreadsheet_name:"",sync_mode:"scheduled",sync_interval:"1h",last_sync_at:null},syncStats:{total:0,synced:0,pending:0},freeLimit:100,intervals:[],spreadsheets:[],isLoadingSheets:!1,showCreateMode:!1,selectedSheetId:"",isSelectingSheet:!1,newSheetName:"",isCreatingSheet:!1,isChangingSheet:!1,showResyncConfirmation:!1,isSaving:!1,isSyncing:!1,syncError:"",syncSuccess:"",settingsSuccess:"",settingsError:"",isInitialSyncDone:!1,syncButtonState:null,isAutoSaving:!1,isDataLoaded:!1}},props:{integration:{type:Object,required:!0}},computed:{isPremium(){var s;return((s=window.formychat_admin_vars)==null?void 0:s.is_premium)||!1},spreadsheetOptions(){return this.spreadsheets.map(s=>({value:s.id,label:s.name,name:s.name}))},syncModeOptions(){return[{value:"scheduled",label:"Scheduled (Recommended)",name:"Scheduled (Recommended)"},{value:"realtime",label:"Real-time",name:"Real-time"},{value:"manual",label:"Manual",name:"Manual"}]},intervalOptions(){return this.intervals.map(s=>({value:s.value,label:s.label,name:s.label}))},formattedLastSync(){if(!this.syncSettings.last_sync_at)return"Never";const s=this.syncSettings.last_sync_at.replace(" ","T"),e=new Date(s);if(isNaN(e.getTime()))return this.syncSettings.last_sync_at;const n=new Date-e,i=Math.floor(n/6e4);return i<1?"Just now":i<60?`${i} minute${i>1?"s":""} ago`:e.toLocaleString()}},mounted(){this.loadConnectionStatus()},watch:{"syncSettings.sync_mode":{handler(s,e){this.isDataLoaded&&s!==e&&this.isInitialSyncDone&&this.syncSettings.spreadsheet_id&&!this.isAutoSaving&&this.autoSaveSettings()}},"syncSettings.sync_interval":{handler(s,e){this.isDataLoaded&&s!==e&&this.isInitialSyncDone&&this.syncSettings.spreadsheet_id&&!this.isAutoSaving&&this.autoSaveSettings()}}},methods:{async loadConnectionStatus(){var e,t;this.isLoading=!0;const s=(t=(e=window.formychat_admin_vars)==null?void 0:e.additional)==null?void 0:t.google_sheets;if(s&&s.revoked){this.isRevoked=!0,this.connectedEmail=s.email||"",this.connectedPicture=s.picture||"",this.isLoading=!1;return}if(s&&s.connected){if(this.isConnected=!0,this.connectedEmail=s.email||"",this.connectedPicture=s.picture||"",this.connectionStatus="success",this.loadSyncData(),(!this.connectedEmail||!this.connectedPicture)&&s.access_token){this.isLoading=!1,this.fetchUserInfo(s.access_token,s.refresh_token);return}this.$emit("connected",{email:this.connectedEmail}),this.isLoading=!1;return}try{const n=await Ke.get("integrations/google-sheets/status");n.data&&n.data.connected&&(this.isConnected=!0,this.connectedEmail=n.data.email||"",this.connectedPicture=n.data.picture||"",this.connectionStatus="success",this.loadSyncData(),(!this.connectedEmail||!this.connectedPicture)&&n.data.access_token&&this.fetchUserInfo(n.data.access_token,n.data.refresh_token),this.$emit("connected",{email:this.connectedEmail}))}catch{console.log("Failed to load Google Sheets status")}finally{this.isLoading=!1}},async refreshAccessToken(s){try{const e=await fetch("https://auth-staging.wppool.dev/refresh/google/formychat-sheet-access",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({refresh_token:s})});if(e.ok){const t=await e.json();if(t.access_token)return await Ke.post("integrations/google-sheets/token",{access_token:t.access_token}),t.access_token}}catch(e){console.log("Failed to refresh access token:",e)}return null},async fetchUserInfo(s,e=null,t=!1){this.isFetchingUserInfo=!0;try{const n=await fetch("https://auth-staging.wppool.dev/userinfo/google",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({access_token:s})});if(n.ok){const i=await n.json();(i.email||i.picture)&&(await Ke.post("integrations/google-sheets/userinfo",{email:i.email||"",picture:i.picture||""}),this.connectedEmail=i.email||this.connectedEmail,this.connectedPicture=i.picture||"")}else if(n.status===401&&!t&&e){const i=await this.refreshAccessToken(e);if(i)return this.fetchUserInfo(i,null,!0)}}catch(n){console.log("Failed to fetch user info from auth server:",n)}finally{this.isFetchingUserInfo=!1}},handleConnect(){const s=new URL(window.location.href);s.searchParams.set("formychat-action","authenticated"),s.searchParams.set("integration","googlesheets");const e=`https://auth-staging.wppool.dev/auth/google/formychat-sheet-access?callback_url=${encodeURIComponent(s.toString())}&scope=openid%20email%20https://www.googleapis.com/auth/spreadsheets%20https://www.googleapis.com/auth/drive.readonly`;window.location.href=e},async handleReconnect(){try{await Ke.post("integrations/google-sheets/disconnect")}catch{}this.handleConnect()},async handleDisconnect(){var s,e;this.isDisconnecting=!0,this.errorMessage="";try{await Ke.post("integrations/google-sheets/disconnect"),await Ke.post("integrations",{integration_id:"google_sheets",enabled:!1}),this.isConnected=!1,this.connectedEmail="",this.connectedPicture="",this.connectionStatus=null,this.showRemoveConfirmation=!1,this.syncSettings={spreadsheet_id:"",spreadsheet_name:"",sync_mode:"scheduled",sync_interval:"1h",last_sync_at:null},this.syncStats={total:0,synced:0,pending:0},this.isInitialSyncDone=!1,this.selectedSheetId="",this.newSheetName="",this.showCreateMode=!1,this.isChangingSheet=!1,this.$emit("disconnected")}catch(t){this.connectionStatus="error",this.errorMessage=((e=(s=t.response)==null?void 0:s.data)==null?void 0:e.message)||"Failed to disconnect."}finally{this.isDisconnecting=!1}},loadSyncData(){var e,t;const s=(t=(e=window.formychat_admin_vars)==null?void 0:e.additional)==null?void 0:t.google_sheets;s&&(s.intervals&&(this.intervals=s.intervals),s.free_limit&&(this.freeLimit=s.free_limit),s.sync_settings&&(this.syncSettings={...this.syncSettings,...s.sync_settings},s.sync_settings.last_sync_at&&(this.isInitialSyncDone=!0)),s.sync_stats&&(this.syncStats={...this.syncStats,...s.sync_stats})),this.isConnected&&this.loadSpreadsheets(),this.$nextTick(()=>{this.isDataLoaded=!0})},updateGlobalData(s=null,e=null){var t,n;(n=(t=window.formychat_admin_vars)==null?void 0:t.additional)!=null&&n.google_sheets&&(s&&(window.formychat_admin_vars.additional.google_sheets.sync_settings={...window.formychat_admin_vars.additional.google_sheets.sync_settings,...s}),e&&(window.formychat_admin_vars.additional.google_sheets.sync_stats={...window.formychat_admin_vars.additional.google_sheets.sync_stats,...e}))},clearSpreadsheet(){this.syncSettings.spreadsheet_id="",this.syncSettings.spreadsheet_name="",this.selectedSheetId="",this.showCreateMode=!1,this.isChangingSheet=!1},cancelChangeSheet(){this.isChangingSheet=!1,this.selectedSheetId="",this.newSheetName="",this.showCreateMode=!1},async confirmSelectSheet(){var e,t;if(!this.selectedSheetId)return;const s=this.spreadsheets.find(n=>n.id===this.selectedSheetId);if(s){this.isSelectingSheet=!0,this.syncError="";try{this.syncSettings.spreadsheet_id=s.id,this.syncSettings.spreadsheet_name=s.name,this.selectedSheetId="",this.isChangingSheet=!1,this.isInitialSyncDone=!1}catch(n){this.syncError=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to setup spreadsheet."}finally{this.isSelectingSheet=!1}}},async loadSpreadsheets(){var s;if(!this.isLoadingSheets){this.isLoadingSheets=!0,this.syncError="";try{const e=await Ke.get("integrations/google-sheets/spreadsheets");(s=e.data)!=null&&s.spreadsheets&&(this.spreadsheets=e.data.spreadsheets)}catch(e){console.log("Failed to load spreadsheets:",e),this.syncError="Failed to load spreadsheets. Please disconnect and reconnect your Google account."}finally{this.isLoadingSheets=!1}}},onSpreadsheetSelect(s){const e=this.spreadsheets.find(t=>t.id===s);e&&(this.syncSettings.spreadsheet_name=e.name)},async createNewSheet(){var s,e,t;if(this.newSheetName){this.isCreatingSheet=!0,this.syncError="";try{const n=await Ke.post("integrations/google-sheets/spreadsheets",{title:this.newSheetName});if((s=n.data)!=null&&s.spreadsheet){const i=n.data.spreadsheet;this.spreadsheets.unshift({id:i.id,name:i.name}),this.syncSettings.spreadsheet_id=i.id,this.syncSettings.spreadsheet_name=i.name,this.updateGlobalData({spreadsheet_id:i.id,spreadsheet_name:i.name}),this.newSheetName="",this.showCreateMode=!1,this.isChangingSheet=!1,this.isInitialSyncDone=!1}}catch(n){this.syncError=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to create spreadsheet."}finally{this.isCreatingSheet=!1}}},async saveSettings(){var s,e,t;this.isSaving=!0,this.settingsError="",this.settingsSuccess="";try{const n=await Ke.post("integrations/google-sheets/sync-settings",{spreadsheet_id:this.syncSettings.spreadsheet_id,spreadsheet_name:this.syncSettings.spreadsheet_name,sync_mode:this.syncSettings.sync_mode,sync_interval:this.syncSettings.sync_interval});(s=n.data)!=null&&s.settings&&(this.syncSettings={...this.syncSettings,...n.data.settings},this.updateGlobalData(n.data.settings)),this.settingsSuccess="Settings saved successfully!",setTimeout(()=>{this.settingsSuccess=""},3e3)}catch(n){this.settingsError=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to save settings."}finally{this.isSaving=!1}},async autoSaveSettings(){var s,e,t;this.settingsError="",this.isAutoSaving=!0;try{const n=await Ke.post("integrations/google-sheets/sync-settings",{spreadsheet_id:this.syncSettings.spreadsheet_id,spreadsheet_name:this.syncSettings.spreadsheet_name,sync_mode:this.syncSettings.sync_mode,sync_interval:this.syncSettings.sync_interval,save_only:!0});(s=n.data)!=null&&s.settings&&this.updateGlobalData(n.data.settings)}catch(n){this.settingsError=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to save settings."}finally{this.isAutoSaving=!1}},async saveAndSync(){var s,e,t,n,i;this.isSaving=!0,this.isSyncing=!0,this.syncError="",this.syncSuccess="",this.settingsError="";try{await Ke.post("integrations/google-sheets/sync-settings",{spreadsheet_id:this.syncSettings.spreadsheet_id,spreadsheet_name:this.syncSettings.spreadsheet_name,sync_mode:this.syncSettings.sync_mode,sync_interval:this.syncSettings.sync_interval});const r=await Ke.post("integrations/google-sheets/resync");(s=r.data)!=null&&s.stats&&(this.syncStats=r.data.stats,this.updateGlobalData(null,r.data.stats)),(e=r.data)!=null&&e.settings&&(this.syncSettings={...this.syncSettings,...r.data.settings},this.updateGlobalData(r.data.settings)),this.isInitialSyncDone=!0,this.syncSuccess=`Synced ${((t=r.data)==null?void 0:t.synced)??0} lead(s) successfully!`,setTimeout(()=>{this.syncSuccess=""},5e3)}catch(r){this.syncError=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to save and sync."}finally{this.isSaving=!1,this.isSyncing=!1}},async triggerManualSync(){var s,e;this.isSyncing=!0,this.syncButtonState=null;try{const t=await Ke.post("integrations/google-sheets/sync");(s=t.data)!=null&&s.stats&&(this.syncStats=t.data.stats,this.updateGlobalData(null,t.data.stats)),(e=t.data)!=null&&e.settings&&(this.syncSettings={...this.syncSettings,...t.data.settings},this.updateGlobalData(t.data.settings)),this.syncButtonState="synced",setTimeout(()=>{this.syncButtonState=null},3e3)}catch{this.syncButtonState=null}finally{this.isSyncing=!1}},triggerFullResync(){this.showResyncConfirmation=!0},async executeFullResync(){var s,e,t,n,i;this.showResyncConfirmation=!1,this.isSyncing=!0,this.syncError="",this.syncSuccess="";try{const r=await Ke.post("integrations/google-sheets/resync");(s=r.data)!=null&&s.stats&&(this.syncStats=r.data.stats,this.updateGlobalData(null,r.data.stats)),(e=r.data)!=null&&e.success?(this.syncSuccess=`Full resync complete! Synced ${r.data.synced} lead(s).`,setTimeout(()=>{this.syncSuccess=""},3e3)):(t=r.data)!=null&&t.error&&(this.syncError=r.data.error)}catch(r){this.syncError=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Resync failed."}finally{this.isSyncing=!1}},async loadSyncStats(){var s;try{const e=await Ke.get("integrations/google-sheets/sync-status");(s=e.data)!=null&&s.stats&&(this.syncStats=e.data.stats)}catch(e){console.log("Failed to load sync stats:",e)}}}},Kt=s=>(Ds("data-v-b06beac0"),s=s(),Is(),s),aM={class:"bg-white"},lM={class:"bg-gradient-to-r from-green-100 to-green-200 px-8 py-6 text-center"},cM={class:"flex items-center justify-center gap-3"},uM={class:"rounded-full p-2"},dM=["src"],hM=Kt(()=>h("h1",{class:"text-3xl text-gray-800 font-bold"}," Google Sheets ",-1)),fM={class:"px-8 py-8"},pM={key:0,class:"flex items-center justify-center py-8"},mM=[Kt(()=>h("svg",{class:"animate-spin w-8 h-8 text-green-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))],gM=Fs('<div class="flex items-center gap-4 mb-2" data-v-b06beac0><h2 class="text-2xl font-bold text-gray-800" data-v-b06beac0>Connect Google Sheets</h2><a href="https://www.youtube.com/watch?v=x70qZf2KWwg" target="_blank" class="inline-flex items-center gap-2 bg-gray-100 hover:bg-gray-200 transition duration-150 rounded-full px-4 py-1.5 border border-gray-200 text-sm font-medium text-gray-700" data-v-b06beac0><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="18" height="18" viewBox="0 0 48 48" data-v-b06beac0><path fill="#FF3D00" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z" data-v-b06beac0></path><path fill="#FFF" d="M20 31L20 17 32 24z" data-v-b06beac0></path></svg> Watch Tutorial </a></div><p class="text-gray-600 mb-6 leading-relaxed" data-v-b06beac0> Connect your Google account to sync all form submissions directly to <a href="https://sheets.google.com" target="_blank" class="text-blue-600 hover:underline" data-v-b06beac0> Google Sheets </a> in real time. </p>',2),vM={key:0,class:"mb-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg flex items-center gap-3"},yM=Kt(()=>h("svg",{class:"w-5 h-5 text-yellow-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),_M={class:"text-sm text-yellow-800"},bM={class:"flex items-center gap-3"},wM=Fs('<svg viewBox="0 0 24 24" class="w-5 h-5" data-v-b06beac0><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4" data-v-b06beac0></path><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853" data-v-b06beac0></path><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05" data-v-b06beac0></path><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335" data-v-b06beac0></path></svg>',1),xM=Fs('<div class="relative group" data-v-b06beac0><button type="button" class="text-gray-400 hover:text-gray-600" data-v-b06beac0><svg class="w-5 h-5" viewBox="0 0 20 20" fill="currentColor" data-v-b06beac0><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" data-v-b06beac0></path></svg></button><div class="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-gray-800 text-white text-xs rounded-lg whitespace-nowrap opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-10" data-v-b06beac0> You&#39;ll be redirected to Google to authorize access to your spreadsheets <div class="absolute top-full left-1/2 -translate-x-1/2 border-4 border-transparent border-t-gray-800" data-v-b06beac0></div></div></div>',1),kM={class:"mb-6"},SM=Kt(()=>h("p",{class:"text-gray-700 font-medium mb-2"},"Account connected ",-1)),CM={class:"flex items-center gap-3"},OM={class:"flex items-center gap-2 px-4 py-2 border border-teal-400 rounded-lg bg-white"},MM={key:0,class:"w-5 h-5 rounded-full bg-teal-100 flex items-center justify-center"},AM=[Kt(()=>h("svg",{class:"animate-spin w-3 h-3 text-teal-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))],$M=["src","alt"],TM={key:2,class:"w-5 h-5 text-teal-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},PM=[Kt(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1))],LM={class:"text-sm text-teal-700 font-medium"},EM={class:"mb-4"},DM={key:0},IM={class:"flex gap-2 items-center"},RM=Kt(()=>h("p",{class:"mt-2 text-sm text-orange-500 italic"},"Note: Selecting a sheet will clear its existing data.",-1)),FM={class:"mt-4"},BM=Kt(()=>h("span",{class:"text-gray-500 text-sm italic"},"Or,",-1)),NM=Kt(()=>h("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),VM=["disabled"],zM=Kt(()=>h("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),jM={class:"mt-3"},WM=Kt(()=>h("span",{class:"text-gray-500 text-sm italic"},"Or, ",-1)),UM={key:1},HM={class:"flex items-center gap-3 px-4 py-3 border border-green-200 rounded-lg bg-green-50"},QM=["src"],YM={class:"flex-1 text-gray-800 truncate"},qM=["href"],GM={key:0,class:"mb-4 p-2 bg-red-50 border border-red-200 rounded text-red-800 text-sm"},KM={key:1,class:"mb-4 p-2 bg-green-50 border border-green-200 rounded text-green-800 text-sm"},XM={key:0},JM={key:0,class:"mb-4 p-2 bg-green-50 border border-green-200 rounded text-green-800 text-sm"},ZM={key:1,class:"mb-4 p-2 bg-red-50 border border-red-200 rounded text-red-800 text-sm"},eA={key:2,class:"flex justify-end"},tA=["disabled"],sA={key:0,class:"animate-spin w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},nA=[Kt(()=>h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),Kt(()=>h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1))],iA={class:"flex items-center justify-between pt-4 border-t border-gray-200"},rA={class:"flex items-center gap-4 text-sm"},oA={class:"font-semibold text-green-600"},aA={class:"font-semibold text-yellow-600"},lA={class:"text-gray-400"},cA=["disabled"],uA={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},dA=[Kt(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1))],hA=[Kt(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1))],fA={key:0,class:"mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm"},pA={key:2,class:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2"},mA=Kt(()=>h("svg",{class:"w-4 h-4 text-red-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),gA={class:"text-red-800 text-sm font-medium"},vA={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},yA={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},_A=Kt(()=>h("h3",{class:"text-xl font-semibold text-gray-800 mb-3"},"Disconnect Google Account",-1)),bA=Kt(()=>h("p",{class:"text-gray-600 mb-6"},"Are you sure you want to disconnect? This will stop syncing form submissions to Google Sheets.",-1)),wA={class:"flex justify-end gap-3"},xA=["disabled"],kA=["disabled"],SA={key:0,class:"inline-block w-5 h-5"},CA=[Kt(()=>h("svg",{class:"animate-spin w-5 h-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1))],OA={key:1},MA={key:2},AA={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$A={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},TA=Kt(()=>h("h3",{class:"text-xl font-semibold text-gray-800 mb-3"},"Full Resync",-1)),PA=Kt(()=>h("p",{class:"text-gray-600 mb-4"},"This will clear all existing data in the spreadsheet and re-sync all leads from scratch.",-1)),LA=Kt(()=>h("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-6"},[h("p",{class:"text-yellow-800 text-sm"},"Please backup your spreadsheet before proceeding.")],-1)),EA={class:"flex justify-end gap-3"};function DA(s,e,t,n,i,r){const o=on("InputLabel"),a=on("Select"),l=on("Button"),c=on("Text");return v(),C("div",aM,[h("div",lM,[h("div",cM,[h("div",uM,[h("img",{src:s.Image("integrations/google-sheets.png"),class:"w-16 h-auto",alt:"Google Sheets"},null,8,dM)]),hM])]),h("div",fM,[i.isLoading?(v(),C("div",pM,mM)):(v(),C(Ve,{key:1},[!i.isConnected||i.isRevoked?(v(),C(Ve,{key:0},[gM,i.isRevoked?(v(),C("div",vM,[yM,h("span",_M,[h("strong",null,q(i.connectedEmail||"Your account"),1),B(" connection expired. Please reconnect. ")])])):z("",!0),h("div",bM,[h("button",{onClick:e[0]||(e[0]=u=>i.isRevoked?r.handleReconnect():r.handleConnect()),class:"inline-flex items-center gap-3 bg-white hover:bg-gray-50 border border-gray-300 hover:border-gray-400 text-gray-700 font-medium px-5 py-3 rounded-lg transition-all duration-200 shadow-sm hover:shadow"},[wM,B(" Continue with Google ")]),xM])],64)):(v(),C(Ve,{key:1},[h("div",kM,[SM,h("div",CM,[h("div",OM,[i.isFetchingUserInfo?(v(),C("div",MM,AM)):i.connectedPicture?(v(),C("img",{key:1,src:i.connectedPicture,alt:i.connectedEmail,class:"w-5 h-5 rounded-full object-cover",referrerpolicy:"no-referrer"},null,8,$M)):(v(),C("svg",TM,PM)),h("span",LM,q(i.connectedEmail||"Connected"),1)]),h("button",{onClick:e[1]||(e[1]=u=>i.showRemoveConfirmation=!0),type:"button",class:"text-gray-400 hover:text-gray-600 text-sm font-medium transition"}," Disconnect ")])]),h("div",EM,[!i.syncSettings.spreadsheet_id||i.isChangingSheet?(v(),C("div",DM,[i.showCreateMode?(v(),C(Ve,{key:1},[y(o,{class:"mb-2 font-bold"},{default:P(()=>[B("Enter Spreadsheet Name")]),_:1}),h("div",{class:X(["flex gap-2 items-center",{"opacity-50 pointer-events-none":i.isCreatingSheet}])},[y(c,{modelValue:i.newSheetName,"onUpdate:modelValue":e[4]||(e[4]=u=>i.newSheetName=u),placeholder:"FormyChat Leads",white:"",class:"flex-1",readonly:i.isCreatingSheet},null,8,["modelValue","readonly"]),h("button",{onClick:e[5]||(e[5]=(...u)=>r.createNewSheet&&r.createNewSheet(...u)),disabled:!i.newSheetName||i.isCreatingSheet,class:"inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-500 hover:bg-indigo-600 text-white font-medium rounded-lg transition disabled:opacity-50 disabled:cursor-not-allowed"},[zM,B(" "+q(i.isCreatingSheet?"Creating...":"Create new"),1)],8,VM)],2),h("div",jM,[WM,h("button",{onClick:e[6]||(e[6]=u=>i.showCreateMode=!1),type:"button",class:"text-indigo-600 hover:text-indigo-700 text-sm font-medium"}," select existing ")])],64)):(v(),C(Ve,{key:0},[y(o,{class:"mb-2 font-bold"},{default:P(()=>[B("Choose Spreadsheet")]),_:1}),h("div",IM,[y(a,{modelValue:i.selectedSheetId,"onUpdate:modelValue":e[2]||(e[2]=u=>i.selectedSheetId=u),options:r.spreadsheetOptions,placeholder:"- choose one -",search:"Search spreadsheets...",not_found:i.isLoadingSheets?"Loading...":"No spreadsheets found",size:"w-full",class:"flex-1",white:""},null,8,["modelValue","options","not_found"]),y(l,{onClick:r.confirmSelectSheet,disabled:!i.selectedSheetId||i.isSelectingSheet},{default:P(()=>[B(q(i.isSelectingSheet?"Connecting...":"Connect"),1)]),_:1},8,["onClick","disabled"])]),RM,h("div",FM,[BM,h("button",{onClick:e[3]||(e[3]=u=>i.showCreateMode=!0),type:"button",class:"mt-2 flex items-center gap-1 px-4 py-2 border border-indigo-300 rounded-lg text-indigo-600 hover:bg-indigo-50 text-sm font-medium transition"},[NM,B(" Create new ")])])],64))])):(v(),C("div",UM,[y(o,{class:"mb-2 font-bold"},{default:P(()=>[B("Choose Spreadsheet")]),_:1}),h("div",HM,[h("img",{src:s.Image("integrations/google-sheets.png"),class:"w-6 h-auto",alt:"Google Sheets"},null,8,QM),h("span",YM,q(i.syncSettings.spreadsheet_name||i.syncSettings.spreadsheet_id),1),h("a",{href:"https://docs.google.com/spreadsheets/d/"+i.syncSettings.spreadsheet_id,target:"_blank",class:"text-teal-600 hover:text-teal-700 text-sm font-medium"},"Open",8,qM),h("button",{onClick:e[7]||(e[7]=u=>i.isChangingSheet=!0),type:"button",class:"text-gray-400 hover:text-gray-600 text-sm"},"Change")])]))]),i.syncError?(v(),C("div",GM,q(i.syncError),1)):z("",!0),i.syncSuccess?(v(),C("div",KM,q(i.syncSuccess),1)):z("",!0),i.syncSettings.spreadsheet_id&&!i.isChangingSheet?(v(),C(Ve,{key:2},[h("div",{class:X(["flex gap-4 items-end justify-start mb-6 transition-opacity duration-200",{"opacity-50 pointer-events-none":i.isSaving||i.isSyncing||i.isAutoSaving}])},[h("div",null,[y(o,{class:"mb-2 font-bold"},{default:P(()=>[B("Sync Frequency")]),_:1}),y(a,{modelValue:i.syncSettings.sync_mode,"onUpdate:modelValue":e[8]||(e[8]=u=>i.syncSettings.sync_mode=u),options:r.syncModeOptions,placeholder:"Select sync mode",search:!1,white:"",readonly:i.isSaving||i.isSyncing||i.isAutoSaving},null,8,["modelValue","options","readonly"])]),i.syncSettings.sync_mode==="scheduled"?(v(),C("div",XM,[y(o,{class:"mb-2 font-bold"},{default:P(()=>[B("Sync Interval")]),_:1}),y(a,{modelValue:i.syncSettings.sync_interval,"onUpdate:modelValue":e[9]||(e[9]=u=>i.syncSettings.sync_interval=u),options:r.intervalOptions,placeholder:"Select interval",search:!1,white:"",readonly:i.isSaving||i.isSyncing||i.isAutoSaving},null,8,["modelValue","options","readonly"])])):z("",!0)],2),i.settingsSuccess?(v(),C("div",JM,q(i.settingsSuccess),1)):z("",!0),i.settingsError?(v(),C("div",ZM,q(i.settingsError),1)):z("",!0),i.isInitialSyncDone?(v(),C(Ve,{key:3},[h("div",iA,[h("div",rA,[h("span",null,[h("span",oA,q(i.syncStats.synced),1),B(" synced")]),h("span",null,[h("span",aA,q(i.syncStats.pending),1),B(" pending")]),h("span",lA,"Last: "+q(r.formattedLastSync),1)]),h("button",{onClick:e[11]||(e[11]=(...u)=>r.triggerManualSync&&r.triggerManualSync(...u)),disabled:i.isSyncing,class:X(["inline-flex items-center gap-2 px-4 py-1.5 text-sm font-medium rounded transition-all duration-200",{"bg-green-600 hover:bg-green-700 text-white":!i.syncButtonState,"bg-green-600 text-white":i.isSyncing,"bg-green-100 text-green-700 border border-green-300":i.syncButtonState==="synced"}])},[i.syncButtonState==="synced"?(v(),C("svg",uA,dA)):(v(),C("svg",{key:1,class:X(["w-4 h-4",{"animate-spin":i.isSyncing}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},hA,2)),B(" "+q(i.isSyncing?"Syncing...":i.syncButtonState==="synced"?"Synced!":"Sync Now"),1)],10,cA)]),!r.isPremium&&i.syncStats.synced>=i.freeLimit?(v(),C("div",fA," Free version limit reached ("+q(i.freeLimit)+" rows). Upgrade to sync unlimited leads. ",1)):z("",!0)],64)):(v(),C("div",eA,[h("button",{onClick:e[10]||(e[10]=(...u)=>r.saveAndSync&&r.saveAndSync(...u)),disabled:i.isSaving||i.isSyncing,class:"inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-500 hover:bg-indigo-600 text-white font-medium rounded-lg transition disabled:opacity-75 disabled:cursor-not-allowed"},[i.isSaving||i.isSyncing?(v(),C("svg",sA,nA)):z("",!0),B(" "+q(i.isSaving||i.isSyncing?"Saving...":"Save & Sync"),1)],8,tA)]))],64)):z("",!0)],64)),i.connectionStatus==="error"?(v(),C("div",pA,[mA,h("p",gA,q(i.errorMessage||"Connection failed. Please try again."),1)])):z("",!0)],64)),i.showRemoveConfirmation?(v(),C("div",vA,[h("div",yA,[_A,bA,h("div",wA,[h("button",{onClick:e[12]||(e[12]=u=>i.showRemoveConfirmation=!1),disabled:i.isDisconnecting,class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-6 py-3 rounded-lg transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed"}," Cancel ",8,xA),h("button",{onClick:e[13]||(e[13]=(...u)=>r.handleDisconnect&&r.handleDisconnect(...u)),disabled:i.isDisconnecting,class:"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-3 rounded-lg transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"},[i.isDisconnecting?(v(),C("span",SA,CA)):z("",!0),i.isDisconnecting?(v(),C("span",MA,"Disconnecting...")):(v(),C("span",OA,"Yes, disconnect!"))],8,kA)])])])):z("",!0),i.showResyncConfirmation?(v(),C("div",AA,[h("div",$A,[TA,PA,LA,h("div",EA,[h("button",{onClick:e[14]||(e[14]=u=>i.showResyncConfirmation=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-6 py-3 rounded-lg transition duration-150"}," Cancel "),h("button",{onClick:e[15]||(e[15]=(...u)=>r.executeFullResync&&r.executeFullResync(...u)),class:"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-3 rounded-lg transition duration-150"}," Yes, resync! ")])])])):z("",!0)])])}const IA=Nt(oM,[["render",DA],["__scopeId","data-v-b06beac0"]]),d_=Or("integrationModal",()=>{const s=pe(!1),e=pe(null);return{isOpen:s,currentIntegration:e,openModal:r=>{e.value=r,s.value=!0},closeModal:()=>{s.value=!1,e.value=null},modalContents:{"fluent-crm":G7,mailchimp:rM,google_sheets:IA}}}),RA=Object.freeze(Object.defineProperty({__proto__:null,useIntegrationModal:d_},Symbol.toStringTag,{value:"Module"})),xne="modulepreload",kne=function(s){return"/"+s},Sne={},Pr=function(e,t,n){let i=Promise.resolve();function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})},fl=Or("toast",()=>{const s=pe([]),e=(r,o=4e3)=>{const a=Date.now()+Math.random();let l;return typeof r=="string"?l={id:a,message:r,type:"success",duration:o,title:null,color:null,icon:null}:l={id:a,title:r.title||null,message:r.message||"",type:r.type||"success",color:r.color||null,icon:r.icon||null,duration:r.duration||o},s.value.push(l),setTimeout(()=>{t(a)},l.duration),a},t=r=>{const o=s.value.findIndex(a=>a.id===r);o>-1&&s.value.splice(o,1)};return{toasts:s,show:e,remove:t,success:(r,o)=>e({message:r,type:"success"},o),error:(r,o)=>e({message:r,type:"error"},o)}}),h_=Or("integrations",()=>{const s=fl(),e=window.formychat_admin_vars.is_premium==1,t=Es({isLoading:!1,isSaving:!1}),n=pe({all:"All"}),i=pe([]),r=pe("all"),o=pe(""),a=ie(()=>["all",...Object.keys(n.value).filter(M=>M!=="all")].map(M=>({slug:M,label:n.value[M]||M}))),l=O=>(O||"").toLowerCase().trim(),c=ie(()=>{if(!Array.isArray(i.value))return[];const O=l(o.value);return i.value.filter(M=>{const b=Array.isArray(M.categories)?M.categories:[];return r.value==="all"||b.includes(r.value)?O?[M.title||"",M.description||"",...Array.isArray(M.tags)?M.tags:[],...b.map(T=>n.value[T]||T)].join(" ").toLowerCase().includes(O):!0:!1})}),u=async O=>{if(O.status==="available"){O.saving=!0;try{const $=await Ke.post("integrations",{integration_id:O.id,enabled:O.enabled}),M=O.title||O.name||"Integration";O.enabled?s.show({title:"Enabled",message:`${M} module is turned on successfully!`,type:"success"}):s.show({title:"Disabled",message:`${M} module is turned off`,type:"disabled"})}catch{s.error("Failed to toggle integration. Please try again.")}finally{O.saving=!1}}},d=async O=>{if(O.enabled)try{const{useIntegrationModal:$}=await Pr(async()=>{const{useIntegrationModal:b}=await Promise.resolve().then(()=>RA);return{useIntegrationModal:b}},void 0);$().openModal(O)}catch($){console.error("Error opening modal:",$)}},f=async()=>{t.isLoading=!0;try{const $=(await Ke.get("integrations")).data;$&&($.categories&&(n.value={all:"All",...$.categories}),$.integrations&&typeof $.integrations=="object"?i.value=Object.values($.integrations):i.value=[],await p(),await g())}catch(O){console.error("Failed to load integrations:",O)}finally{t.isLoading=!1}},p=async()=>{try{const O=await Ke.get("integrations/get_mailchimp_key"),$=i.value.find(M=>M.id==="mailchimp");$&&($.connection_status_checked=!0,O.data&&O.data.api_key?$.api_connected=!0:$.api_connected=!1)}catch{const $=i.value.find(M=>M.id==="mailchimp");$&&($.connection_status_checked=!0,$.api_connected=!1)}},g=async()=>{try{const O=await Ke.get("integrations/google-sheets/status"),$=i.value.find(M=>M.id==="google_sheets");$&&($.connection_status_checked=!0,O.data&&O.data.connected?$.api_connected=!0:$.api_connected=!1)}catch{const $=i.value.find(M=>M.id==="google_sheets");$&&($.connection_status_checked=!0,$.api_connected=!1)}};return{state:t,integrations:i,selectedCategory:r,searchQuery:o,categories:a,filteredIntegrations:c,toggleIntegration:u,openSettings:d,loadIntegrations:f,updateIntegrationConnectionStatus:(O,$)=>{const M=i.value.find(b=>b.id===O);M&&(M.connection_status_checked=!0,M.api_connected=$)},CATEGORY_LABELS:n,installIntegration:async O=>{var M,b;let $="install";O.is_plugin_installed&&!O.is_plugin_active?($="activate",O.activating=!0):O.installing=!0;try{const w=await Ke.post("integrations/install",{integration_id:O.id,action:$});w.data&&w.data.success&&(O.is_plugin_installed=!0,O.is_plugin_active=!0,O.enabled=e,s.show({title:w.data.action==="activated"?"Activated":"Installed",message:w.data.message||`${O.title} module is ready!`,type:"success"}))}catch(w){const R=((b=(M=w.response)==null?void 0:M.data)==null?void 0:b.message)||"Failed to install integration. Please try again.";s.show({title:"Installation Failed",message:R,type:"error"})}finally{O.installing=!1,O.activating=!1}}}}),FA=s=>(Ds("data-v-11a4259f"),s=s(),Is(),s),BA={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},NA={key:0,class:"relative bg-white rounded shadow-xl max-w-2xl w-full mx-4 overflow-visible"},VA=[FA(()=>h("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1))],zA=Nt({__name:"IntegrationModal",setup(s){const e=d_(),t=h_(),n=()=>{var o;return(o=e.currentIntegration)!=null&&o.id?(console.log("Available configs:",e.modalContents),console.log("Looking for integration ID:",e.currentIntegration.id),console.log("Found component:",e.modalContents[e.currentIntegration.id]||null),e.modalContents[e.currentIntegration.id]||null):(console.log("No integration ID found"),null)},i=o=>{e.currentIntegration&&t.updateIntegrationConnectionStatus(e.currentIntegration.id,!0)},r=()=>{e.currentIntegration&&t.updateIntegrationConnectionStatus(e.currentIntegration.id,!1)};return(o,a)=>(v(),qe(ze,{name:"modal",appear:""},{default:P(()=>[m(e).isOpen?(v(),C("div",BA,[y(ze,{name:"backdrop",appear:""},{default:P(()=>[m(e).isOpen?(v(),C("div",{key:0,class:"absolute inset-0 bg-black bg-opacity-50",onClick:a[0]||(a[0]=(...l)=>m(e).closeModal&&m(e).closeModal(...l))})):z("",!0)]),_:1}),y(ze,{name:"modal-content",appear:""},{default:P(()=>[m(e).isOpen?(v(),C("div",NA,[h("button",{onClick:a[1]||(a[1]=(...l)=>m(e).closeModal&&m(e).closeModal(...l)),class:"absolute top-4 right-4 z-20 p-1 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal"},VA),(v(),qe(Wa(n()),{integration:m(e).currentIntegration,onConnected:i,onDisconnected:r},null,40,["integration"]))])):z("",!0)]),_:1})])):z("",!0)]),_:1}))}},[["__scopeId","data-v-11a4259f"]]),Ou=s=>(Ds("data-v-4e197091"),s=s(),Is(),s),jA={class:"fixed top-10 right-4 z-50 space-y-2"},WA=["innerHTML"],UA={key:1,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},HA=[Ou(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1))],QA={key:2,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},YA=[Ou(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1))],qA={key:3,class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},GA=[Ou(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1))],KA={class:"flex-1"},XA={key:0,class:"font-bold text-gray-800 mb-1"},JA=["onClick"],ZA=[Ou(()=>h("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1))],np=Nt({__name:"Toast",setup(s){const{toasts:e,remove:t}=fl(),n=i=>i.color?"":i.type==="success"?"bg-green-500":(i.type==="disabled","bg-red-500");return(i,r)=>(v(),C("div",jA,[(v(!0),C(Ve,null,ft(m(e),o=>(v(),C("div",{key:o.id,class:X(["px-4 py-3 rounded-lg shadow flex items-center gap-3 min-w-80 animate-slide-in bg-white"]),style:et(o.color?{backgroundColor:o.color+"20",borderColor:o.color+"40",color:o.color}:{})},[h("div",{class:X(["w-6 h-6 rounded-full flex items-center justify-center flex-shrink-0",n(o)]),style:et(o.color?{backgroundColor:o.color}:{})},[o.icon?(v(),C("div",{key:0,innerHTML:o.icon,class:"w-4 h-4 text-white"},null,8,WA)):o.type==="success"?(v(),C("svg",UA,HA)):o.type==="disabled"?(v(),C("svg",QA,YA)):(v(),C("svg",qA,GA))],6),h("div",KA,[o.title?(v(),C("div",XA,q(o.title),1)):z("",!0),h("div",{class:X(o.title?"text-sm text-gray-800":"font-medium text-gray-800")},q(o.message),3)]),h("button",{onClick:a=>m(t)(o.id),class:"text-gray-400 hover:text-gray-600 flex-shrink-0"},ZA,8,JA)],4))),128))]))}},[["__scopeId","data-v-4e197091"]]),e$={key:0,class:"z-[9999] w-full max-w-lg bg-white p-4 lg:p-8 rounded-lg flex flex-col gap-4 relative"},t$=[h("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)],s$={key:1,class:"font-semibold text-lg"},n$=["innerHTML"],i$={key:3,class:"flex items-center justify-end child:text-center gap-3 mt-4 child:px-6 child:font-medium child:py-2.5 child:rounded child-hover:opacity-95 child:transition"},ip={__name:"Modal",setup(s){const e=Tr(),t=ie(()=>e.getOptions),n=ie(()=>e.isOpen);return os(()=>{window.addEventListener("keydown",i=>{i.key==="Escape"&&n.value&&t.value.escClose&&e.close()})}),(i,r)=>(v(),C("div",{class:X(["formychat-modal fixed top-0 left-0 w-full h-full flex items-center justify-center",{"z-[9999]":n.value,"-z-10":!n.value}])},[n.value?(v(),C("div",{key:0,class:"absolute top-0 left-0 w-full h-full bg-black bg-opacity-50 z-0",onClick:r[0]||(r[0]=Me(o=>t.value.outsideClick?m(e).close():null,["prevent"]))})):z("",!0),y(ze,{name:"bounce"},{default:P(()=>[n.value?(v(),C("div",e$,[t.value.close?(v(),C("button",{key:0,onClick:r[1]||(r[1]=Me((...o)=>m(e).close&&m(e).close(...o),["prevent"])),class:"absolute top-3 right-3 text-gray-500 hover:text-gray-800"},t$)):z("",!0),t.value.title?(v(),C("h3",s$,q(t.value.title),1)):z("",!0),t.value.message?(v(),C("p",{key:2,class:"text-[14px] text-gray-500",innerHTML:t.value.message},null,8,n$)):z("",!0),t.value.cancel||t.value.ok?(v(),C("div",i$,[t.value.cancel?(v(),qe(m(ct),{key:0,color:t.value.cancelColor,outline:"",onClick:Me(m(e).cancel,["prevent"])},{default:P(()=>[B(q(t.value.cancel),1)]),_:1},8,["color","onClick"])):z("",!0),t.value.ok?(v(),qe(m(ct),{key:1,color:t.value.okColor,onClick:Me(m(e).ok,["prevent"])},{default:P(()=>[B(q(t.value.ok),1)]),_:1},8,["color","onClick"])):z("",!0)])):z("",!0)])):z("",!0)]),_:1})],2))}},r$={class:"w-full p-2 sm:p-6 formychat relative"},o$={class:"w-full full-screen bg-white pt-3 pb-6 sm:pt-8 sm:pb-14 px-3 sm:px-8 text-[14px] relative"},a$={key:0,class:"sm:absolute sm:bottom-3 sm:left-1/2 sm:-translate-x-1/2 text-xs text-gray-500 tracking-wide flex items-center justify-center text-center pt-6 gap-1"},l$=[h("a",{class:"text-indigo-500 hover:text-indigo-400 transition font-medium",target:"_blank",href:"https://lnk.wppool.dev/xz3tUxG"},"Try all the premium features for free.",-1)],c$={__name:"Widgets",setup(s){const e=!formychat_admin_vars.is_premium;return(t,n)=>{const i=on("router-view");return v(),C("div",r$,[h("div",o$,[y(i),y(m(fu)),e?(v(),C("div",a$,l$)):z("",!0)]),y(ip)])}}},u$={name:"SyncSettingsModal",components:{Select:$t,Button:ct},emits:["close","saved","stats-updated"],props:{simple:{type:Boolean,default:!1}},data(){return{isConnected:!1,spreadsheets:[],syncSettings:{spreadsheet_id:"",spreadsheet_name:"",sync_mode:"scheduled",sync_interval:"1h",last_sync_at:null},syncStats:{synced:0,pending:0,total:0},freeLimit:100,intervals:[],isLoadingSheets:!1,isSaving:!1,isSyncing:!1,error:"",success:"",showCreateMode:!1,selectedSheetId:"",isSelectingSheet:!1,newSheetName:"",isCreatingSheet:!1,showResyncConfirmation:!1,syncButtonState:null,isAutoSaving:!1,isDataLoaded:!1}},computed:{isPremium(){var s;return((s=window.formychat_admin_vars)==null?void 0:s.is_premium)||!1},publicPath(){var s;return((s=window.formychat_admin_vars)==null?void 0:s.public)||""},syncModeOptions(){return[{value:"scheduled",label:"Scheduled (Recommended)",name:"Scheduled (Recommended)"},{value:"realtime",label:"Real-time",name:"Real-time"},{value:"manual",label:"Manual",name:"Manual"}]},intervalOptions(){return this.intervals.map(s=>({value:s.value,label:s.label,name:s.label}))},formattedLastSync(){if(!this.syncSettings.last_sync_at)return"Never";const s=this.syncSettings.last_sync_at.replace(" ","T"),e=new Date(s);if(isNaN(e.getTime()))return this.syncSettings.last_sync_at;const n=new Date-e,i=Math.floor(n/6e4);return i<1?"Just now":i<60?`${i} minute${i>1?"s":""} ago`:e.toLocaleString()}},created(){this.loadData()},watch:{"syncSettings.sync_mode":{handler(s,e){this.isDataLoaded&&s!==e&&this.syncSettings.spreadsheet_id&&!this.isAutoSaving&&this.autoSaveSettings()}},"syncSettings.sync_interval":{handler(s,e){this.isDataLoaded&&s!==e&&this.syncSettings.spreadsheet_id&&!this.isAutoSaving&&this.autoSaveSettings()}}},methods:{loadData(){var e,t;const s=(t=(e=window.formychat_admin_vars)==null?void 0:e.additional)==null?void 0:t.google_sheets;s&&(this.isConnected=s.connected||!1,s.intervals&&(this.intervals=s.intervals),s.free_limit&&(this.freeLimit=s.free_limit),s.sync_settings&&(this.syncSettings={...this.syncSettings,...s.sync_settings}),s.sync_stats&&(this.syncStats={...this.syncStats,...s.sync_stats})),this.isConnected&&this.syncSettings.spreadsheet_id&&(this.isLoadingSheets=!0),this.isConnected&&this.loadSpreadsheets(),this.$nextTick(()=>{this.isDataLoaded=!0})},updateGlobalData(s=null,e=null){var t,n;(n=(t=window.formychat_admin_vars)==null?void 0:t.additional)!=null&&n.google_sheets&&(s&&(window.formychat_admin_vars.additional.google_sheets.sync_settings={...window.formychat_admin_vars.additional.google_sheets.sync_settings,...s}),e&&(window.formychat_admin_vars.additional.google_sheets.sync_stats={...window.formychat_admin_vars.additional.google_sheets.sync_stats,...e}))},clearSpreadsheet(){this.syncSettings.spreadsheet_id="",this.syncSettings.spreadsheet_name="",this.selectedSheetId="",this.showCreateMode=!1},async loadSpreadsheets(){var s;this.isLoadingSheets=!0;try{const e=await Ke.get("integrations/google-sheets/spreadsheets");(s=e.data)!=null&&s.spreadsheets&&(this.spreadsheets=e.data.spreadsheets)}catch{console.log("Failed to load spreadsheets")}finally{this.isLoadingSheets=!1}},async confirmSelectSheet(){var e,t,n,i,r;if(!this.selectedSheetId)return;const s=this.spreadsheets.find(o=>o.id===this.selectedSheetId);if(s){this.isSelectingSheet=!0,this.error="";try{const o=await Ke.post("integrations/google-sheets/sync-settings",{spreadsheet_id:s.id,spreadsheet_name:s.name,sync_mode:this.syncSettings.sync_mode,sync_interval:this.syncSettings.sync_interval});(e=o.data)!=null&&e.settings&&(this.syncSettings={...this.syncSettings,...o.data.settings},this.updateGlobalData(o.data.settings)),(t=o.data)!=null&&t.stats&&(this.syncStats=o.data.stats,this.updateGlobalData(null,o.data.stats)),this.selectedSheetId="";const a=((n=o.data)==null?void 0:n.synced)??0;this.success=`Spreadsheet "${s.name}" initialized and ${a} lead(s) synced!`,setTimeout(()=>{this.success=""},5e3)}catch(o){this.error=((r=(i=o.response)==null?void 0:i.data)==null?void 0:r.message)||"Failed to setup spreadsheet."}finally{this.isSelectingSheet=!1}}},async createNewSheet(){var s,e,t,n,i;if(this.newSheetName){this.isCreatingSheet=!0,this.error="";try{const r=await Ke.post("integrations/google-sheets/spreadsheets",{title:this.newSheetName});if((s=r.data)!=null&&s.spreadsheet){const o=r.data.spreadsheet;this.spreadsheets.unshift({id:o.id,name:o.name}),this.syncSettings.spreadsheet_id=o.id,this.syncSettings.spreadsheet_name=o.name,this.updateGlobalData({spreadsheet_id:o.id,spreadsheet_name:o.name}),(e=r.data)!=null&&e.stats&&(this.syncStats=r.data.stats,this.updateGlobalData(null,r.data.stats)),this.newSheetName="",this.showCreateMode=!1;const a=((t=r.data)==null?void 0:t.synced)??0;this.success=`Spreadsheet "${o.name}" created and ${a} lead(s) synced!`,setTimeout(()=>{this.success=""},5e3)}}catch(r){this.error=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Failed to create spreadsheet."}finally{this.isCreatingSheet=!1}}},async saveSettings(){var s,e,t;this.isSaving=!0,this.error="",this.success="";try{const n=await Ke.post("integrations/google-sheets/sync-settings",{spreadsheet_id:this.syncSettings.spreadsheet_id,spreadsheet_name:this.syncSettings.spreadsheet_name,sync_mode:this.syncSettings.sync_mode,sync_interval:this.syncSettings.sync_interval});(s=n.data)!=null&&s.settings&&(this.syncSettings={...this.syncSettings,...n.data.settings},this.updateGlobalData(n.data.settings)),this.success="Settings saved!",setTimeout(()=>{this.success=""},3e3)}catch(n){this.error=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to save settings."}finally{this.isSaving=!1}},async autoSaveSettings(){var s,e,t;this.error="",this.isAutoSaving=!0;try{const n=await Ke.post("integrations/google-sheets/sync-settings",{spreadsheet_id:this.syncSettings.spreadsheet_id,spreadsheet_name:this.syncSettings.spreadsheet_name,sync_mode:this.syncSettings.sync_mode,sync_interval:this.syncSettings.sync_interval,save_only:!0});(s=n.data)!=null&&s.settings&&this.updateGlobalData(n.data.settings)}catch(n){this.error=((t=(e=n.response)==null?void 0:e.data)==null?void 0:t.message)||"Failed to save settings."}finally{this.isAutoSaving=!1}},async triggerManualSync(){var s,e,t,n;this.isSyncing=!0,this.syncButtonState=null,this.error="",this.success="";try{const i=await Ke.post("integrations/google-sheets/sync");(s=i.data)!=null&&s.stats&&(this.syncStats=i.data.stats,this.updateGlobalData(null,i.data.stats)),(e=i.data)!=null&&e.settings&&(this.syncSettings={...this.syncSettings,...i.data.settings},this.updateGlobalData(i.data.settings)),this.syncButtonState="synced",setTimeout(()=>{this.syncButtonState=null},3e3)}catch(i){this.error=((n=(t=i.response)==null?void 0:t.data)==null?void 0:n.message)||"Sync failed.",this.syncButtonState=null}finally{this.isSyncing=!1}},triggerFullResync(){this.showResyncConfirmation=!0},async executeFullResync(){var s,e,t,n,i;this.showResyncConfirmation=!1,this.isSyncing=!0,this.error="",this.success="";try{const r=await Ke.post("integrations/google-sheets/resync");(s=r.data)!=null&&s.stats&&(this.syncStats=r.data.stats,this.updateGlobalData(null,r.data.stats)),(e=r.data)!=null&&e.success?(this.success=`Full resync complete! Synced ${r.data.synced} lead(s).`,setTimeout(()=>{this.success=""},3e3)):(t=r.data)!=null&&t.error&&(this.error=r.data.error)}catch(r){this.error=((i=(n=r.response)==null?void 0:n.data)==null?void 0:i.message)||"Resync failed."}finally{this.isSyncing=!1}}}},d$={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},h$={class:"bg-white rounded-lg shadow-xl max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto"},f$={class:"flex items-center justify-between px-6 py-4 border-b"},p$={class:"flex items-center gap-3"},m$=["src"],g$=h("h3",{class:"text-lg font-semibold text-gray-800"},"Google Sheets Sync",-1),v$=[h("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)],y$={class:"px-6 py-4 space-y-5"},_$={key:0,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg"},b$=[h("p",{class:"text-yellow-800 text-sm"},[B(" Please connect your Google account in the "),h("a",{href:"admin.php?page=formychat-integrations",class:"text-blue-600 hover:underline font-medium"},"Integrations"),B(" page first. ")],-1)],w$={key:0,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},x$=[Fs('<div class="animate-pulse space-y-4"><div class="h-4 w-20 bg-gray-200 rounded"></div><div class="h-10 bg-gray-200 rounded"></div><div class="flex gap-4"><div class="flex-1 space-y-2"><div class="h-4 w-24 bg-gray-200 rounded"></div><div class="h-10 bg-gray-200 rounded"></div></div><div class="flex-1 space-y-2"><div class="h-4 w-24 bg-gray-200 rounded"></div><div class="h-10 bg-gray-200 rounded"></div></div></div></div>',1)],k$={key:1,class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},S$=h("h4",{class:"text-sm font-semibold text-gray-800 mb-4"},"Settings",-1),C$={key:0,class:"mb-4"},O$=h("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Spreadsheet",-1),M$={key:0,class:"flex items-center gap-3 p-3 bg-green-50 border border-green-200 rounded"},A$=["src"],$$={class:"flex-1 text-sm text-green-800 truncate"},T$=["href"],P$={key:1},L$={class:"flex gap-2 items-center"},E$=["disabled"],D$={value:""},I$=["value"],R$={key:0,class:"animate-spin w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24"},F$=[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)],B$=h("p",{class:"mt-2 text-xs text-yellow-600 bg-yellow-50 px-2 py-1 rounded"}," Note: Selecting a sheet will clear its existing data. ",-1),N$={class:"flex gap-2 items-center"},V$={key:0,class:"animate-spin w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24"},z$=[h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)],j$={class:"flex-1"},W$=h("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sync Frequency",-1),U$={key:0,class:"flex-1"},H$=h("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Sync Interval",-1),Q$={key:1,class:"flex items-center justify-end"},Y$=[h("a",{href:"admin.php?page=formychat-integrations",class:"text-sm text-indigo-600 hover:text-indigo-700"}," More settings  ",-1)],q$={key:2,class:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2"},G$=h("svg",{class:"w-4 h-4 text-red-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),K$={class:"text-red-800 text-sm"},X$={class:"flex items-center justify-between pt-4 border-t border-gray-200"},J$={class:"flex items-center gap-4 text-sm"},Z$={class:"font-semibold text-green-600"},eT={class:"font-semibold text-yellow-600"},tT={class:"text-gray-400"},sT=["disabled"],nT={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},iT=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)],rT=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)],oT={key:3,class:"mt-4 p-2 bg-yellow-50 border border-yellow-200 rounded text-yellow-800 text-sm"},aT={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},lT={class:"bg-white rounded-lg p-6 max-w-md w-full mx-4 shadow-xl"},cT=h("h3",{class:"text-lg font-semibold text-gray-800 mb-3"},"Full Resync",-1),uT=h("p",{class:"text-gray-600 mb-4 text-sm"},"This will clear all existing data in the spreadsheet and re-sync all leads from scratch.",-1),dT=h("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4"},[h("p",{class:"text-yellow-800 text-sm"},"Please backup your spreadsheet before proceeding.")],-1),hT={class:"flex justify-end gap-3"};function fT(s,e,t,n,i,r){const o=on("Button"),a=on("Select");return v(),C("div",d$,[h("div",h$,[h("div",f$,[h("div",p$,[h("img",{src:r.publicPath+"images/integrations/google-sheets.png",class:"w-6 h-6",alt:"Google Sheets"},null,8,m$),g$]),h("button",{onClick:e[0]||(e[0]=l=>s.$emit("close")),class:"text-gray-400 hover:text-gray-600"},v$)]),h("div",y$,[i.isConnected?(v(),C(Ve,{key:1},[i.isLoadingSheets&&i.syncSettings.spreadsheet_id?(v(),C("div",w$,x$)):(v(),C("div",k$,[S$,t.simple?z("",!0):(v(),C("div",C$,[O$,i.syncSettings.spreadsheet_id?(v(),C("div",M$,[h("img",{src:r.publicPath+"images/integrations/google-sheets.png",class:"w-5 h-5",alt:"Sheet"},null,8,A$),h("span",$$,q(i.syncSettings.spreadsheet_name||i.syncSettings.spreadsheet_id),1),h("a",{href:"https://docs.google.com/spreadsheets/d/"+i.syncSettings.spreadsheet_id,target:"_blank",class:"text-indigo-600 hover:text-indigo-700 text-sm"},"Open",8,T$),h("button",{onClick:e[1]||(e[1]=(...l)=>r.clearSpreadsheet&&r.clearSpreadsheet(...l)),type:"button",class:"text-gray-400 hover:text-red-500 text-sm"},"Change")])):(v(),C("div",P$,[i.showCreateMode?(v(),C(Ve,{key:1},[h("div",N$,[xt(h("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>i.newSheetName=l),type:"text",placeholder:"Enter spreadsheet name",class:"flex-1 border border-gray-300 rounded px-3 h-10 focus:ring-2 focus:ring-indigo-500 text-sm"},null,512),[[Ot,i.newSheetName]]),y(o,{onClick:r.createNewSheet,disabled:!i.newSheetName||i.isCreatingSheet},{default:P(()=>[i.isCreatingSheet?(v(),C("svg",V$,z$)):z("",!0),B(" "+q(i.isCreatingSheet?"Creating...":"Create"),1)]),_:1},8,["onClick","disabled"])]),h("a",{onClick:e[5]||(e[5]=l=>i.showCreateMode=!1),class:"mt-2 inline-block text-sm text-indigo-600 hover:text-indigo-700 cursor-pointer"}," Or select from existing spreadsheets ")],64)):(v(),C(Ve,{key:0},[h("div",L$,[xt(h("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>i.selectedSheetId=l),class:"flex-1 border border-gray-300 rounded px-3 h-10 focus:ring-2 focus:ring-indigo-500 text-sm",disabled:i.isLoadingSheets},[h("option",D$,q(i.isLoadingSheets?"Loading...":"Select a spreadsheet"),1),(v(!0),C(Ve,null,ft(i.spreadsheets,l=>(v(),C("option",{key:l.id,value:l.id},q(l.name),9,I$))),128))],8,E$),[[Hv,i.selectedSheetId]]),y(o,{onClick:r.confirmSelectSheet,disabled:!i.selectedSheetId||i.isSelectingSheet},{default:P(()=>[i.isSelectingSheet?(v(),C("svg",R$,F$)):z("",!0),B(" "+q(i.isSelectingSheet?"Setting up...":"Select"),1)]),_:1},8,["onClick","disabled"])]),B$,h("a",{onClick:e[3]||(e[3]=l=>i.showCreateMode=!0),class:"mt-2 inline-block text-sm text-indigo-600 hover:text-indigo-700 cursor-pointer"}," + Create a new spreadsheet ")],64))]))])),h("div",{class:X(["flex gap-4 mb-4 transition-opacity duration-200",{"opacity-50 pointer-events-none":i.isSaving||i.isSyncing||i.isAutoSaving}])},[h("div",j$,[W$,y(a,{modelValue:i.syncSettings.sync_mode,"onUpdate:modelValue":e[6]||(e[6]=l=>i.syncSettings.sync_mode=l),options:r.syncModeOptions,placeholder:"Select sync mode",search:!1,white:"",readonly:i.isSaving||i.isSyncing||i.isAutoSaving},null,8,["modelValue","options","readonly"])]),i.syncSettings.sync_mode==="scheduled"?(v(),C("div",U$,[H$,y(a,{modelValue:i.syncSettings.sync_interval,"onUpdate:modelValue":e[7]||(e[7]=l=>i.syncSettings.sync_interval=l),options:r.intervalOptions,placeholder:"Select interval",search:!1,white:"",readonly:i.isSaving||i.isSyncing||i.isAutoSaving},null,8,["modelValue","options","readonly"])])):z("",!0)],2),t.simple?(v(),C("div",Q$,Y$)):z("",!0)])),i.error?(v(),C("div",q$,[G$,h("p",K$,q(i.error),1)])):z("",!0),h("div",X$,[h("div",J$,[h("span",null,[h("span",Z$,q(i.syncStats.synced),1),B(" synced")]),h("span",null,[h("span",eT,q(i.syncStats.pending),1),B(" pending")]),h("span",tT,"Last: "+q(r.formattedLastSync),1)]),h("button",{onClick:e[8]||(e[8]=(...l)=>r.triggerManualSync&&r.triggerManualSync(...l)),disabled:i.isSyncing||!i.syncSettings.spreadsheet_id,class:X(["inline-flex items-center gap-2 px-4 py-1.5 text-sm font-medium rounded transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",{"bg-green-600 hover:bg-green-700 text-white":!i.syncButtonState,"bg-green-600 text-white":i.isSyncing,"bg-green-100 text-green-700 border border-green-300":i.syncButtonState==="synced"}])},[i.syncButtonState==="synced"?(v(),C("svg",nT,iT)):(v(),C("svg",{key:1,class:X(["w-4 h-4",{"animate-spin":i.isSyncing}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},rT,2)),B(" "+q(i.isSyncing?"Syncing...":i.syncButtonState==="synced"?"Synced!":"Sync Now"),1)],10,sT)]),!r.isPremium&&i.syncStats.synced>=i.freeLimit?(v(),C("div",oT," Free version limit reached ("+q(i.freeLimit)+" rows). Upgrade to sync unlimited leads. ",1)):z("",!0)],64)):(v(),C("div",_$,b$))]),i.showResyncConfirmation?(v(),C("div",aT,[h("div",lT,[cT,uT,dT,h("div",hT,[h("button",{onClick:e[9]||(e[9]=l=>i.showResyncConfirmation=!1),class:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold px-6 py-3 rounded-lg transition duration-150"}," Cancel "),h("button",{onClick:e[10]||(e[10]=(...l)=>r.executeFullResync&&r.executeFullResync(...l)),class:"bg-red-600 hover:bg-red-700 text-white font-semibold px-6 py-3 rounded-lg transition duration-150"}," Yes, resync! ")])])])):z("",!0)])])}const pT=Nt(u$,[["render",fT]]),f_=Or("leads",()=>{const s=!formychat_admin_vars.is_premium,e=formychat_admin_vars.data.forms||{},t={};Object.keys(e).forEach(b=>{t[b]=e[b].label});const n=Es({modes:t,isLoading:!0,isReloading:!1,allSelected:!1}),i=ie(()=>{var b;return((b=formychat_admin_vars==null?void 0:formychat_admin_vars.additional[c.value.mode])==null?void 0:b.leads)||formychat_admin_vars.total[c.value.mode+"_leads"]||0}),r=pe({widgets:[],forms:{}}),o=async()=>{var R;let b=(await Ke.get("contents")).data;r.value.widgets=b.widgets.map(T=>({value:T.id,label:T.name,name:T.name})),r.value.widgets.unshift({value:"all",label:"All Widgets",name:"All Widgets"}),c.value.widget_id||(c.value.widget_id="all"),r.value.forms=b.forms||[],Object.keys(b.forms).forEach(T=>{r.value.forms[T].unshift({value:null,label:"All Forms",name:"All Forms"})}),c.value.form_id||(c.value.form_id=((R=r.value.forms[0])==null?void 0:R.value)||null)},a=b=>{var w;return((w=r.value.widgets.find(R=>R.value==b))==null?void 0:w.name)||"Unknown"},l=()=>({mode:"formychat",order_by:"created_at",order:"desc",search:"",page:1,per_page:20,after:"",before:"",widget_id:"all"}),c=pe(l()),u=pe([]),d=ie(()=>c.value.search||c.value.after||c.value.before),f=()=>{Object.keys(l()).forEach(b=>{c.value[b]=l()[b]})},p=b=>{c.value.order_by===b?c.value.order=c.value.order==="asc"?"desc":"asc":(c.value.order_by=b,c.value.order="asc")},g=async()=>{n.isReloading=!0;let b="";return Object.keys(c.value).forEach(w=>{c.value[w]!==""&&(b+=`${w}=${c.value[w]}&`)}),c.value.mode!=="formychat"&&(b+=`form_id=${c.value[c.value.mode+"_id"]}&`),new Promise(w=>{Ke.get(`/leads?${b}`).then(R=>{var T;u.value=(T=R.data)==null?void 0:T.map((E,F)=>(E.locked=s&&(F>=20||c.value.page>1),typeof E.field=="string"&&(E.field=JSON.parse(E.field)||{}),typeof E.meta=="string"&&(E.field=JSON.parse(E.meta)||{}),E)),w(u.value)}).catch(R=>{}).finally(()=>{n.isLoading=!1,n.isReloading=!1})})};Jt(c.value,g),Jt(()=>c.value.per_page,()=>{c.value.page=1,g()}),os(async()=>{o(),await g(),n.isLoading=!1});const S=async b=>(Array.isArray(b)||(b=[b]),new Promise(w=>{const R=u.value.filter(T=>b.includes(T.id));R.forEach(T=>T.deleting=!0),Ke.delete(`/leads?form=${c.value.mode}&id[]=${b.join("&id[]=")}`,{ids:b}).then(T=>{T.data.success?(R.forEach(E=>E.deleted_at=!0),setTimeout(()=>{n.total_formychat_leads-=b.length,n.allSelected=!1,g()},300),w(!0)):(R.forEach(E=>E.deleting=!1),w(!1))})})),k=()=>{u.value.forEach((b,w)=>{b.locked||(u.value[w].selected=n.allSelected)})},O=b=>{u.value.find(w=>w.id===b.id).selected=!b.selected,n.allSelected=u.value.every(w=>w.selected)},$=ie(()=>u.value.filter(b=>b.selected)||[]),M=ie(()=>{var b;if(c.value.mode!=="formychat"&&u.value&&u.value.length){let w=Object.keys((b=u.value[0])==null?void 0:b.field);return w.length>4?w.slice(0,4):w}return["name","email","phone","message","widget_id"]});return{state:n,filters:c,total:i,leads:u,showResetFilter:d,resetFilter:f,setSort:p,fetchLeads:g,deleteLeads:S,toggleAll:k,toggleSelector:O,selected:$,contents:r,columns:M,getWidgetName:a}});//! moment.js
//! version : 2.30.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var p_;function $e(){return p_.apply(null,arguments)}function mT(s){p_=s}function zn(s){return s instanceof Array||Object.prototype.toString.call(s)==="[object Array]"}function _o(s){return s!=null&&Object.prototype.toString.call(s)==="[object Object]"}function kt(s,e){return Object.prototype.hasOwnProperty.call(s,e)}function rp(s){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(s).length===0;var e;for(e in s)if(kt(s,e))return!1;return!0}function Zs(s){return s===void 0}function Hi(s){return typeof s=="number"||Object.prototype.toString.call(s)==="[object Number]"}function pl(s){return s instanceof Date||Object.prototype.toString.call(s)==="[object Date]"}function m_(s,e){var t=[],n,i=s.length;for(n=0;n<i;++n)t.push(e(s[n],n));return t}function Lr(s,e){for(var t in e)kt(e,t)&&(s[t]=e[t]);return kt(e,"toString")&&(s.toString=e.toString),kt(e,"valueOf")&&(s.valueOf=e.valueOf),s}function oi(s,e,t,n){return j_(s,e,t,n,!0).utc()}function gT(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function ot(s){return s._pf==null&&(s._pf=gT()),s._pf}var op;Array.prototype.some?op=Array.prototype.some:op=function(s){var e=Object(this),t=e.length>>>0,n;for(n=0;n<t;n++)if(n in e&&s.call(this,e[n],n,e))return!0;return!1};function ap(s){var e=null,t=!1,n=s._d&&!isNaN(s._d.getTime());if(n&&(e=ot(s),t=op.call(e.parsedDateParts,function(i){return i!=null}),n=e.overflow<0&&!e.empty&&!e.invalidEra&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&t),s._strict&&(n=n&&e.charsLeftOver===0&&e.unusedTokens.length===0&&e.bigHour===void 0)),Object.isFrozen==null||!Object.isFrozen(s))s._isValid=n;else return n;return s._isValid}function Mu(s){var e=oi(NaN);return s!=null?Lr(ot(e),s):ot(e).userInvalidated=!0,e}var g_=$e.momentProperties=[],lp=!1;function cp(s,e){var t,n,i,r=g_.length;if(Zs(e._isAMomentObject)||(s._isAMomentObject=e._isAMomentObject),Zs(e._i)||(s._i=e._i),Zs(e._f)||(s._f=e._f),Zs(e._l)||(s._l=e._l),Zs(e._strict)||(s._strict=e._strict),Zs(e._tzm)||(s._tzm=e._tzm),Zs(e._isUTC)||(s._isUTC=e._isUTC),Zs(e._offset)||(s._offset=e._offset),Zs(e._pf)||(s._pf=ot(e)),Zs(e._locale)||(s._locale=e._locale),r>0)for(t=0;t<r;t++)n=g_[t],i=e[n],Zs(i)||(s[n]=i);return s}function ml(s){cp(this,s),this._d=new Date(s._d!=null?s._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),lp===!1&&(lp=!0,$e.updateOffset(this),lp=!1)}function jn(s){return s instanceof ml||s!=null&&s._isAMomentObject!=null}function v_(s){$e.suppressDeprecationWarnings===!1&&typeof console<"u"&&console.warn&&console.warn("Deprecation warning: "+s)}function kn(s,e){var t=!0;return Lr(function(){if($e.deprecationHandler!=null&&$e.deprecationHandler(null,s),t){var n=[],i,r,o,a=arguments.length;for(r=0;r<a;r++){if(i="",typeof arguments[r]=="object"){i+=`
[`+r+"] ";for(o in arguments[0])kt(arguments[0],o)&&(i+=o+": "+arguments[0][o]+", ");i=i.slice(0,-2)}else i=arguments[r];n.push(i)}v_(s+`
Arguments: `+Array.prototype.slice.call(n).join("")+`
`+new Error().stack),t=!1}return e.apply(this,arguments)},e)}var y_={};function __(s,e){$e.deprecationHandler!=null&&$e.deprecationHandler(s,e),y_[s]||(v_(e),y_[s]=!0)}$e.suppressDeprecationWarnings=!1,$e.deprecationHandler=null;function ai(s){return typeof Function<"u"&&s instanceof Function||Object.prototype.toString.call(s)==="[object Function]"}function vT(s){var e,t;for(t in s)kt(s,t)&&(e=s[t],ai(e)?this[t]=e:this["_"+t]=e);this._config=s,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function up(s,e){var t=Lr({},s),n;for(n in e)kt(e,n)&&(_o(s[n])&&_o(e[n])?(t[n]={},Lr(t[n],s[n]),Lr(t[n],e[n])):e[n]!=null?t[n]=e[n]:delete t[n]);for(n in s)kt(s,n)&&!kt(e,n)&&_o(s[n])&&(t[n]=Lr({},t[n]));return t}function dp(s){s!=null&&this.set(s)}var hp;Object.keys?hp=Object.keys:hp=function(s){var e,t=[];for(e in s)kt(s,e)&&t.push(e);return t};var yT={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function _T(s,e,t){var n=this._calendar[s]||this._calendar.sameElse;return ai(n)?n.call(e,t):n}function li(s,e,t){var n=""+Math.abs(s),i=e-n.length,r=s>=0;return(r?t?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+n}var fp=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Au=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,pp={},ea={};function He(s,e,t,n){var i=n;typeof n=="string"&&(i=function(){return this[n]()}),s&&(ea[s]=i),e&&(ea[e[0]]=function(){return li(i.apply(this,arguments),e[1],e[2])}),t&&(ea[t]=function(){return this.localeData().ordinal(i.apply(this,arguments),s)})}function bT(s){return s.match(/\[[\s\S]/)?s.replace(/^\[|\]$/g,""):s.replace(/\\/g,"")}function wT(s){var e=s.match(fp),t,n;for(t=0,n=e.length;t<n;t++)ea[e[t]]?e[t]=ea[e[t]]:e[t]=bT(e[t]);return function(i){var r="",o;for(o=0;o<n;o++)r+=ai(e[o])?e[o].call(i,s):e[o];return r}}function $u(s,e){return s.isValid()?(e=b_(e,s.localeData()),pp[e]=pp[e]||wT(e),pp[e](s)):s.localeData().invalidDate()}function b_(s,e){var t=5;function n(i){return e.longDateFormat(i)||i}for(Au.lastIndex=0;t>=0&&Au.test(s);)s=s.replace(Au,n),Au.lastIndex=0,t-=1;return s}var xT={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function kT(s){var e=this._longDateFormat[s],t=this._longDateFormat[s.toUpperCase()];return e||!t?e:(this._longDateFormat[s]=t.match(fp).map(function(n){return n==="MMMM"||n==="MM"||n==="DD"||n==="dddd"?n.slice(1):n}).join(""),this._longDateFormat[s])}var ST="Invalid date";function CT(){return this._invalidDate}var OT="%d",MT=/\d{1,2}/;function AT(s){return this._ordinal.replace("%d",s)}var $T={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function TT(s,e,t,n){var i=this._relativeTime[t];return ai(i)?i(s,e,t,n):i.replace(/%d/i,s)}function PT(s,e){var t=this._relativeTime[s>0?"future":"past"];return ai(t)?t(e):t.replace(/%s/i,e)}var w_={D:"date",dates:"date",date:"date",d:"day",days:"day",day:"day",e:"weekday",weekdays:"weekday",weekday:"weekday",E:"isoWeekday",isoweekdays:"isoWeekday",isoweekday:"isoWeekday",DDD:"dayOfYear",dayofyears:"dayOfYear",dayofyear:"dayOfYear",h:"hour",hours:"hour",hour:"hour",ms:"millisecond",milliseconds:"millisecond",millisecond:"millisecond",m:"minute",minutes:"minute",minute:"minute",M:"month",months:"month",month:"month",Q:"quarter",quarters:"quarter",quarter:"quarter",s:"second",seconds:"second",second:"second",gg:"weekYear",weekyears:"weekYear",weekyear:"weekYear",GG:"isoWeekYear",isoweekyears:"isoWeekYear",isoweekyear:"isoWeekYear",w:"week",weeks:"week",week:"week",W:"isoWeek",isoweeks:"isoWeek",isoweek:"isoWeek",y:"year",years:"year",year:"year"};function Sn(s){return typeof s=="string"?w_[s]||w_[s.toLowerCase()]:void 0}function mp(s){var e={},t,n;for(n in s)kt(s,n)&&(t=Sn(n),t&&(e[t]=s[n]));return e}var LT={date:9,day:11,weekday:11,isoWeekday:11,dayOfYear:4,hour:13,millisecond:16,minute:14,month:8,quarter:7,second:15,weekYear:1,isoWeekYear:1,week:5,isoWeek:5,year:1};function ET(s){var e=[],t;for(t in s)kt(s,t)&&e.push({unit:t,priority:LT[t]});return e.sort(function(n,i){return n.priority-i.priority}),e}var x_=/\d/,un=/\d\d/,k_=/\d{3}/,gp=/\d{4}/,Tu=/[+-]?\d{6}/,zt=/\d\d?/,S_=/\d\d\d\d?/,C_=/\d\d\d\d\d\d?/,Pu=/\d{1,3}/,vp=/\d{1,4}/,Lu=/[+-]?\d{1,6}/,ta=/\d+/,Eu=/[+-]?\d+/,DT=/Z|[+-]\d\d:?\d\d/gi,Du=/Z|[+-]\d\d(?::?\d\d)?/gi,IT=/[+-]?\d+(\.\d{1,3})?/,gl=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,sa=/^[1-9]\d?/,yp=/^([1-9]\d|\d)/,Iu;Iu={};function Fe(s,e,t){Iu[s]=ai(e)?e:function(n,i){return n&&t?t:e}}function RT(s,e){return kt(Iu,s)?Iu[s](e._strict,e._locale):new RegExp(FT(s))}function FT(s){return Qi(s.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,r){return t||n||i||r}))}function Qi(s){return s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Cn(s){return s<0?Math.ceil(s)||0:Math.floor(s)}function dt(s){var e=+s,t=0;return e!==0&&isFinite(e)&&(t=Cn(e)),t}var _p={};function Tt(s,e){var t,n=e,i;for(typeof s=="string"&&(s=[s]),Hi(e)&&(n=function(r,o){o[e]=dt(r)}),i=s.length,t=0;t<i;t++)_p[s[t]]=n}function vl(s,e){Tt(s,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function BT(s,e,t){e!=null&&kt(_p,s)&&_p[s](e,t._a,t,s)}function Ru(s){return s%4===0&&s%100!==0||s%400===0}var Os=0,Yi=1,ci=2,ls=3,Wn=4,qi=5,bo=6,NT=7,VT=8;He("Y",0,0,function(){var s=this.year();return s<=9999?li(s,4):"+"+s}),He(0,["YY",2],0,function(){return this.year()%100}),He(0,["YYYY",4],0,"year"),He(0,["YYYYY",5],0,"year"),He(0,["YYYYYY",6,!0],0,"year"),Fe("Y",Eu),Fe("YY",zt,un),Fe("YYYY",vp,gp),Fe("YYYYY",Lu,Tu),Fe("YYYYYY",Lu,Tu),Tt(["YYYYY","YYYYYY"],Os),Tt("YYYY",function(s,e){e[Os]=s.length===2?$e.parseTwoDigitYear(s):dt(s)}),Tt("YY",function(s,e){e[Os]=$e.parseTwoDigitYear(s)}),Tt("Y",function(s,e){e[Os]=parseInt(s,10)});function yl(s){return Ru(s)?366:365}$e.parseTwoDigitYear=function(s){return dt(s)+(dt(s)>68?1900:2e3)};var O_=na("FullYear",!0);function zT(){return Ru(this.year())}function na(s,e){return function(t){return t!=null?(M_(this,s,t),$e.updateOffset(this,e),this):_l(this,s)}}function _l(s,e){if(!s.isValid())return NaN;var t=s._d,n=s._isUTC;switch(e){case"Milliseconds":return n?t.getUTCMilliseconds():t.getMilliseconds();case"Seconds":return n?t.getUTCSeconds():t.getSeconds();case"Minutes":return n?t.getUTCMinutes():t.getMinutes();case"Hours":return n?t.getUTCHours():t.getHours();case"Date":return n?t.getUTCDate():t.getDate();case"Day":return n?t.getUTCDay():t.getDay();case"Month":return n?t.getUTCMonth():t.getMonth();case"FullYear":return n?t.getUTCFullYear():t.getFullYear();default:return NaN}}function M_(s,e,t){var n,i,r,o,a;if(!(!s.isValid()||isNaN(t))){switch(n=s._d,i=s._isUTC,e){case"Milliseconds":return void(i?n.setUTCMilliseconds(t):n.setMilliseconds(t));case"Seconds":return void(i?n.setUTCSeconds(t):n.setSeconds(t));case"Minutes":return void(i?n.setUTCMinutes(t):n.setMinutes(t));case"Hours":return void(i?n.setUTCHours(t):n.setHours(t));case"Date":return void(i?n.setUTCDate(t):n.setDate(t));case"FullYear":break;default:return}r=t,o=s.month(),a=s.date(),a=a===29&&o===1&&!Ru(r)?28:a,i?n.setUTCFullYear(r,o,a):n.setFullYear(r,o,a)}}function jT(s){return s=Sn(s),ai(this[s])?this[s]():this}function WT(s,e){if(typeof s=="object"){s=mp(s);var t=ET(s),n,i=t.length;for(n=0;n<i;n++)this[t[n].unit](s[t[n].unit])}else if(s=Sn(s),ai(this[s]))return this[s](e);return this}function UT(s,e){return(s%e+e)%e}var es;Array.prototype.indexOf?es=Array.prototype.indexOf:es=function(s){var e;for(e=0;e<this.length;++e)if(this[e]===s)return e;return-1};function bp(s,e){if(isNaN(s)||isNaN(e))return NaN;var t=UT(e,12);return s+=(e-t)/12,t===1?Ru(s)?29:28:31-t%7%2}He("M",["MM",2],"Mo",function(){return this.month()+1}),He("MMM",0,0,function(s){return this.localeData().monthsShort(this,s)}),He("MMMM",0,0,function(s){return this.localeData().months(this,s)}),Fe("M",zt,sa),Fe("MM",zt,un),Fe("MMM",function(s,e){return e.monthsShortRegex(s)}),Fe("MMMM",function(s,e){return e.monthsRegex(s)}),Tt(["M","MM"],function(s,e){e[Yi]=dt(s)-1}),Tt(["MMM","MMMM"],function(s,e,t,n){var i=t._locale.monthsParse(s,n,t._strict);i!=null?e[Yi]=i:ot(t).invalidMonth=s});var HT="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),A_="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),$_=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,QT=gl,YT=gl;function qT(s,e){return s?zn(this._months)?this._months[s.month()]:this._months[(this._months.isFormat||$_).test(e)?"format":"standalone"][s.month()]:zn(this._months)?this._months:this._months.standalone}function GT(s,e){return s?zn(this._monthsShort)?this._monthsShort[s.month()]:this._monthsShort[$_.test(e)?"format":"standalone"][s.month()]:zn(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function KT(s,e,t){var n,i,r,o=s.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)r=oi([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(r,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(r,"").toLocaleLowerCase();return t?e==="MMM"?(i=es.call(this._shortMonthsParse,o),i!==-1?i:null):(i=es.call(this._longMonthsParse,o),i!==-1?i:null):e==="MMM"?(i=es.call(this._shortMonthsParse,o),i!==-1?i:(i=es.call(this._longMonthsParse,o),i!==-1?i:null)):(i=es.call(this._longMonthsParse,o),i!==-1?i:(i=es.call(this._shortMonthsParse,o),i!==-1?i:null))}function XT(s,e,t){var n,i,r;if(this._monthsParseExact)return KT.call(this,s,e,t);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(i=oi([2e3,n]),t&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!t&&!this._monthsParse[n]&&(r="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[n]=new RegExp(r.replace(".",""),"i")),t&&e==="MMMM"&&this._longMonthsParse[n].test(s))return n;if(t&&e==="MMM"&&this._shortMonthsParse[n].test(s))return n;if(!t&&this._monthsParse[n].test(s))return n}}function T_(s,e){if(!s.isValid())return s;if(typeof e=="string"){if(/^\d+$/.test(e))e=dt(e);else if(e=s.localeData().monthsParse(e),!Hi(e))return s}var t=e,n=s.date();return n=n<29?n:Math.min(n,bp(s.year(),t)),s._isUTC?s._d.setUTCMonth(t,n):s._d.setMonth(t,n),s}function P_(s){return s!=null?(T_(this,s),$e.updateOffset(this,!0),this):_l(this,"Month")}function JT(){return bp(this.year(),this.month())}function ZT(s){return this._monthsParseExact?(kt(this,"_monthsRegex")||L_.call(this),s?this._monthsShortStrictRegex:this._monthsShortRegex):(kt(this,"_monthsShortRegex")||(this._monthsShortRegex=QT),this._monthsShortStrictRegex&&s?this._monthsShortStrictRegex:this._monthsShortRegex)}function eP(s){return this._monthsParseExact?(kt(this,"_monthsRegex")||L_.call(this),s?this._monthsStrictRegex:this._monthsRegex):(kt(this,"_monthsRegex")||(this._monthsRegex=YT),this._monthsStrictRegex&&s?this._monthsStrictRegex:this._monthsRegex)}function L_(){function s(l,c){return c.length-l.length}var e=[],t=[],n=[],i,r,o,a;for(i=0;i<12;i++)r=oi([2e3,i]),o=Qi(this.monthsShort(r,"")),a=Qi(this.months(r,"")),e.push(o),t.push(a),n.push(a),n.push(o);e.sort(s),t.sort(s),n.sort(s),this._monthsRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+e.join("|")+")","i")}function tP(s,e,t,n,i,r,o){var a;return s<100&&s>=0?(a=new Date(s+400,e,t,n,i,r,o),isFinite(a.getFullYear())&&a.setFullYear(s)):a=new Date(s,e,t,n,i,r,o),a}function bl(s){var e,t;return s<100&&s>=0?(t=Array.prototype.slice.call(arguments),t[0]=s+400,e=new Date(Date.UTC.apply(null,t)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(s)):e=new Date(Date.UTC.apply(null,arguments)),e}function Fu(s,e,t){var n=7+e-t,i=(7+bl(s,0,n).getUTCDay()-e)%7;return-i+n-1}function E_(s,e,t,n,i){var r=(7+t-n)%7,o=Fu(s,n,i),a=1+7*(e-1)+r+o,l,c;return a<=0?(l=s-1,c=yl(l)+a):a>yl(s)?(l=s+1,c=a-yl(s)):(l=s,c=a),{year:l,dayOfYear:c}}function wl(s,e,t){var n=Fu(s.year(),e,t),i=Math.floor((s.dayOfYear()-n-1)/7)+1,r,o;return i<1?(o=s.year()-1,r=i+Gi(o,e,t)):i>Gi(s.year(),e,t)?(r=i-Gi(s.year(),e,t),o=s.year()+1):(o=s.year(),r=i),{week:r,year:o}}function Gi(s,e,t){var n=Fu(s,e,t),i=Fu(s+1,e,t);return(yl(s)-n+i)/7}He("w",["ww",2],"wo","week"),He("W",["WW",2],"Wo","isoWeek"),Fe("w",zt,sa),Fe("ww",zt,un),Fe("W",zt,sa),Fe("WW",zt,un),vl(["w","ww","W","WW"],function(s,e,t,n){e[n.substr(0,1)]=dt(s)});function sP(s){return wl(s,this._week.dow,this._week.doy).week}var nP={dow:0,doy:6};function iP(){return this._week.dow}function rP(){return this._week.doy}function oP(s){var e=this.localeData().week(this);return s==null?e:this.add((s-e)*7,"d")}function aP(s){var e=wl(this,1,4).week;return s==null?e:this.add((s-e)*7,"d")}He("d",0,"do","day"),He("dd",0,0,function(s){return this.localeData().weekdaysMin(this,s)}),He("ddd",0,0,function(s){return this.localeData().weekdaysShort(this,s)}),He("dddd",0,0,function(s){return this.localeData().weekdays(this,s)}),He("e",0,0,"weekday"),He("E",0,0,"isoWeekday"),Fe("d",zt),Fe("e",zt),Fe("E",zt),Fe("dd",function(s,e){return e.weekdaysMinRegex(s)}),Fe("ddd",function(s,e){return e.weekdaysShortRegex(s)}),Fe("dddd",function(s,e){return e.weekdaysRegex(s)}),vl(["dd","ddd","dddd"],function(s,e,t,n){var i=t._locale.weekdaysParse(s,n,t._strict);i!=null?e.d=i:ot(t).invalidWeekday=s}),vl(["d","e","E"],function(s,e,t,n){e[n]=dt(s)});function lP(s,e){return typeof s!="string"?s:isNaN(s)?(s=e.weekdaysParse(s),typeof s=="number"?s:null):parseInt(s,10)}function cP(s,e){return typeof s=="string"?e.weekdaysParse(s)%7||7:isNaN(s)?null:s}function xp(s,e){return s.slice(e,7).concat(s.slice(0,e))}var uP="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),D_="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),dP="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),hP=gl,fP=gl,pP=gl;function mP(s,e){var t=zn(this._weekdays)?this._weekdays:this._weekdays[s&&s!==!0&&this._weekdays.isFormat.test(e)?"format":"standalone"];return s===!0?xp(t,this._week.dow):s?t[s.day()]:t}function gP(s){return s===!0?xp(this._weekdaysShort,this._week.dow):s?this._weekdaysShort[s.day()]:this._weekdaysShort}function vP(s){return s===!0?xp(this._weekdaysMin,this._week.dow):s?this._weekdaysMin[s.day()]:this._weekdaysMin}function yP(s,e,t){var n,i,r,o=s.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)r=oi([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(r,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(r,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(r,"").toLocaleLowerCase();return t?e==="dddd"?(i=es.call(this._weekdaysParse,o),i!==-1?i:null):e==="ddd"?(i=es.call(this._shortWeekdaysParse,o),i!==-1?i:null):(i=es.call(this._minWeekdaysParse,o),i!==-1?i:null):e==="dddd"?(i=es.call(this._weekdaysParse,o),i!==-1||(i=es.call(this._shortWeekdaysParse,o),i!==-1)?i:(i=es.call(this._minWeekdaysParse,o),i!==-1?i:null)):e==="ddd"?(i=es.call(this._shortWeekdaysParse,o),i!==-1||(i=es.call(this._weekdaysParse,o),i!==-1)?i:(i=es.call(this._minWeekdaysParse,o),i!==-1?i:null)):(i=es.call(this._minWeekdaysParse,o),i!==-1||(i=es.call(this._weekdaysParse,o),i!==-1)?i:(i=es.call(this._shortWeekdaysParse,o),i!==-1?i:null))}function _P(s,e,t){var n,i,r;if(this._weekdaysParseExact)return yP.call(this,s,e,t);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(i=oi([2e3,1]).day(n),t&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(r="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[n]=new RegExp(r.replace(".",""),"i")),t&&e==="dddd"&&this._fullWeekdaysParse[n].test(s))return n;if(t&&e==="ddd"&&this._shortWeekdaysParse[n].test(s))return n;if(t&&e==="dd"&&this._minWeekdaysParse[n].test(s))return n;if(!t&&this._weekdaysParse[n].test(s))return n}}function bP(s){if(!this.isValid())return s!=null?this:NaN;var e=_l(this,"Day");return s!=null?(s=lP(s,this.localeData()),this.add(s-e,"d")):e}function wP(s){if(!this.isValid())return s!=null?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return s==null?e:this.add(s-e,"d")}function xP(s){if(!this.isValid())return s!=null?this:NaN;if(s!=null){var e=cP(s,this.localeData());return this.day(this.day()%7?e:e-7)}else return this.day()||7}function kP(s){return this._weekdaysParseExact?(kt(this,"_weekdaysRegex")||kp.call(this),s?this._weekdaysStrictRegex:this._weekdaysRegex):(kt(this,"_weekdaysRegex")||(this._weekdaysRegex=hP),this._weekdaysStrictRegex&&s?this._weekdaysStrictRegex:this._weekdaysRegex)}function SP(s){return this._weekdaysParseExact?(kt(this,"_weekdaysRegex")||kp.call(this),s?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(kt(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=fP),this._weekdaysShortStrictRegex&&s?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function CP(s){return this._weekdaysParseExact?(kt(this,"_weekdaysRegex")||kp.call(this),s?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(kt(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pP),this._weekdaysMinStrictRegex&&s?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function kp(){function s(u,d){return d.length-u.length}var e=[],t=[],n=[],i=[],r,o,a,l,c;for(r=0;r<7;r++)o=oi([2e3,1]).day(r),a=Qi(this.weekdaysMin(o,"")),l=Qi(this.weekdaysShort(o,"")),c=Qi(this.weekdays(o,"")),e.push(a),t.push(l),n.push(c),i.push(a),i.push(l),i.push(c);e.sort(s),t.sort(s),n.sort(s),i.sort(s),this._weekdaysRegex=new RegExp("^("+i.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+t.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+e.join("|")+")","i")}function Sp(){return this.hours()%12||12}function OP(){return this.hours()||24}He("H",["HH",2],0,"hour"),He("h",["hh",2],0,Sp),He("k",["kk",2],0,OP),He("hmm",0,0,function(){return""+Sp.apply(this)+li(this.minutes(),2)}),He("hmmss",0,0,function(){return""+Sp.apply(this)+li(this.minutes(),2)+li(this.seconds(),2)}),He("Hmm",0,0,function(){return""+this.hours()+li(this.minutes(),2)}),He("Hmmss",0,0,function(){return""+this.hours()+li(this.minutes(),2)+li(this.seconds(),2)});function I_(s,e){He(s,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}I_("a",!0),I_("A",!1);function R_(s,e){return e._meridiemParse}Fe("a",R_),Fe("A",R_),Fe("H",zt,yp),Fe("h",zt,sa),Fe("k",zt,sa),Fe("HH",zt,un),Fe("hh",zt,un),Fe("kk",zt,un),Fe("hmm",S_),Fe("hmmss",C_),Fe("Hmm",S_),Fe("Hmmss",C_),Tt(["H","HH"],ls),Tt(["k","kk"],function(s,e,t){var n=dt(s);e[ls]=n===24?0:n}),Tt(["a","A"],function(s,e,t){t._isPm=t._locale.isPM(s),t._meridiem=s}),Tt(["h","hh"],function(s,e,t){e[ls]=dt(s),ot(t).bigHour=!0}),Tt("hmm",function(s,e,t){var n=s.length-2;e[ls]=dt(s.substr(0,n)),e[Wn]=dt(s.substr(n)),ot(t).bigHour=!0}),Tt("hmmss",function(s,e,t){var n=s.length-4,i=s.length-2;e[ls]=dt(s.substr(0,n)),e[Wn]=dt(s.substr(n,2)),e[qi]=dt(s.substr(i)),ot(t).bigHour=!0}),Tt("Hmm",function(s,e,t){var n=s.length-2;e[ls]=dt(s.substr(0,n)),e[Wn]=dt(s.substr(n))}),Tt("Hmmss",function(s,e,t){var n=s.length-4,i=s.length-2;e[ls]=dt(s.substr(0,n)),e[Wn]=dt(s.substr(n,2)),e[qi]=dt(s.substr(i))});function MP(s){return(s+"").toLowerCase().charAt(0)==="p"}var AP=/[ap]\.?m?\.?/i,$P=na("Hours",!0);function TP(s,e,t){return s>11?t?"pm":"PM":t?"am":"AM"}var F_={calendar:yT,longDateFormat:xT,invalidDate:ST,ordinal:OT,dayOfMonthOrdinalParse:MT,relativeTime:$T,months:HT,monthsShort:A_,week:nP,weekdays:uP,weekdaysMin:dP,weekdaysShort:D_,meridiemParse:AP},Qt={},xl={},kl;function PP(s,e){var t,n=Math.min(s.length,e.length);for(t=0;t<n;t+=1)if(s[t]!==e[t])return t;return n}function B_(s){return s&&s.toLowerCase().replace("_","-")}function LP(s){for(var e=0,t,n,i,r;e<s.length;){for(r=B_(s[e]).split("-"),t=r.length,n=B_(s[e+1]),n=n?n.split("-"):null;t>0;){if(i=Bu(r.slice(0,t).join("-")),i)return i;if(n&&n.length>=t&&PP(r,n)>=t-1)break;t--}e++}return kl}function EP(s){return!!(s&&s.match("^[^/\\\\]*$"))}function Bu(s){var e=null,t;if(Qt[s]===void 0&&typeof module<"u"&&module&&module.exports&&EP(s))try{e=kl._abbr,t=require,t("./locale/"+s),Er(e)}catch{Qt[s]=null}return Qt[s]}function Er(s,e){var t;return s&&(Zs(e)?t=Ki(s):t=Cp(s,e),t?kl=t:typeof console<"u"&&console.warn&&console.warn("Locale "+s+" not found. Did you forget to load it?")),kl._abbr}function Cp(s,e){if(e!==null){var t,n=F_;if(e.abbr=s,Qt[s]!=null)__("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=Qt[s]._config;else if(e.parentLocale!=null)if(Qt[e.parentLocale]!=null)n=Qt[e.parentLocale]._config;else if(t=Bu(e.parentLocale),t!=null)n=t._config;else return xl[e.parentLocale]||(xl[e.parentLocale]=[]),xl[e.parentLocale].push({name:s,config:e}),null;return Qt[s]=new dp(up(n,e)),xl[s]&&xl[s].forEach(function(i){Cp(i.name,i.config)}),Er(s),Qt[s]}else return delete Qt[s],null}function DP(s,e){if(e!=null){var t,n,i=F_;Qt[s]!=null&&Qt[s].parentLocale!=null?Qt[s].set(up(Qt[s]._config,e)):(n=Bu(s),n!=null&&(i=n._config),e=up(i,e),n==null&&(e.abbr=s),t=new dp(e),t.parentLocale=Qt[s],Qt[s]=t),Er(s)}else Qt[s]!=null&&(Qt[s].parentLocale!=null?(Qt[s]=Qt[s].parentLocale,s===Er()&&Er(s)):Qt[s]!=null&&delete Qt[s]);return Qt[s]}function Ki(s){var e;if(s&&s._locale&&s._locale._abbr&&(s=s._locale._abbr),!s)return kl;if(!zn(s)){if(e=Bu(s),e)return e;s=[s]}return LP(s)}function IP(){return hp(Qt)}function Op(s){var e,t=s._a;return t&&ot(s).overflow===-2&&(e=t[Yi]<0||t[Yi]>11?Yi:t[ci]<1||t[ci]>bp(t[Os],t[Yi])?ci:t[ls]<0||t[ls]>24||t[ls]===24&&(t[Wn]!==0||t[qi]!==0||t[bo]!==0)?ls:t[Wn]<0||t[Wn]>59?Wn:t[qi]<0||t[qi]>59?qi:t[bo]<0||t[bo]>999?bo:-1,ot(s)._overflowDayOfYear&&(e<Os||e>ci)&&(e=ci),ot(s)._overflowWeeks&&e===-1&&(e=NT),ot(s)._overflowWeekday&&e===-1&&(e=VT),ot(s).overflow=e),s}var RP=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,FP=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,BP=/Z|[+-]\d\d(?::?\d\d)?/,Nu=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Mp=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],NP=/^\/?Date\((-?\d+)/i,VP=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,zP={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function N_(s){var e,t,n=s._i,i=RP.exec(n)||FP.exec(n),r,o,a,l,c=Nu.length,u=Mp.length;if(i){for(ot(s).iso=!0,e=0,t=c;e<t;e++)if(Nu[e][1].exec(i[1])){o=Nu[e][0],r=Nu[e][2]!==!1;break}if(o==null){s._isValid=!1;return}if(i[3]){for(e=0,t=u;e<t;e++)if(Mp[e][1].exec(i[3])){a=(i[2]||" ")+Mp[e][0];break}if(a==null){s._isValid=!1;return}}if(!r&&a!=null){s._isValid=!1;return}if(i[4])if(BP.exec(i[4]))l="Z";else{s._isValid=!1;return}s._f=o+(a||"")+(l||""),$p(s)}else s._isValid=!1}function jP(s,e,t,n,i,r){var o=[WP(s),A_.indexOf(e),parseInt(t,10),parseInt(n,10),parseInt(i,10)];return r&&o.push(parseInt(r,10)),o}function WP(s){var e=parseInt(s,10);return e<=49?2e3+e:e<=999?1900+e:e}function UP(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function HP(s,e,t){if(s){var n=D_.indexOf(s),i=new Date(e[0],e[1],e[2]).getDay();if(n!==i)return ot(t).weekdayMismatch=!0,t._isValid=!1,!1}return!0}function QP(s,e,t){if(s)return zP[s];if(e)return 0;var n=parseInt(t,10),i=n%100,r=(n-i)/100;return r*60+i}function V_(s){var e=VP.exec(UP(s._i)),t;if(e){if(t=jP(e[4],e[3],e[2],e[5],e[6],e[7]),!HP(e[1],t,s))return;s._a=t,s._tzm=QP(e[8],e[9],e[10]),s._d=bl.apply(null,s._a),s._d.setUTCMinutes(s._d.getUTCMinutes()-s._tzm),ot(s).rfc2822=!0}else s._isValid=!1}function YP(s){var e=NP.exec(s._i);if(e!==null){s._d=new Date(+e[1]);return}if(N_(s),s._isValid===!1)delete s._isValid;else return;if(V_(s),s._isValid===!1)delete s._isValid;else return;s._strict?s._isValid=!1:$e.createFromInputFallback(s)}$e.createFromInputFallback=kn("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(s){s._d=new Date(s._i+(s._useUTC?" UTC":""))});function ia(s,e,t){return s??e??t}function qP(s){var e=new Date($e.now());return s._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function Ap(s){var e,t,n=[],i,r,o;if(!s._d){for(i=qP(s),s._w&&s._a[ci]==null&&s._a[Yi]==null&&GP(s),s._dayOfYear!=null&&(o=ia(s._a[Os],i[Os]),(s._dayOfYear>yl(o)||s._dayOfYear===0)&&(ot(s)._overflowDayOfYear=!0),t=bl(o,0,s._dayOfYear),s._a[Yi]=t.getUTCMonth(),s._a[ci]=t.getUTCDate()),e=0;e<3&&s._a[e]==null;++e)s._a[e]=n[e]=i[e];for(;e<7;e++)s._a[e]=n[e]=s._a[e]==null?e===2?1:0:s._a[e];s._a[ls]===24&&s._a[Wn]===0&&s._a[qi]===0&&s._a[bo]===0&&(s._nextDay=!0,s._a[ls]=0),s._d=(s._useUTC?bl:tP).apply(null,n),r=s._useUTC?s._d.getUTCDay():s._d.getDay(),s._tzm!=null&&s._d.setUTCMinutes(s._d.getUTCMinutes()-s._tzm),s._nextDay&&(s._a[ls]=24),s._w&&typeof s._w.d<"u"&&s._w.d!==r&&(ot(s).weekdayMismatch=!0)}}function GP(s){var e,t,n,i,r,o,a,l,c;e=s._w,e.GG!=null||e.W!=null||e.E!=null?(r=1,o=4,t=ia(e.GG,s._a[Os],wl(jt(),1,4).year),n=ia(e.W,1),i=ia(e.E,1),(i<1||i>7)&&(l=!0)):(r=s._locale._week.dow,o=s._locale._week.doy,c=wl(jt(),r,o),t=ia(e.gg,s._a[Os],c.year),n=ia(e.w,c.week),e.d!=null?(i=e.d,(i<0||i>6)&&(l=!0)):e.e!=null?(i=e.e+r,(e.e<0||e.e>6)&&(l=!0)):i=r),n<1||n>Gi(t,r,o)?ot(s)._overflowWeeks=!0:l!=null?ot(s)._overflowWeekday=!0:(a=E_(t,n,i,r,o),s._a[Os]=a.year,s._dayOfYear=a.dayOfYear)}$e.ISO_8601=function(){},$e.RFC_2822=function(){};function $p(s){if(s._f===$e.ISO_8601){N_(s);return}if(s._f===$e.RFC_2822){V_(s);return}s._a=[],ot(s).empty=!0;var e=""+s._i,t,n,i,r,o,a=e.length,l=0,c,u;for(i=b_(s._f,s._locale).match(fp)||[],u=i.length,t=0;t<u;t++)r=i[t],n=(e.match(RT(r,s))||[])[0],n&&(o=e.substr(0,e.indexOf(n)),o.length>0&&ot(s).unusedInput.push(o),e=e.slice(e.indexOf(n)+n.length),l+=n.length),ea[r]?(n?ot(s).empty=!1:ot(s).unusedTokens.push(r),BT(r,n,s)):s._strict&&!n&&ot(s).unusedTokens.push(r);ot(s).charsLeftOver=a-l,e.length>0&&ot(s).unusedInput.push(e),s._a[ls]<=12&&ot(s).bigHour===!0&&s._a[ls]>0&&(ot(s).bigHour=void 0),ot(s).parsedDateParts=s._a.slice(0),ot(s).meridiem=s._meridiem,s._a[ls]=KP(s._locale,s._a[ls],s._meridiem),c=ot(s).era,c!==null&&(s._a[Os]=s._locale.erasConvertYear(c,s._a[Os])),Ap(s),Op(s)}function KP(s,e,t){var n;return t==null?e:s.meridiemHour!=null?s.meridiemHour(e,t):(s.isPM!=null&&(n=s.isPM(t),n&&e<12&&(e+=12),!n&&e===12&&(e=0)),e)}function XP(s){var e,t,n,i,r,o,a=!1,l=s._f.length;if(l===0){ot(s).invalidFormat=!0,s._d=new Date(NaN);return}for(i=0;i<l;i++)r=0,o=!1,e=cp({},s),s._useUTC!=null&&(e._useUTC=s._useUTC),e._f=s._f[i],$p(e),ap(e)&&(o=!0),r+=ot(e).charsLeftOver,r+=ot(e).unusedTokens.length*10,ot(e).score=r,a?r<n&&(n=r,t=e):(n==null||r<n||o)&&(n=r,t=e,o&&(a=!0));Lr(s,t||e)}function JP(s){if(!s._d){var e=mp(s._i),t=e.day===void 0?e.date:e.day;s._a=m_([e.year,e.month,t,e.hour,e.minute,e.second,e.millisecond],function(n){return n&&parseInt(n,10)}),Ap(s)}}function ZP(s){var e=new ml(Op(z_(s)));return e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e}function z_(s){var e=s._i,t=s._f;return s._locale=s._locale||Ki(s._l),e===null||t===void 0&&e===""?Mu({nullInput:!0}):(typeof e=="string"&&(s._i=e=s._locale.preparse(e)),jn(e)?new ml(Op(e)):(pl(e)?s._d=e:zn(t)?XP(s):t?$p(s):eL(s),ap(s)||(s._d=null),s))}function eL(s){var e=s._i;Zs(e)?s._d=new Date($e.now()):pl(e)?s._d=new Date(e.valueOf()):typeof e=="string"?YP(s):zn(e)?(s._a=m_(e.slice(0),function(t){return parseInt(t,10)}),Ap(s)):_o(e)?JP(s):Hi(e)?s._d=new Date(e):$e.createFromInputFallback(s)}function j_(s,e,t,n,i){var r={};return(e===!0||e===!1)&&(n=e,e=void 0),(t===!0||t===!1)&&(n=t,t=void 0),(_o(s)&&rp(s)||zn(s)&&s.length===0)&&(s=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=i,r._l=t,r._i=s,r._f=e,r._strict=n,ZP(r)}function jt(s,e,t,n){return j_(s,e,t,n,!1)}var tL=kn("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var s=jt.apply(null,arguments);return this.isValid()&&s.isValid()?s<this?this:s:Mu()}),sL=kn("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var s=jt.apply(null,arguments);return this.isValid()&&s.isValid()?s>this?this:s:Mu()});function W_(s,e){var t,n;if(e.length===1&&zn(e[0])&&(e=e[0]),!e.length)return jt();for(t=e[0],n=1;n<e.length;++n)(!e[n].isValid()||e[n][s](t))&&(t=e[n]);return t}function nL(){var s=[].slice.call(arguments,0);return W_("isBefore",s)}function iL(){var s=[].slice.call(arguments,0);return W_("isAfter",s)}var rL=function(){return Date.now?Date.now():+new Date},Sl=["year","quarter","month","week","day","hour","minute","second","millisecond"];function oL(s){var e,t=!1,n,i=Sl.length;for(e in s)if(kt(s,e)&&!(es.call(Sl,e)!==-1&&(s[e]==null||!isNaN(s[e]))))return!1;for(n=0;n<i;++n)if(s[Sl[n]]){if(t)return!1;parseFloat(s[Sl[n]])!==dt(s[Sl[n]])&&(t=!0)}return!0}function aL(){return this._isValid}function lL(){return Un(NaN)}function Vu(s){var e=mp(s),t=e.year||0,n=e.quarter||0,i=e.month||0,r=e.week||e.isoWeek||0,o=e.day||0,a=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._isValid=oL(e),this._milliseconds=+u+c*1e3+l*6e4+a*1e3*60*60,this._days=+o+r*7,this._months=+i+n*3+t*12,this._data={},this._locale=Ki(),this._bubble()}function zu(s){return s instanceof Vu}function Tp(s){return s<0?Math.round(-1*s)*-1:Math.round(s)}function cL(s,e,t){var n=Math.min(s.length,e.length),i=Math.abs(s.length-e.length),r=0,o;for(o=0;o<n;o++)dt(s[o])!==dt(e[o])&&r++;return r+i}function U_(s,e){He(s,0,0,function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+li(~~(t/60),2)+e+li(~~t%60,2)})}U_("Z",":"),U_("ZZ",""),Fe("Z",Du),Fe("ZZ",Du),Tt(["Z","ZZ"],function(s,e,t){t._useUTC=!0,t._tzm=Pp(Du,s)});var uL=/([\+\-]|\d\d)/gi;function Pp(s,e){var t=(e||"").match(s),n,i,r;return t===null?null:(n=t[t.length-1]||[],i=(n+"").match(uL)||["-",0,0],r=+(i[1]*60)+dt(i[2]),r===0?0:i[0]==="+"?r:-r)}function Lp(s,e){var t,n;return e._isUTC?(t=e.clone(),n=(jn(s)||pl(s)?s.valueOf():jt(s).valueOf())-t.valueOf(),t._d.setTime(t._d.valueOf()+n),$e.updateOffset(t,!1),t):jt(s).local()}function Ep(s){return-Math.round(s._d.getTimezoneOffset())}$e.updateOffset=function(){};function dL(s,e,t){var n=this._offset||0,i;if(!this.isValid())return s!=null?this:NaN;if(s!=null){if(typeof s=="string"){if(s=Pp(Du,s),s===null)return this}else Math.abs(s)<16&&!t&&(s=s*60);return!this._isUTC&&e&&(i=Ep(this)),this._offset=s,this._isUTC=!0,i!=null&&this.add(i,"m"),n!==s&&(!e||this._changeInProgress?q_(this,Un(s-n,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,$e.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?n:Ep(this)}function hL(s,e){return s!=null?(typeof s!="string"&&(s=-s),this.utcOffset(s,e),this):-this.utcOffset()}function fL(s){return this.utcOffset(0,s)}function pL(s){return this._isUTC&&(this.utcOffset(0,s),this._isUTC=!1,s&&this.subtract(Ep(this),"m")),this}function mL(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var s=Pp(DT,this._i);s!=null?this.utcOffset(s):this.utcOffset(0,!0)}return this}function gL(s){return this.isValid()?(s=s?jt(s).utcOffset():0,(this.utcOffset()-s)%60===0):!1}function vL(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function yL(){if(!Zs(this._isDSTShifted))return this._isDSTShifted;var s={},e;return cp(s,this),s=z_(s),s._a?(e=s._isUTC?oi(s._a):jt(s._a),this._isDSTShifted=this.isValid()&&cL(s._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function _L(){return this.isValid()?!this._isUTC:!1}function bL(){return this.isValid()?this._isUTC:!1}function H_(){return this.isValid()?this._isUTC&&this._offset===0:!1}var wL=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,xL=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Un(s,e){var t=s,n=null,i,r,o;return zu(s)?t={ms:s._milliseconds,d:s._days,M:s._months}:Hi(s)||!isNaN(+s)?(t={},e?t[e]=+s:t.milliseconds=+s):(n=wL.exec(s))?(i=n[1]==="-"?-1:1,t={y:0,d:dt(n[ci])*i,h:dt(n[ls])*i,m:dt(n[Wn])*i,s:dt(n[qi])*i,ms:dt(Tp(n[bo]*1e3))*i}):(n=xL.exec(s))?(i=n[1]==="-"?-1:1,t={y:wo(n[2],i),M:wo(n[3],i),w:wo(n[4],i),d:wo(n[5],i),h:wo(n[6],i),m:wo(n[7],i),s:wo(n[8],i)}):t==null?t={}:typeof t=="object"&&("from"in t||"to"in t)&&(o=kL(jt(t.from),jt(t.to)),t={},t.ms=o.milliseconds,t.M=o.months),r=new Vu(t),zu(s)&&kt(s,"_locale")&&(r._locale=s._locale),zu(s)&&kt(s,"_isValid")&&(r._isValid=s._isValid),r}Un.fn=Vu.prototype,Un.invalid=lL;function wo(s,e){var t=s&&parseFloat(s.replace(",","."));return(isNaN(t)?0:t)*e}function Q_(s,e){var t={};return t.months=e.month()-s.month()+(e.year()-s.year())*12,s.clone().add(t.months,"M").isAfter(e)&&--t.months,t.milliseconds=+e-+s.clone().add(t.months,"M"),t}function kL(s,e){var t;return s.isValid()&&e.isValid()?(e=Lp(e,s),s.isBefore(e)?t=Q_(s,e):(t=Q_(e,s),t.milliseconds=-t.milliseconds,t.months=-t.months),t):{milliseconds:0,months:0}}function Y_(s,e){return function(t,n){var i,r;return n!==null&&!isNaN(+n)&&(__(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=t,t=n,n=r),i=Un(t,n),q_(this,i,s),this}}function q_(s,e,t,n){var i=e._milliseconds,r=Tp(e._days),o=Tp(e._months);s.isValid()&&(n=n??!0,o&&T_(s,_l(s,"Month")+o*t),r&&M_(s,"Date",_l(s,"Date")+r*t),i&&s._d.setTime(s._d.valueOf()+i*t),n&&$e.updateOffset(s,r||o))}var SL=Y_(1,"add"),CL=Y_(-1,"subtract");function G_(s){return typeof s=="string"||s instanceof String}function OL(s){return jn(s)||pl(s)||G_(s)||Hi(s)||AL(s)||ML(s)||s===null||s===void 0}function ML(s){var e=_o(s)&&!rp(s),t=!1,n=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],i,r,o=n.length;for(i=0;i<o;i+=1)r=n[i],t=t||kt(s,r);return e&&t}function AL(s){var e=zn(s),t=!1;return e&&(t=s.filter(function(n){return!Hi(n)&&G_(s)}).length===0),e&&t}function $L(s){var e=_o(s)&&!rp(s),t=!1,n=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],i,r;for(i=0;i<n.length;i+=1)r=n[i],t=t||kt(s,r);return e&&t}function TL(s,e){var t=s.diff(e,"days",!0);return t<-6?"sameElse":t<-1?"lastWeek":t<0?"lastDay":t<1?"sameDay":t<2?"nextDay":t<7?"nextWeek":"sameElse"}function PL(s,e){arguments.length===1&&(arguments[0]?OL(arguments[0])?(s=arguments[0],e=void 0):$L(arguments[0])&&(e=arguments[0],s=void 0):(s=void 0,e=void 0));var t=s||jt(),n=Lp(t,this).startOf("day"),i=$e.calendarFormat(this,n)||"sameElse",r=e&&(ai(e[i])?e[i].call(this,t):e[i]);return this.format(r||this.localeData().calendar(i,this,jt(t)))}function LL(){return new ml(this)}function EL(s,e){var t=jn(s)?s:jt(s);return this.isValid()&&t.isValid()?(e=Sn(e)||"millisecond",e==="millisecond"?this.valueOf()>t.valueOf():t.valueOf()<this.clone().startOf(e).valueOf()):!1}function DL(s,e){var t=jn(s)?s:jt(s);return this.isValid()&&t.isValid()?(e=Sn(e)||"millisecond",e==="millisecond"?this.valueOf()<t.valueOf():this.clone().endOf(e).valueOf()<t.valueOf()):!1}function IL(s,e,t,n){var i=jn(s)?s:jt(s),r=jn(e)?e:jt(e);return this.isValid()&&i.isValid()&&r.isValid()?(n=n||"()",(n[0]==="("?this.isAfter(i,t):!this.isBefore(i,t))&&(n[1]===")"?this.isBefore(r,t):!this.isAfter(r,t))):!1}function RL(s,e){var t=jn(s)?s:jt(s),n;return this.isValid()&&t.isValid()?(e=Sn(e)||"millisecond",e==="millisecond"?this.valueOf()===t.valueOf():(n=t.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf())):!1}function FL(s,e){return this.isSame(s,e)||this.isAfter(s,e)}function BL(s,e){return this.isSame(s,e)||this.isBefore(s,e)}function NL(s,e,t){var n,i,r;if(!this.isValid())return NaN;if(n=Lp(s,this),!n.isValid())return NaN;switch(i=(n.utcOffset()-this.utcOffset())*6e4,e=Sn(e),e){case"year":r=ju(this,n)/12;break;case"month":r=ju(this,n);break;case"quarter":r=ju(this,n)/3;break;case"second":r=(this-n)/1e3;break;case"minute":r=(this-n)/6e4;break;case"hour":r=(this-n)/36e5;break;case"day":r=(this-n-i)/864e5;break;case"week":r=(this-n-i)/6048e5;break;default:r=this-n}return t?r:Cn(r)}function ju(s,e){if(s.date()<e.date())return-ju(e,s);var t=(e.year()-s.year())*12+(e.month()-s.month()),n=s.clone().add(t,"months"),i,r;return e-n<0?(i=s.clone().add(t-1,"months"),r=(e-n)/(n-i)):(i=s.clone().add(t+1,"months"),r=(e-n)/(i-n)),-(t+r)||0}$e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",$e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function VL(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function zL(s){if(!this.isValid())return null;var e=s!==!0,t=e?this.clone().utc():this;return t.year()<0||t.year()>9999?$u(t,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):ai(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",$u(t,"Z")):$u(t,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function jL(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var s="moment",e="",t,n,i,r;return this.isLocal()||(s=this.utcOffset()===0?"moment.utc":"moment.parseZone",e="Z"),t="["+s+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i="-MM-DD[T]HH:mm:ss.SSS",r=e+'[")]',this.format(t+n+i+r)}function WL(s){s||(s=this.isUtc()?$e.defaultFormatUtc:$e.defaultFormat);var e=$u(this,s);return this.localeData().postformat(e)}function UL(s,e){return this.isValid()&&(jn(s)&&s.isValid()||jt(s).isValid())?Un({to:this,from:s}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function HL(s){return this.from(jt(),s)}function QL(s,e){return this.isValid()&&(jn(s)&&s.isValid()||jt(s).isValid())?Un({from:this,to:s}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function YL(s){return this.to(jt(),s)}function K_(s){var e;return s===void 0?this._locale._abbr:(e=Ki(s),e!=null&&(this._locale=e),this)}var X_=kn("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(s){return s===void 0?this.localeData():this.locale(s)});function J_(){return this._locale}var Wu=1e3,ra=60*Wu,Uu=60*ra,Z_=(365*400+97)*24*Uu;function oa(s,e){return(s%e+e)%e}function e2(s,e,t){return s<100&&s>=0?new Date(s+400,e,t)-Z_:new Date(s,e,t).valueOf()}function t2(s,e,t){return s<100&&s>=0?Date.UTC(s+400,e,t)-Z_:Date.UTC(s,e,t)}function qL(s){var e,t;if(s=Sn(s),s===void 0||s==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?t2:e2,s){case"year":e=t(this.year(),0,1);break;case"quarter":e=t(this.year(),this.month()-this.month()%3,1);break;case"month":e=t(this.year(),this.month(),1);break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=t(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=oa(e+(this._isUTC?0:this.utcOffset()*ra),Uu);break;case"minute":e=this._d.valueOf(),e-=oa(e,ra);break;case"second":e=this._d.valueOf(),e-=oa(e,Wu);break}return this._d.setTime(e),$e.updateOffset(this,!0),this}function GL(s){var e,t;if(s=Sn(s),s===void 0||s==="millisecond"||!this.isValid())return this;switch(t=this._isUTC?t2:e2,s){case"year":e=t(this.year()+1,0,1)-1;break;case"quarter":e=t(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=t(this.year(),this.month()+1,1)-1;break;case"week":e=t(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=t(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=t(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Uu-oa(e+(this._isUTC?0:this.utcOffset()*ra),Uu)-1;break;case"minute":e=this._d.valueOf(),e+=ra-oa(e,ra)-1;break;case"second":e=this._d.valueOf(),e+=Wu-oa(e,Wu)-1;break}return this._d.setTime(e),$e.updateOffset(this,!0),this}function KL(){return this._d.valueOf()-(this._offset||0)*6e4}function XL(){return Math.floor(this.valueOf()/1e3)}function JL(){return new Date(this.valueOf())}function ZL(){var s=this;return[s.year(),s.month(),s.date(),s.hour(),s.minute(),s.second(),s.millisecond()]}function eE(){var s=this;return{years:s.year(),months:s.month(),date:s.date(),hours:s.hours(),minutes:s.minutes(),seconds:s.seconds(),milliseconds:s.milliseconds()}}function tE(){return this.isValid()?this.toISOString():null}function sE(){return ap(this)}function nE(){return Lr({},ot(this))}function iE(){return ot(this).overflow}function rE(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}He("N",0,0,"eraAbbr"),He("NN",0,0,"eraAbbr"),He("NNN",0,0,"eraAbbr"),He("NNNN",0,0,"eraName"),He("NNNNN",0,0,"eraNarrow"),He("y",["y",1],"yo","eraYear"),He("y",["yy",2],0,"eraYear"),He("y",["yyy",3],0,"eraYear"),He("y",["yyyy",4],0,"eraYear"),Fe("N",Dp),Fe("NN",Dp),Fe("NNN",Dp),Fe("NNNN",gE),Fe("NNNNN",vE),Tt(["N","NN","NNN","NNNN","NNNNN"],function(s,e,t,n){var i=t._locale.erasParse(s,n,t._strict);i?ot(t).era=i:ot(t).invalidEra=s}),Fe("y",ta),Fe("yy",ta),Fe("yyy",ta),Fe("yyyy",ta),Fe("yo",yE),Tt(["y","yy","yyy","yyyy"],Os),Tt(["yo"],function(s,e,t,n){var i;t._locale._eraYearOrdinalRegex&&(i=s.match(t._locale._eraYearOrdinalRegex)),t._locale.eraYearOrdinalParse?e[Os]=t._locale.eraYearOrdinalParse(s,i):e[Os]=parseInt(s,10)});function oE(s,e){var t,n,i,r=this._eras||Ki("en")._eras;for(t=0,n=r.length;t<n;++t){switch(typeof r[t].since){case"string":i=$e(r[t].since).startOf("day"),r[t].since=i.valueOf();break}switch(typeof r[t].until){case"undefined":r[t].until=1/0;break;case"string":i=$e(r[t].until).startOf("day").valueOf(),r[t].until=i.valueOf();break}}return r}function aE(s,e,t){var n,i,r=this.eras(),o,a,l;for(s=s.toUpperCase(),n=0,i=r.length;n<i;++n)if(o=r[n].name.toUpperCase(),a=r[n].abbr.toUpperCase(),l=r[n].narrow.toUpperCase(),t)switch(e){case"N":case"NN":case"NNN":if(a===s)return r[n];break;case"NNNN":if(o===s)return r[n];break;case"NNNNN":if(l===s)return r[n];break}else if([o,a,l].indexOf(s)>=0)return r[n]}function lE(s,e){var t=s.since<=s.until?1:-1;return e===void 0?$e(s.since).year():$e(s.since).year()+(e-s.offset)*t}function cE(){var s,e,t,n=this.localeData().eras();for(s=0,e=n.length;s<e;++s)if(t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return n[s].name;return""}function uE(){var s,e,t,n=this.localeData().eras();for(s=0,e=n.length;s<e;++s)if(t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return n[s].narrow;return""}function dE(){var s,e,t,n=this.localeData().eras();for(s=0,e=n.length;s<e;++s)if(t=this.clone().startOf("day").valueOf(),n[s].since<=t&&t<=n[s].until||n[s].until<=t&&t<=n[s].since)return n[s].abbr;return""}function hE(){var s,e,t,n,i=this.localeData().eras();for(s=0,e=i.length;s<e;++s)if(t=i[s].since<=i[s].until?1:-1,n=this.clone().startOf("day").valueOf(),i[s].since<=n&&n<=i[s].until||i[s].until<=n&&n<=i[s].since)return(this.year()-$e(i[s].since).year())*t+i[s].offset;return this.year()}function fE(s){return kt(this,"_erasNameRegex")||Ip.call(this),s?this._erasNameRegex:this._erasRegex}function pE(s){return kt(this,"_erasAbbrRegex")||Ip.call(this),s?this._erasAbbrRegex:this._erasRegex}function mE(s){return kt(this,"_erasNarrowRegex")||Ip.call(this),s?this._erasNarrowRegex:this._erasRegex}function Dp(s,e){return e.erasAbbrRegex(s)}function gE(s,e){return e.erasNameRegex(s)}function vE(s,e){return e.erasNarrowRegex(s)}function yE(s,e){return e._eraYearOrdinalRegex||ta}function Ip(){var s=[],e=[],t=[],n=[],i,r,o,a,l,c=this.eras();for(i=0,r=c.length;i<r;++i)o=Qi(c[i].name),a=Qi(c[i].abbr),l=Qi(c[i].narrow),e.push(o),s.push(a),t.push(l),n.push(o),n.push(a),n.push(l);this._erasRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+e.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+s.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+t.join("|")+")","i")}He(0,["gg",2],0,function(){return this.weekYear()%100}),He(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Hu(s,e){He(0,[s,s.length],0,e)}Hu("gggg","weekYear"),Hu("ggggg","weekYear"),Hu("GGGG","isoWeekYear"),Hu("GGGGG","isoWeekYear"),Fe("G",Eu),Fe("g",Eu),Fe("GG",zt,un),Fe("gg",zt,un),Fe("GGGG",vp,gp),Fe("gggg",vp,gp),Fe("GGGGG",Lu,Tu),Fe("ggggg",Lu,Tu),vl(["gggg","ggggg","GGGG","GGGGG"],function(s,e,t,n){e[n.substr(0,2)]=dt(s)}),vl(["gg","GG"],function(s,e,t,n){e[n]=$e.parseTwoDigitYear(s)});function _E(s){return s2.call(this,s,this.week(),this.weekday()+this.localeData()._week.dow,this.localeData()._week.dow,this.localeData()._week.doy)}function bE(s){return s2.call(this,s,this.isoWeek(),this.isoWeekday(),1,4)}function wE(){return Gi(this.year(),1,4)}function xE(){return Gi(this.isoWeekYear(),1,4)}function kE(){var s=this.localeData()._week;return Gi(this.year(),s.dow,s.doy)}function SE(){var s=this.localeData()._week;return Gi(this.weekYear(),s.dow,s.doy)}function s2(s,e,t,n,i){var r;return s==null?wl(this,n,i).year:(r=Gi(s,n,i),e>r&&(e=r),CE.call(this,s,e,t,n,i))}function CE(s,e,t,n,i){var r=E_(s,e,t,n,i),o=bl(r.year,0,r.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}He("Q",0,"Qo","quarter"),Fe("Q",x_),Tt("Q",function(s,e){e[Yi]=(dt(s)-1)*3});function OE(s){return s==null?Math.ceil((this.month()+1)/3):this.month((s-1)*3+this.month()%3)}He("D",["DD",2],"Do","date"),Fe("D",zt,sa),Fe("DD",zt,un),Fe("Do",function(s,e){return s?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),Tt(["D","DD"],ci),Tt("Do",function(s,e){e[ci]=dt(s.match(zt)[0])});var n2=na("Date",!0);He("DDD",["DDDD",3],"DDDo","dayOfYear"),Fe("DDD",Pu),Fe("DDDD",k_),Tt(["DDD","DDDD"],function(s,e,t){t._dayOfYear=dt(s)});function ME(s){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return s==null?e:this.add(s-e,"d")}He("m",["mm",2],0,"minute"),Fe("m",zt,yp),Fe("mm",zt,un),Tt(["m","mm"],Wn);var AE=na("Minutes",!1);He("s",["ss",2],0,"second"),Fe("s",zt,yp),Fe("ss",zt,un),Tt(["s","ss"],qi);var $E=na("Seconds",!1);He("S",0,0,function(){return~~(this.millisecond()/100)}),He(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),He(0,["SSS",3],0,"millisecond"),He(0,["SSSS",4],0,function(){return this.millisecond()*10}),He(0,["SSSSS",5],0,function(){return this.millisecond()*100}),He(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3}),He(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4}),He(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5}),He(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6}),Fe("S",Pu,x_),Fe("SS",Pu,un),Fe("SSS",Pu,k_);var Dr,i2;for(Dr="SSSS";Dr.length<=9;Dr+="S")Fe(Dr,ta);function TE(s,e){e[bo]=dt(("0."+s)*1e3)}for(Dr="S";Dr.length<=9;Dr+="S")Tt(Dr,TE);i2=na("Milliseconds",!1),He("z",0,0,"zoneAbbr"),He("zz",0,0,"zoneName");function PE(){return this._isUTC?"UTC":""}function LE(){return this._isUTC?"Coordinated Universal Time":""}var me=ml.prototype;me.add=SL,me.calendar=PL,me.clone=LL,me.diff=NL,me.endOf=GL,me.format=WL,me.from=UL,me.fromNow=HL,me.to=QL,me.toNow=YL,me.get=jT,me.invalidAt=iE,me.isAfter=EL,me.isBefore=DL,me.isBetween=IL,me.isSame=RL,me.isSameOrAfter=FL,me.isSameOrBefore=BL,me.isValid=sE,me.lang=X_,me.locale=K_,me.localeData=J_,me.max=sL,me.min=tL,me.parsingFlags=nE,me.set=WT,me.startOf=qL,me.subtract=CL,me.toArray=ZL,me.toObject=eE,me.toDate=JL,me.toISOString=zL,me.inspect=jL,typeof Symbol<"u"&&Symbol.for!=null&&(me[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),me.toJSON=tE,me.toString=VL,me.unix=XL,me.valueOf=KL,me.creationData=rE,me.eraName=cE,me.eraNarrow=uE,me.eraAbbr=dE,me.eraYear=hE,me.year=O_,me.isLeapYear=zT,me.weekYear=_E,me.isoWeekYear=bE,me.quarter=me.quarters=OE,me.month=P_,me.daysInMonth=JT,me.week=me.weeks=oP,me.isoWeek=me.isoWeeks=aP,me.weeksInYear=kE,me.weeksInWeekYear=SE,me.isoWeeksInYear=wE,me.isoWeeksInISOWeekYear=xE,me.date=n2,me.day=me.days=bP,me.weekday=wP,me.isoWeekday=xP,me.dayOfYear=ME,me.hour=me.hours=$P,me.minute=me.minutes=AE,me.second=me.seconds=$E,me.millisecond=me.milliseconds=i2,me.utcOffset=dL,me.utc=fL,me.local=pL,me.parseZone=mL,me.hasAlignedHourOffset=gL,me.isDST=vL,me.isLocal=_L,me.isUtcOffset=bL,me.isUtc=H_,me.isUTC=H_,me.zoneAbbr=PE,me.zoneName=LE,me.dates=kn("dates accessor is deprecated. Use date instead.",n2),me.months=kn("months accessor is deprecated. Use month instead",P_),me.years=kn("years accessor is deprecated. Use year instead",O_),me.zone=kn("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",hL),me.isDSTShifted=kn("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",yL);function EE(s){return jt(s*1e3)}function DE(){return jt.apply(null,arguments).parseZone()}function r2(s){return s}var St=dp.prototype;St.calendar=_T,St.longDateFormat=kT,St.invalidDate=CT,St.ordinal=AT,St.preparse=r2,St.postformat=r2,St.relativeTime=TT,St.pastFuture=PT,St.set=vT,St.eras=oE,St.erasParse=aE,St.erasConvertYear=lE,St.erasAbbrRegex=pE,St.erasNameRegex=fE,St.erasNarrowRegex=mE,St.months=qT,St.monthsShort=GT,St.monthsParse=XT,St.monthsRegex=eP,St.monthsShortRegex=ZT,St.week=sP,St.firstDayOfYear=rP,St.firstDayOfWeek=iP,St.weekdays=mP,St.weekdaysMin=vP,St.weekdaysShort=gP,St.weekdaysParse=_P,St.weekdaysRegex=kP,St.weekdaysShortRegex=SP,St.weekdaysMinRegex=CP,St.isPM=MP,St.meridiem=TP;function Qu(s,e,t,n){var i=Ki(),r=oi().set(n,e);return i[t](r,s)}function o2(s,e,t){if(Hi(s)&&(e=s,s=void 0),s=s||"",e!=null)return Qu(s,e,t,"month");var n,i=[];for(n=0;n<12;n++)i[n]=Qu(s,n,t,"month");return i}function Rp(s,e,t,n){typeof s=="boolean"?(Hi(e)&&(t=e,e=void 0),e=e||""):(e=s,t=e,s=!1,Hi(e)&&(t=e,e=void 0),e=e||"");var i=Ki(),r=s?i._week.dow:0,o,a=[];if(t!=null)return Qu(e,(t+r)%7,n,"day");for(o=0;o<7;o++)a[o]=Qu(e,(o+r)%7,n,"day");return a}function IE(s,e){return o2(s,e,"months")}function RE(s,e){return o2(s,e,"monthsShort")}function FE(s,e,t){return Rp(s,e,t,"weekdays")}function BE(s,e,t){return Rp(s,e,t,"weekdaysShort")}function NE(s,e,t){return Rp(s,e,t,"weekdaysMin")}Er("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(s){var e=s%10,t=dt(s%100/10)===1?"th":e===1?"st":e===2?"nd":e===3?"rd":"th";return s+t}}),$e.lang=kn("moment.lang is deprecated. Use moment.locale instead.",Er),$e.langData=kn("moment.langData is deprecated. Use moment.localeData instead.",Ki);var Xi=Math.abs;function VE(){var s=this._data;return this._milliseconds=Xi(this._milliseconds),this._days=Xi(this._days),this._months=Xi(this._months),s.milliseconds=Xi(s.milliseconds),s.seconds=Xi(s.seconds),s.minutes=Xi(s.minutes),s.hours=Xi(s.hours),s.months=Xi(s.months),s.years=Xi(s.years),this}function a2(s,e,t,n){var i=Un(e,t);return s._milliseconds+=n*i._milliseconds,s._days+=n*i._days,s._months+=n*i._months,s._bubble()}function zE(s,e){return a2(this,s,e,1)}function jE(s,e){return a2(this,s,e,-1)}function l2(s){return s<0?Math.floor(s):Math.ceil(s)}function WE(){var s=this._milliseconds,e=this._days,t=this._months,n=this._data,i,r,o,a,l;return s>=0&&e>=0&&t>=0||s<=0&&e<=0&&t<=0||(s+=l2(Fp(t)+e)*864e5,e=0,t=0),n.milliseconds=s%1e3,i=Cn(s/1e3),n.seconds=i%60,r=Cn(i/60),n.minutes=r%60,o=Cn(r/60),n.hours=o%24,e+=Cn(o/24),l=Cn(c2(e)),t+=l,e-=l2(Fp(l)),a=Cn(t/12),t%=12,n.days=e,n.months=t,n.years=a,this}function c2(s){return s*4800/146097}function Fp(s){return s*146097/4800}function UE(s){if(!this.isValid())return NaN;var e,t,n=this._milliseconds;if(s=Sn(s),s==="month"||s==="quarter"||s==="year")switch(e=this._days+n/864e5,t=this._months+c2(e),s){case"month":return t;case"quarter":return t/3;case"year":return t/12}else switch(e=this._days+Math.round(Fp(this._months)),s){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return e*24+n/36e5;case"minute":return e*1440+n/6e4;case"second":return e*86400+n/1e3;case"millisecond":return Math.floor(e*864e5)+n;default:throw new Error("Unknown unit "+s)}}function Ji(s){return function(){return this.as(s)}}var u2=Ji("ms"),HE=Ji("s"),QE=Ji("m"),YE=Ji("h"),qE=Ji("d"),GE=Ji("w"),KE=Ji("M"),XE=Ji("Q"),JE=Ji("y"),ZE=u2;function eD(){return Un(this)}function tD(s){return s=Sn(s),this.isValid()?this[s+"s"]():NaN}function xo(s){return function(){return this.isValid()?this._data[s]:NaN}}var sD=xo("milliseconds"),nD=xo("seconds"),iD=xo("minutes"),rD=xo("hours"),oD=xo("days"),aD=xo("months"),lD=xo("years");function cD(){return Cn(this.days()/7)}var Zi=Math.round,aa={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function uD(s,e,t,n,i){return i.relativeTime(e||1,!!t,s,n)}function dD(s,e,t,n){var i=Un(s).abs(),r=Zi(i.as("s")),o=Zi(i.as("m")),a=Zi(i.as("h")),l=Zi(i.as("d")),c=Zi(i.as("M")),u=Zi(i.as("w")),d=Zi(i.as("y")),f=r<=t.ss&&["s",r]||r<t.s&&["ss",r]||o<=1&&["m"]||o<t.m&&["mm",o]||a<=1&&["h"]||a<t.h&&["hh",a]||l<=1&&["d"]||l<t.d&&["dd",l];return t.w!=null&&(f=f||u<=1&&["w"]||u<t.w&&["ww",u]),f=f||c<=1&&["M"]||c<t.M&&["MM",c]||d<=1&&["y"]||["yy",d],f[2]=e,f[3]=+s>0,f[4]=n,uD.apply(null,f)}function hD(s){return s===void 0?Zi:typeof s=="function"?(Zi=s,!0):!1}function fD(s,e){return aa[s]===void 0?!1:e===void 0?aa[s]:(aa[s]=e,s==="s"&&(aa.ss=e-1),!0)}function pD(s,e){if(!this.isValid())return this.localeData().invalidDate();var t=!1,n=aa,i,r;return typeof s=="object"&&(e=s,s=!1),typeof s=="boolean"&&(t=s),typeof e=="object"&&(n=Object.assign({},aa,e),e.s!=null&&e.ss==null&&(n.ss=e.s-1)),i=this.localeData(),r=dD(this,!t,n,i),t&&(r=i.pastFuture(+this,r)),i.postformat(r)}var Bp=Math.abs;function la(s){return(s>0)-(s<0)||+s}function Yu(){if(!this.isValid())return this.localeData().invalidDate();var s=Bp(this._milliseconds)/1e3,e=Bp(this._days),t=Bp(this._months),n,i,r,o,a=this.asSeconds(),l,c,u,d;return a?(n=Cn(s/60),i=Cn(n/60),s%=60,n%=60,r=Cn(t/12),t%=12,o=s?s.toFixed(3).replace(/\.?0+$/,""):"",l=a<0?"-":"",c=la(this._months)!==la(a)?"-":"",u=la(this._days)!==la(a)?"-":"",d=la(this._milliseconds)!==la(a)?"-":"",l+"P"+(r?c+r+"Y":"")+(t?c+t+"M":"")+(e?u+e+"D":"")+(i||n||s?"T":"")+(i?d+i+"H":"")+(n?d+n+"M":"")+(s?d+o+"S":"")):"P0D"}var gt=Vu.prototype;gt.isValid=aL,gt.abs=VE,gt.add=zE,gt.subtract=jE,gt.as=UE,gt.asMilliseconds=u2,gt.asSeconds=HE,gt.asMinutes=QE,gt.asHours=YE,gt.asDays=qE,gt.asWeeks=GE,gt.asMonths=KE,gt.asQuarters=XE,gt.asYears=JE,gt.valueOf=ZE,gt._bubble=WE,gt.clone=eD,gt.get=tD,gt.milliseconds=sD,gt.seconds=nD,gt.minutes=iD,gt.hours=rD,gt.days=oD,gt.weeks=cD,gt.months=aD,gt.years=lD,gt.humanize=pD,gt.toISOString=Yu,gt.toString=Yu,gt.toJSON=Yu,gt.locale=K_,gt.localeData=J_,gt.toIsoString=kn("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Yu),gt.lang=X_,He("X",0,0,"unix"),He("x",0,0,"valueOf"),Fe("x",Eu),Fe("X",IT),Tt("X",function(s,e,t){t._d=new Date(parseFloat(s)*1e3)}),Tt("x",function(s,e,t){t._d=new Date(dt(s))});//! moment.js
$e.version="2.30.1",mT(jt),$e.fn=me,$e.min=nL,$e.max=iL,$e.now=rL,$e.utc=oi,$e.unix=EE,$e.months=IE,$e.isDate=pl,$e.locale=Er,$e.invalid=Mu,$e.duration=Un,$e.isMoment=jn,$e.weekdays=FE,$e.parseZone=DE,$e.localeData=Ki,$e.isDuration=zu,$e.monthsShort=RE,$e.weekdaysMin=NE,$e.defineLocale=Cp,$e.updateLocale=DP,$e.locales=IP,$e.weekdaysShort=BE,$e.normalizeUnits=Sn,$e.relativeTimeRounding=hD,$e.relativeTimeThreshold=fD,$e.calendarFormat=TL,$e.prototype=me,$e.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};const Cl=s=>(Ds("data-v-783cff80"),s=s(),Is(),s),mD={class:"w-16 no-details"},gD={key:0,class:"w-1/6 break-words"},vD={key:1,class:"w-1/6 break-words"},yD={key:2,class:"w-1/6 break-words"},_D={key:3,class:"w-2/6 break-words"},bD={key:4,class:"w-2/6 break-words"},wD={class:"w-1/6 white sm:whitespace-nowrap"},xD={key:5,class:"w-24 text-center"},kD={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-700"},SD={key:1,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-700"},CD={class:"w-[150px]"},OD={class:"flex items-center justify-end gap-3"},MD={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-pencil-fill",viewBox:"0 0 16 16"},AD=Cl(()=>h("path",{d:"M10.5 8a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0"},null,-1)),$D=Cl(()=>h("path",{d:"M0 8s3-5.5 8-5.5S16 8 16 8s-3 5.5-8 5.5S0 8 0 8m8 3.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7"},null,-1)),TD={key:0,d:"M5.525 7.646a2.5 2.5 0 0 0 2.829 2.829zm4.95.708-2.829-2.83a2.5 2.5 0 0 1 2.829 2.829zm3.171 6-12-12 .708-.708 12 12z"},PD=[Cl(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash3-fill",viewBox:"0 0 16 16"},[h("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"})],-1))],LD={key:0,class:"grid grid-cols-1 md:grid-cols-2 child:h-full"},ED={class:"p-5 pr-0 md:pr-0 md:p-8 w-full flex flex-col gap-4"},DD=Cl(()=>h("h2",{class:"text-slate-500 font-medium"},"Form Submitted data",-1)),ID={class:"bg-slate-50 py-5 px-6 h-full rounded border border-slate-100 relative"},RD={xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},FD={key:0,d:"M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z"},BD={key:1,d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5zm4.5 6V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5a.5.5 0 0 1 1 0"},ND={key:2,d:"M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z"},VD={key:3,d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708"},zD={class:"flex gap-4 w-full items-start mb-2 last:mb-0 text-[14px] 24 font-normal text-gray-400"},jD={class:"capitalize whitespace-nowrap w-32 text-right"},WD={class:"w-full text-gray-700 [&>a]:text-indigo-500 [&>a]:ring-0 [&>a]:hover:text-indigo-600 [&>a]:hover:underline [&>a]:transition-all [&>a]:cursor-pointer"},UD=["href"],HD=["tel","href"],QD=["innerHTML"],YD={class:"p-5 pr-0 md:pr-0 md:p-8 w-full flex flex-col gap-4"},qD=Cl(()=>h("h2",{class:"text-slate-500 font-medium"},"Others Information",-1)),GD={class:"bg-slate-50 p-6 rounded h-full border border-slate-100 relative"},KD={xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},XD={key:0,d:"M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z"},JD={key:1,d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5zm4.5 6V9H10a.5.5 0 0 1 0 1H8.5v1.5a.5.5 0 0 1-1 0V10H6a.5.5 0 0 1 0-1h1.5V7.5a.5.5 0 0 1 1 0"},ZD={key:2,d:"M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z"},eI={key:3,d:"M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708"},tI={class:"flex gap-4 w-full items-start mb-2 last:mb-0 text-[14px] font-normal text-gray-400"},sI={class:"capitalize whitespace-nowrap w-32 text-right"},nI=["innerHTML"],iI={class:"pl-10 mt-6 text-sm"},rI=Nt({__name:"Lead",props:{lead:Object},emits:["delete"],setup(s,{emit:e}){const t=f_(),n=Es({}),i=s,r=ie(()=>{var O,$,M;return((M=($=(O=window.formychat_admin_vars)==null?void 0:O.additional)==null?void 0:$.google_sheets)==null?void 0:M.connected)||!1}),o=ie(()=>{var O;return!!((O=i.lead)!=null&&O.google_sheet_synced_at)}),a=ie(()=>i.lead||{}),l=ie(()=>i.lead.field||{}),c=ie(()=>{if(n.fullMeta)return i.lead.meta||{};const O=i.lead.meta||{};return Object.fromEntries(Object.entries(O).slice(0,7))}),u=O=>{if(!(O.target.classList.contains("no-details")||O.target.closest(".no-details"))){if(a.value.locked){n.showDetails=!1,$r().show();return}n.showDetails=!n.showDetails}},d=()=>{n.formDataCopied=!0;const O=JSON.stringify(l.value,null,2);navigator.clipboard.writeText(O),setTimeout(()=>{n.formDataCopied=!1},2e3)},f=()=>{n.deviceInfoCopied=!0;const O=JSON.stringify(c.value,null,2);navigator.clipboard.writeText(O),setTimeout(()=>{n.deviceInfoCopied=!1},2e3)},p=e,g=()=>{if(a.value.locked){$r().show();return}p("delete",i.lead.id)},S=(O,$=25)=>O?O.length>$?O.slice(0,$)+"...":O:"",k=O=>O?O.replace(/\n/g,"<br>"):"";return(O,$)=>(v(),qe(ze,{name:"fade"},{default:P(()=>[a.value.deleted_at?z("",!0):(v(),C("div",{key:0,class:X(["flex flex-col w-full h-full border border-slate-100 border-t-0 divide-y divide-slate-100 transition-all overflow-hidden",{"opacity-50 animate-pulse pointer-events-none":a.value.deleting}]),onClick:$[3]||($[3]=M=>a.value.locked?m($r)().show():null)},[h("div",{onClick:u,class:X(["w-full flex items-center child:py-2.5 child:px-5 last-child:text-right cursor-pointer hover:bg-gray-50 transition-all",{"bg-gray-50":n.showDetails,"blur-[2px] pointer-events-none":a.value.locked}])},[h("div",mD,[xt(h("input",{type:"checkbox",class:"bg-transparent","onUpdate:modelValue":$[0]||($[0]=M=>a.value.selected=M),onInput:$[1]||($[1]=M=>O.$emit("select",a.value))},null,544),[[ou,a.value.selected]])]),m(t).columns[0]?(v(),C("div",gD,q(S(l.value[m(t).columns[0]])),1)):z("",!0),m(t).columns[1]?(v(),C("div",vD,q(S(l.value[m(t).columns[1]])),1)):z("",!0),m(t).columns[2]?(v(),C("div",yD,q(S(l.value[m(t).columns[2]])),1)):z("",!0),m(t).columns[3]?(v(),C("div",_D,q(S(l.value[m(t).columns[3]])),1)):z("",!0),m(t).filters.mode=="formychat"?(v(),C("div",bD,q(m(t).getWidgetName(a.value.widget_id)),1)):z("",!0),h("div",wD,q(m($e)(a.value.created_at).calendar()),1),r.value?(v(),C("div",xD,[o.value?(v(),C("span",kD," Synced ")):(v(),C("span",SD," Pending "))])):z("",!0),h("div",CD,[h("div",OD,[h("button",{class:X(["h-8 w-8 flex items-center justify-center hover:opacity-90 transition cursor-pointer",{"bg-indigo-100 text-indigo-600":!n.showDetails,"bg-indigo-500 text-indigo-50":n.showDetails}])},[(v(),C("svg",MD,[AD,$D,n.showDetails?(v(),C("path",TD)):z("",!0)]))],2),h("button",{onClick:g,class:"no-details active:bg-red-400 h-8 w-8 flex items-center justify-center bg-red-100 text-red-600 hover:bg-red-500 hover:text-white transition cursor-pointer"},PD)])])],2),y(ze,{name:"slide-down"},{default:P(()=>[n.showDetails?(v(),C("div",LD,[h("div",ED,[DD,h("div",ID,[h("span",{class:X(["absolute right-4 top-4 flex items-center gap-2 cursor-pointer transition",{"text-indigo-500":n.formDataCopied,"text-slate-400 hover:text-slate-700":!n.formDataCopied}]),onClick:Me(d,["prevent"])},[(v(),C("svg",RD,[n.formDataCopied?z("",!0):(v(),C("path",FD)),n.formDataCopied?z("",!0):(v(),C("path",BD)),n.formDataCopied?(v(),C("path",ND)):z("",!0),n.formDataCopied?(v(),C("path",VD)):z("",!0)]))],2),(v(!0),C(Ve,null,ft(l.value,(M,b)=>(v(),C("div",zD,[h("span",jD,q(b),1),B(" : "),h("span",WD,[b==="email"?(v(),C("a",{key:0,href:`mailto:${M}`},q(M),9,UD)):b==="phone"?(v(),C("a",{key:1,tel:M,href:`tel:${M}`},q(M),9,HD)):(v(),C("span",{key:2,innerHTML:k(M)},null,8,QD))])]))),256))])]),h("div",YD,[qD,h("div",GD,[h("span",{class:X(["absolute right-12 top-4 flex items-center gap-2 cursor-pointer transition",{"text-indigo-500":n.deviceInfoCopied,"text-slate-400 hover:text-slate-700":!n.deviceInfoCopied}]),onClick:Me(f,["prevent"])},[(v(),C("svg",KD,[n.deviceInfoCopied?z("",!0):(v(),C("path",XD)),n.deviceInfoCopied?z("",!0):(v(),C("path",JD)),n.deviceInfoCopied?(v(),C("path",ZD)):z("",!0),n.deviceInfoCopied?(v(),C("path",eI)):z("",!0)]))],2),(v(!0),C(Ve,null,ft(c.value,(M,b)=>(v(),C("div",tI,[h("span",sI,q(b),1),B(" : "),h("span",{class:"w-full text-gray-700 tracking-wide flex items-center gap-3 flex-wrap [&>img]:w-auto [&>img]:h-5 [&>img]:rounded",innerHTML:M},null,8,nI)]))),256)),h("div",iI,[h("a",{class:"text-indigo-500 hover:text-indigo-600 transition",href:"javascript:;",onClick:$[2]||($[2]=M=>n.fullMeta=!n.fullMeta)},q(n.fullMeta?" Show less":"+ Show more"),1)])])])])):z("",!0)]),_:1})],2))]),_:1}))}},[["__scopeId","data-v-783cff80"]]),On=s=>(Ds("data-v-271e75d7"),s=s(),Is(),s),oI={class:"w-full p-3 sm:p-6 h-full"},aI={class:"bg-white p-2 sm:p-6 w-full h-full flex flex-col gap-3 sm:gap-5"},lI={class:"flex items-center justify-between gap-2 h-10 w-full"},cI=On(()=>h("h3",{class:"font-semibold text-base whitespace-nowrap"},"Contact Form Leads ",-1)),uI={class:"flex items-center :justify-end gap-3 justify-between child:justify-center child:px-3 sm:child:px-6"},dI=On(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4",viewBox:"0 0 16 16"},[h("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"})],-1)),hI={key:0,class:"hidden sm:flex items-center gap-1.5 bg-green-50 border border-green-200 rounded h-10 px-3"},fI=["src"],pI={class:"text-sm font-medium text-green-700"},mI=On(()=>h("div",{class:"w-px h-5 bg-green-200 mx-1"},null,-1)),gI=[On(()=>h("svg",{class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})],-1))],vI=["disabled"],yI={key:0,class:"animate-spin w-4 h-4 text-green-600",fill:"none",viewBox:"0 0 24 24"},_I=[On(()=>h("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1)),On(()=>h("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1))],bI={key:1,class:"w-4 h-4 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},wI=[On(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1))],xI=["src"],kI=On(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M14 4.5V14a2 2 0 0 1-2 2h-1v-1h1a1 1 0 0 0 1-1V4.5h-2A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v9H2V2a2 2 0 0 1 2-2h5.5zM3.517 14.841a1.13 1.13 0 0 0 .401.823q.195.162.478.252.284.091.665.091.507 0 .859-.158.354-.158.539-.44.187-.284.187-.656 0-.336-.134-.56a1 1 0 0 0-.375-.357 2 2 0 0 0-.566-.21l-.621-.144a1 1 0 0 1-.404-.176.37.37 0 0 1-.144-.299q0-.234.185-.384.188-.152.512-.152.214 0 .37.068a.6.6 0 0 1 .246.181.56.56 0 0 1 .12.258h.75a1.1 1.1 0 0 0-.2-.566 1.2 1.2 0 0 0-.5-.41 1.8 1.8 0 0 0-.78-.152q-.439 0-.776.15-.337.149-.527.421-.19.273-.19.639 0 .302.122.524.124.223.352.367.228.143.539.213l.618.144q.31.073.463.193a.39.39 0 0 1 .152.326.5.5 0 0 1-.085.29.56.56 0 0 1-.255.193q-.167.07-.413.07-.175 0-.32-.04a.8.8 0 0 1-.248-.115.58.58 0 0 1-.255-.384zM.806 13.693q0-.373.102-.633a.87.87 0 0 1 .302-.399.8.8 0 0 1 .475-.137q.225 0 .398.097a.7.7 0 0 1 .272.26.85.85 0 0 1 .12.381h.765v-.072a1.33 1.33 0 0 0-.466-.964 1.4 1.4 0 0 0-.489-.272 1.8 1.8 0 0 0-.606-.097q-.534 0-.911.223-.375.222-.572.632-.195.41-.196.979v.498q0 .568.193.976.197.407.572.626.375.217.914.217.439 0 .785-.164t.55-.454a1.27 1.27 0 0 0 .226-.674v-.076h-.764a.8.8 0 0 1-.118.363.7.7 0 0 1-.272.25.9.9 0 0 1-.401.087.85.85 0 0 1-.478-.132.83.83 0 0 1-.299-.392 1.7 1.7 0 0 1-.102-.627zm8.239 2.238h-.953l-1.338-3.999h.917l.896 3.138h.038l.888-3.138h.879z"})],-1)),SI={key:0,class:"p-2 bg-green-50 border border-green-200 rounded-lg text-green-800 text-sm"},CI={key:1,class:"p-2 bg-red-50 border border-red-200 rounded-lg text-red-800 text-sm"},OI={class:"flex items-center justify-between flex-col gap-2 sm:flex-row"},MI={class:"flex items-center gap-2 flex-col sm:flex-row"},AI={class:"flex items-center gap-3 child:text-[14px]"},$I=On(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 1-4.546 2.914.5.5 0 0 0-.908-.417A6 6 0 1 0 8 2z"}),h("path",{d:"M8 4.466V.534a.25.25 0 0 0-.41-.192L5.23 2.308a.25.25 0 0 0 0 .384l2.36 1.966A.25.25 0 0 0 8 4.466"})],-1)),TI=On(()=>h("span",{class:"text-gray-500"},"to",-1)),PI={key:2,class:""},LI=[On(()=>h("div",{class:"flex items-center justify-center gap-4 my-6"},[h("div",{class:"w-5 h-5 border-2 border-y-transparent border-indigo-500 animate-spin rounded-full"}),h("span",{class:"text-base"},"Please wait while we load your leads.")],-1))],EI={key:3,class:"flex flex-col gap-6 h-full"},DI={key:0,class:"flex sm:sticky sm:top-7 items-center child:py-2 bg-indigo-100 child:px-5 child:font-semibold w-[800px] sm:w-full h-full"},II={class:"w-16"},RI={key:0,class:"w-1/6 capitalize"},FI={key:1,class:"w-1/6 capitalize"},BI={key:2,class:"w-1/6 capitalize"},NI={key:3,class:"w-2/6 capitalize"},VI={key:4,class:"w-2/6 capitalize"},zI={class:"flex items-center gap-2"},jI={key:5,class:"w-24 text-center"},WI=On(()=>h("div",{class:"w-[150px]"},"Action",-1)),UI={key:2,class:"text-center p-5 sm:p-10 sm:pt-5 text-slate-500 text-base"},HI=Nt({__name:"Leads",setup(s){var k,O,$;const e=Tr(),t=f_(),n=pe(!1),i=pe(!1),r=pe(""),o=pe(""),a=ie(()=>{var M,b;return((b=(M=window.formychat_admin_vars)==null?void 0:M.additional)==null?void 0:b.google_sheets)||{}}),l=ie(()=>a.value.connected&&a.value.is_enabled||!1),c=pe((($=(O=(k=window.formychat_admin_vars)==null?void 0:k.additional)==null?void 0:O.google_sheets)==null?void 0:$.sync_stats)||{synced:0,pending:0,total:0}),u=ie(()=>{var M;return((M=window.formychat_admin_vars)==null?void 0:M.public)||""}),d=async()=>{var M,b,w,R;i.value=!0,r.value="",o.value="";try{const T=await Ke.post("integrations/google-sheets/sync");(M=T.data)!=null&&M.success?(o.value=`Synced ${T.data.synced} lead(s)!`,T.data.stats&&(c.value=T.data.stats,window.formychat_admin_vars.additional.google_sheets.sync_stats=T.data.stats),setTimeout(()=>{o.value=""},3e3)):(b=T.data)!=null&&b.error&&(r.value=T.data.error)}catch(T){r.value=((R=(w=T.response)==null?void 0:w.data)==null?void 0:R.message)||"Sync failed."}finally{i.value=!1}},f=async M=>{(await e.prompt({title:Array.isArray(M)?`Delete selected ${M.length} Leads`:"Delete Lead",message:Array.isArray(M)?`Are you sure you want to delete selected ${M.length} leads?`:"Are you sure you want to delete this lead?"})).ok&&t.deleteLeads(M)},p=()=>{let M=t.leads.map(T=>({date:T.created_at.split(" ")[0],time:T.created_at.split(" ")[1],...T.field,...T.meta})),b=Object.keys(M[0]).join(",")+`
`;M.forEach(T=>{b+=Object.values(T).join(",")+`
`});let w=new Blob([b],{type:"text/csv"}),R=document.createElement("a");R.href=URL.createObjectURL(w),R.download="leads.csv",R.click(),URL.revokeObjectURL(R.href)},g=ie(()=>formychat_admin_vars.is_premium?!1:t.filters.page>1||t.filters.per_page>20),S=ie(()=>{const M=[];return Object.entries(t.state.modes).forEach(([b,w])=>{M.push({label:w,value:b,name:w})}),M});return(M,b)=>(v(),C("div",oI,[h("div",aI,[h("div",lI,[cI,h("div",uI,[y(ze,{name:"bounce"},{default:P(()=>[m(t).selected.length?(v(),qe(m(ct),{key:0,class:"flex items-center text-base",color:"danger",outline:"",onClick:b[0]||(b[0]=w=>f(m(t).selected.map(R=>R.id)))},{default:P(()=>[dI,B(" "+q(m(t).selected.length),1)]),_:1})):z("",!0)]),_:1}),l.value?(v(),C("div",hI,[h("img",{src:u.value+"images/integrations/google-sheets.png",class:"w-4 h-4",alt:"Google Sheets"},null,8,fI),h("span",pI,q(c.value.synced)+"/"+q(c.value.total),1),mI,h("button",{onClick:b[1]||(b[1]=w=>n.value=!0),class:"p-1 hover:bg-green-100 rounded transition-colors",title:"Sync Settings"},gI),h("button",{onClick:d,disabled:i.value,class:"p-1 hover:bg-green-100 rounded transition-colors disabled:opacity-50",title:"Sync Now"},[i.value?(v(),C("svg",yI,_I)):(v(),C("svg",bI,wI))],8,vI)])):z("",!0),l.value?(v(),C("button",{key:1,onClick:b[2]||(b[2]=w=>n.value=!0),class:"sm:hidden flex items-center justify-center h-10 w-10 bg-green-50 border border-green-200 rounded",title:"Google Sheets Sync"},[h("img",{src:u.value+"images/integrations/google-sheets.png",class:"w-5 h-5",alt:"Google Sheets"},null,8,xI)])):z("",!0),y(ze,{name:"bounce"},{default:P(()=>[m(t).leads.length&&!g.value?(v(),qe(m(ct),{key:0,onClick:p,outline:""},{default:P(()=>[kI,B(" Export")]),_:1})):z("",!0)]),_:1})])]),o.value?(v(),C("div",SI,q(o.value),1)):z("",!0),r.value?(v(),C("div",CI,q(r.value),1)):z("",!0),h("div",OI,[h("div",MI,[y(m($t),{white:"",placeholder:"Select Source",class:"w-48",options:S.value,modelValue:m(t).filters.mode,"onUpdate:modelValue":b[3]||(b[3]=w=>m(t).filters.mode=w)},null,8,["options","modelValue"]),y(m($t),{white:"",placeholder:"Select Widget",class:"w-48",options:m(t).contents.widgets,modelValue:m(t).filters.widget_id,"onUpdate:modelValue":b[4]||(b[4]=w=>m(t).filters.widget_id=w)},null,8,["options","modelValue"]),m(t).filters.mode!=="formychat"?(v(),qe(m($t),{key:0,white:"",placeholder:"Select Form",options:m(t).contents.forms[m(t).filters.mode],modelValue:m(t).filters[m(t).filters.mode+"_id"],"onUpdate:modelValue":b[5]||(b[5]=w=>m(t).filters[m(t).filters.mode+"_id"]=w)},null,8,["options","modelValue"])):z("",!0)]),h("div",AI,[m(t).showResetFilter?(v(),qe(m(ct),{key:0,class:"w-10 flex items-center justify-center",outline:"",onClick:b[6]||(b[6]=w=>m(t).resetFilter())},{default:P(()=>[$I]),_:1})):z("",!0),xt(h("input",{type:"date","onUpdate:modelValue":b[7]||(b[7]=w=>m(t).filters.after=w),class:X(["h-10 border border-slate-200 rounded cursor-pointer transition-all px-3.5",{"w-12 focus:w-[135px]":!m(t).filters.after,"w-[135px]":m(t).filters.after}]),placeholder:"From"},null,2),[[Ot,m(t).filters.after]]),TI,xt(h("input",{type:"date","onUpdate:modelValue":b[8]||(b[8]=w=>m(t).filters.before=w),class:X(["h-10 border border-slate-200 rounded cursor-pointer transition-all px-3.5",{"w-12 focus:w-[135px]":!m(t).filters.before,"w-[135px]":m(t).filters.before}])},null,2),[[Ot,m(t).filters.before]]),y(m(Gt),{type:"search",white:"",modelValue:m(t).filters.search,"onUpdate:modelValue":b[9]||(b[9]=w=>m(t).filters.search=w),placeholder:"  Search",class:X(["transition-all",{"pr-0 w-12 focus:w-44":!m(t).filters.search,"w-44":m(t).filters.search}])},null,8,["modelValue","class"])])]),m(t).state.isLoading?(v(),C("div",PI,LI)):(v(),C("div",EI,[h("div",{class:X([{"pointer-events-none animate-pulse cursor-wait":m(t).state.isReloading},"overflow-x-scroll h-full sm:overflow-visible"])},[m(t).leads.length?(v(),C("div",DI,[h("div",II,[xt(h("input",{type:"checkbox",class:X(["bg-transparent",{"pointer-events-none opacity-30":g.value}]),"onUpdate:modelValue":b[10]||(b[10]=w=>m(t).state.allSelected=w),onChange:b[11]||(b[11]=(...w)=>m(t).toggleAll&&m(t).toggleAll(...w))},null,34),[[ou,m(t).state.allSelected]])]),m(t).columns[0]?(v(),C("div",RI,q(m(t).columns[0]),1)):z("",!0),m(t).columns[1]?(v(),C("div",FI,q(m(t).columns[1]),1)):z("",!0),m(t).columns[2]?(v(),C("div",BI,q(m(t).columns[2]),1)):z("",!0),m(t).columns[3]?(v(),C("div",NI,q(m(t).columns[3]),1)):z("",!0),m(t).filters.mode=="formychat"?(v(),C("div",VI,"Widget")):z("",!0),h("div",{class:"w-1/6",onClick:b[12]||(b[12]=w=>m(t).setSort("created_at"))},[h("div",zI,[B("Date "),y(m(Uf),{asc:m(t).filters.order_by=="created_at"&&m(t).filters.order=="asc"},null,8,["asc"])])]),l.value?(v(),C("div",jI,"Sync")):z("",!0),WI])):z("",!0),m(t).leads.length?(v(!0),C(Ve,{key:1},ft(m(t).leads,(w,R)=>(v(),qe(rI,{key:w.id,lead:w,onDelete:f,onSelect:m(t).toggleSelector,class:"w-[800px] sm:w-full",locked:g.value},null,8,["lead","onSelect","locked"]))),128)):(v(),C("div",UI," No leads found. "))],2),m(t).leads.length?(v(),qe(m(v8),{key:0,label:"lead",class:X({"pointer-events-none animate-pulse cursor-wait":m(t).state.isReloading}),page:m(t).filters.page,"onUpdate:page":b[13]||(b[13]=w=>m(t).filters.page=w),perPage:m(t).filters.per_page,"onUpdate:perPage":b[14]||(b[14]=w=>m(t).filters.per_page=w),total:m(t).total},null,8,["class","page","perPage","total"])):z("",!0)])),y(m(fu))]),y(ip),n.value?(v(),qe(pT,{key:0,simple:!0,onClose:b[15]||(b[15]=w=>n.value=!1),onStatsUpdated:b[16]||(b[16]=w=>c.value=w)})):z("",!0)]))}},[["__scopeId","data-v-271e75d7"]]),Np=s=>(Ds("data-v-b0268364"),s=s(),Is(),s),QI={class:"fm-integrations"},YI={class:"fm-sidebar"},qI=Np(()=>h("div",{class:"fm-sidebar-title"},"FormyChat Modules",-1)),GI={class:"fm-category-list"},KI=["onClick"],XI={key:0},JI={class:"fm-content-area"},ZI=Fs('<div class="fm-header" data-v-b0268364><div class="fm-header-content" data-v-b0268364><h1 class="fm-main-title" data-v-b0268364>FormyChat Modules</h1><p class="fm-subtitle" data-v-b0268364>Integrate your favorite modules and supercharge your workflow</p></div><div class="fm-header-actions" data-v-b0268364><a href="https://www.youtube.com/watch?v=bjJcWoY-8zA&amp;list=PLd6WEu38CQSyebRIikg4qX54h-R1n35TG" target="_blank" class="fm-btn fm-btn-secondary" data-v-b0268364><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48" data-v-b0268364><path fill="#FF3D00" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z" data-v-b0268364></path><path fill="#FFF" d="M20 31L20 17 32 24z" data-v-b0268364></path></svg> Tutorial </a><a href="https://wppool.dev/docs-category/formychat-documentation/" target="_blank" class="fm-btn fm-btn-secondary" data-v-b0268364><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48" data-v-b0268364><linearGradient id="pg10I3OeSC0NOv22QZ6aWa_v0YYnU84T2c4_gr1" x1="-209.942" x2="-179.36" y1="-3.055" y2="27.526" gradientTransform="translate(208.979 6.006)" gradientUnits="userSpaceOnUse" data-v-b0268364><stop offset="0" stop-color="#55adfd" data-v-b0268364></stop><stop offset="1" stop-color="#438ffd" data-v-b0268364></stop></linearGradient><path fill="url(#pg10I3OeSC0NOv22QZ6aWa_v0YYnU84T2c4_gr1)" d="M39.001,13.999v27c0,1.105-0.896,2-2,2h-26	c-1.105,0-2-0.895-2-2v-34c0-1.104,0.895-2,2-2h19l2,7L39.001,13.999z" data-v-b0268364></path><path fill="#fff" fill-rule="evenodd" d="M15.999,18.001v2.999	h17.002v-2.999H15.999z" clip-rule="evenodd" data-v-b0268364></path><path fill="#fff" fill-rule="evenodd" d="M16.001,24.001v2.999	h17.002v-2.999H16.001z" clip-rule="evenodd" data-v-b0268364></path><path fill="#fff" fill-rule="evenodd" d="M15.999,30.001v2.999	h12.001v-2.999H15.999z" clip-rule="evenodd" data-v-b0268364></path><linearGradient id="pg10I3OeSC0NOv22QZ6aWb_v0YYnU84T2c4_gr2" x1="-197.862" x2="-203.384" y1="-4.632" y2=".89" gradientTransform="translate(234.385 12.109)" gradientUnits="userSpaceOnUse" data-v-b0268364><stop offset="0" stop-color="#427fdb" data-v-b0268364></stop><stop offset="1" stop-color="#0c52bb" data-v-b0268364></stop></linearGradient><path fill="url(#pg10I3OeSC0NOv22QZ6aWb_v0YYnU84T2c4_gr2)" d="M30.001,13.999l0.001-9l8.999,8.999L30.001,13.999z" data-v-b0268364></path></svg> Documentation </a><a href="https://wordpress.org/plugins/social-contact-form/" target="_blank" class="fm-btn fm-btn-secondary" data-v-b0268364><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-b0268364><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#FFD700" data-v-b0268364></path></svg> Review Us </a></div></div>',1),eR={class:"fm-toolbar"},tR={class:"fm-search"},sR=Np(()=>h("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M21 21l-4.2-4.2",stroke:"#7A7A7A","stroke-width":"1.5","stroke-linecap":"round"}),h("circle",{cx:"11",cy:"11",r:"7",stroke:"#7A7A7A","stroke-width":"1.5"})],-1)),nR={class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-3 gap-4"},iR={class:"bg-white flex flex-col justify-between rounded border overflow-hidden border-gray-200 hover:-translate-y-1 hover:shadow transition-all duration-300"},rR=Fs('<div class="flex flex-col gap-3 p-5" data-v-b0268364><div class="bg-gray-600 w-12 h-12 rounded-full text-white flex items-center justify-center" data-v-b0268364><svg xmlns="http://www.w3.org/2000/svg" class="fill-current w-8" viewBox="0 0 16 16" data-v-b0268364><path fill-rule="evenodd" d="M4.475 5.458c-.284 0-.514-.237-.47-.517C4.28 3.24 5.576 2 7.825 2c2.25 0 3.767 1.36 3.767 3.215 0 1.344-.665 2.288-1.79 2.973-1.1.659-1.414 1.118-1.414 2.01v.03a.5.5 0 0 1-.5.5h-.77a.5.5 0 0 1-.5-.495l-.003-.2c-.043-1.221.477-2.001 1.645-2.712 1.03-.632 1.397-1.135 1.397-2.028 0-.979-.758-1.698-1.926-1.698-1.009 0-1.71.529-1.938 1.402-.066.254-.278.461-.54.461h-.777ZM7.496 14c.622 0 1.095-.474 1.095-1.09 0-.618-.473-1.092-1.095-1.092-.606 0-1.087.474-1.087 1.091S6.89 14 7.496 14" data-v-b0268364></path></svg></div><h3 class="font-semibold text-base flex items-center gap-2" data-v-b0268364>Don&#39;t see your tool?</h3><p class="text-sm text-gray-500" data-v-b0268364>Your favorite tool could be our next big integration. Don&#39;t miss the chance to get it added!</p></div>',1),oR=[Np(()=>h("div",{class:"w-full bg-gray-600 hover:bg-gray-700 transition-all duration-300 text-white px-4 h-[60px] flex items-center justify-center text-center font-semibold"},"Suggest Now ",-1))],aR=Nt({__name:"Integrations",setup(s){const e=h_();os(()=>{var n,i;if(e.loadIntegrations(),(i=(n=formychat_admin_vars==null?void 0:formychat_admin_vars.additional)==null?void 0:n.google_sheets)!=null&&i.just_connected){const r=Jt(()=>e.integrations,o=>{if(o&&o.length>0){const a=o.find(l=>l.id==="google_sheets");a&&e.openSettings(a),r()}},{immediate:!0})}});const t=n=>{window.Gleap?(n.preventDefault(),Gleap.open()):window.open(n.target.href||"https://wordpress.org/support/plugin/social-contact-form/","_blank")};return(n,i)=>(v(),C(Ve,null,[h("div",QI,[h("div",YI,[qI,h("ul",GI,[(v(!0),C(Ve,null,ft(m(e).categories,r=>(v(),C("li",{key:r.slug,class:X([{active:m(e).selectedCategory===r.slug},"fm-category-item"])},[h("button",{class:"fm-category-btn",onClick:o=>m(e).selectedCategory=r.slug},[h("span",null,q(r.label),1),m(e).selectedCategory===r.slug?(v(),C("span",XI,"")):z("",!0)],8,KI)],2))),128))])]),h("div",JI,[ZI,h("div",eR,[h("div",tR,[sR,xt(h("input",{"onUpdate:modelValue":i[0]||(i[0]=r=>m(e).searchQuery=r),type:"search",placeholder:"Search Modules",class:"fm-search-input"},null,512),[[Ot,m(e).searchQuery]])])]),h("div",nR,[(v(!0),C(Ve,null,ft(m(e).filteredIntegrations,r=>(v(),qe(m(B7),{key:r.id,integration:r,onToggle:m(e).toggleIntegration,onActivate:m(e).installIntegration,onInstall:m(e).installIntegration,onSettings:m(e).openSettings},null,8,["integration","onToggle","onActivate","onInstall","onSettings"]))),128)),h("div",iR,[rR,h("a",{href:"https://wordpress.org/support/plugin/social-contact-form/",onClick:Me(t,["prevent"]),target:"_blank",class:"flex w-full"},oR)])])])]),y(m(np)),y(m(zA)),y(m(fu))],64))}},[["__scopeId","data-v-b0268364"]]);let Vp=[],d2=[];(()=>{let s="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<s.length;e++)(e%2?d2:Vp).push(t=t+s[e])})();function lR(s){if(s<768)return!1;for(let e=0,t=Vp.length;;){let n=e+t>>1;if(s<Vp[n])t=n;else if(s>=d2[n])e=n+1;else return!0;if(e==t)return!1}}function h2(s){return s>=127462&&s<=127487}const f2=8205;function cR(s,e,t=!0,n=!0){return(t?p2:uR)(s,e,n)}function p2(s,e,t){if(e==s.length)return e;e&&m2(s.charCodeAt(e))&&g2(s.charCodeAt(e-1))&&e--;let n=zp(s,e);for(e+=v2(n);e<s.length;){let i=zp(s,e);if(n==f2||i==f2||t&&lR(i))e+=v2(i),n=i;else if(h2(i)){let r=0,o=e-2;for(;o>=0&&h2(zp(s,o));)r++,o-=2;if(r%2==0)break;e+=2}else break}return e}function uR(s,e,t){for(;e>0;){let n=p2(s,e-2,t);if(n<e)return n;e--}return 0}function zp(s,e){let t=s.charCodeAt(e);if(!g2(t)||e+1==s.length)return t;let n=s.charCodeAt(e+1);return m2(n)?(t-55296<<10)+(n-56320)+65536:t}function m2(s){return s>=56320&&s<57344}function g2(s){return s>=55296&&s<56320}function v2(s){return s<65536?1:2}class _t{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=ca(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),ui.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ca(this,e,t);let n=[];return this.decompose(e,t,n,0),ui.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new Ol(this),r=new Ol(e);for(let o=t,a=t;;){if(i.next(o),r.next(o),o=0,i.lineBreak!=r.lineBreak||i.done!=r.done||i.value!=r.value)return!1;if(a+=i.value.length,i.done||a>=n)return!0}}iter(e=1){return new Ol(this,e)}iterRange(e,t=this.length){return new _2(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new b2(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?_t.empty:e.length<=32?new ts(e):ui.from(ts.split(e,[]))}}class ts extends _t{constructor(e,t=dR(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let r=0;;r++){let o=this.text[r],a=i+o.length;if((t?n:a)>=e)return new hR(i,a,n,o);i=a+1,n++}}decompose(e,t,n,i){let r=e<=0&&t>=this.length?this:new ts(y2(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let o=n.pop(),a=qu(r.text,o.text.slice(),0,r.length);if(a.length<=32)n.push(new ts(a,o.length+r.length));else{let l=a.length>>1;n.push(new ts(a.slice(0,l)),new ts(a.slice(l)))}}else n.push(r)}replace(e,t,n){if(!(n instanceof ts))return super.replace(e,t,n);[e,t]=ca(this,e,t);let i=qu(this.text,qu(n.text,y2(this.text,0,e)),t),r=this.length+n.length-(t-e);return i.length<=32?new ts(i,r):ui.from(ts.split(i,[]),r)}sliceString(e,t=this.length,n=`
`){[e,t]=ca(this,e,t);let i="";for(let r=0,o=0;r<=t&&o<this.text.length;o++){let a=this.text[o],l=r+a.length;r>e&&o&&(i+=n),e<l&&t>r&&(i+=a.slice(Math.max(0,e-r),t-r)),r=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let r of e)n.push(r),i+=r.length+1,n.length==32&&(t.push(new ts(n,i)),n=[],i=-1);return i>-1&&t.push(new ts(n,i)),t}}class ui extends _t{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let r=0;;r++){let o=this.children[r],a=i+o.length,l=n+o.lines-1;if((t?l:a)>=e)return o.lineInner(e,t,n,i);i=a+1,n=l+1}}decompose(e,t,n,i){for(let r=0,o=0;o<=t&&r<this.children.length;r++){let a=this.children[r],l=o+a.length;if(e<=l&&t>=o){let c=i&((o<=e?1:0)|(l>=t?2:0));o>=e&&l<=t&&!c?n.push(a):a.decompose(e-o,t-o,n,c)}o=l+1}}replace(e,t,n){if([e,t]=ca(this,e,t),n.lines<this.lines)for(let i=0,r=0;i<this.children.length;i++){let o=this.children[i],a=r+o.length;if(e>=r&&t<=a){let l=o.replace(e-r,t-r,n),c=this.lines-o.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new ui(u,this.length-(t-e)+n.length)}return super.replace(r,a,l)}r=a+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=ca(this,e,t);let i="";for(let r=0,o=0;r<this.children.length&&o<=t;r++){let a=this.children[r],l=o+a.length;o>e&&r&&(i+=n),e<l&&t>o&&(i+=a.sliceString(e-o,t-o,n)),o=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ui))return 0;let n=0,[i,r,o,a]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,r+=t){if(i==o||r==a)return n;let l=this.children[i],c=e.children[r];if(l!=c)return n+l.scanIdentical(c,t);n+=l.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let p of e)n+=p.lines;if(n<32){let p=[];for(let g of e)g.flatten(p);return new ts(p,t)}let i=Math.max(32,n>>5),r=i<<1,o=i>>1,a=[],l=0,c=-1,u=[];function d(p){let g;if(p.lines>r&&p instanceof ui)for(let S of p.children)d(S);else p.lines>o&&(l>o||!l)?(f(),a.push(p)):p instanceof ts&&l&&(g=u[u.length-1])instanceof ts&&p.lines+g.lines<=32?(l+=p.lines,c+=p.length+1,u[u.length-1]=new ts(g.text.concat(p.text),g.length+1+p.length)):(l+p.lines>i&&f(),l+=p.lines,c+=p.length+1,u.push(p))}function f(){l!=0&&(a.push(u.length==1?u[0]:ui.from(u,c)),c=-1,l=u.length=0)}for(let p of e)d(p);return f(),a.length==1?a[0]:new ui(a,t)}}_t.empty=new ts([""],0);function dR(s){let e=-1;for(let t of s)e+=t.length+1;return e}function qu(s,e,t=0,n=1e9){for(let i=0,r=0,o=!0;r<s.length&&i<=n;r++){let a=s[r],l=i+a.length;l>=t&&(l>n&&(a=a.slice(0,n-i)),i<t&&(a=a.slice(t-i)),o?(e[e.length-1]+=a,o=!1):e.push(a)),i=l+1}return e}function y2(s,e,t){return qu(s,[""],e,t)}class Ol{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ts?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],r=this.offsets[n],o=r>>1,a=i instanceof ts?i.text.length:i.children.length;if(o==(t>0?a:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((r&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof ts){let l=i.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[o+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof ts?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class _2{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Ol(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class b2{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(_t.prototype[Symbol.iterator]=function(){return this.iter()},Ol.prototype[Symbol.iterator]=_2.prototype[Symbol.iterator]=b2.prototype[Symbol.iterator]=function(){return this});class hR{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function ca(s,e,t){return e=Math.max(0,Math.min(s.length,e)),[e,Math.max(e,Math.min(s.length,t))]}function ys(s,e,t=!0,n=!0){return cR(s,e,t,n)}function fR(s){return s>=56320&&s<57344}function pR(s){return s>=55296&&s<56320}function en(s,e){let t=s.charCodeAt(e);if(!pR(t)||e+1==s.length)return t;let n=s.charCodeAt(e+1);return fR(n)?(t-55296<<10)+(n-56320)+65536:t}function jp(s){return s<=65535?String.fromCharCode(s):(s-=65536,String.fromCharCode((s>>10)+55296,(s&1023)+56320))}function di(s){return s<65536?1:2}const Wp=/\r\n?|\n/;var zs=function(s){return s[s.Simple=0]="Simple",s[s.TrackDel=1]="TrackDel",s[s.TrackBefore=2]="TrackBefore",s[s.TrackAfter=3]="TrackAfter",s}(zs||(zs={}));class hi{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let r=this.sections[t++],o=this.sections[t++];o<0?(e(n,i,r),i+=r):i+=o,n+=r}}iterChangedRanges(e,t=!1){Up(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new hi(e)}composeDesc(e){return this.empty?e:e.empty?this:w2(this,e)}mapDesc(e,t=!1){return e.empty?this:Hp(this,e,t)}mapPos(e,t=-1,n=zs.Simple){let i=0,r=0;for(let o=0;o<this.sections.length;){let a=this.sections[o++],l=this.sections[o++],c=i+a;if(l<0){if(c>e)return r+(e-i);r+=a}else{if(n!=zs.Simple&&c>=e&&(n==zs.TrackDel&&i<e&&c>e||n==zs.TrackBefore&&i<e||n==zs.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!a)return e==i||t<0?r:r+l;r+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return r}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let r=this.sections[n++],o=this.sections[n++],a=i+r;if(o>=0&&i<=t&&a>=e)return i<e&&a>t?"cover":!0;i=a}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new hi(e)}static create(e){return new hi(e)}}class cs extends hi{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Up(this,(t,n,i,r,o)=>e=e.replace(i,i+(n-t),o),!1),e}mapDesc(e,t=!1){return Hp(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,r=0;i<t.length;i+=2){let o=t[i],a=t[i+1];if(a>=0){t[i]=a,t[i+1]=o;let l=i>>1;for(;n.length<l;)n.push(_t.empty);n.push(o?e.slice(r,r+o):_t.empty)}r+=o}return new cs(t,n)}compose(e){return this.empty?e:e.empty?this:w2(this,e,!0)}map(e,t=!1){return e.empty?this:Hp(this,e,t,!0)}iterChanges(e,t=!1){Up(this,e,t)}get desc(){return hi.create(this.sections)}filter(e){let t=[],n=[],i=[],r=new Ml(this);e:for(let o=0,a=0;;){let l=o==e.length?1e9:e[o++];for(;a<l||a==l&&r.len==0;){if(r.done)break e;let u=Math.min(r.len,l-a);Ms(i,u,-1);let d=r.ins==-1?-1:r.off==0?r.ins:0;Ms(t,u,d),d>0&&Ir(n,t,r.text),r.forward(u),a+=u}let c=e[o++];for(;a<c;){if(r.done)break e;let u=Math.min(r.len,c-a);Ms(t,u,-1),Ms(i,u,r.ins==-1?-1:r.off==0?r.ins:0),r.forward(u),a+=u}}return{changes:new cs(t,n),filtered:hi.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],r=[],o=0,a=null;function l(u=!1){if(!u&&!i.length)return;o<t&&Ms(i,t-o,-1);let d=new cs(i,r);a=a?a.compose(d.map(a)):d,i=[],r=[],o=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof cs){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),a=a?a.compose(u.map(a)):u}else{let{from:d,to:f=d,insert:p}=u;if(d>f||d<0||f>t)throw new RangeError(`Invalid change range ${d} to ${f} (in doc of length ${t})`);let g=p?typeof p=="string"?_t.of(p.split(n||Wp)):p:_t.empty,S=g.length;if(d==f&&S==0)return;d<o&&l(),d>o&&Ms(i,d-o,-1),Ms(i,f-d,S),Ir(r,i,g),o=f}}return c(e),l(!a),a}static empty(e){return new cs(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let r=e[i];if(typeof r=="number")t.push(r,-1);else{if(!Array.isArray(r)||typeof r[0]!="number"||r.some((o,a)=>a&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(r.length==1)t.push(r[0],0);else{for(;n.length<i;)n.push(_t.empty);n[i]=_t.of(r.slice(1)),t.push(r[0],n[i].length)}}}return new cs(t,n)}static createSet(e,t){return new cs(e,t)}}function Ms(s,e,t,n=!1){if(e==0&&t<=0)return;let i=s.length-2;i>=0&&t<=0&&t==s[i+1]?s[i]+=e:i>=0&&e==0&&s[i]==0?s[i+1]+=t:n?(s[i]+=e,s[i+1]+=t):s.push(e,t)}function Ir(s,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<s.length)s[s.length-1]=s[s.length-1].append(t);else{for(;s.length<n;)s.push(_t.empty);s.push(t)}}function Up(s,e,t){let n=s.inserted;for(let i=0,r=0,o=0;o<s.sections.length;){let a=s.sections[o++],l=s.sections[o++];if(l<0)i+=a,r+=a;else{let c=i,u=r,d=_t.empty;for(;c+=a,u+=l,l&&n&&(d=d.append(n[o-2>>1])),!(t||o==s.sections.length||s.sections[o+1]<0);)a=s.sections[o++],l=s.sections[o++];e(i,c,r,u,d),i=c,r=u}}}function Hp(s,e,t,n=!1){let i=[],r=n?[]:null,o=new Ml(s),a=new Ml(e);for(let l=-1;;){if(o.done&&a.len||a.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&a.ins==-1){let c=Math.min(o.len,a.len);Ms(i,c,-1),o.forward(c),a.forward(c)}else if(a.ins>=0&&(o.ins<0||l==o.i||o.off==0&&(a.len<o.len||a.len==o.len&&!t))){let c=a.len;for(Ms(i,a.ins,-1);c;){let u=Math.min(o.len,c);o.ins>=0&&l<o.i&&o.len<=u&&(Ms(i,0,o.ins),r&&Ir(r,i,o.text),l=o.i),o.forward(u),c-=u}a.next()}else if(o.ins>=0){let c=0,u=o.len;for(;u;)if(a.ins==-1){let d=Math.min(u,a.len);c+=d,u-=d,a.forward(d)}else if(a.ins==0&&a.len<u)u-=a.len,a.next();else break;Ms(i,c,l<o.i?o.ins:0),r&&l<o.i&&Ir(r,i,o.text),l=o.i,o.forward(o.len-u)}else{if(o.done&&a.done)return r?cs.createSet(i,r):hi.create(i);throw new Error("Mismatched change set lengths")}}}function w2(s,e,t=!1){let n=[],i=t?[]:null,r=new Ml(s),o=new Ml(e);for(let a=!1;;){if(r.done&&o.done)return i?cs.createSet(n,i):hi.create(n);if(r.ins==0)Ms(n,r.len,0,a),r.next();else if(o.len==0&&!o.done)Ms(n,0,o.ins,a),i&&Ir(i,n,o.text),o.next();else{if(r.done||o.done)throw new Error("Mismatched change set lengths");{let l=Math.min(r.len2,o.len),c=n.length;if(r.ins==-1){let u=o.ins==-1?-1:o.off?0:o.ins;Ms(n,l,u,a),i&&u&&Ir(i,n,o.text)}else o.ins==-1?(Ms(n,r.off?0:r.len,l,a),i&&Ir(i,n,r.textBit(l))):(Ms(n,r.off?0:r.len,o.off?0:o.ins,a),i&&!o.off&&Ir(i,n,o.text));a=(r.ins>l||o.ins>=0&&o.len>l)&&(a||n.length>c),r.forward2(l),o.forward(l)}}}}class Ml{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?_t.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?_t.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ko{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new ko(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return de.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return de.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return de.range(e.anchor,e.head)}static create(e,t,n){return new ko(e,t,n)}}class de{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:de.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new de([this.main],0)}addRange(e,t=!0){return de.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,de.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new de(e.ranges.map(t=>ko.fromJSON(t)),e.main)}static single(e,t=e){return new de([de.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let r=e[i];if(r.empty?r.from<=n:r.from<n)return de.normalized(e.slice(),t);n=r.to}return new de(e,t)}static cursor(e,t=0,n,i){return ko.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,t,n,i){let r=(n??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?ko.create(t,e,48|r):ko.create(e,t,(t>e?8:0)|r)}static normalized(e,t=0){let n=e[t];e.sort((i,r)=>i.from-r.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let r=e[i],o=e[i-1];if(r.empty?r.from<=o.to:r.from<o.to){let a=o.from,l=Math.max(r.to,o.to);i<=t&&t--,e.splice(--i,2,r.anchor>r.head?de.range(l,a):de.range(a,l))}}return new de(e,t)}}function x2(s,e){for(let t of s.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Qp=0;class De{constructor(e,t,n,i,r){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=Qp++,this.default=e([]),this.extensions=typeof r=="function"?r(this):r}get reader(){return this}static define(e={}){return new De(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:Yp),!!e.static,e.enables)}of(e){return new Gu([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Gu(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Gu(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function Yp(s,e){return s==e||s.length==e.length&&s.every((t,n)=>t===e[n])}class Gu{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=Qp++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,r=this.id,o=e[r]>>1,a=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((t=e[d.id])!==null&&t!==void 0?t:1)&1||u.push(e[d.id]);return{create(d){return d.values[o]=n(d),1},update(d,f){if(l&&f.docChanged||c&&(f.docChanged||f.selection)||qp(d,u)){let p=n(d);if(a?!k2(p,d.values[o],i):!i(p,d.values[o]))return d.values[o]=p,1}return 0},reconfigure:(d,f)=>{let p,g=f.config.address[r];if(g!=null){let S=Zu(f,g);if(this.dependencies.every(k=>k instanceof De?f.facet(k)===d.facet(k):k instanceof ms?f.field(k,!1)==d.field(k,!1):!0)||(a?k2(p=n(d),S,i):i(p=n(d),S)))return d.values[o]=S,0}else p=n(d);return d.values[o]=p,1}}}}function k2(s,e,t){if(s.length!=e.length)return!1;for(let n=0;n<s.length;n++)if(!t(s[n],e[n]))return!1;return!0}function qp(s,e){let t=!1;for(let n of e)$l(s,n)&1&&(t=!0);return t}function mR(s,e,t){let n=t.map(l=>s[l.id]),i=t.map(l=>l.type),r=n.filter(l=>!(l&1)),o=s[e.id]>>1;function a(l){let c=[];for(let u=0;u<n.length;u++){let d=Zu(l,n[u]);if(i[u]==2)for(let f of d)c.push(f);else c.push(d)}return e.combine(c)}return{create(l){for(let c of n)$l(l,c);return l.values[o]=a(l),1},update(l,c){if(!qp(l,r))return 0;let u=a(l);return e.compare(u,l.values[o])?0:(l.values[o]=u,1)},reconfigure(l,c){let u=qp(l,n),d=c.config.facets[e.id],f=c.facet(e);if(d&&!u&&Yp(t,d))return l.values[o]=f,0;let p=a(l);return e.compare(p,f)?(l.values[o]=f,0):(l.values[o]=p,1)}}}const Ku=De.define({static:!0});class ms{constructor(e,t,n,i,r){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=r,this.provides=void 0}static define(e){let t=new ms(Qp++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ku).find(n=>n.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let r=n.values[t],o=this.updateF(r,i);return this.compareF(r,o)?0:(n.values[t]=o,1)},reconfigure:(n,i)=>{let r=n.facet(Ku),o=i.facet(Ku),a;return(a=r.find(l=>l.field==this))&&a!=o.find(l=>l.field==this)?(n.values[t]=a.create(n),1):i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,Ku.of({field:this,create:e})]}get extension(){return this}}const So={lowest:4,low:3,default:2,high:1,highest:0};function Al(s){return e=>new S2(e,s)}const Co={highest:Al(So.highest),high:Al(So.high),default:Al(So.default),low:Al(So.low),lowest:Al(So.lowest)};class S2{constructor(e,t){this.inner=e,this.prec=t}}class Xu{of(e){return new Gp(this,e)}reconfigure(e){return Xu.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Gp{constructor(e,t){this.compartment=e,this.inner=t}}class Ju{constructor(e,t,n,i,r,o){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=r,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],r=Object.create(null),o=new Map;for(let f of gR(e,t,o))f instanceof ms?i.push(f):(r[f.facet.id]||(r[f.facet.id]=[])).push(f);let a=Object.create(null),l=[],c=[];for(let f of i)a[f.id]=c.length<<1,c.push(p=>f.slot(p));let u=n==null?void 0:n.config.facets;for(let f in r){let p=r[f],g=p[0].facet,S=u&&u[f]||[];if(p.every(k=>k.type==0))if(a[g.id]=l.length<<1|1,Yp(S,p))l.push(n.facet(g));else{let k=g.combine(p.map(O=>O.value));l.push(n&&g.compare(k,n.facet(g))?n.facet(g):k)}else{for(let k of p)k.type==0?(a[k.id]=l.length<<1|1,l.push(k.value)):(a[k.id]=c.length<<1,c.push(O=>k.dynamicSlot(O)));a[g.id]=c.length<<1,c.push(k=>mR(k,g,p))}}let d=c.map(f=>f(a));return new Ju(e,o,d,a,l,r)}}function gR(s,e,t){let n=[[],[],[],[],[]],i=new Map;function r(o,a){let l=i.get(o);if(l!=null){if(l<=a)return;let c=n[l].indexOf(o);c>-1&&n[l].splice(c,1),o instanceof Gp&&t.delete(o.compartment)}if(i.set(o,a),Array.isArray(o))for(let c of o)r(c,a);else if(o instanceof Gp){if(t.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(o.compartment)||o.inner;t.set(o.compartment,c),r(c,a)}else if(o instanceof S2)r(o.inner,o.prec);else if(o instanceof ms)n[a].push(o),o.provides&&r(o.provides,a);else if(o instanceof Gu)n[a].push(o),o.facet.extensions&&r(o.facet.extensions,So.default);else{let c=o.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(c,a)}}return r(s,So.default),n.reduce((o,a)=>o.concat(a))}function $l(s,e){if(e&1)return 2;let t=e>>1,n=s.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;s.status[t]=4;let i=s.computeSlot(s,s.config.dynamicSlots[t]);return s.status[t]=2|i}function Zu(s,e){return e&1?s.config.staticValues[e>>1]:s.values[e>>1]}const C2=De.define(),Kp=De.define({combine:s=>s.some(e=>e),static:!0}),O2=De.define({combine:s=>s.length?s[0]:void 0,static:!0}),M2=De.define(),A2=De.define(),$2=De.define(),T2=De.define({combine:s=>s.length?s[0]:!1});class er{constructor(e,t){this.type=e,this.value=t}static define(){return new vR}}class vR{of(e){return new er(this,e)}}class yR{constructor(e){this.map=e}of(e){return new rt(this,e)}}class rt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new rt(this.type,t)}is(e){return this.type==e}static define(e={}){return new yR(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let r=i.map(t);r&&n.push(r)}return n}}rt.reconfigure=rt.define(),rt.appendConfig=rt.define();class us{constructor(e,t,n,i,r,o){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=r,this.scrollIntoView=o,this._doc=null,this._state=null,n&&x2(n,t.newLength),r.some(a=>a.type==us.time)||(this.annotations=r.concat(us.time.of(Date.now())))}static create(e,t,n,i,r,o){return new us(e,t,n,i,r,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(us.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}us.time=er.define(),us.userEvent=er.define(),us.addToHistory=er.define(),us.remote=er.define();function _R(s,e){let t=[];for(let n=0,i=0;;){let r,o;if(n<s.length&&(i==e.length||e[i]>=s[n]))r=s[n++],o=s[n++];else if(i<e.length)r=e[i++],o=e[i++];else return t;!t.length||t[t.length-1]<r?t.push(r,o):t[t.length-1]<o&&(t[t.length-1]=o)}}function P2(s,e,t){var n;let i,r,o;return t?(i=e.changes,r=cs.empty(e.changes.length),o=s.changes.compose(e.changes)):(i=e.changes.map(s.changes),r=s.changes.mapDesc(e.changes,!0),o=s.changes.compose(i)),{changes:o,selection:e.selection?e.selection.map(r):(n=s.selection)===null||n===void 0?void 0:n.map(i),effects:rt.mapEffects(s.effects,i).concat(rt.mapEffects(e.effects,r)),annotations:s.annotations.length?s.annotations.concat(e.annotations):e.annotations,scrollIntoView:s.scrollIntoView||e.scrollIntoView}}function Xp(s,e,t){let n=e.selection,i=ua(e.annotations);return e.userEvent&&(i=i.concat(us.userEvent.of(e.userEvent))),{changes:e.changes instanceof cs?e.changes:cs.of(e.changes||[],t,s.facet(O2)),selection:n&&(n instanceof de?n:de.single(n.anchor,n.head)),effects:ua(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function L2(s,e,t){let n=Xp(s,e.length?e[0]:{},s.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let r=1;r<e.length;r++){e[r].filter===!1&&(t=!1);let o=!!e[r].sequential;n=P2(n,Xp(s,e[r],o?n.changes.newLength:s.doc.length),o)}let i=us.create(s,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return wR(t?bR(i):i)}function bR(s){let e=s.startState,t=!0;for(let i of e.facet(M2)){let r=i(s);if(r===!1){t=!1;break}Array.isArray(r)&&(t=t===!0?r:_R(t,r))}if(t!==!0){let i,r;if(t===!1)r=s.changes.invertedDesc,i=cs.empty(e.doc.length);else{let o=s.changes.filter(t);i=o.changes,r=o.filtered.mapDesc(o.changes).invertedDesc}s=us.create(e,i,s.selection&&s.selection.map(r),rt.mapEffects(s.effects,r),s.annotations,s.scrollIntoView)}let n=e.facet(A2);for(let i=n.length-1;i>=0;i--){let r=n[i](s);r instanceof us?s=r:Array.isArray(r)&&r.length==1&&r[0]instanceof us?s=r[0]:s=L2(e,ua(r),!1)}return s}function wR(s){let e=s.startState,t=e.facet($2),n=s;for(let i=t.length-1;i>=0;i--){let r=t[i](s);r&&Object.keys(r).length&&(n=P2(n,Xp(e,r,s.changes.newLength),!0))}return n==s?s:us.create(e,s.changes,s.selection,n.effects,n.annotations,n.scrollIntoView)}const xR=[];function ua(s){return s==null?xR:Array.isArray(s)?s:[s]}var Yt=function(s){return s[s.Word=0]="Word",s[s.Space=1]="Space",s[s.Other=2]="Other",s}(Yt||(Yt={}));const kR=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Jp;try{Jp=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function SR(s){if(Jp)return Jp.test(s);for(let e=0;e<s.length;e++){let t=s[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||kR.test(t)))return!0}return!1}function CR(s){return e=>{if(!/\S/.test(e))return Yt.Space;if(SR(e))return Yt.Word;for(let t=0;t<s.length;t++)if(e.indexOf(s[t])>-1)return Yt.Word;return Yt.Other}}class ut{constructor(e,t,n,i,r,o){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=r,o&&(o._state=this);for(let a=0;a<this.config.dynamicSlots.length;a++)$l(this,a<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return $l(this,n),Zu(this,n)}update(...e){return L2(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let a of e.effects)a.is(Xu.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,c)=>i.set(c,l)),t=null),i.set(a.value.compartment,a.value.extension)):a.is(rt.reconfigure)?(t=null,n=a.value):a.is(rt.appendConfig)&&(t=null,n=ua(n).concat(a.value));let r;t?r=e.startState.values.slice():(t=Ju.resolve(n,i,this),r=new ut(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let o=e.startState.facet(Kp)?e.newSelection:e.newSelection.asSingle();new ut(t,e.newDoc,o,r,(a,l)=>l.update(a,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:de.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),r=[n.range],o=ua(n.effects);for(let a=1;a<t.ranges.length;a++){let l=e(t.ranges[a]),c=this.changes(l.changes),u=c.map(i);for(let f=0;f<a;f++)r[f]=r[f].map(u);let d=i.mapDesc(c,!0);r.push(l.range.map(d)),i=i.compose(u),o=rt.mapEffects(o,u).concat(rt.mapEffects(ua(l.effects),d))}return{changes:i,selection:de.create(r,t.mainIndex),effects:o}}changes(e=[]){return e instanceof cs?e:cs.of(e,this.doc.length,this.facet(ut.lineSeparator))}toText(e){return _t.of(e.split(this.facet(ut.lineSeparator)||Wp))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:($l(this,t),Zu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof ms&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let r in n)if(Object.prototype.hasOwnProperty.call(e,r)){let o=n[r],a=e[r];i.push(o.init(l=>o.spec.fromJSON(a,l)))}}return ut.create({doc:e.doc,selection:de.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=Ju.resolve(e.extensions||[],new Map),n=e.doc instanceof _t?e.doc:_t.of((e.doc||"").split(t.staticFacet(ut.lineSeparator)||Wp)),i=e.selection?e.selection instanceof de?e.selection:de.single(e.selection.anchor,e.selection.head):de.single(0);return x2(i,n.length),t.staticFacet(Kp)||(i=i.asSingle()),new ut(t,n,i,t.dynamicSlots.map(()=>null),(r,o)=>o.create(r),null)}get tabSize(){return this.facet(ut.tabSize)}get lineBreak(){return this.facet(ut.lineSeparator)||`
`}get readOnly(){return this.facet(T2)}phrase(e,...t){for(let n of this.facet(ut.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let r=+(i||1);return!r||r>t.length?n:t[r-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let r of this.facet(C2))for(let o of r(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&i.push(o[e]);return i}charCategorizer(e){return CR(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),r=this.charCategorizer(e),o=e-n,a=e-n;for(;o>0;){let l=ys(t,o,!1);if(r(t.slice(l,o))!=Yt.Word)break;o=l}for(;a<i;){let l=ys(t,a);if(r(t.slice(a,l))!=Yt.Word)break;a=l}return o==a?null:de.range(o+n,a+n)}}ut.allowMultipleSelections=Kp,ut.tabSize=De.define({combine:s=>s.length?s[0]:4}),ut.lineSeparator=O2,ut.readOnly=T2,ut.phrases=De.define({compare(s,e){let t=Object.keys(s),n=Object.keys(e);return t.length==n.length&&t.every(i=>s[i]==e[i])}}),ut.languageData=C2,ut.changeFilter=M2,ut.transactionFilter=A2,ut.transactionExtender=$2,Xu.reconfigure=rt.define();function fi(s,e,t={}){let n={};for(let i of s)for(let r of Object.keys(i)){let o=i[r],a=n[r];if(a===void 0)n[r]=o;else if(!(a===o||o===void 0))if(Object.hasOwnProperty.call(t,r))n[r]=t[r](a,o);else throw new Error("Config merge conflict for field "+r)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Oo{eq(e){return this==e}range(e,t=e){return Zp.create(e,t,this)}}Oo.prototype.startSide=Oo.prototype.endSide=0,Oo.prototype.point=!1,Oo.prototype.mapMode=zs.TrackDel;let Zp=class e4{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new e4(e,t,n)}};function em(s,e){return s.from-e.from||s.value.startSide-e.value.startSide}class tm{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let r=n?this.to:this.from;for(let o=i,a=r.length;;){if(o==a)return o;let l=o+a>>1,c=r[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==o)return c>=0?o:a;c>=0?a=l:o=l+1}}between(e,t,n,i){for(let r=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,r);r<o;r++)if(i(this.from[r]+e,this.to[r]+e,this.value[r])===!1)return!1}map(e,t){let n=[],i=[],r=[],o=-1,a=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,f,p;if(u==d){let g=t.mapPos(u,c.startSide,c.mapMode);if(g==null||(f=p=g,c.startSide!=c.endSide&&(p=t.mapPos(u,c.endSide),p<f)))continue}else if(f=t.mapPos(u,c.startSide),p=t.mapPos(d,c.endSide),f>p||f==p&&c.startSide>0&&c.endSide<=0)continue;(p-f||c.endSide-c.startSide)<0||(o<0&&(o=f),c.point&&(a=Math.max(a,p-f)),n.push(c),i.push(f-o),r.push(p-o))}return{mapped:n.length?new tm(i,r,n,a):null,pos:o}}}class bt{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new bt(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:r=this.length}=e,o=e.filter;if(t.length==0&&!o)return this;if(n&&(t=t.slice().sort(em)),this.isEmpty)return t.length?bt.of(t):this;let a=new D2(this,null,-1).goto(0),l=0,c=[],u=new tr;for(;a.value||l<t.length;)if(l<t.length&&(a.from-t[l].from||a.startSide-t[l].value.startSide)>=0){let d=t[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else a.rangeIndex==1&&a.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(a.chunkIndex)<t[l].from)&&(!o||i>this.chunkEnd(a.chunkIndex)||r<this.chunkPos[a.chunkIndex])&&u.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!o||i>a.to||r<a.from||o(a.from,a.to,a.value))&&(u.addInner(a.from,a.to,a.value)||c.push(Zp.create(a.from,a.to,a.value))),a.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?bt.empty:this.nextLayer.update({add:c,filter:o,filterFrom:i,filterTo:r}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let o=0;o<this.chunk.length;o++){let a=this.chunkPos[o],l=this.chunk[o],c=e.touchesRange(a,a+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),n.push(e.mapPos(a));else if(c===!0){let{mapped:u,pos:d}=l.map(a,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),n.push(d))}}let r=this.nextLayer.map(e);return t.length==0?r:new bt(n,t,r||bt.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],o=this.chunk[i];if(t>=r&&e<=r+o.length&&o.between(r,e-r,t-r,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return Tl.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Tl.from(e).goto(t)}static compare(e,t,n,i,r=-1){let o=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),a=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=r),l=E2(o,a,n),c=new Pl(o,l,r),u=new Pl(a,l,r);n.iterGaps((d,f,p)=>I2(c,d,u,f,p,i)),n.empty&&n.length==0&&I2(c,0,u,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=999999999);let r=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),o=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(r.length!=o.length)return!1;if(!r.length)return!0;let a=E2(r,o),l=new Pl(r,a,0).goto(n),c=new Pl(o,a,0).goto(n);for(;;){if(l.to!=c.to||!nm(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,n,i,r=-1){let o=new Pl(e,null,r).goto(t),a=t,l=o.openStart;for(;;){let c=Math.min(o.to,n);if(o.point){let u=o.activeForPoint(o.to),d=o.pointFrom<t?u.length+1:o.point.startSide<0?u.length:Math.min(u.length,l);i.point(a,c,o.point,u,d,o.pointRank),l=Math.min(o.openEnd(c),u.length)}else c>a&&(i.span(a,c,o.active,l),l=o.openEnd(c));if(o.to>n)return l+(o.point&&o.to>n?1:0);a=o.to,o.next()}}static of(e,t=!1){let n=new tr;for(let i of e instanceof Zp?[e]:t?OR(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return bt.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=bt.empty;i=i.nextLayer)t=new bt(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}bt.empty=new bt([],[],null,-1);function OR(s){if(s.length>1)for(let e=s[0],t=1;t<s.length;t++){let n=s[t];if(em(e,n)>0)return s.slice().sort(em);e=n}return s}bt.empty.nextLayer=bt.empty;class tr{finishChunk(e){this.chunks.push(new tm(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new tr)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(bt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=bt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function E2(s,e,t){let n=new Map;for(let r of s)for(let o=0;o<r.chunk.length;o++)r.chunk[o].maxPoint<=0&&n.set(r.chunk[o],r.chunkPos[o]);let i=new Set;for(let r of e)for(let o=0;o<r.chunk.length;o++){let a=n.get(r.chunk[o]);a!=null&&(t?t.mapPos(a):a)==r.chunkPos[o]&&!(t!=null&&t.touchesRange(a,a+r.chunk[o].length))&&i.add(r.chunk[o])}return i}class D2{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Tl{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let r=0;r<e.length;r++)for(let o=e[r];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&i.push(new D2(o,t,n,r));return i.length==1?i[0]:new Tl(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)sm(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)sm(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),sm(this.heap,0)}}}function sm(s,e){for(let t=s[e];;){let n=(e<<1)+1;if(n>=s.length)break;let i=s[n];if(n+1<s.length&&i.compare(s[n+1])>=0&&(i=s[n+1],n++),t.compare(i)<0)break;s[n]=t,s[e]=i,e=n}}class Pl{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Tl.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ed(this.active,e),ed(this.activeTo,e),ed(this.activeRank,e),this.minActive=R2(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:r}=this.cursor;for(;t<this.activeRank.length&&(r-this.activeRank[t]||i-this.activeTo[t])>0;)t++;td(this.active,t,n),td(this.activeTo,t,i),td(this.activeRank,t,r),e&&td(e,t,this.cursor.from),this.minActive=R2(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ed(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let r=this.cursor.value;if(!r.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=r,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=r.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function I2(s,e,t,n,i,r){s.goto(e),t.goto(n);let o=n+i,a=n,l=n-e;for(;;){let c=s.to+l-t.to,u=c||s.endSide-t.endSide,d=u<0?s.to+l:t.to,f=Math.min(d,o);if(s.point||t.point?s.point&&t.point&&(s.point==t.point||s.point.eq(t.point))&&nm(s.activeForPoint(s.to),t.activeForPoint(t.to))||r.comparePoint(a,f,s.point,t.point):f>a&&!nm(s.active,t.active)&&r.compareRange(a,f,s.active,t.active),d>o)break;(c||s.openEnd!=t.openEnd)&&r.boundChange&&r.boundChange(d),a=d,u<=0&&s.next(),u>=0&&t.next()}}function nm(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(s[t]!=e[t]&&!s[t].eq(e[t]))return!1;return!0}function ed(s,e){for(let t=e,n=s.length-1;t<n;t++)s[t]=s[t+1];s.pop()}function td(s,e,t){for(let n=s.length-1;n>=e;n--)s[n+1]=s[n];s[e]=t}function R2(s,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||s[i].endSide-s[t].endSide)<0&&(t=i,n=e[i]);return t}function da(s,e,t=s.length){let n=0;for(let i=0;i<t&&i<s.length;)s.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=ys(s,i));return n}function im(s,e,t,n){for(let i=0,r=0;;){if(r>=e)return i;if(i==s.length)break;r+=s.charCodeAt(i)==9?t-r%t:1,i=ys(s,i)}return n===!0?-1:s.length}const rm="",F2=typeof Symbol>"u"?"__"+rm:Symbol.for(rm),om=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),B2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Rr{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function r(o,a,l,c){let u=[],d=/^@(\w+)\b/.exec(o[0]),f=d&&d[1]=="keyframes";if(d&&a==null)return l.push(o[0]+";");for(let p in a){let g=a[p];if(/&/.test(p))r(p.split(/,\s*/).map(S=>o.map(k=>S.replace(/&/,k))).reduce((S,k)=>S.concat(k)),g,l);else if(g&&typeof g=="object"){if(!d)throw new RangeError("The value of a property ("+p+") should be a primitive value.");r(i(p),g,u,f)}else g!=null&&u.push(p.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+g+";")}(u.length||f)&&l.push((n&&!d&&!c?o.map(n):o).join(", ")+" {"+u.join(" ")+"}")}for(let o in e)r(i(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=B2[F2]||1;return B2[F2]=e+1,rm+e.toString(36)}static mount(e,t,n){let i=e[om],r=n&&n.nonce;i?r&&i.setNonce(r):i=new MR(e,r),i.mount(Array.isArray(t)?t:[t],e)}}let N2=new Map;class MR{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let r=N2.get(n);if(r)return e[om]=r;this.sheet=new i.CSSStyleSheet,N2.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[om]=this}mount(e,t){let n=this.sheet,i=0,r=0;for(let o=0;o<e.length;o++){let a=e[o],l=this.modules.indexOf(a);if(l<r&&l>-1&&(this.modules.splice(l,1),r--,l=-1),l==-1){if(this.modules.splice(r++,0,a),n)for(let c=0;c<a.rules.length;c++)n.insertRule(a.rules[c],i++)}else{for(;r<l;)i+=this.modules[r++].rules.length;i+=a.rules.length,r++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let o="";for(let l=0;l<this.modules.length;l++)o+=this.modules[l].getRules()+`
`;this.styleTag.textContent=o;let a=t.head||t;this.styleTag.parentNode!=a&&a.insertBefore(this.styleTag,a.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var Fr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ll={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},AR=typeof navigator<"u"&&/Mac/.test(navigator.platform),$R=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),_s=0;_s<10;_s++)Fr[48+_s]=Fr[96+_s]=String(_s);for(var _s=1;_s<=24;_s++)Fr[_s+111]="F"+_s;for(var _s=65;_s<=90;_s++)Fr[_s]=String.fromCharCode(_s+32),Ll[_s]=String.fromCharCode(_s);for(var am in Fr)Ll.hasOwnProperty(am)||(Ll[am]=Fr[am]);function TR(s){var e=AR&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||$R&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",t=!e&&s.key||(s.shiftKey?Ll:Fr)[s.keyCode]||s.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function Pt(){var s=arguments[0];typeof s=="string"&&(s=document.createElement(s));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?s.setAttribute(n,i):i!=null&&(s[n]=i)}e++}for(;e<arguments.length;e++)V2(s,arguments[e]);return s}function V2(s,e){if(typeof e=="string")s.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)s.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)V2(s,e[t]);else throw new RangeError("Unsupported child node: "+e)}function El(s){let e;return s.nodeType==11?e=s.getSelection?s:s.ownerDocument:e=s,e.getSelection()}function lm(s,e){return e?s==e||s.contains(e.nodeType!=1?e.parentNode:e):!1}function sd(s,e){if(!e.anchorNode)return!1;try{return lm(s,e.anchorNode)}catch{return!1}}function ha(s){return s.nodeType==3?Ao(s,0,s.nodeValue.length).getClientRects():s.nodeType==1?s.getClientRects():[]}function Dl(s,e,t,n){return t?z2(s,e,t,n,-1)||z2(s,e,t,n,1):!1}function Mo(s){for(var e=0;;e++)if(s=s.previousSibling,!s)return e}function nd(s){return s.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(s.nodeName)}function z2(s,e,t,n,i){for(;;){if(s==t&&e==n)return!0;if(e==(i<0?0:pi(s))){if(s.nodeName=="DIV")return!1;let r=s.parentNode;if(!r||r.nodeType!=1)return!1;e=Mo(s)+(i<0?0:1),s=r}else if(s.nodeType==1){if(s=s.childNodes[e+(i<0?-1:0)],s.nodeType==1&&s.contentEditable=="false")return!1;e=i<0?pi(s):0}else return!1}}function pi(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function Il(s,e){let t=e?s.left:s.right;return{left:t,right:t,top:s.top,bottom:s.bottom}}function PR(s){let e=s.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:s.innerWidth,top:0,bottom:s.innerHeight}}function j2(s,e){let t=e.width/s.offsetWidth,n=e.height/s.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-s.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-s.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function LR(s,e,t,n,i,r,o,a){let l=s.ownerDocument,c=l.defaultView||window;for(let u=s,d=!1;u&&!d;)if(u.nodeType==1){let f,p=u==l.body,g=1,S=1;if(p)f=PR(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let $=u.getBoundingClientRect();({scaleX:g,scaleY:S}=j2(u,$)),f={left:$.left,right:$.left+u.clientWidth*g,top:$.top,bottom:$.top+u.clientHeight*S}}let k=0,O=0;if(i=="nearest")e.top<f.top?(O=e.top-(f.top+o),t>0&&e.bottom>f.bottom+O&&(O=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(O=e.bottom-f.bottom+o,t<0&&e.top-O<f.top&&(O=e.top-(f.top+o)));else{let $=e.bottom-e.top,M=f.bottom-f.top;O=(i=="center"&&$<=M?e.top+$/2-M/2:i=="start"||i=="center"&&t<0?e.top-o:e.bottom-M+o)-f.top}if(n=="nearest"?e.left<f.left?(k=e.left-(f.left+r),t>0&&e.right>f.right+k&&(k=e.right-f.right+r)):e.right>f.right&&(k=e.right-f.right+r,t<0&&e.left<f.left+k&&(k=e.left-(f.left+r))):k=(n=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:n=="start"==a?e.left-r:e.right-(f.right-f.left)+r)-f.left,k||O)if(p)c.scrollBy(k,O);else{let $=0,M=0;if(O){let b=u.scrollTop;u.scrollTop+=O/S,M=(u.scrollTop-b)*S}if(k){let b=u.scrollLeft;u.scrollLeft+=k/g,$=(u.scrollLeft-b)*g}e={left:e.left-$,top:e.top-M,right:e.right-$,bottom:e.bottom-M},$&&Math.abs($-k)<1&&(n="nearest"),M&&Math.abs(M-O)<1&&(i="nearest")}if(p)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function ER(s){let e=s.ownerDocument,t,n;for(let i=s.parentNode;i&&!(i==e.body||t&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:n}}class DR{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?pi(t):0),n,Math.min(e.focusOffset,n?pi(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let fa=null;function W2(s){if(s.setActive)return s.setActive();if(fa)return s.focus(fa);let e=[];for(let t=s;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(s.focus(fa==null?{get preventScroll(){return fa={preventScroll:!0},!0}}:void 0),!fa){fa=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],r=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=r&&(n.scrollLeft=r)}}}let U2;function Ao(s,e,t=e){let n=U2||(U2=document.createRange());return n.setEnd(s,t),n.setStart(s,e),n}function pa(s,e,t,n){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let r=new KeyboardEvent("keydown",i);r.synthetic=!0,s.dispatchEvent(r);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,s.dispatchEvent(o),r.defaultPrevented||o.defaultPrevented}function IR(s){for(;s;){if(s&&(s.nodeType==9||s.nodeType==11&&s.host))return s;s=s.assignedSlot||s.parentNode}return null}function H2(s){for(;s.attributes.length;)s.removeAttributeNode(s.attributes[0])}function RR(s,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,pi(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=pi(t))}else{if(t==s)return!0;n=Mo(t),t=t.parentNode}}function Q2(s){return s.scrollTop>Math.max(1,s.scrollHeight-s.clientHeight-4)}function Y2(s,e){for(let t=s,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=pi(t)}else if(t.parentNode&&!nd(t))n=Mo(t),t=t.parentNode;else return null}}function q2(s,e){for(let t=s,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!nd(t))n=Mo(t)+1,t=t.parentNode;else return null}}class As{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new As(e.parentNode,Mo(e),t)}static after(e,t){return new As(e.parentNode,Mo(e)+1,t)}}const cm=[];class Lt{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,r;for(let o of this.children){if(o.flags&7){if(!o.dom&&(r=i?i.nextSibling:n.firstChild)){let a=Lt.get(r);(!a||!a.parent&&a.canReuseDOM(o))&&o.reuseDOM(r)}o.sync(e,t),o.flags&=-8}if(r=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&r!=o.dom&&(t.written=!0),o.dom.parentNode==n)for(;r&&r!=o.dom;)r=G2(r);else n.insertBefore(o.dom,r);i=o.dom}for(r=i?i.nextSibling:n.firstChild,r&&t&&t.node==n&&(t.written=!0);r;)r=G2(r)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=pi(e)==0?0:t==0?-1:1;for(;;){let r=e.parentNode;if(r==this.dom)break;i==0&&r.firstChild!=r.lastChild&&(e==r.firstChild?i=-1:i=1),e=r}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Lt.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,r=0;;i++){let o=this.children[i];if(o.dom==n)return r;r+=o.length+o.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,r=-1,o=-1,a=-1;for(let l=0,c=n,u=n;l<this.children.length;l++){let d=this.children[l],f=c+d.length;if(c<e&&f>t)return d.domBoundsAround(e,t,c);if(f>=e&&i==-1&&(i=l,r=c),c>t&&d.dom.parentNode==this.dom){o=l,a=u;break}u=f,c=f+d.breakAfter}return{from:r,to:a<0?n+this.length:a,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=cm){this.markDirty();for(let i=e;i<t;i++){let r=this.children[i];r.parent==this&&n.indexOf(r)<0&&r.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new K2(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,r,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Lt.prototype.breakAfter=0;function G2(s){let e=s.nextSibling;return s.parentNode.removeChild(s),e}class K2{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function X2(s,e,t,n,i,r,o,a,l){let{children:c}=s,u=c.length?c[e]:null,d=r.length?r[r.length-1]:null,f=d?d.breakAfter:o;if(!(e==n&&u&&!o&&!f&&r.length<2&&u.merge(t,i,r.length?d:null,t==0,a,l))){if(n<c.length){let p=c[n];p&&(i<p.length||p.breakAfter&&(d!=null&&d.breakAfter))?(e==n&&(p=p.split(i),i=0),!f&&d&&p.merge(0,i,d,!0,0,l)?r[r.length-1]=p:((i||p.children.length&&!p.children[0].length)&&p.merge(0,i,null,!1,0,l),r.push(p))):p!=null&&p.breakAfter&&(d?d.breakAfter=1:o=1),n++}for(u&&(u.breakAfter=o,t>0&&(!o&&r.length&&u.merge(t,u.length,r[0],!1,a,0)?u.breakAfter=r.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,a,0),e++));e<n&&r.length;)if(c[n-1].become(r[r.length-1]))n--,r.pop(),l=r.length?0:a;else if(c[e].become(r[0]))e++,r.shift(),a=r.length?0:l;else break;!r.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,a,l)&&e--,(e<n||r.length)&&s.replaceChildren(e,n,r)}}function J2(s,e,t,n,i,r){let o=s.childCursor(),{i:a,off:l}=o.findPos(t,1),{i:c,off:u}=o.findPos(e,-1),d=e-t;for(let f of n)d+=f.length;s.length+=d,X2(s,c,u,a,l,n,0,i,r)}let tn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},um=typeof document<"u"?document:{documentElement:{style:{}}};const dm=/Edge\/(\d+)/.exec(tn.userAgent),Z2=/MSIE \d/.test(tn.userAgent),hm=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(tn.userAgent),id=!!(Z2||hm||dm),eb=!id&&/gecko\/(\d+)/i.test(tn.userAgent),fm=!id&&/Chrome\/(\d+)/.exec(tn.userAgent),FR="webkitFontSmoothing"in um.documentElement.style,tb=!id&&/Apple Computer/.test(tn.vendor),sb=tb&&(/Mobile\/\w+/.test(tn.userAgent)||tn.maxTouchPoints>2);var Ie={mac:sb||/Mac/.test(tn.platform),windows:/Win/.test(tn.platform),linux:/Linux|X11/.test(tn.platform),ie:id,ie_version:Z2?um.documentMode||6:hm?+hm[1]:dm?+dm[1]:0,gecko:eb,gecko_version:eb?+(/Firefox\/(\d+)/.exec(tn.userAgent)||[0,0])[1]:0,chrome:!!fm,chrome_version:fm?+fm[1]:0,ios:sb,android:/Android\b/.test(tn.userAgent),safari:tb,webkit_version:FR?+(/\bAppleWebKit\/(\d+)/.exec(tn.userAgent)||[0,0])[1]:0,tabSize:um.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const BR=256;class Hn extends Lt{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof Hn)||this.length-(t-e)+n.length>BR||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Hn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new As(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return NR(this.dom,e,t)}}class sr extends Lt{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(H2(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,r,o){return n&&(!(n instanceof sr&&n.mark.eq(this.mark))||e&&r<=0||t<this.length&&o<=0)?!1:(J2(this,e,t,n?n.children.slice():[],r-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,r=0;for(let a of this.children){let l=n+a.length;l>e&&t.push(n<e?a.split(e-n):a),i<0&&n>=e&&(i=r),n=l,r++}let o=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new sr(this.mark,t,o)}domAtPos(e){return nb(this,e)}coordsAt(e,t){return rb(this,e,t)}}function NR(s,e,t){let n=s.nodeValue.length;e>n&&(e=n);let i=e,r=e,o=0;e==0&&t<0||e==n&&t>=0?Ie.chrome||Ie.gecko||(e?(i--,o=1):r<n&&(r++,o=-1)):t<0?i--:r<n&&r++;let a=Ao(s,i,r).getClientRects();if(!a.length)return null;let l=a[(o?o<0:t>=0)?0:a.length-1];return Ie.safari&&!o&&l.width==0&&(l=Array.prototype.find.call(a,c=>c.width)||l),o?Il(l,o<0):l||null}class Br extends Lt{static create(e,t,n){return new Br(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=Br.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,r,o){return n&&(!(n instanceof Br)||!this.widget.compare(n.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof Br&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return _t.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):_t.empty}domAtPos(e){return(this.length?e==0:this.side>0)?As.before(this.dom):As.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),r=null;if(!i.length)return null;let o=this.side?this.side<0:e>0;for(let a=o?i.length-1:0;r=i[a],!(e>0?a==0:a==i.length-1||r.top<r.bottom);a+=o?-1:1);return Il(r,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ma extends Lt{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ma&&e.side==this.side}split(){return new ma(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?As.before(this.dom):As.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return _t.empty}get isHidden(){return!0}}Hn.prototype.children=Br.prototype.children=ma.prototype.children=cm;function nb(s,e){let t=s.dom,{children:n}=s,i=0;for(let r=0;i<n.length;i++){let o=n[i],a=r+o.length;if(!(a==r&&o.getSide()<=0)){if(e>r&&e<a&&o.dom.parentNode==t)return o.domAtPos(e-r);if(e<=r)break;r=a}}for(let r=i;r>0;r--){let o=n[r-1];if(o.dom.parentNode==t)return o.domAtPos(o.length)}for(let r=i;r<n.length;r++){let o=n[r];if(o.dom.parentNode==t)return o.domAtPos(0)}return new As(t,0)}function ib(s,e,t){let n,{children:i}=s;t>0&&e instanceof sr&&i.length&&(n=i[i.length-1])instanceof sr&&n.mark.eq(e.mark)?ib(n,e.children[0],t-1):(i.push(e),e.setParent(s)),s.length+=e.length}function rb(s,e,t){let n=null,i=-1,r=null,o=-1;function a(c,u){for(let d=0,f=0;d<c.children.length&&f<=u;d++){let p=c.children[d],g=f+p.length;g>=u&&(p.children.length?a(p,u-f):(!r||r.isHidden&&(t>0||zR(r,p)))&&(g>u||f==g&&p.getSide()>0)?(r=p,o=u-f):(f<u||f==g&&p.getSide()<0&&!p.isHidden)&&(n=p,i=u-f)),f=g}}a(s,e);let l=(t<0?n:r)||n||r;return l?l.coordsAt(Math.max(0,l==n?i:o),t):VR(s)}function VR(s){let e=s.dom.lastChild;if(!e)return s.dom.getBoundingClientRect();let t=ha(e);return t[t.length-1]||null}function zR(s,e){let t=s.coordsAt(0,1),n=e.coordsAt(0,1);return t&&n&&n.top<t.bottom}function pm(s,e){for(let t in s)t=="class"&&e.class?e.class+=" "+s.class:t=="style"&&e.style?e.style+=";"+s.style:e[t]=s[t];return e}const ob=Object.create(null);function rd(s,e,t){if(s==e)return!0;s||(s=ob),e||(e=ob);let n=Object.keys(s),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let r of n)if(r!=t&&(i.indexOf(r)==-1||s[r]!==e[r]))return!1;return!0}function mm(s,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?s.style.cssText="":s.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?s.style.cssText=t[i]:s.setAttribute(i,t[i]));return n}function jR(s){let e=Object.create(null);for(let t=0;t<s.attributes.length;t++){let n=s.attributes[t];e[n.name]=n.value}return e}class nr{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var js=function(s){return s[s.Text=0]="Text",s[s.WidgetBefore=1]="WidgetBefore",s[s.WidgetAfter=2]="WidgetAfter",s[s.WidgetRange=3]="WidgetRange",s}(js||(js={}));class Qe extends Oo{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Rl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Nr(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:r,end:o}=ab(e,t);n=(r?t?-3e8:-1:5e8)-1,i=(o?t?2e8:1:-6e8)+1}return new Nr(e,n,i,t,e.widget||null,!0)}static line(e){return new Fl(e)}static set(e,t=!1){return bt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Qe.none=bt.empty;class Rl extends Qe{constructor(e){let{start:t,end:n}=ab(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Rl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&rd(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Rl.prototype.point=!1;class Fl extends Qe{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Fl&&this.spec.class==e.spec.class&&rd(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Fl.prototype.mapMode=zs.TrackBefore,Fl.prototype.point=!0;class Nr extends Qe{constructor(e,t,n,i,r,o){super(t,n,r,e),this.block=i,this.isReplace=o,this.mapMode=i?t<=0?zs.TrackBefore:zs.TrackAfter:zs.TrackDel}get type(){return this.startSide!=this.endSide?js.WidgetRange:this.startSide<=0?js.WidgetBefore:js.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Nr&&WR(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Nr.prototype.point=!0;function ab(s,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=s;return t==null&&(t=s.inclusive),n==null&&(n=s.inclusive),{start:t??e,end:n??e}}function WR(s,e){return s==e||!!(s&&e&&s.compare(e))}function od(s,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=s?t[i]=Math.max(t[i],e):t.push(s,e)}class as extends Lt{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,r,o){if(n){if(!(n instanceof as))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),J2(this,e,t,n?n.children.slice():[],r,o),!0}split(e){let t=new as;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let r=n;r<this.children.length;r++)t.append(this.children[r],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){rd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ib(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=pm(t,this.attrs||{})),n&&(this.attrs=pm({class:n},this.attrs||{}))}domAtPos(e){return nb(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(H2(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(mm(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&Lt.get(i)instanceof sr;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=Lt.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Ie.ios||!this.children.some(r=>r instanceof Hn))){let r=document.createElement("BR");r.cmIgnore=!0,this.dom.appendChild(r)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof Hn)||/[^ -~]/.test(n.text))return null;let i=ha(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=rb(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,r=n.bottom-n.top;if(Math.abs(r-i.lineHeight)<2&&i.textHeight<r){let o=(r-i.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(e){return e instanceof as&&this.children.length==0&&e.children.length==0&&rd(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let r=e.children[n],o=i+r.length;if(o>=t){if(r instanceof as)return r;if(o>t)break}i=o+r.breakAfter}return null}}class ir extends Lt{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,r,o){return n&&(!(n instanceof ir)||!this.widget.compare(n.widget)||e>0&&r<=0||t<this.length&&o<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?As.before(this.dom):As.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new ir(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return cm}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):_t.empty}domBoundsAround(){return null}become(e){return e instanceof ir&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof gm?null:Il(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class gm extends nr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Bl{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof ir&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new as),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ad(new ma(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof ir)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:r,lineBreak:o,done:a}=this.cursor.next(this.skip);if(this.skip=0,a)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=r,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(ad(new Hn(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,r,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Nr){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let a=t-e;if(n instanceof Nr)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ir(n.widget||ga.block,a,n));else{let l=Br.create(n.widget||ga.inline,a,a?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&r<=i.length&&(e<t||n.startSide>0),u=!l.isEditable&&(e<t||r>i.length||n.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(ad(new ma(1),i),r),r=i.length+Math.max(0,r-i.length)),d.append(ad(l,i),r),this.atCursorPos=u,this.pendingBuffer=u?e<t||r>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);a&&(this.textOff+a<=this.text.length?this.textOff+=a:(this.skip+=a-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,n,i,r){let o=new Bl(e,t,n,r);return o.openEnd=bt.spans(i,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ad(s,e){for(let t of e)s=new sr(t,[s],s.length);return s}class ga extends nr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ga.inline=new ga("span"),ga.block=new ga("div");var Et=function(s){return s[s.LTR=0]="LTR",s[s.RTL=1]="RTL",s}(Et||(Et={}));const $o=Et.LTR,vm=Et.RTL;function lb(s){let e=[];for(let t=0;t<s.length;t++)e.push(1<<+s[t]);return e}const UR=lb("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),HR=lb("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ym=Object.create(null),mi=[];for(let s of["()","[]","{}"]){let e=s.charCodeAt(0),t=s.charCodeAt(1);ym[e]=t,ym[t]=-e}function cb(s){return s<=247?UR[s]:1424<=s&&s<=1524?2:1536<=s&&s<=1785?HR[s-1536]:1774<=s&&s<=2220?4:8192<=s&&s<=8204?256:64336<=s&&s<=65023?4:1}const QR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Vr{get dir(){return this.level%2?vm:$o}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let r=-1;for(let o=0;o<e.length;o++){let a=e[o];if(a.from<=t&&a.to>=t){if(a.level==n)return o;(r<0||(i!=0?i<0?a.from<t:a.to>t:e[r].level>a.level))&&(r=o)}}if(r<0)throw new RangeError("Index out of range");return r}}function ub(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++){let n=s[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!ub(n.inner,i.inner))return!1}return!0}const Dt=[];function YR(s,e,t,n,i){for(let r=0;r<=n.length;r++){let o=r?n[r-1].to:e,a=r<n.length?n[r].from:t,l=r?256:i;for(let c=o,u=l,d=l;c<a;c++){let f=cb(s.charCodeAt(c));f==512?f=u:f==8&&d==4&&(f=16),Dt[c]=f==4?2:f,f&7&&(d=f),u=f}for(let c=o,u=l,d=l;c<a;c++){let f=Dt[c];if(f==128)c<a-1&&u==Dt[c+1]&&u&24?f=Dt[c]=u:Dt[c]=256;else if(f==64){let p=c+1;for(;p<a&&Dt[p]==64;)p++;let g=c&&u==8||p<t&&Dt[p]==8?d==1?1:8:256;for(let S=c;S<p;S++)Dt[S]=g;c=p-1}else f==8&&d==1&&(Dt[c]=1);u=f,f&7&&(d=f)}}}function qR(s,e,t,n,i){let r=i==1?2:1;for(let o=0,a=0,l=0;o<=n.length;o++){let c=o?n[o-1].to:e,u=o<n.length?n[o].from:t;for(let d=c,f,p,g;d<u;d++)if(p=ym[f=s.charCodeAt(d)])if(p<0){for(let S=a-3;S>=0;S-=3)if(mi[S+1]==-p){let k=mi[S+2],O=k&2?i:k&4?k&1?r:i:0;O&&(Dt[d]=Dt[mi[S]]=O),a=S;break}}else{if(mi.length==189)break;mi[a++]=d,mi[a++]=f,mi[a++]=l}else if((g=Dt[d])==2||g==1){let S=g==i;l=S?0:1;for(let k=a-3;k>=0;k-=3){let O=mi[k+2];if(O&2)break;if(S)mi[k+2]|=2;else{if(O&4)break;mi[k+2]|=4}}}}}function GR(s,e,t,n){for(let i=0,r=n;i<=t.length;i++){let o=i?t[i-1].to:s,a=i<t.length?t[i].from:e;for(let l=o;l<a;){let c=Dt[l];if(c==256){let u=l+1;for(;;)if(u==a){if(i==t.length)break;u=t[i++].to,a=i<t.length?t[i].from:e}else if(Dt[u]==256)u++;else break;let d=r==1,f=(u<e?Dt[u]:n)==1,p=d==f?d?1:2:n;for(let g=u,S=i,k=S?t[S-1].to:s;g>l;)g==k&&(g=t[--S].from,k=S?t[S-1].to:s),Dt[--g]=p;l=u}else r=c,l++}}}function _m(s,e,t,n,i,r,o){let a=n%2?2:1;if(n%2==i%2)for(let l=e,c=0;l<t;){let u=!0,d=!1;if(c==r.length||l<r[c].from){let S=Dt[l];S!=a&&(u=!1,d=S==16)}let f=!u&&a==1?[]:null,p=u?n:n+1,g=l;e:for(;;)if(c<r.length&&g==r[c].from){if(d)break e;let S=r[c];if(!u)for(let k=S.to,O=c+1;;){if(k==t)break e;if(O<r.length&&r[O].from==k)k=r[O++].to;else{if(Dt[k]==a)break e;break}}if(c++,f)f.push(S);else{S.from>l&&o.push(new Vr(l,S.from,p));let k=S.direction==$o!=!(p%2);bm(s,k?n+1:n,i,S.inner,S.from,S.to,o),l=S.to}g=S.to}else{if(g==t||(u?Dt[g]!=a:Dt[g]==a))break;g++}f?_m(s,l,g,n+1,i,f,o):l<g&&o.push(new Vr(l,g,p)),l=g}else for(let l=t,c=r.length;l>e;){let u=!0,d=!1;if(!c||l>r[c-1].to){let S=Dt[l-1];S!=a&&(u=!1,d=S==16)}let f=!u&&a==1?[]:null,p=u?n:n+1,g=l;e:for(;;)if(c&&g==r[c-1].to){if(d)break e;let S=r[--c];if(!u)for(let k=S.from,O=c;;){if(k==e)break e;if(O&&r[O-1].to==k)k=r[--O].from;else{if(Dt[k-1]==a)break e;break}}if(f)f.push(S);else{S.to<l&&o.push(new Vr(S.to,l,p));let k=S.direction==$o!=!(p%2);bm(s,k?n+1:n,i,S.inner,S.from,S.to,o),l=S.from}g=S.from}else{if(g==e||(u?Dt[g-1]!=a:Dt[g-1]==a))break;g--}f?_m(s,g,l,n+1,i,f,o):g<l&&o.push(new Vr(g,l,p)),l=g}}function bm(s,e,t,n,i,r,o){let a=e%2?2:1;YR(s,i,r,n,a),qR(s,i,r,n,a),GR(i,r,n,a),_m(s,i,r,e,t,n,o)}function KR(s,e,t){if(!s)return[new Vr(0,0,e==vm?1:0)];if(e==$o&&!t.length&&!QR.test(s))return db(s.length);if(t.length)for(;s.length>Dt.length;)Dt[Dt.length]=256;let n=[],i=e==$o?0:1;return bm(s,i,i,t,0,s.length,n),n}function db(s){return[new Vr(0,s,0)]}let hb="";function XR(s,e,t,n,i){var r;let o=n.head-s.from,a=Vr.find(e,o,(r=n.bidiLevel)!==null&&r!==void 0?r:-1,n.assoc),l=e[a],c=l.side(i,t);if(o==c){let f=a+=i?1:-1;if(f<0||f>=e.length)return null;l=e[a=f],o=l.side(!i,t),c=l.side(i,t)}let u=ys(s.text,o,l.forward(i,t));(u<l.from||u>l.to)&&(u=c),hb=s.text.slice(Math.min(o,u),Math.max(o,u));let d=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?de.cursor(d.side(!i,t)+s.from,d.forward(i,t)?1:-1,d.level):de.cursor(u+s.from,l.forward(i,t)?-1:1,l.level)}function JR(s,e,t){for(let n=e;n<t;n++){let i=cb(s.charCodeAt(n));if(i==1)return $o;if(i==2||i==4)return vm}return $o}const fb=De.define(),pb=De.define(),mb=De.define(),gb=De.define(),wm=De.define(),vb=De.define(),yb=De.define(),xm=De.define(),km=De.define(),_b=De.define({combine:s=>s.some(e=>e)}),bb=De.define({combine:s=>s.some(e=>e)}),wb=De.define();class va{constructor(e,t="nearest",n="nearest",i=5,r=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=r,this.isSnapshot=o}map(e){return e.empty?this:new va(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new va(de.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ld=rt.define({map:(s,e)=>s.map(e)}),xb=rt.define();function Ws(s,e,t){let n=s.facet(gb);n.length?n[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const rr=De.define({combine:s=>s.length?s[0]:!0});let ZR=0;const ya=De.define({combine(s){return s.filter((e,t)=>{for(let n=0;n<t;n++)if(s[n].plugin==e.plugin)return!1;return!0})}});class Xt{constructor(e,t,n,i,r){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.baseExtensions=r(this),this.extension=this.baseExtensions.concat(ya.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ya.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:r,decorations:o}=t||{};return new Xt(ZR++,e,n,i,a=>{let l=[];return o&&l.push(Nl.of(c=>{let u=c.plugin(a);return u?o(u):Qe.none})),r&&l.push(r(a)),l})}static fromClass(e,t){return Xt.define((n,i)=>new e(n,i),t)}}class Sm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Ws(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Ws(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Ws(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const kb=De.define(),Cm=De.define(),Nl=De.define(),Sb=De.define(),cd=De.define(),Cb=De.define();function Ob(s,e){let t=s.state.facet(Cb);if(!t.length)return t;let n=t.map(r=>r instanceof Function?r(s):r),i=[];return bt.spans(n,e.from,e.to,{point(){},span(r,o,a,l){let c=r-e.from,u=o-e.from,d=i;for(let f=a.length-1;f>=0;f--,l--){let p=a[f].spec.bidiIsolate,g;if(p==null&&(p=JR(e.text,c,u)),l>0&&d.length&&(g=d[d.length-1]).to==c&&g.direction==p)g.to=u,d=g.inner;else{let S={from:c,to:u,direction:p,inner:[]};d.push(S),d=S.inner}}}}),i}const Mb=De.define();function Om(s){let e=0,t=0,n=0,i=0;for(let r of s.state.facet(Mb)){let o=r(s);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(t=Math.max(t,o.right)),o.top!=null&&(n=Math.max(n,o.top)),o.bottom!=null&&(i=Math.max(i,o.bottom)))}return{left:e,right:t,top:n,bottom:i}}const Vl=De.define();class Mn{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new Mn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,r=0,o=0,a=0;;i++){let l=i==e.length?null:e[i],c=o-a,u=l?l.fromB:1e9;for(;r<t.length&&t[r]<u;){let d=t[r],f=t[r+1],p=Math.max(a,d),g=Math.min(u,f);if(p<=g&&new Mn(p+c,g+c,p,g).addToSet(n),f>u)break;r+=2}if(!l)return n;new Mn(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),o=l.toA,a=l.toB}}}class ud{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=cs.empty(this.startState.doc.length);for(let r of n)this.changes=this.changes.compose(r.changes);let i=[];this.changes.iterChangedRanges((r,o,a,l)=>i.push(new Mn(r,o,a,l))),this.changedRanges=i}static create(e,t,n){return new ud(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class Ab extends Lt{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Qe.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new as],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Mn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!oF(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let r=i>-1?tF(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;n=new Mn(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(n.slice())}this.hasComposition=r?{from:r.range.fromB,to:r.range.toB}:null,(Ie.ie||Ie.chrome)&&!r&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,a=this.updateDeco(),l=iF(o,a,e.changes);return n=Mn.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,r),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=Ie.chrome||Ie.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let r=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof ir&&o.widget instanceof gm&&r.push(o.dom);i.updateGaps(r)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,r=this.childCursor(t);for(let o=i.length-1;;o--){let a=o>=0?i[o]:null;if(!a)break;let{fromA:l,toA:c,fromB:u,toB:d}=a,f,p,g,S;if(n&&n.range.fromB<d&&n.range.toB>u){let b=Bl.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),w=Bl.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);p=b.breakAtStart,g=b.openStart,S=w.openEnd;let R=this.compositionView(n);w.breakAtStart?R.breakAfter=1:w.content.length&&R.merge(R.length,R.length,w.content[0],!1,w.openStart,0)&&(R.breakAfter=w.content[0].breakAfter,w.content.shift()),b.content.length&&R.merge(0,0,b.content[b.content.length-1],!0,0,b.openEnd)&&b.content.pop(),f=b.content.concat(R).concat(w.content)}else({content:f,breakAtStart:p,openStart:g,openEnd:S}=Bl.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:k,off:O}=r.findPos(c,1),{i:$,off:M}=r.findPos(l,-1);X2(this,$,M,k,O,f,p,g,S)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(xb)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new Hn(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new sr(i,[t],t.length);let n=new as;return n.append(t,0),n}fixCompositionDOM(e){let t=(r,o)=>{o.flags|=8|(o.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(o);let a=Lt.get(r);a&&a!=o&&(a.dom=null),o.setDOM(r)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let r=e.marks.length-1;r>=-1;r--)n=i.childPos(n.off,1),i=i.children[n.i],t(r>=0?e.marks[r].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,r=!i&&!(this.view.state.facet(rr)||this.dom.tabIndex>-1)&&sd(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||r))return;let o=this.forceSelection;this.forceSelection=!1;let a=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(a.anchor)),c=a.empty?l:this.moveToLine(this.domAtPos(a.head));if(Ie.gecko&&a.empty&&!this.hasComposition&&eF(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new As(d,0),o=!0}let u=this.view.observer.selectionRange;(o||!u.focusNode||(!Dl(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Dl(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,a))&&(this.view.observer.ignore(()=>{Ie.android&&Ie.chrome&&this.dom.contains(u.focusNode)&&rF(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=El(this.view.root);if(d)if(a.empty){if(Ie.gecko){let f=sF(l.node,l.offset);if(f&&f!=3){let p=(f==1?Y2:q2)(l.node,l.offset);p&&(l=new As(p.node,p.offset))}}d.collapse(l.node,l.offset),a.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=a.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let f=document.createRange();a.anchor>a.head&&([l,c]=[c,l]),f.setEnd(c.node,c.offset),f.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(f)}r&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new As(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new As(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Dl(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=El(e.root),{anchorNode:i,anchorOffset:r}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=as.find(this,t.head);if(!o)return;let a=o.posAtStart;if(t.head==a||t.head==a+o.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&n.collapse(i,r)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let r=Lt.get(t.childNodes[i]);r instanceof as&&(n=r.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let r=Lt.get(t.childNodes[i]);r instanceof as&&(n=r.domAtPos(r.length))}return n?new As(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=Lt.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof as)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let r=this.length,o=this.children.length-1;o>=0;o--){let a=this.children[o],l=r-a.breakAfter,c=l-a.length;if(l<e)break;if(c<=e&&(c<e||a.covers(-1))&&(l>e||a.covers(1))&&(!n||a instanceof as&&!(n instanceof as&&t>=0)))n=a,i=c;else if(n&&c==e&&l==e&&a instanceof ir&&Math.abs(t)<2){if(a.deco.startSide<0)break;o&&(n=null)}r=c}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof as))return null;for(;i.children.length;){let{i:a,off:l}=i.childPos(n,1);for(;;a++){if(a==i.children.length)return null;if((i=i.children[a]).length)break}n=l}if(!(i instanceof Hn))return null;let r=ys(i.text,n);if(r==n)return null;let o=Ao(i.dom,n,r).getClientRects();for(let a=0;a<o.length;a++){let l=o[a];if(a==o.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,r=this.view.contentDOM.clientWidth,o=r>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,a=-1,l=this.view.textDirection==Et.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],f=c+d.length;if(f>i)break;if(c>=n){let p=d.dom.getBoundingClientRect();if(t.push(p.height),o){let g=d.dom.lastChild,S=g?ha(g):[];if(S.length){let k=S[S.length-1],O=l?k.right-p.left:p.right-k.left;O>a&&(a=O,this.minWidth=r,this.minWidthFrom=c,this.minWidthTo=f)}}}c=f+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Et.RTL:Et.LTR}measureTextSize(){for(let r of this.children)if(r instanceof as){let o=r.measureTextSize();if(o)return o}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let r=ha(e.firstChild)[0];t=e.getBoundingClientRect().height,n=r?r.width/27:7,i=r?r.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new K2(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let r=i==t.viewports.length?null:t.viewports[i],o=r?r.from-1:this.length;if(o>n){let a=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Qe.replace({widget:new gm(a),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!r)break;n=r.to+1}return Qe.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Nl).map(r=>(this.dynamicDecorationMap[e++]=typeof r=="function")?r(this.view):r),n=!1,i=this.view.state.facet(Sb).map((r,o)=>{let a=typeof r=="function";return a&&(n=!0),a?r(this.view):r});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(bt.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(wb))try{if(c(this.view,e.range,e))return!0}catch(u){Ws(this.view.state,u,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let r=Om(this.view),o={left:n.left-r.left,top:n.top-r.top,right:n.right+r.right,bottom:n.bottom+r.bottom},{offsetWidth:a,offsetHeight:l}=this.view.scrollDOM;LR(this.view.scrollDOM,o,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,a),-a),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==Et.LTR)}}function eF(s){return s.node.nodeType==1&&s.node.firstChild&&(s.offset==0||s.node.childNodes[s.offset-1].contentEditable=="false")&&(s.offset==s.node.childNodes.length||s.node.childNodes[s.offset].contentEditable=="false")}function $b(s,e){let t=s.observer.selectionRange;if(!t.focusNode)return null;let n=Y2(t.focusNode,t.focusOffset),i=q2(t.focusNode,t.focusOffset),r=n||i;if(i&&n&&i.node!=n.node){let a=Lt.get(i.node);if(!a||a instanceof Hn&&a.text!=i.node.nodeValue)r=i;else if(s.docView.lastCompositionAfterCursor){let l=Lt.get(n.node);!l||l instanceof Hn&&l.text!=n.node.nodeValue||(r=i)}}if(s.docView.lastCompositionAfterCursor=r!=n,!r)return null;let o=e-r.offset;return{from:o,to:o+r.node.nodeValue.length,node:r.node}}function tF(s,e,t){let n=$b(s,t);if(!n)return null;let{node:i,from:r,to:o}=n,a=i.nodeValue;if(/[\n\r]/.test(a)||s.state.doc.sliceString(n.from,n.to)!=a)return null;let l=e.invertedDesc,c=new Mn(l.mapPos(r),l.mapPos(o),r,o),u=[];for(let d=i.parentNode;;d=d.parentNode){let f=Lt.get(d);if(f instanceof sr)u.push({node:d,deco:f.mark});else{if(f instanceof as||d.nodeName=="DIV"&&d.parentNode==s.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=s.contentDOM)u.push({node:d,deco:new Rl({inclusive:!0,attributes:jR(d),tagName:d.tagName.toLowerCase()})});else return null}}}function sF(s,e){return s.nodeType!=1?0:(e&&s.childNodes[e-1].contentEditable=="false"?1:0)|(e<s.childNodes.length&&s.childNodes[e].contentEditable=="false"?2:0)}let nF=class{constructor(){this.changes=[]}compareRange(e,t){od(e,t,this.changes)}comparePoint(e,t){od(e,t,this.changes)}boundChange(e){od(e,e,this.changes)}};function iF(s,e,t){let n=new nF;return bt.compare(s,e,t,n),n.changes}function rF(s,e){for(let t=s;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function oF(s,e){let t=!1;return e&&s.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function aF(s,e,t=1){let n=s.charCategorizer(e),i=s.doc.lineAt(e),r=e-i.from;if(i.length==0)return de.cursor(e);r==0?t=1:r==i.length&&(t=-1);let o=r,a=r;t<0?o=ys(i.text,r,!1):a=ys(i.text,r);let l=n(i.text.slice(o,a));for(;o>0;){let c=ys(i.text,o,!1);if(n(i.text.slice(c,o))!=l)break;o=c}for(;a<i.length;){let c=ys(i.text,a);if(n(i.text.slice(a,c))!=l)break;a=c}return de.range(o+i.from,a+i.from)}function lF(s,e){return e.left>s?e.left-s:Math.max(0,s-e.right)}function cF(s,e){return e.top>s?e.top-s:Math.max(0,s-e.bottom)}function Mm(s,e){return s.top<e.bottom-1&&s.bottom>e.top+1}function Tb(s,e){return e<s.top?{top:e,left:s.left,right:s.right,bottom:s.bottom}:s}function Pb(s,e){return e>s.bottom?{top:s.top,left:s.left,right:s.right,bottom:e}:s}function Am(s,e,t){let n,i,r,o,a=!1,l,c,u,d;for(let g=s.firstChild;g;g=g.nextSibling){let S=ha(g);for(let k=0;k<S.length;k++){let O=S[k];i&&Mm(i,O)&&(O=Tb(Pb(O,i.bottom),i.top));let $=lF(e,O),M=cF(t,O);if($==0&&M==0)return g.nodeType==3?Lb(g,e,t):Am(g,e,t);(!n||o>M||o==M&&r>$)&&(n=g,i=O,r=$,o=M,a=$?e<O.left?k>0:k<S.length-1:!0),$==0?t>O.bottom&&(!u||u.bottom<O.bottom)?(l=g,u=O):t<O.top&&(!d||d.top>O.top)&&(c=g,d=O):u&&Mm(u,O)?u=Pb(u,O.bottom):d&&Mm(d,O)&&(d=Tb(d,O.top))}}if(u&&u.bottom>=t?(n=l,i=u):d&&d.top<=t&&(n=c,i=d),!n)return{node:s,offset:0};let f=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return Lb(n,f,t);if(a&&n.contentEditable!="false")return Am(n,f,t);let p=Array.prototype.indexOf.call(s.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:s,offset:p}}function Lb(s,e,t){let n=s.nodeValue.length,i=-1,r=1e9,o=0;for(let a=0;a<n;a++){let l=Ao(s,a,a+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;o||(o=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<r){let f=e>=(u.left+u.right)/2,p=f;if((Ie.chrome||Ie.gecko)&&Ao(s,a).getBoundingClientRect().left==u.right&&(p=!f),d<=0)return{node:s,offset:a+(p?1:0)};i=a+(p?1:0),r=d}}}return{node:s,offset:i>-1?i:o>0?s.nodeValue.length:0}}function Eb(s,e,t,n=-1){var i,r;let o=s.contentDOM.getBoundingClientRect(),a=o.top+s.viewState.paddingTop,l,{docHeight:c}=s.viewState,{x:u,y:d}=e,f=d-a;if(f<0)return 0;if(f>c)return s.state.doc.length;for(let b=s.viewState.heightOracle.textHeight/2,w=!1;l=s.elementAtHeight(f),l.type!=js.Text;)for(;f=n>0?l.bottom+b:l.top-b,!(f>=0&&f<=c);){if(w)return t?null:0;w=!0,n=-n}d=a+f;let p=l.from;if(p<s.viewport.from)return s.viewport.from==0?0:t?null:Db(s,o,l,u,d);if(p>s.viewport.to)return s.viewport.to==s.state.doc.length?s.state.doc.length:t?null:Db(s,o,l,u,d);let g=s.dom.ownerDocument,S=s.root.elementFromPoint?s.root:g,k=S.elementFromPoint(u,d);k&&!s.contentDOM.contains(k)&&(k=null),k||(u=Math.max(o.left+1,Math.min(o.right-1,u)),k=S.elementFromPoint(u,d),k&&!s.contentDOM.contains(k)&&(k=null));let O,$=-1;if(k&&((i=s.docView.nearest(k))===null||i===void 0?void 0:i.isEditable)!=!1){if(g.caretPositionFromPoint){let b=g.caretPositionFromPoint(u,d);b&&({offsetNode:O,offset:$}=b)}else if(g.caretRangeFromPoint){let b=g.caretRangeFromPoint(u,d);b&&({startContainer:O,startOffset:$}=b,(!s.contentDOM.contains(O)||Ie.safari&&uF(O,$,u)||Ie.chrome&&dF(O,$,u))&&(O=void 0))}O&&($=Math.min(pi(O),$))}if(!O||!s.docView.dom.contains(O)){let b=as.find(s.docView,p);if(!b)return f>l.top+l.height/2?l.to:l.from;({node:O,offset:$}=Am(b.dom,u,d))}let M=s.docView.nearest(O);if(!M)return null;if(M.isWidget&&((r=M.dom)===null||r===void 0?void 0:r.nodeType)==1){let b=M.dom.getBoundingClientRect();return e.y<b.top||e.y<=b.bottom&&e.x<=(b.left+b.right)/2?M.posAtStart:M.posAtEnd}else return M.localPosFromDOM(O,$)+M.posAtStart}function Db(s,e,t,n,i){let r=Math.round((n-e.left)*s.defaultCharacterWidth);if(s.lineWrapping&&t.height>s.defaultLineHeight*1.5){let a=s.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(s.defaultLineHeight-a)*.5)/a);r+=l*s.viewState.heightOracle.lineLength}let o=s.state.sliceDoc(t.from,t.to);return t.from+im(o,r,s.state.tabSize)}function uF(s,e,t){let n,i=s;if(s.nodeType!=3||e!=(n=s.nodeValue.length))return!1;for(;;){let r=i.nextSibling;if(r){if(r.nodeName=="BR")break;return!1}else{let o=i.parentNode;if(!o||o.nodeName=="DIV")break;i=o}}return Ao(s,n-1,n).getBoundingClientRect().right>t}function dF(s,e,t){if(e!=0)return!1;for(let i=s;;){let r=i.parentNode;if(!r||r.nodeType!=1||r.firstChild!=i)return!1;if(r.classList.contains("cm-line"))break;i=r}let n=s.nodeType==1?s.getBoundingClientRect():Ao(s,0,Math.max(s.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function $m(s,e,t){let n=s.lineBlockAt(e);if(Array.isArray(n.type)){let i;for(let r of n.type){if(r.from>e)break;if(!(r.to<e)){if(r.from<e&&r.to>e)return r;(!i||r.type==js.Text&&(i.type!=r.type||(t<0?r.from<e:r.to>e)))&&(i=r)}}return i||n}return n}function hF(s,e,t,n){let i=$m(s,e.head,e.assoc||-1),r=!n||i.type!=js.Text||!(s.lineWrapping||i.widgetLineBreaks)?null:s.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(r){let o=s.dom.getBoundingClientRect(),a=s.textDirectionAt(i.from),l=s.posAtCoords({x:t==(a==Et.LTR)?o.right-1:o.left+1,y:(r.top+r.bottom)/2});if(l!=null)return de.cursor(l,t?-1:1)}return de.cursor(t?i.to:i.from,t?-1:1)}function Ib(s,e,t,n){let i=s.state.doc.lineAt(e.head),r=s.bidiSpans(i),o=s.textDirectionAt(i.from);for(let a=e,l=null;;){let c=XR(i,r,o,a,t),u=hb;if(!c){if(i.number==(t?s.state.doc.lines:1))return a;u=`
`,i=s.state.doc.line(i.number+(t?1:-1)),r=s.bidiSpans(i),c=s.visualLineSide(i,!t)}if(l){if(!l(u))return a}else{if(!n)return c;l=n(u)}a=c}}function fF(s,e,t){let n=s.state.charCategorizer(e),i=n(t);return r=>{let o=n(r);return i==Yt.Space&&(i=o),i==o}}function pF(s,e,t,n){let i=e.head,r=t?1:-1;if(i==(t?s.state.doc.length:0))return de.cursor(i,e.assoc);let o=e.goalColumn,a,l=s.contentDOM.getBoundingClientRect(),c=s.coordsAtPos(i,e.assoc||-1),u=s.documentTop;if(c)o==null&&(o=c.left-l.left),a=r<0?c.top:c.bottom;else{let p=s.viewState.lineBlockAt(i);o==null&&(o=Math.min(l.right-l.left,s.defaultCharacterWidth*(i-p.from))),a=(r<0?p.top:p.bottom)+u}let d=l.left+o,f=n??s.viewState.heightOracle.textHeight>>1;for(let p=0;;p+=10){let g=a+(f+p)*r,S=Eb(s,{x:d,y:g},!1,r);if(g<l.top||g>l.bottom||(r<0?S<i:S>i)){let k=s.docView.coordsForChar(S),O=!k||g<k.top?-1:1;return de.cursor(S,O,void 0,o)}}}function dd(s,e,t){for(;;){let n=0;for(let i of s)i.between(e-1,e+1,(r,o,a)=>{if(e>r&&e<o){let l=n||t||(e-r<o-e?-1:1);e=l<0?r:o,n=l}});if(!n)return e}}function Rb(s,e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],r=null;if(i.empty){let o=dd(s,i.from,0);o!=i.from&&(r=de.cursor(o,-1))}else{let o=dd(s,i.from,-1),a=dd(s,i.to,1);(o!=i.from||a!=i.to)&&(r=de.range(i.from==i.anchor?o:a,i.from==i.head?o:a))}r&&(t||(t=e.ranges.slice()),t[n]=r)}return t?de.create(t,e.mainIndex):e}function Tm(s,e,t){let n=dd(s.state.facet(cd).map(i=>i(s)),t.from,e.head>t.from?-1:1);return n==t.from?t:de.cursor(n,n<t.from?1:-1)}const zl="";class mF{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ut.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=zl}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let r=this.text.length;this.readNode(i);let o=i.nextSibling;if(o==t)break;let a=Lt.get(i),l=Lt.get(o);(a&&l?a.breakAfter:(a?a.breakAfter:nd(i))||nd(o)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>r)&&this.lineBreak(),i=o}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let r=-1,o=1,a;if(this.lineSeparator?(r=t.indexOf(this.lineSeparator,n),o=this.lineSeparator.length):(a=i.exec(t))&&(r=a.index,o=a[0].length),this.append(t.slice(n,r<0?t.length:r)),r<0)break;if(this.lineBreak(),o>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=o-1);n=r+o}}readNode(e){if(e.cmIgnore)return;let t=Lt.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(gF(e,n.node,n.offset)?t:0))}}function gF(s,e,t){for(;;){if(!e||t<pi(e))return!1;if(e==s)return!0;t=Mo(e)+1,e=e.parentNode}}class Fb{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class vF{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:r,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let a=r||o?[]:bF(e),l=new mF(a,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=wF(a,this.bounds.from)}else{let a=e.observer.selectionRange,l=r&&r.node==a.focusNode&&r.offset==a.focusOffset||!lm(e.contentDOM,a.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(a.focusNode,a.focusOffset),c=o&&o.node==a.anchorNode&&o.offset==a.anchorOffset||!lm(e.contentDOM,a.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(a.anchorNode,a.anchorOffset),u=e.viewport;if((Ie.ios||Ie.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),f=Math.max(l,c),p=u.from-d,g=u.to-f;(p==0||p==1||d==0)&&(g==0||g==-1||f==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=de.single(c,l)}}}function Bb(s,e){let t,{newSel:n}=e,i=s.state.selection.main,r=s.inputState.lastKeyTime>Date.now()-100?s.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:a}=e.bounds,l=i.from,c=null;(r===8||Ie.android&&e.text.length<a-o)&&(l=i.to,c="end");let u=_F(s.state.doc.sliceString(o,a,zl),e.text,l-o,c);u&&(Ie.chrome&&r==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==zl+zl&&u.toB--,t={from:o+u.from,to:o+u.toA,insert:_t.of(e.text.slice(u.from,u.toB).split(zl))})}else n&&(!s.hasFocus&&s.state.facet(rr)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:s.state.doc.slice(i.from,i.to)}:(Ie.mac||Ie.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&s.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=de.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:_t.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:s.state.doc.slice(i.from,t.from).append(t.insert).append(s.state.doc.slice(t.to,i.to))}:Ie.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&s.lineWrapping&&(n&&(n=de.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:_t.of([" "])}),t)return Pm(s,t,n,r);if(n&&!n.main.eq(i)){let o=!1,a="select";return s.inputState.lastSelectionTime>Date.now()-50&&(s.inputState.lastSelectionOrigin=="select"&&(o=!0),a=s.inputState.lastSelectionOrigin,a=="select.pointer"&&(n=Rb(s.state.facet(cd).map(l=>l(s)),n))),s.dispatch({selection:n,scrollIntoView:o,userEvent:a}),!0}else return!1}function Pm(s,e,t,n=-1){if(Ie.ios&&s.inputState.flushIOSKey(e))return!0;let i=s.state.selection.main;if(Ie.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&s.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&pa(s.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&pa(s.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&pa(s.contentDOM,"Delete",46)))return!0;let r=e.insert.toString();s.inputState.composing>=0&&s.inputState.composing++;let o,a=()=>o||(o=yF(s,e,t));return s.state.facet(vb).some(l=>l(s,e.from,e.to,r,a))||s.dispatch(a()),!0}function yF(s,e,t){let n,i=s.state,r=i.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&s.inputState.composing<0){let a=r.from<e.from?i.sliceDoc(r.from,e.from):"",l=r.to>e.to?i.sliceDoc(e.to,r.to):"";n=i.replaceSelection(s.state.toText(a+e.insert.sliceString(0,void 0,s.state.lineBreak)+l))}else{let a=i.changes(e),l=t&&t.main.to<=a.newLength?t.main:void 0;if(i.selection.ranges.length>1&&s.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let c=s.state.sliceDoc(e.from,e.to),u,d=t&&$b(s,t.main.head);if(d){let g=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-g}}else u=s.state.doc.lineAt(r.head);let f=r.to-e.to,p=r.to-r.from;n=i.changeByRange(g=>{if(g.from==r.from&&g.to==r.to)return{changes:a,range:l||g.map(a)};let S=g.to-f,k=S-c.length;if(g.to-g.from!=p||s.state.sliceDoc(k,S)!=c||g.to>=u.from&&g.from<=u.to)return{range:g};let O=i.changes({from:k,to:S,insert:e.insert}),$=g.to-r.to;return{changes:O,range:l?de.range(Math.max(0,l.anchor+$),Math.max(0,l.head+$)):g.map(O)}})}else n={changes:a,selection:l&&i.selection.replaceRange(l)}}let o="input.type";return(s.composing||s.inputState.compositionPendingChange&&s.inputState.compositionEndedAt>Date.now()-50)&&(s.inputState.compositionPendingChange=!1,o+=".compose",s.inputState.compositionFirstChange&&(o+=".start",s.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:o,scrollIntoView:!0})}function _F(s,e,t,n){let i=Math.min(s.length,e.length),r=0;for(;r<i&&s.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==i&&s.length==e.length)return null;let o=s.length,a=e.length;for(;o>0&&a>0&&s.charCodeAt(o-1)==e.charCodeAt(a-1);)o--,a--;if(n=="end"){let l=Math.max(0,r-Math.min(o,a));t-=o+l-r}if(o<r&&s.length<e.length){let l=t<=r&&t>=o?r-t:0;r-=l,a=r+(a-o),o=r}else if(a<r){let l=t<=r&&t>=a?r-t:0;r-=l,o=r+(o-a),a=r}return{from:r,toA:o,toB:a}}function bF(s){let e=[];if(s.root.activeElement!=s.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:r}=s.observer.selectionRange;return t&&(e.push(new Fb(t,n)),(i!=t||r!=n)&&e.push(new Fb(i,r))),e}function wF(s,e){if(s.length==0)return null;let t=s[0].pos,n=s.length==2?s[1].pos:t;return t>-1&&n>-1?de.single(t+e,n+e):null}class xF{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Ie.safari&&e.contentDOM.addEventListener("input",()=>null),Ie.gecko&&BF(e.contentDOM.ownerDocument)}handleEvent(e){!TF(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=kF(e),n=this.handlers,i=this.view.contentDOM;for(let r in t)if(r!="scroll"){let o=!t[r].handlers.length,a=n[r];a&&o!=!a.handlers.length&&(i.removeEventListener(r,this.handleEvent),a=null),a||i.addEventListener(r,this.handleEvent,{passive:o})}for(let r in n)r!="scroll"&&!t[r]&&i.removeEventListener(r,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&zb.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Ie.android&&Ie.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Ie.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Vb.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||SF.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,pa(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Ie.safari&&!Ie.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Nb(s,e){return(t,n)=>{try{return e.call(s,n,t)}catch(i){Ws(t.state,i)}}}function kF(s){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of s){let i=n.spec,r=i&&i.plugin.domEventHandlers,o=i&&i.plugin.domEventObservers;if(r)for(let a in r){let l=r[a];l&&t(a).handlers.push(Nb(n.value,l))}if(o)for(let a in o){let l=o[a];l&&t(a).observers.push(Nb(n.value,l))}}for(let n in Qn)t(n).handlers.push(Qn[n]);for(let n in An)t(n).observers.push(An[n]);return e}const Vb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],SF="dthko",zb=[16,17,18,20,91,92,224,225],hd=6;function fd(s){return Math.max(0,s)*.7+8}function CF(s,e){return Math.max(Math.abs(s.clientX-e.clientX),Math.abs(s.clientY-e.clientY))}class OF{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=ER(e.contentDOM),this.atoms=e.state.facet(cd).map(o=>o(e));let r=e.contentDOM.ownerDocument;r.addEventListener("mousemove",this.move=this.move.bind(this)),r.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ut.allowMultipleSelections)&&MF(e,t),this.dragging=$F(e,t)&&Kb(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&CF(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,i=0,r=0,o=this.view.win.innerWidth,a=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:r,bottom:a}=this.scrollParents.y.getBoundingClientRect());let l=Om(this.view);e.clientX-l.left<=i+hd?t=-fd(i-e.clientX):e.clientX+l.right>=o-hd&&(t=fd(e.clientX-o)),e.clientY-l.top<=r+hd?n=-fd(r-e.clientY):e.clientY+l.bottom>=a-hd&&(n=fd(e.clientY-a)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,n=Rb(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function MF(s,e){let t=s.state.facet(fb);return t.length?t[0](e):Ie.mac?e.metaKey:e.ctrlKey}function AF(s,e){let t=s.state.facet(pb);return t.length?t[0](e):Ie.mac?!e.altKey:!e.ctrlKey}function $F(s,e){let{main:t}=s.state.selection;if(t.empty)return!1;let n=El(s.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let r=0;r<i.length;r++){let o=i[r];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function TF(s,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=s.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=Lt.get(t))&&n.ignoreEvent(e))return!1;return!0}const Qn=Object.create(null),An=Object.create(null),jb=Ie.ie&&Ie.ie_version<15||Ie.ios&&Ie.webkit_version<604;function PF(s){let e=s.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{s.focus(),t.remove(),Wb(s,t.value)},50)}function pd(s,e,t){for(let n of s.facet(e))t=n(t,s);return t}function Wb(s,e){e=pd(s.state,xm,e);let{state:t}=s,n,i=1,r=t.toText(e),o=r.lines==t.selection.ranges.length;if(Lm!=null&&t.selection.ranges.every(l=>l.empty)&&Lm==r.toString()){let l=-1;n=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=t.toText((o?r.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:de.cursor(c.from+d.length)}})}else o?n=t.changeByRange(l=>{let c=r.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:de.cursor(l.from+c.length)}}):n=t.replaceSelection(r);s.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}An.scroll=s=>{s.inputState.lastScrollTop=s.scrollDOM.scrollTop,s.inputState.lastScrollLeft=s.scrollDOM.scrollLeft},Qn.keydown=(s,e)=>(s.inputState.setSelectionOrigin("select"),e.keyCode==27&&s.inputState.tabFocusMode!=0&&(s.inputState.tabFocusMode=Date.now()+2e3),!1),An.touchstart=(s,e)=>{s.inputState.lastTouchTime=Date.now(),s.inputState.setSelectionOrigin("select.pointer")},An.touchmove=s=>{s.inputState.setSelectionOrigin("select.pointer")},Qn.mousedown=(s,e)=>{if(s.observer.flush(),s.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of s.state.facet(mb))if(t=n(s,e),t)break;if(!t&&e.button==0&&(t=DF(s,e)),t){let n=!s.hasFocus;s.inputState.startMouseSelection(new OF(s,e,t,n)),n&&s.observer.ignore(()=>{W2(s.contentDOM);let r=s.root.activeElement;r&&!r.contains(s.contentDOM)&&r.blur()});let i=s.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}else s.inputState.setSelectionOrigin("select.pointer");return!1};function Ub(s,e,t,n){if(n==1)return de.cursor(e,t);if(n==2)return aF(s.state,e,t);{let i=as.find(s.docView,e),r=s.state.doc.lineAt(i?i.posAtEnd:e),o=i?i.posAtStart:r.from,a=i?i.posAtEnd:r.to;return a<s.state.doc.length&&a==r.to&&a++,de.range(o,a)}}let Hb=(s,e,t)=>e>=t.top&&e<=t.bottom&&s>=t.left&&s<=t.right;function LF(s,e,t,n){let i=as.find(s.docView,e);if(!i)return 1;let r=e-i.posAtStart;if(r==0)return 1;if(r==i.length)return-1;let o=i.coordsAt(r,-1);if(o&&Hb(t,n,o))return-1;let a=i.coordsAt(r,1);return a&&Hb(t,n,a)?1:o&&o.bottom>=n?-1:1}function Qb(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:LF(s,t,e.clientX,e.clientY)}}const EF=Ie.ie&&Ie.ie_version<=11;let Yb=null,qb=0,Gb=0;function Kb(s){if(!EF)return s.detail;let e=Yb,t=Gb;return Yb=s,Gb=Date.now(),qb=!e||t>Date.now()-400&&Math.abs(e.clientX-s.clientX)<2&&Math.abs(e.clientY-s.clientY)<2?(qb+1)%3:1}function DF(s,e){let t=Qb(s,e),n=Kb(e),i=s.state.selection;return{update(r){r.docChanged&&(t.pos=r.changes.mapPos(t.pos),i=i.map(r.changes))},get(r,o,a){let l=Qb(s,r),c,u=Ub(s,l.pos,l.bias,n);if(t.pos!=l.pos&&!o){let d=Ub(s,t.pos,t.bias,n),f=Math.min(d.from,u.from),p=Math.max(d.to,u.to);u=f<u.from?de.range(f,p):de.range(p,f)}return o?i.replaceRange(i.main.extend(u.from,u.to)):a&&n==1&&i.ranges.length>1&&(c=IF(i,l.pos))?c:a?i.addRange(u):de.create([u])}}}function IF(s,e){for(let t=0;t<s.ranges.length;t++){let{from:n,to:i}=s.ranges[t];if(n<=e&&i>=e)return de.create(s.ranges.slice(0,t).concat(s.ranges.slice(t+1)),s.mainIndex==t?0:s.mainIndex-(s.mainIndex>t?1:0))}return null}Qn.dragstart=(s,e)=>{let{selection:{main:t}}=s.state;if(e.target.draggable){let i=s.docView.nearest(e.target);if(i&&i.isWidget){let r=i.posAtStart,o=r+i.length;(r>=t.to||o<=t.from)&&(t=de.range(r,o))}}let{inputState:n}=s;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",pd(s.state,km,s.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1},Qn.dragend=s=>(s.inputState.draggedContent=null,!1);function Xb(s,e,t,n){if(t=pd(s.state,xm,t),!t)return;let i=s.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=s.inputState,o=n&&r&&AF(s,e)?{from:r.from,to:r.to}:null,a={from:i,insert:t},l=s.state.changes(o?[o,a]:a);s.focus(),s.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:o?"move.drop":"input.drop"}),s.inputState.draggedContent=null}Qn.drop=(s,e)=>{if(!e.dataTransfer)return!1;if(s.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,r=()=>{++i==t.length&&Xb(s,e,n.filter(o=>o!=null).join(s.state.lineBreak),!1)};for(let o=0;o<t.length;o++){let a=new FileReader;a.onerror=r,a.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(a.result)||(n[o]=a.result),r()},a.readAsText(t[o])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return Xb(s,e,n,!0),!0}return!1},Qn.paste=(s,e)=>{if(s.state.readOnly)return!0;s.observer.flush();let t=jb?null:e.clipboardData;return t?(Wb(s,t.getData("text/plain")||t.getData("text/uri-list")),!0):(PF(s),!1)};function RF(s,e){let t=s.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),s.focus()},50)}function FF(s){let e=[],t=[],n=!1;for(let i of s.selection.ranges)i.empty||(e.push(s.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:r}of s.selection.ranges){let o=s.doc.lineAt(r);o.number>i&&(e.push(o.text),t.push({from:o.from,to:Math.min(s.doc.length,o.to+1)})),i=o.number}n=!0}return{text:pd(s,km,e.join(s.lineBreak)),ranges:t,linewise:n}}let Lm=null;Qn.copy=Qn.cut=(s,e)=>{let{text:t,ranges:n,linewise:i}=FF(s.state);if(!t&&!i)return!1;Lm=i?t:null,e.type=="cut"&&!s.state.readOnly&&s.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let r=jb?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",t),!0):(RF(s,t),!1)};const Jb=er.define();function Zb(s,e){let t=[];for(let n of s.facet(yb)){let i=n(s,e);i&&t.push(i)}return t.length?s.update({effects:t,annotations:Jb.of(!0)}):null}function ew(s){setTimeout(()=>{let e=s.hasFocus;if(e!=s.inputState.notifiedFocused){let t=Zb(s.state,e);t?s.dispatch(t):s.update([])}},10)}An.focus=s=>{s.inputState.lastFocusTime=Date.now(),!s.scrollDOM.scrollTop&&(s.inputState.lastScrollTop||s.inputState.lastScrollLeft)&&(s.scrollDOM.scrollTop=s.inputState.lastScrollTop,s.scrollDOM.scrollLeft=s.inputState.lastScrollLeft),ew(s)},An.blur=s=>{s.observer.clearSelectionRange(),ew(s)},An.compositionstart=An.compositionupdate=s=>{s.observer.editContext||(s.inputState.compositionFirstChange==null&&(s.inputState.compositionFirstChange=!0),s.inputState.composing<0&&(s.inputState.composing=0))},An.compositionend=s=>{s.observer.editContext||(s.inputState.composing=-1,s.inputState.compositionEndedAt=Date.now(),s.inputState.compositionPendingKey=!0,s.inputState.compositionPendingChange=s.observer.pendingRecords().length>0,s.inputState.compositionFirstChange=null,Ie.chrome&&Ie.android?s.observer.flushSoon():s.inputState.compositionPendingChange?Promise.resolve().then(()=>s.observer.flush()):setTimeout(()=>{s.inputState.composing<0&&s.docView.hasComposition&&s.update([])},50))},An.contextmenu=s=>{s.inputState.lastContextMenu=Date.now()},Qn.beforeinput=(s,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&s.observer.editContext){let r=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),o=e.getTargetRanges();if(r&&o.length){let a=o[0],l=s.posAtDOM(a.startContainer,a.startOffset),c=s.posAtDOM(a.endContainer,a.endOffset);return Pm(s,{from:l,to:c,insert:s.state.toText(r)},null),!0}}let i;if(Ie.chrome&&Ie.android&&(i=Vb.find(r=>r.inputType==e.inputType))&&(s.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let r=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>r+10&&s.hasFocus&&(s.contentDOM.blur(),s.focus())},100)}return Ie.ios&&e.inputType=="deleteContentForward"&&s.observer.flushSoon(),Ie.safari&&e.inputType=="insertText"&&s.inputState.composing>=0&&setTimeout(()=>An.compositionend(s,e),20),!1};const tw=new Set;function BF(s){tw.has(s)||(tw.add(s),s.addEventListener("copy",()=>{}),s.addEventListener("cut",()=>{}))}const sw=["pre-wrap","normal","pre-line","break-spaces"];let _a=!1;function nw(){_a=!1}class NF{constructor(e){this.lineWrapping=e,this.doc=_t.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return sw.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,r,o){let a=sw.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=a;if(this.lineWrapping=a,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=r,l){this.heightSamples={};for(let c=0;c<o.length;c++){let u=o[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class VF{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class gi{constructor(e,t,n,i,r){this.from=e,this.length=t,this.top=n,this.height=i,this._content=r}get type(){return typeof this._content=="number"?js.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Nr?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new gi(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Wt=function(s){return s[s.ByPos=0]="ByPos",s[s.ByHeight=1]="ByHeight",s[s.ByPosNoHeight=2]="ByPosNoHeight",s}(Wt||(Wt={}));const md=.001;class Us{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>md&&(_a=!0),this.height=e)}replace(e,t,n){return Us.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let r=this,o=n.doc;for(let a=i.length-1;a>=0;a--){let{fromA:l,toA:c,fromB:u,toB:d}=i[a],f=r.lineAt(l,Wt.ByPosNoHeight,n.setDoc(t),0,0),p=f.to>=c?f:r.lineAt(c,Wt.ByPosNoHeight,n,0,0);for(d+=p.to-c,c=p.to;a>0&&f.from<=i[a-1].toA;)l=i[a-1].fromA,u=i[a-1].fromB,a--,l<f.from&&(f=r.lineAt(l,Wt.ByPosNoHeight,n,0,0));u+=f.from-l,l=f.from;let g=Em.build(n.setDoc(o),e,u,d);r=gd(r,r.replace(l,c,g))}return r.updateHeight(n,0)}static empty(){return new dn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,r=0;for(;;)if(t==n)if(i>r*2){let a=e[t-1];a.break?e.splice(--t,1,a.left,null,a.right):e.splice(--t,1,a.left,a.right),n+=1+a.break,i-=a.size}else if(r>i*2){let a=e[n];a.break?e.splice(n,1,a.left,null,a.right):e.splice(n,1,a.left,a.right),n+=2+a.break,r-=a.size}else break;else if(i<r){let a=e[t++];a&&(i+=a.size)}else{let a=e[--n];a&&(r+=a.size)}let o=0;return e[t-1]==null?(o=1,t--):e[t]==null&&(o=1,n++),new zF(Us.of(e.slice(0,t)),o,Us.of(e.slice(n)))}}function gd(s,e){return s==e?s:(s.constructor!=e.constructor&&(_a=!0),e)}Us.prototype.size=1;class iw extends Us{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new gi(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,r){return this.blockAt(0,n,i,r)}forEachLine(e,t,n,i,r,o){e<=r+this.length&&t>=r&&o(this.blockAt(0,n,i,r))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class dn extends iw{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new gi(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof dn||i instanceof bs&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof bs?i=new dn(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):Us.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class bs extends Us{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,r=i-n+1,o,a=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*r);o=l/r,this.length>r+1&&(a=(this.height-l)/(this.length-r-1))}else o=this.height/r;return{firstLine:n,lastLine:i,perLine:o,perChar:a}}blockAt(e,t,n,i){let{firstLine:r,lastLine:o,perLine:a,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=t.doc.lineAt(c),d=a+u.length*l,f=Math.max(n,e-d/2);return new gi(u.from,u.length,f,d,0)}else{let c=Math.max(0,Math.min(o-r,Math.floor((e-n)/a))),{from:u,length:d}=t.doc.line(r+c);return new gi(u,d,n+a*c,a,0)}}lineAt(e,t,n,i,r){if(t==Wt.ByHeight)return this.blockAt(e,n,i,r);if(t==Wt.ByPosNoHeight){let{from:p,to:g}=n.doc.lineAt(e);return new gi(p,g-p,0,0,0)}let{firstLine:o,perLine:a,perChar:l}=this.heightMetrics(n,r),c=n.doc.lineAt(e),u=a+c.length*l,d=c.number-o,f=i+a*d+l*(c.from-r-d);return new gi(c.from,c.length,Math.max(i,Math.min(f,i+this.height-u)),u,0)}forEachLine(e,t,n,i,r,o){e=Math.max(e,r),t=Math.min(t,r+this.length);let{firstLine:a,perLine:l,perChar:c}=this.heightMetrics(n,r);for(let u=e,d=i;u<=t;){let f=n.doc.lineAt(u);if(u==e){let g=f.number-a;d+=l*g+c*(e-r-g)}let p=l+c*f.length;o(new gi(f.from,f.length,d,p,0)),d+=p,u=f.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let r=n[n.length-1];r instanceof bs?n[n.length-1]=new bs(r.length+i):n.push(null,new bs(i-1))}if(e>0){let r=n[0];r instanceof bs?n[0]=new bs(e+r.length):n.unshift(new bs(e-1),null)}return Us.of(n)}decomposeLeft(e,t){t.push(new bs(e-1),null)}decomposeRight(e,t){t.push(null,new bs(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let r=t+this.length;if(i&&i.from<=t+this.length&&i.more){let o=[],a=Math.max(t,i.from),l=-1;for(i.from>t&&o.push(new bs(i.from-t-1).updateHeight(e,t));a<=r&&i.more;){let u=e.doc.lineAt(a).length;o.length&&o.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=md&&(l=-2);let f=new dn(u,d);f.outdated=!1,o.push(f),a+=u+1}a<=r&&o.push(null,new bs(r-a).updateHeight(e,a));let c=Us.of(o);return(l<0||Math.abs(c.height-this.height)>=md||Math.abs(l-this.heightMetrics(e,t).perLine)>=md)&&(_a=!0),gd(this,c)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class zF extends Us{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let r=n+this.left.height;return e<r?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,r,i+this.left.length+this.break)}lineAt(e,t,n,i,r){let o=i+this.left.height,a=r+this.left.length+this.break,l=t==Wt.ByHeight?e<o:e<a,c=l?this.left.lineAt(e,t,n,i,r):this.right.lineAt(e,t,n,o,a);if(this.break||(l?c.to<a:c.from>a))return c;let u=t==Wt.ByPosNoHeight?Wt.ByPosNoHeight:Wt.ByPos;return l?c.join(this.right.lineAt(a,u,n,o,a)):this.left.lineAt(a,u,n,i,r).join(c)}forEachLine(e,t,n,i,r,o){let a=i+this.left.height,l=r+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,i,r,o),t>=l&&this.right.forEachLine(e,t,n,a,l,o);else{let c=this.lineAt(l,Wt.ByPos,n,i,r);e<c.from&&this.left.forEachLine(e,c.from-1,n,i,r,o),c.to>=e&&c.from<=t&&o(c),t>c.to&&this.right.forEachLine(c.to+1,t,n,a,l,o)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let r=[];e>0&&this.decomposeLeft(e,r);let o=r.length;for(let a of n)r.push(a);if(e>0&&rw(r,o-1),t<this.length){let a=r.length;this.decomposeRight(t,r),rw(r,a)}return Us.of(r)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Us.of(this.break?[e,null,t]:[e,t]):(this.left=gd(this.left,e),this.right=gd(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:r,right:o}=this,a=t+r.length+this.break,l=null;return i&&i.from<=t+r.length&&i.more?l=r=r.updateHeight(e,t,n,i):r.updateHeight(e,t,n),i&&i.from<=a+o.length&&i.more?l=o=o.updateHeight(e,a,n,i):o.updateHeight(e,a,n),l?this.balanced(r,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function rw(s,e){let t,n;s[e]==null&&(t=s[e-1])instanceof bs&&(n=s[e+1])instanceof bs&&s.splice(e-1,3,new bs(t.length+1+n.length))}const jF=5;class Em{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof dn?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new dn(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,r=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new iw(o,i,n)):(o||r||i>=jF)&&this.addLineDeco(i,r,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new dn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new bs(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof dn)return e;let t=new dn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof dn)&&!this.isCovered?this.nodes.push(new dn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof dn&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let r=new Em(n,e);return bt.spans(t,n,i,r,0),r.finish(n)}}function WF(s,e,t){let n=new UF;return bt.compare(s,e,t,n,0),n.changes}class UF{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&od(e,t,this.changes,5)}}function HF(s,e){let t=s.getBoundingClientRect(),n=s.ownerDocument,i=n.defaultView||window,r=Math.max(0,t.left),o=Math.min(i.innerWidth,t.right),a=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=s.parentNode;c&&c!=n.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let f=u.getBoundingClientRect();r=Math.max(r,f.left),o=Math.min(o,f.right),a=Math.max(a,f.top),l=Math.min(c==s.parentNode?i.innerHeight:l,f.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:r-t.left,right:Math.max(r,o)-t.left,top:a-(t.top+e),bottom:Math.max(a,l)-(t.top+e)}}function QF(s){let e=s.getBoundingClientRect(),t=s.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function YF(s,e){let t=s.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Dm{constructor(e,t,n,i){this.from=e,this.to=t,this.size=n,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],r=t[n];if(i.from!=r.from||i.to!=r.to||i.size!=r.size)return!1}return!0}draw(e,t){return Qe.replace({widget:new qF(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class qF extends nr{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class ow{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=aw,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Cm).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new NF(t),this.stateDeco=e.facet(Nl).filter(n=>typeof n!="function"),this.heightMap=Us.empty().applyChanges(this.stateDeco,_t.empty,this.heightOracle.setDoc(e.doc),[new Mn(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Qe.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:r,to:o})=>i>=r&&i<=o)){let{from:r,to:o}=this.lineBlockAt(i);e.push(new vd(r,o))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?aw:new Im(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(jl(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(Nl).filter(u=>typeof u!="function");let i=e.changedRanges,r=Mn.extendWithRanges(i,WF(n,this.stateDeco,e?e.changes:cs.empty(this.state.doc.length))),o=this.heightMap.height,a=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);nw(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),r),(this.heightMap.height!=o||_a)&&(e.flags|=2),a?(this.scrollAnchorPos=e.changes.mapPos(a.from,-1),this.scrollAnchorHeight=a.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let l=r.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(bb)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,r=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?Et.RTL:Et.LTR;let o=this.heightOracle.mustRefreshForWrapping(r),a=t.getBoundingClientRect(),l=o||this.mustMeasureContent||this.contentDOMHeight!=a.height;this.contentDOMHeight=a.height,this.mustMeasureContent=!1;let c=0,u=0;if(a.width&&a.height){let{scaleX:b,scaleY:w}=j2(t,a);(b>.005&&Math.abs(this.scaleX-b)>.005||w>.005&&Math.abs(this.scaleY-w)>.005)&&(this.scaleX=b,this.scaleY=w,c|=16,o=l=!0)}let d=(parseInt(n.paddingTop)||0)*this.scaleY,f=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=f)&&(this.paddingTop=d,this.paddingBottom=f,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let p=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=Q2(e.scrollDOM);let g=(this.printing?YF:HF)(t,this.paddingTop),S=g.top-this.pixelViewport.top,k=g.bottom-this.pixelViewport.bottom;this.pixelViewport=g;let O=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(O!=this.inView&&(this.inView=O,O&&(l=!0)),!this.inView&&!this.scrollTarget&&!QF(e.dom))return 0;let $=a.width;if((this.contentDOMWidth!=$||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=a.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let b=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(b)&&(o=!0),o||i.lineWrapping&&Math.abs($-this.contentDOMWidth)>i.charWidth){let{lineHeight:w,charWidth:R,textHeight:T}=e.docView.measureTextSize();o=w>0&&i.refresh(r,w,R,T,Math.max(5,$/R),b),o&&(e.docView.minWidth=0,c|=16)}S>0&&k>0?u=Math.max(S,k):S<0&&k<0&&(u=Math.min(S,k)),nw();for(let w of this.viewports){let R=w.from==this.viewport.from?b:e.docView.measureVisibleLineHeights(w);this.heightMap=(o?Us.empty().applyChanges(this.stateDeco,_t.empty,this.heightOracle,[new Mn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,o,new VF(w.from,R))}_a&&(c|=2)}let M=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return M&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||M)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,r=this.heightOracle,{visibleTop:o,visibleBottom:a}=this,l=new vd(i.lineAt(o-n*1e3,Wt.ByHeight,r,0,0).from,i.lineAt(a+(1-n)*1e3,Wt.ByHeight,r,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,Wt.ByPos,r,0,0),f;t.y=="center"?f=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?f=d.top:f=d.bottom-u,l=new vd(i.lineAt(f-1e3/2,Wt.ByHeight,r,0,0).from,i.lineAt(f+u+1e3/2,Wt.ByHeight,r,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new vd(this.heightMap.lineAt(n,Wt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,Wt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,Wt.ByPos,this.heightOracle,0,0),{bottom:r}=this.heightMap.lineAt(t,Wt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:a}=this;return(e==0||i<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||r>=a+Math.max(10,Math.min(n,250)))&&i>o-2*1e3&&r<a+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new Dm(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,r=i>>1,o=i<<1;if(this.defaultTextDirection!=Et.LTR&&!n)return[];let a=[],l=(u,d,f,p)=>{if(d-u<r)return;let g=this.state.selection.main,S=[g.from];g.empty||S.push(g.to);for(let O of S)if(O>u&&O<d){l(u,O-10,f,p),l(O+10,d,f,p);return}let k=KF(e,O=>O.from>=f.from&&O.to<=f.to&&Math.abs(O.from-u)<r&&Math.abs(O.to-d)<r&&!S.some($=>O.from<$&&O.to>$));if(!k){if(d<f.to&&t&&n&&t.visibleRanges.some(M=>M.from<=d&&M.to>=d)){let M=t.moveToLineBoundary(de.cursor(d),!1,!0).head;M>u&&(d=M)}let O=this.gapSize(f,u,d,p),$=n||O<2e6?O:2e6;k=new Dm(u,d,O,$)}a.push(k)},c=u=>{if(u.length<o||u.type!=js.Text)return;let d=GF(u.from,u.to,this.stateDeco);if(d.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,p,g;if(n){let S=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,k,O;if(f!=null){let $=_d(d,f),M=((this.visibleBottom-this.visibleTop)/2+S)/u.height;k=$-M,O=$+M}else k=(this.visibleTop-u.top-S)/u.height,O=(this.visibleBottom-u.top+S)/u.height;p=yd(d,k),g=yd(d,O)}else{let S=d.total*this.heightOracle.charWidth,k=i*this.heightOracle.charWidth,O=0;if(S>2e6)for(let R of e)R.from>=u.from&&R.from<u.to&&R.size!=R.displaySize&&R.from*this.heightOracle.charWidth+O<this.pixelViewport.left&&(O=R.size-R.displaySize);let $=this.pixelViewport.left+O,M=this.pixelViewport.right+O,b,w;if(f!=null){let R=_d(d,f),T=((M-$)/2+k)/S;b=R-T,w=R+T}else b=($-k)/S,w=(M+k)/S;p=yd(d,b),g=yd(d,w)}p>u.from&&l(u.from,p,u,d),g<u.to&&l(g,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return a}gapSize(e,t,n,i){let r=_d(i,n)-_d(i,t);return this.heightOracle.lineWrapping?e.height*r:i.total*this.heightOracle.charWidth*r}updateLineGaps(e){Dm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Qe.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];bt.spans(t,this.viewport.from,this.viewport.to,{span(r,o){n.push({from:r,to:o})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let r=0;r<n.length&&!(i&8);r++){let o=this.visibleRanges[r],a=n[r];(o.from!=a.from||o.to!=a.to)&&(i|=4,e&&e.mapPos(o.from,-1)==a.from&&e.mapPos(o.to,1)==a.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||jl(this.heightMap.lineAt(e,Wt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||jl(this.heightMap.lineAt(this.scaler.fromDOM(e),Wt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return jl(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class vd{constructor(e,t){this.from=e,this.to=t}}function GF(s,e,t){let n=[],i=s,r=0;return bt.spans(t,s,e,{span(){},point(o,a){o>i&&(n.push({from:i,to:o}),r+=o-i),i=a}},20),i<e&&(n.push({from:i,to:e}),r+=e-i),{total:r,ranges:n}}function yd({total:s,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(s*t);for(let i=0;;i++){let{from:r,to:o}=e[i],a=o-r;if(n<=a)return r+n;n-=a}}function _d(s,e){let t=0;for(let{from:n,to:i}of s.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/s.total}function KF(s,e){for(let t of s)if(e(t))return t}const aw={toDOM(s){return s},fromDOM(s){return s},scale:1,eq(s){return s==this}};class Im{constructor(e,t,n){let i=0,r=0,o=0;this.viewports=n.map(({from:a,to:l})=>{let c=t.lineAt(a,Wt.ByPos,e,0,0).top,u=t.lineAt(l,Wt.ByPos,e,0,0).bottom;return i+=u-c,{from:a,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let a of this.viewports)a.domTop=o+(a.top-r)*this.scale,o=a.domBottom=a.domTop+(a.bottom-a.top),r=a.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.top)return i+(e-n)*this.scale;if(e<=r.bottom)return r.domTop+(e-r.top);n=r.bottom,i=r.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let r=t<this.viewports.length?this.viewports[t]:null;if(!r||e<r.domTop)return n+(e-i)/this.scale;if(e<=r.domBottom)return r.top+(e-r.domTop);n=r.bottom,i=r.domBottom}}eq(e){return e instanceof Im?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function jl(s,e){if(e.scale==1)return s;let t=e.toDOM(s.top),n=e.toDOM(s.bottom);return new gi(s.from,s.length,t,n-t,Array.isArray(s._content)?s._content.map(i=>jl(i,e)):s._content)}const bd=De.define({combine:s=>s.join(" ")}),Rm=De.define({combine:s=>s.indexOf(!0)>-1}),Fm=Rr.newName(),lw=Rr.newName(),cw=Rr.newName(),uw={"&light":"."+lw,"&dark":"."+cw};function Bm(s,e,t){return new Rr(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return s;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):s+" "+n}})}const XF=Bm("."+Fm,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},uw),JF={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Nm=Ie.ie&&Ie.ie_version<=11;class ZF{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new DR,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Ie.ie&&Ie.ie_version<=11||Ie.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&Ie.android&&e.constructor.EDIT_CONTEXT!==!1&&!(Ie.chrome&&Ie.chrome_version<126)&&(this.editContext=new tB(e),e.state.facet(rr)&&(e.contentDOM.editContext=this.editContext.editContext)),Nm&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(rr)?n.root.activeElement!=this.dom:!sd(this.dom,i))return;let r=i.anchorNode&&n.docView.nearest(i.anchorNode);if(r&&r.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Ie.ie&&Ie.ie_version<=11||Ie.android&&Ie.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Dl(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=El(e.root);if(!t)return!1;let n=Ie.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&eB(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=sd(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&RR(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,JF),Nm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Nm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let r=this.delayedAndroidKey;r&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=r.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&r.force&&pa(this.dom,r.key,r.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let r of e){let o=this.readMutation(r);o&&(o.typeOver&&(i=!0),t==-1?{from:t,to:n}=o:(t=Math.min(o.from,t),n=Math.max(o.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&sd(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let r=new vF(this.view,e,t,n);return this.view.docView.domChanged={newSel:r.newSel?r.newSel.main:null},r}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=Bb(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=dw(t,e.previousSibling||e.target.previousSibling,-1),i=dw(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(rr)!=e.state.facet(rr)&&(e.view.contentDOM.editContext=e.state.facet(rr)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function dw(s,e,t){for(;e;){let n=Lt.get(e);if(n&&n.parent==s)return n;let i=e.parentNode;e=i!=s.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function hw(s,e){let t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset,o=s.docView.domAtPos(s.state.selection.main.anchor);return Dl(o.node,o.offset,i,r)&&([t,n,i,r]=[i,r,t,n]),{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:r}}function eB(s,e){if(e.getComposedRanges){let i=e.getComposedRanges(s.root)[0];if(i)return hw(s,i)}let t=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return s.contentDOM.addEventListener("beforeinput",n,!0),s.dom.ownerDocument.execCommand("indent"),s.contentDOM.removeEventListener("beforeinput",n,!0),t?hw(s,t):null}class tB{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let i=e.state.selection.main,{anchor:r,head:o}=i,a=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:a,drifted:!1});let c={from:a,to:l,insert:_t.of(n.text.split(`
`))};if(c.from==this.from&&r<this.from?c.from=r:c.to==this.to&&r>this.to&&(c.to=r),c.from==c.to&&!c.insert.length){let u=de.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));u.main.eq(i)||e.dispatch({selection:u,userEvent:"select"});return}if((Ie.mac||Ie.android)&&c.from==o-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:a,to:l,insert:_t.of([n.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);Pm(e,c,de.single(this.toEditorPos(n.selectionStart,u),this.toEditorPos(n.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let i=[],r=null;for(let o=this.toEditorPos(n.rangeStart),a=this.toEditorPos(n.rangeEnd);o<a;o++){let l=e.coordsForChar(o);r=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||r||new DOMRect,i.push(r)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let r of n.getTextFormats()){let o=r.underlineStyle,a=r.underlineThickness;if(o!="None"&&a!="None"){let l=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);if(l<c){let u=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${a=="Thin"?1:2}px`;i.push(Qe.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:xb.of(Qe.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=El(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((r,o,a,l,c)=>{if(n)return;let u=c.length-(o-r);if(i&&o>=i.to)if(i.from==r&&i.to==o&&i.insert.eq(c)){i=this.pendingContextChange=null,t+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(r+=t,o+=t,o<=this.from)this.from+=u,this.to+=u;else if(r<this.to){if(r<this.from||o>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(r),this.toContextPos(o),c.toString()),this.to+=u}t+=u}),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Le{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(r=>n(r,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||IR(e.parent)||document,this.viewState=new ow(e.state||ut.create(e)),e.scrollTo&&e.scrollTo.is(ld)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ya).map(i=>new Sm(i));for(let i of this.plugins)i.update(this);this.observer=new ZF(this),this.inputState=new xF(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ab(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof us?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,r=this.state;for(let f of e){if(f.startState!=r)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");r=f.state}if(this.destroyed){this.viewState.state=r;return}let o=this.hasFocus,a=0,l=null;e.some(f=>f.annotation(Jb))?(this.inputState.notifiedFocused=o,a=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,l=Zb(r,o),l||(a=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(r.doc)||!this.state.selection.eq(r.selection))&&(u=null)):this.observer.clear(),r.facet(ut.phrases)!=this.state.facet(ut.phrases))return this.setState(r);i=ud.create(this,r,e),i.flags|=a;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(d&&(d=d.map(f.changes)),f.scrollIntoView){let{main:p}=f.state.selection;d=new va(p.empty?p:de.cursor(p.head,p.head>p.anchor?-1:1))}for(let p of f.effects)p.is(ld)&&(d=p.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=wd.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Vl)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(bd)!=i.state.facet(bd)&&(this.viewState.mustMeasureContent=!0),(t||n||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let f of this.state.facet(wm))try{f(i)}catch(p){Ws(this.state,p,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Bb(this,u)&&c.force&&pa(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new ow(e),this.plugins=e.facet(ya).map(n=>new Sm(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new Ab(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ya),n=e.state.facet(ya);if(t!=n){let i=[];for(let r of n){let o=t.indexOf(r);if(o<0)i.push(new Sm(r));else{let a=this.plugins[o];a.mustUpdate=e,i.push(a)}}for(let r of this.plugins)r.mustUpdate!=e&&r.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){Ws(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:r,scrollAnchorHeight:o}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let a=0;;a++){if(o<0)if(Q2(n))r=-1,o=this.viewState.heightMap.height;else{let p=this.viewState.scrollAnchorAt(i);r=p.from,o=p.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(a>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(p=>{try{return p.read(this)}catch(g){return Ws(this.state,g),fw}}),d=ud.create(this,this.state,[]),f=!1;d.flags|=l,t?t.flags|=l:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),f=this.docView.update(d),f&&this.docViewUpdate());for(let p=0;p<c.length;p++)if(u[p]!=fw)try{let g=c[p];g.write&&g.write(u[p],this)}catch(g){Ws(this.state,g)}if(f&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let g=(r<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(r).top)-o;if(g>1||g<-1){i=i+g,n.scrollTop=i/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(wm))a(t)}get themeClasses(){return Fm+" "+(this.state.facet(Rm)?cw:lw)+" "+this.state.facet(bd)}updateAttrs(){let e=pw(this,kb,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(rr)?"true":"false",class:"cm-content",style:`${Ie.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),pw(this,Cm,t);let n=this.observer.ignore(()=>{let i=mm(this.contentDOM,this.contentAttrs,t),r=mm(this.dom,this.editorAttrs,e);return i||r});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(Le.announce)){t&&(this.announceDOM.textContent=""),t=!1;let r=this.announceDOM.appendChild(document.createElement("div"));r.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Vl);let e=this.state.facet(Le.cspNonce);Rr.mount(this.root,this.styleModules.concat(XF).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return Tm(this,e,Ib(this,e,t,n))}moveByGroup(e,t){return Tm(this,e,Ib(this,e,t,n=>fF(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),r=n[t?n.length-1:0];return de.cursor(r.side(t,i)+e.from,r.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return hF(this,e,t,n)}moveVertically(e,t,n){return Tm(this,e,pF(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Eb(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),r=this.bidiSpans(i),o=r[Vr.find(r,e-i.from,-1,t)];return Il(n,o.dir==Et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(_b)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>sB)return db(e.length);let t=this.textDirectionAt(e.from),n;for(let r of this.bidiCache)if(r.from==e.from&&r.dir==t&&(r.fresh||ub(r.isolates,n=Ob(this,e))))return r.order;n||(n=Ob(this,e));let i=KR(e.text,t,n);return this.bidiCache.push(new wd(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Ie.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{W2(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ld.of(new va(typeof e=="number"?de.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return ld.of(new va(de.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Xt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Xt.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Rr.newName(),i=[bd.of(n),Vl.of(Bm(`.${n}`,e))];return t&&t.dark&&i.push(Rm.of(!0)),i}static baseTheme(e){return Co.lowest(Vl.of(Bm("."+Fm,e,uw)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&Lt.get(n)||Lt.get(e);return((t=i==null?void 0:i.rootView)===null||t===void 0?void 0:t.view)||null}}Le.styleModule=Vl,Le.inputHandler=vb,Le.clipboardInputFilter=xm,Le.clipboardOutputFilter=km,Le.scrollHandler=wb,Le.focusChangeEffect=yb,Le.perLineTextDirection=_b,Le.exceptionSink=gb,Le.updateListener=wm,Le.editable=rr,Le.mouseSelectionStyle=mb,Le.dragMovesSelection=pb,Le.clickAddsSelectionRange=fb,Le.decorations=Nl,Le.outerDecorations=Sb,Le.atomicRanges=cd,Le.bidiIsolatedRanges=Cb,Le.scrollMargins=Mb,Le.darkTheme=Rm,Le.cspNonce=De.define({combine:s=>s.length?s[0]:""}),Le.contentAttributes=Cm,Le.editorAttributes=kb,Le.lineWrapping=Le.contentAttributes.of({class:"cm-lineWrapping"}),Le.announce=rt.define();const sB=4096,fw={};class wd{constructor(e,t,n,i,r,o){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=r,this.order=o}static update(e,t){if(t.empty&&!e.some(r=>r.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:Et.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let o=e[r];o.dir==i&&!t.touchesRange(o.from,o.to)&&n.push(new wd(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function pw(s,e,t){for(let n=s.state.facet(e),i=n.length-1;i>=0;i--){let r=n[i],o=typeof r=="function"?r(s):r;o&&pm(o,t)}return t}const nB=Ie.mac?"mac":Ie.windows?"win":Ie.linux?"linux":"key";function iB(s,e){const t=s.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,r,o,a;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))a=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))r=!0;else if(/^s(hift)?$/i.test(c))o=!0;else if(/^mod$/i.test(c))e=="mac"?a=!0:r=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),r&&(n="Ctrl-"+n),a&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function xd(s,e,t){return e.altKey&&(s="Alt-"+s),e.ctrlKey&&(s="Ctrl-"+s),e.metaKey&&(s="Meta-"+s),t!==!1&&e.shiftKey&&(s="Shift-"+s),s}const rB=Co.default(Le.domEventHandlers({keydown(s,e){return vw(gw(e.state),s,e,"editor")}})),Vm=De.define({enables:rB}),mw=new WeakMap;function gw(s){let e=s.facet(Vm),t=mw.get(e);return t||mw.set(e,t=lB(e.reduce((n,i)=>n.concat(i),[]))),t}function oB(s,e,t){return vw(gw(s.state),e,s,t)}let zr=null;const aB=4e3;function lB(s,e=nB){let t=Object.create(null),n=Object.create(null),i=(o,a)=>{let l=n[o];if(l==null)n[o]=a;else if(l!=a)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},r=(o,a,l,c,u)=>{var d,f;let p=t[o]||(t[o]=Object.create(null)),g=a.split(/ (?!$)/).map(O=>iB(O,e));for(let O=1;O<g.length;O++){let $=g.slice(0,O).join(" ");i($,!0),p[$]||(p[$]={preventDefault:!0,stopPropagation:!1,run:[M=>{let b=zr={view:M,prefix:$,scope:o};return setTimeout(()=>{zr==b&&(zr=null)},aB),!0}]})}let S=g.join(" ");i(S,!1);let k=p[S]||(p[S]={preventDefault:!1,stopPropagation:!1,run:((f=(d=p._any)===null||d===void 0?void 0:d.run)===null||f===void 0?void 0:f.slice())||[]});l&&k.run.push(l),c&&(k.preventDefault=!0),u&&(k.stopPropagation=!0)};for(let o of s){let a=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let c of a){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=o;for(let f in u)u[f].run.push(p=>d(p,zm))}let l=o[e]||o.key;if(l)for(let c of a)r(c,l,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(c,"Shift-"+l,o.shift,o.preventDefault,o.stopPropagation)}return t}let zm=null;function vw(s,e,t,n){zm=e;let i=TR(e),r=en(i,0),o=di(r)==i.length&&i!=" ",a="",l=!1,c=!1,u=!1;zr&&zr.view==t&&zr.scope==n&&(a=zr.prefix+" ",zb.indexOf(e.keyCode)<0&&(c=!0,zr=null));let d=new Set,f=k=>{if(k){for(let O of k.run)if(!d.has(O)&&(d.add(O),O(t)))return k.stopPropagation&&(u=!0),!0;k.preventDefault&&(k.stopPropagation&&(u=!0),c=!0)}return!1},p=s[n],g,S;return p&&(f(p[a+xd(i,e,!o)])?l=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Ie.windows&&e.ctrlKey&&e.altKey)&&!(Ie.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(g=Fr[e.keyCode])&&g!=i?(f(p[a+xd(g,e,!0)])||e.shiftKey&&(S=Ll[e.keyCode])!=i&&S!=g&&f(p[a+xd(S,e,!1)]))&&(l=!0):o&&e.shiftKey&&f(p[a+xd(i,e,!0)])&&(l=!0),!l&&f(p._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),zm=null,l}class Wl{constructor(e,t,n,i,r){this.className=e,this.left=t,this.top=n,this.width=i,this.height=r}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let r=yw(e);return[new Wl(t,i.left-r.left,i.top-r.top,null,i.bottom-i.top)]}else return cB(e,t,n)}}function yw(s){let e=s.scrollDOM.getBoundingClientRect();return{left:(s.textDirection==Et.LTR?e.left:e.right-s.scrollDOM.clientWidth*s.scaleX)-s.scrollDOM.scrollLeft*s.scaleX,top:e.top-s.scrollDOM.scrollTop*s.scaleY}}function _w(s,e,t,n){let i=s.coordsAtPos(e,t*2);if(!i)return n;let r=s.dom.getBoundingClientRect(),o=(i.top+i.bottom)/2,a=s.posAtCoords({x:r.left+1,y:o}),l=s.posAtCoords({x:r.right-1,y:o});return a==null||l==null?n:{from:Math.max(n.from,Math.min(a,l)),to:Math.min(n.to,Math.max(a,l))}}function cB(s,e,t){if(t.to<=s.viewport.from||t.from>=s.viewport.to)return[];let n=Math.max(t.from,s.viewport.from),i=Math.min(t.to,s.viewport.to),r=s.textDirection==Et.LTR,o=s.contentDOM,a=o.getBoundingClientRect(),l=yw(s),c=o.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),f=a.right-(u?parseInt(u.paddingRight):0),p=$m(s,n,1),g=$m(s,i,-1),S=p.type==js.Text?p:null,k=g.type==js.Text?g:null;if(S&&(s.lineWrapping||p.widgetLineBreaks)&&(S=_w(s,n,1,S)),k&&(s.lineWrapping||g.widgetLineBreaks)&&(k=_w(s,i,-1,k)),S&&k&&S.from==k.from&&S.to==k.to)return $(M(t.from,t.to,S));{let w=S?M(t.from,null,S):b(p,!1),R=k?M(null,t.to,k):b(g,!0),T=[];return(S||p).to<(k||g).from-(S&&k?1:0)||p.widgetLineBreaks>1&&w.bottom+s.defaultLineHeight/2<R.top?T.push(O(d,w.bottom,f,R.top)):w.bottom<R.top&&s.elementAtHeight((w.bottom+R.top)/2).type==js.Text&&(w.bottom=R.top=(w.bottom+R.top)/2),$(w).concat(T).concat($(R))}function O(w,R,T,E){return new Wl(e,w-l.left,R-l.top,T-w,E-R)}function $({top:w,bottom:R,horizontal:T}){let E=[];for(let F=0;F<T.length;F+=2)E.push(O(T[F],w,T[F+1],R));return E}function M(w,R,T){let E=1e9,F=-1e9,K=[];function W(N,Q,H,J,ae){let be=s.coordsAtPos(N,N==T.to?-2:2),We=s.coordsAtPos(H,H==T.from?2:-2);!be||!We||(E=Math.min(be.top,We.top,E),F=Math.max(be.bottom,We.bottom,F),ae==Et.LTR?K.push(r&&Q?d:be.left,r&&J?f:We.right):K.push(!r&&J?d:We.left,!r&&Q?f:be.right))}let A=w??T.from,D=R??T.to;for(let N of s.visibleRanges)if(N.to>A&&N.from<D)for(let Q=Math.max(N.from,A),H=Math.min(N.to,D);;){let J=s.state.doc.lineAt(Q);for(let ae of s.bidiSpans(J)){let be=ae.from+J.from,We=ae.to+J.from;if(be>=H)break;We>Q&&W(Math.max(be,Q),w==null&&be<=A,Math.min(We,H),R==null&&We>=D,ae.dir)}if(Q=J.to+1,Q>=H)break}return K.length==0&&W(A,w==null,D,R==null,s.textDirection),{top:E,bottom:F,horizontal:K}}function b(w,R){let T=a.top+(R?w.top:w.bottom);return{top:T,bottom:T,horizontal:[]}}}function uB(s,e){return s.constructor==e.constructor&&s.eq(e)}class dB{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(kd)!=e.state.facet(kd)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(kd);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!uB(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const kd=De.define();function bw(s){return[Xt.define(e=>new dB(e,s)),kd.of(s)]}const Ul=De.define({combine(s){return fi(s,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function ww(s={}){return[Ul.of(s),hB,fB,pB,bb.of(!0)]}function xw(s){return s.startState.facet(Ul)!=s.state.facet(Ul)}const hB=bw({above:!0,markers(s){let{state:e}=s,t=e.facet(Ul),n=[];for(let i of e.selection.ranges){let r=i==e.selection.main;if(i.empty||t.drawRangeCursor){let o=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",a=i.empty?i:de.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Wl.forRange(s,o,a))n.push(l)}}return n},update(s,e){s.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=xw(s);return t&&kw(s.state,e),s.docChanged||s.selectionSet||t},mount(s,e){kw(e.state,s)},class:"cm-cursorLayer"});function kw(s,e){e.style.animationDuration=s.facet(Ul).cursorBlinkRate+"ms"}const fB=bw({above:!1,markers(s){return s.state.selection.ranges.map(e=>e.empty?[]:Wl.forRange(s,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(s,e){return s.docChanged||s.selectionSet||s.viewportChanged||xw(s)},class:"cm-selectionLayer"}),pB=Co.highest(Le.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),Sw=rt.define({map(s,e){return s==null?null:e.mapPos(s)}}),Hl=ms.define({create(){return null},update(s,e){return s!=null&&(s=e.changes.mapPos(s)),e.effects.reduce((t,n)=>n.is(Sw)?n.value:t,s)}}),mB=Xt.fromClass(class{constructor(s){this.view=s,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(s){var e;let t=s.state.field(Hl);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(s.startState.field(Hl)!=t||s.docChanged||s.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:s}=this,e=s.state.field(Hl),t=e!=null&&s.coordsAtPos(e);if(!t)return null;let n=s.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+s.scrollDOM.scrollLeft*s.scaleX,top:t.top-n.top+s.scrollDOM.scrollTop*s.scaleY,height:t.bottom-t.top}}drawCursor(s){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;s?(this.cursor.style.left=s.left/e+"px",this.cursor.style.top=s.top/t+"px",this.cursor.style.height=s.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(s){this.view.state.field(Hl)!=s&&this.view.dispatch({effects:Sw.of(s)})}},{eventObservers:{dragover(s){this.setDropPos(this.view.posAtCoords({x:s.clientX,y:s.clientY}))},dragleave(s){(s.target==this.view.contentDOM||!this.view.contentDOM.contains(s.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function gB(){return[Hl,mB]}function Cw(s,e,t,n,i){e.lastIndex=0;for(let r=s.iterRange(t,n),o=t,a;!r.next().done;o+=r.value.length)if(!r.lineBreak)for(;a=e.exec(r.value);)i(o+a.index,a)}function vB(s,e){let t=s.visibleRanges;if(t.length==1&&t[0].from==s.viewport.from&&t[0].to==s.viewport.to)return t;let n=[];for(let{from:i,to:r}of t)i=Math.max(s.state.doc.lineAt(i).from,i-e),r=Math.min(s.state.doc.lineAt(r).to,r+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=r:n.push({from:i,to:r});return n}class yB{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:r,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(a,l,c,u)=>i(u,c,c+a[0].length,a,l);else if(typeof n=="function")this.addMatch=(a,l,c,u)=>{let d=n(a,l,c);d&&u(c,c+a[0].length,d)};else if(n)this.addMatch=(a,l,c,u)=>u(c,c+a[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=r,this.maxLength=o}createDeco(e){let t=new tr,n=t.add.bind(t);for(let{from:i,to:r}of vB(e,this.maxLength))Cw(e.state.doc,this.regexp,i,r,(o,a)=>this.addMatch(a,e,o,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((r,o,a,l)=>{l>=e.view.viewport.from&&a<=e.view.viewport.to&&(n=Math.min(a,n),i=Math.max(l,i))}),e.viewportMoved||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let r of e.visibleRanges){let o=Math.max(r.from,n),a=Math.min(r.to,i);if(a>=o){let l=e.state.doc.lineAt(o),c=l.to<a?e.state.doc.lineAt(a):l,u=Math.max(r.from,l.from),d=Math.min(r.to,c.to);if(this.boundary){for(;o>l.from;o--)if(this.boundary.test(l.text[o-1-l.from])){u=o;break}for(;a<c.to;a++)if(this.boundary.test(c.text[a-c.from])){d=a;break}}let f=[],p,g=(S,k,O)=>f.push(O.range(S,k));if(l==c)for(this.regexp.lastIndex=u-l.from;(p=this.regexp.exec(l.text))&&p.index<d-l.from;)this.addMatch(p,e,p.index+l.from,g);else Cw(e.state.doc,this.regexp,u,d,(S,k)=>this.addMatch(k,e,S,g));t=t.update({filterFrom:u,filterTo:d,filter:(S,k)=>S<u||k>d,add:f})}}return t}}const jm=/x/.unicode!=null?"gu":"g",_B=new RegExp(`[\0-\b
--\u2028\u2029\uFEFF-]`,jm),bB={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wm=null;function wB(){var s;if(Wm==null&&typeof document<"u"&&document.body){let e=document.body.style;Wm=((s=e.tabSize)!==null&&s!==void 0?s:e.MozTabSize)!=null}return Wm||!1}const Sd=De.define({combine(s){let e=fi(s,{render:null,specialChars:_B,addSpecialChars:null});return(e.replaceTabs=!wB())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,jm)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,jm)),e}});function xB(s={}){return[Sd.of(s),kB()]}let Ow=null;function kB(){return Ow||(Ow=Xt.fromClass(class{constructor(s){this.view=s,this.decorations=Qe.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(s.state.facet(Sd)),this.decorations=this.decorator.createDeco(s)}makeDecorator(s){return new yB({regexp:s.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,r=en(e[0],0);if(r==9){let o=i.lineAt(n),a=t.state.tabSize,l=da(o.text,a,n-o.from);return Qe.replace({widget:new MB((a-l%a)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Qe.replace({widget:new OB(s,r)}))},boundary:s.replaceTabs?void 0:/[^]/})}update(s){let e=s.state.facet(Sd);s.startState.facet(Sd)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(s.view)):this.decorations=this.decorator.updateDeco(s,this.decorations)}},{decorations:s=>s.decorations}))}const SB="";function CB(s){return s>=32?SB:s==10?"":String.fromCharCode(9216+s)}class OB extends nr{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=CB(this.code),n=e.state.phrase("Control character")+" "+(bB[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let r=document.createElement("span");return r.textContent=t,r.title=n,r.setAttribute("aria-label",n),r.className="cm-specialChar",r}ignoreEvent(){return!1}}class MB extends nr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function AB(){return TB}const $B=Qe.line({class:"cm-activeLine"}),TB=Xt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.docChanged||s.selectionSet)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=-1,t=[];for(let n of s.state.selection.ranges){let i=s.lineBlockAt(n.head);i.from>e&&(t.push($B.range(i.from)),e=i.from)}return Qe.set(t)}},{decorations:s=>s.decorations});class PB extends nr{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?ha(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=Il(t[0],n.direction!="rtl"),r=parseInt(n.lineHeight);return i.bottom-i.top>r*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+r}:i}ignoreEvent(){return!1}}function LB(s){return[Xt.fromClass(class{constructor(t){this.view=t,this.placeholder=Qe.set([Qe.widget({widget:new PB(s),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?Qe.none:this.placeholder}},{decorations:t=>t.decorations}),Le.contentAttributes.of({"aria-placeholder":s})]}const Um=2e3;function EB(s,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),r=[];if(e.off>Um||t.off>Um||e.col<0||t.col<0){let o=Math.min(e.off,t.off),a=Math.max(e.off,t.off);for(let l=n;l<=i;l++){let c=s.doc.line(l);c.length<=a&&r.push(de.range(c.from+o,c.to+a))}}else{let o=Math.min(e.col,t.col),a=Math.max(e.col,t.col);for(let l=n;l<=i;l++){let c=s.doc.line(l),u=im(c.text,o,s.tabSize,!0);if(u<0)r.push(de.cursor(c.to));else{let d=im(c.text,a,s.tabSize);r.push(de.range(c.from+u,c.from+d))}}}return r}function DB(s,e){let t=s.coordsAtPos(s.viewport.from);return t?Math.round(Math.abs((t.left-e)/s.defaultCharacterWidth)):-1}function Mw(s,e){let t=s.posAtCoords({x:e.clientX,y:e.clientY},!1),n=s.state.doc.lineAt(t),i=t-n.from,r=i>Um?-1:i==n.length?DB(s,e.clientX):da(n.text,s.state.tabSize,t-n.from);return{line:n.number,col:r,off:i}}function IB(s,e){let t=Mw(s,e),n=s.state.selection;return t?{update(i){if(i.docChanged){let r=i.changes.mapPos(i.startState.doc.line(t.line).from),o=i.state.doc.lineAt(r);t={line:o.number,col:t.col,off:Math.min(t.off,o.length)},n=n.map(i.changes)}},get(i,r,o){let a=Mw(s,i);if(!a)return n;let l=EB(s.state,t,a);return l.length?o?de.create(l.concat(n.ranges)):de.create(l):n}}:null}function RB(s){let e=t=>t.altKey&&t.button==0;return Le.mouseSelectionStyle.of((t,n)=>e(n)?IB(t,n):null)}const FB={Alt:[18,s=>!!s.altKey],Control:[17,s=>!!s.ctrlKey],Shift:[16,s=>!!s.shiftKey],Meta:[91,s=>!!s.metaKey]},BB={style:"cursor: crosshair"};function NB(s={}){let[e,t]=FB[s.key||"Alt"],n=Xt.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,Le.contentAttributes.of(i=>{var r;return!((r=i.plugin(n))===null||r===void 0)&&r.isDown?BB:null})]}const Ql="-10000px";class Aw{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(o=>o);let r=null;this.tooltipViews=this.tooltips.map(o=>r=n(o,r))}update(e,t){var n;let i=e.state.facet(this.facet),r=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let o=[],a=t?[]:null;for(let l=0;l<r.length;l++){let c=r[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let f=this.tooltips[d];f&&f.create==c.create&&(u=d)}if(u<0)o[l]=this.createTooltipView(c,l?o[l-1]:null),a&&(a[l]=!!c.above);else{let d=o[l]=this.tooltipViews[u];a&&(a[l]=t[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)o.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(a.forEach((l,c)=>t[c]=l),t.length=a.length),this.input=i,this.tooltips=r,this.tooltipViews=o,!0}}function VB(s){let e=s.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Hm=De.define({combine:s=>{var e,t,n;return{position:Ie.ios?"absolute":((e=s.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=s.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=s.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||VB}}}),$w=new WeakMap,Qm=Xt.fromClass(class{constructor(s){this.view=s,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=s.state.facet(Hm);this.position=e.position,this.parent=e.parent,this.classes=s.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new Aw(s,Ym,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),s.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let s of this.manager.tooltipViews)this.intersectionObserver.observe(s.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(s){s.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(s,this.above);e&&this.observeIntersection();let t=e||s.geometryChanged,n=s.state.facet(Hm);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(s,e){let t=s.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),s.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=Ql,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var s,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(s=n.destroy)===null||s===void 0||s.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let s=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:r}=this.manager.tooltipViews[0];if(Ie.gecko)t=r.offsetParent!=this.container.ownerDocument.body;else if(r.style.top==Ql&&r.style.left=="0px"){let o=r.getBoundingClientRect();t=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(t||this.position=="absolute")if(this.parent){let r=this.parent.getBoundingClientRect();r.width&&r.height&&(s=r.width/this.parent.offsetWidth,e=r.height/this.parent.offsetHeight)}else({scaleX:s,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=Om(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((r,o)=>{let a=this.manager.tooltipViews[o];return a.getCoords?a.getCoords(r.pos):this.view.coordsAtPos(r.pos)}),size:this.manager.tooltipViews.map(({dom:r})=>r.getBoundingClientRect()),space:this.view.state.facet(Hm).tooltipSpace(this.view),scaleX:s,scaleY:e,makeAbsolute:t}}writeMeasure(s){var e;if(s.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let a of this.manager.tooltipViews)a.dom.style.position="absolute"}let{visible:t,space:n,scaleX:i,scaleY:r}=s,o=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,d=s.pos[a],f=s.size[a];if(!d||l.clip!==!1&&(d.bottom<=Math.max(t.top,n.top)||d.top>=Math.min(t.bottom,n.bottom)||d.right<Math.max(t.left,n.left)-.1||d.left>Math.min(t.right,n.right)+.1)){u.style.top=Ql;continue}let p=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,g=p?7:0,S=f.right-f.left,k=(e=$w.get(c))!==null&&e!==void 0?e:f.bottom-f.top,O=c.offset||jB,$=this.view.textDirection==Et.LTR,M=f.width>n.right-n.left?$?n.left:n.right-f.width:$?Math.max(n.left,Math.min(d.left-(p?14:0)+O.x,n.right-S)):Math.min(Math.max(n.left,d.left-S+(p?14:0)-O.x),n.right-S),b=this.above[a];!l.strictSide&&(b?d.top-k-g-O.y<n.top:d.bottom+k+g+O.y>n.bottom)&&b==n.bottom-d.bottom>d.top-n.top&&(b=this.above[a]=!b);let w=(b?d.top-n.top:n.bottom-d.bottom)-g;if(w<k&&c.resize!==!1){if(w<this.view.defaultLineHeight){u.style.top=Ql;continue}$w.set(c,k),u.style.height=(k=w)/r+"px"}else u.style.height&&(u.style.height="");let R=b?d.top-k-g-O.y:d.bottom+g+O.y,T=M+S;if(c.overlap!==!0)for(let E of o)E.left<T&&E.right>M&&E.top<R+k&&E.bottom>R&&(R=b?E.top-k-2-g:E.bottom+g+2);if(this.position=="absolute"?(u.style.top=(R-s.parent.top)/r+"px",Tw(u,(M-s.parent.left)/i)):(u.style.top=R/r+"px",Tw(u,M/i)),p){let E=d.left+($?O.x:-O.x)-(M+14-7);p.style.left=E/i+"px"}c.overlap!==!0&&o.push({left:M,top:R,right:T,bottom:R+k}),u.classList.toggle("cm-tooltip-above",b),u.classList.toggle("cm-tooltip-below",!b),c.positioned&&c.positioned(s.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let s of this.manager.tooltipViews)s.dom.style.top=Ql}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Tw(s,e){let t=parseInt(s.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(s.style.left=e+"px")}const zB=Le.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),jB={x:0,y:0},Ym=De.define({enables:[Qm,zB]}),Cd=De.define({combine:s=>s.reduce((e,t)=>e.concat(t),[])});class Od{static create(e){return new Od(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Aw(e,Cd,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const WB=Ym.compute([Cd],s=>{let e=s.facet(Cd);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:Od.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class UB{constructor(e,t,n,i,r){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=r,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,r=1;if(n instanceof Br)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let a=e.coordsAtPos(i);if(!a||t.y<a.top||t.y>a.bottom||t.x<a.left-e.defaultCharacterWidth||t.x>a.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==Et.RTL?-1:1;r=t.x<a.left?-c:c}let o=this.source(e,i,r);if(o!=null&&o.then){let a=this.pending={pos:i};o.then(l=>{this.pending==a&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Ws(e.state,l,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Qm),t=e?e.manager.tooltips.findIndex(n=>n.create==Od.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:r}=this;if(i.length&&r&&!HB(r.dom,e)||this.pending){let{pos:o}=i[0]||this.pending,a=(n=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:o;(o==a?this.view.posAtCoords(this.lastMove)!=o:!QB(this.view,o,a,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Md=4;function HB(s,e){let{left:t,right:n,top:i,bottom:r}=s.getBoundingClientRect(),o;if(o=s.querySelector(".cm-tooltip-arrow")){let a=o.getBoundingClientRect();i=Math.min(a.top,i),r=Math.max(a.bottom,r)}return e.clientX>=t-Md&&e.clientX<=n+Md&&e.clientY>=i-Md&&e.clientY<=r+Md}function QB(s,e,t,n,i,r){let o=s.scrollDOM.getBoundingClientRect(),a=s.documentTop+s.documentPadding.top+s.contentHeight;if(o.left>n||o.right<n||o.top>i||Math.min(o.bottom,a)<i)return!1;let l=s.posAtCoords({x:n,y:i},!1);return l>=e&&l<=t}function YB(s,e={}){let t=rt.define(),n=ms.define({create(){return[]},update(i,r){if(i.length&&(e.hideOnChange&&(r.docChanged||r.selection)?i=[]:e.hideOn&&(i=i.filter(o=>!e.hideOn(r,o))),r.docChanged)){let o=[];for(let a of i){let l=r.changes.mapPos(a.pos,-1,zs.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),a);c.pos=l,c.end!=null&&(c.end=r.changes.mapPos(c.end)),o.push(c)}}i=o}for(let o of r.effects)o.is(t)&&(i=o.value),o.is(qB)&&(i=[]);return i},provide:i=>Cd.from(i)});return{active:n,extension:[n,Xt.define(i=>new UB(i,s,n,t,e.hoverTime||300)),WB]}}function Pw(s,e){let t=s.plugin(Qm);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const qB=rt.define(),Lw=De.define({combine(s){let e,t;for(let n of s)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function Yl(s,e){let t=s.plugin(Ew),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const Ew=Xt.fromClass(class{constructor(s){this.input=s.state.facet(ql),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(s));let e=s.state.facet(Lw);this.top=new Ad(s,!0,e.topContainer),this.bottom=new Ad(s,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(s){let e=s.state.facet(Lw);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new Ad(s.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new Ad(s.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=s.state.facet(ql);if(t!=this.input){let n=t.filter(l=>l),i=[],r=[],o=[],a=[];for(let l of n){let c=this.specs.indexOf(l),u;c<0?(u=l(s.view),a.push(u)):(u=this.panels[c],u.update&&u.update(s)),i.push(u),(u.top?r:o).push(u)}this.specs=n,this.panels=i,this.top.sync(r),this.bottom.sync(o);for(let l of a)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(s)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:s=>Le.scrollMargins.of(e=>{let t=e.plugin(s);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class Ad{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=Dw(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=Dw(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Dw(s){let e=s.nextSibling;return s.remove(),e}const ql=De.define({enables:Ew});class or extends Oo{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}or.prototype.elementClass="",or.prototype.toDOM=void 0,or.prototype.mapMode=zs.TrackBefore,or.prototype.startSide=or.prototype.endSide=-1,or.prototype.point=!0;const $d=De.define(),GB=De.define(),KB={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>bt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},Gl=De.define();function XB(s){return[Rw(),Gl.of({...KB,...s})]}const Iw=De.define({combine:s=>s.some(e=>e)});function Rw(s){return[JB]}const JB=Xt.fromClass(class{constructor(s){this.view=s,this.domAfter=null,this.prevViewport=s.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=s.state.facet(Gl).map(e=>new Bw(s,e)),this.fixed=!s.state.facet(Iw);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),s.scrollDOM.insertBefore(this.dom,s.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(s){if(this.updateGutters(s)){let e=this.prevViewport,t=s.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}if(s.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Iw)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=s.view.viewport}syncGutters(s){let e=this.dom.nextSibling;s&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=bt.iter(this.view.state.facet($d),this.view.viewport.from),n=[],i=this.gutters.map(r=>new ZB(r,this.view.viewport,-this.view.documentPadding.top));for(let r of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(r.type)){let o=!0;for(let a of r.type)if(a.type==js.Text&&o){qm(t,n,a.from);for(let l of i)l.line(this.view,a,n);o=!1}else if(a.widget)for(let l of i)l.widget(this.view,a)}else if(r.type==js.Text){qm(t,n,r.from);for(let o of i)o.line(this.view,r,n)}else if(r.widget)for(let o of i)o.widget(this.view,r);for(let r of i)r.finish();s&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(s){let e=s.startState.facet(Gl),t=s.state.facet(Gl),n=s.docChanged||s.heightChanged||s.viewportChanged||!bt.eq(s.startState.facet($d),s.state.facet($d),s.view.viewport.from,s.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(s)&&(n=!0);else{n=!0;let i=[];for(let r of t){let o=e.indexOf(r);o<0?i.push(new Bw(this.view,r)):(this.gutters[o].update(s),i.push(this.gutters[o]))}for(let r of this.gutters)r.dom.remove(),i.indexOf(r)<0&&r.destroy();for(let r of i)r.config.side=="after"?this.getDOMAfter().appendChild(r.dom):this.dom.appendChild(r.dom);this.gutters=i}return n}destroy(){for(let s of this.gutters)s.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:s=>Le.scrollMargins.of(e=>{let t=e.plugin(s);if(!t||t.gutters.length==0||!t.fixed)return null;let n=t.dom.offsetWidth*e.scaleX,i=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Et.LTR?{left:n,right:i}:{right:n,left:i}})});function Fw(s){return Array.isArray(s)?s:[s]}function qm(s,e,t){for(;s.value&&s.from<=t;)s.from==t&&e.push(s.value),s.next()}class ZB{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=bt.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,r=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==i.elements.length){let a=new Nw(e,o,r,n);i.elements.push(a),i.dom.appendChild(a.dom)}else i.elements[this.i].update(e,o,r,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];qm(this.cursor,i,t.from),n.length&&(i=i.concat(n));let r=this.gutter.config.lineMarker(e,t,i);r&&i.unshift(r);let o=this.gutter;i.length==0&&!o.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),i=n?[n]:null;for(let r of e.state.facet(GB)){let o=r(e,t.widget,t);o&&(i||(i=[])).push(o)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class Bw{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let r=i.target,o;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let l=r.getBoundingClientRect();o=(l.top+l.bottom)/2}else o=i.clientY;let a=e.lineBlockAtHeight(o-e.documentTop);t.domEventHandlers[n](e,a,i)&&i.preventDefault()});this.markers=Fw(t.markers(e)),t.initialSpacer&&(this.spacer=new Nw(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=Fw(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!bt.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Nw{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),eN(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let r=0,o=0;;){let a=o,l=r<t.length?t[r++]:null,c=!1;if(l){let u=l.elementClass;u&&(n+=" "+u);for(let d=o;d<this.markers.length;d++)if(this.markers[d].compare(l)){a=d,c=!0;break}}else a=this.markers.length;for(;o<a;){let u=this.markers[o++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function eN(s,e){if(s.length!=e.length)return!1;for(let t=0;t<s.length;t++)if(!s[t].compare(e[t]))return!1;return!0}const tN=De.define(),sN=De.define(),ba=De.define({combine(s){return fi(s,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let r=n[i],o=t[i];n[i]=r?(a,l,c)=>r(a,l,c)||o(a,l,c):o}return n}})}});class Gm extends or{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Km(s,e){return s.state.facet(ba).formatNumber(e,s.state)}const nN=Gl.compute([ba],s=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(tN)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new Gm(Km(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let i of e.state.facet(sN)){let r=i(e,t,n);if(r)return r}return null},lineMarkerChange:e=>e.startState.facet(ba)!=e.state.facet(ba),initialSpacer(e){return new Gm(Km(e,Vw(e.state.doc.lines)))},updateSpacer(e,t){let n=Km(t.view,Vw(t.view.state.doc.lines));return n==e.number?e:new Gm(n)},domEventHandlers:s.facet(ba).domEventHandlers,side:"before"}));function iN(s={}){return[ba.of(s),Rw(),nN]}function Vw(s){let e=9;for(;e<s;)e=e*10+9;return e}const rN=new class extends or{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},oN=$d.compute(["selection"],s=>{let e=[],t=-1;for(let n of s.selection.ranges){let i=s.doc.lineAt(n.head).from;i>t&&(t=i,e.push(rN.range(i)))}return bt.of(e)});function aN(){return oN}const zw=1024;let lN=0,Xm=class{constructor(e,t){this.from=e,this.to=t}},Ut=class{constructor(e={}){this.id=lN++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=ar.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};Ut.closedBy=new Ut({deserialize:s=>s.split(" ")}),Ut.openedBy=new Ut({deserialize:s=>s.split(" ")}),Ut.group=new Ut({deserialize:s=>s.split(" ")}),Ut.isolate=new Ut({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}}),Ut.contextHash=new Ut({perNode:!0}),Ut.lookAhead=new Ut({perNode:!0}),Ut.mounted=new Ut({perNode:!0});let Td=class{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Ut.mounted.id]}};const cN=Object.create(null);let ar=class t4{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):cN,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new t4(e.name||"",t,e.id,n);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ut.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(Ut.group),r=-1;r<(i?i.length:0);r++){let o=t[r<0?n.name:i[r]];if(o)return o}}}};ar.none=new ar("",Object.create(null),0,8);class Jm{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let r of e){let o=r(n);o&&(i||(i=Object.assign({},n.props)),i[o[0].id]=o[1])}t.push(i?new ar(n.name,i,n.id,n.flags):n)}return new Jm(t)}}const Pd=new WeakMap,jw=new WeakMap;var ws;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(ws||(ws={}));let Yn=class Ag{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,a]of r)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Td.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new t0(this.topNode,e)}cursorAt(e,t=0,n=0){let i=Pd.get(this)||this.topNode,r=new t0(i);return r.moveTo(e,t),Pd.set(this,r._tree),r}get topNode(){return new jr(this,0,0,null)}resolve(e,t=0){let n=Kl(Pd.get(this)||this.topNode,e,t,!1);return Pd.set(this,n),n}resolveInner(e,t=0){let n=Kl(jw.get(this)||this.topNode,e,t,!0);return jw.set(this,n),n}resolveStack(e,t=0){return fN(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,o=e.mode||0,a=(o&ws.IncludeAnonymous)>0;for(let l=this.cursor(o|ws.IncludeAnonymous);;){let c=!1;if(l.from<=r&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:n0(ar.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new Ag(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new Ag(ar.none,t,n,i)))}static build(e){return pN(e)}};Yn.empty=new Yn(ar.none,[],[],0);let uN=class s4{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new s4(this.buffer,this.index)}},wa=class n4{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return ar.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,n==e)return r;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,n,i,r){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(Ww(r,i,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){r[l++]=i[a++],r[l++]=i[a++]-n;let c=r[l++]=i[a++]-n;r[l++]=i[a++]-e,o=Math.max(o,c)}return new n4(r,o,this.set)}};function Ww(s,e,t,n){switch(s){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function Kl(s,e,t,n){for(var i;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!n&&s instanceof jr&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=n?0:ws.IgnoreOverlays;if(n)for(let o=s,a=o.parent;a;o=a,a=o.parent)o instanceof jr&&o.index<0&&((i=a.enter(e,t,r))===null||i===void 0?void 0:i.from)!=o.from&&(s=a);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}let Uw=class{cursor(e=0){return new t0(this,e)}getChild(e,t=null,n=null){let i=Hw(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return Hw(this,e,t,n)}resolve(e,t=0){return Kl(this,e,t,!1)}resolveInner(e,t=0){return Kl(this,e,t,!0)}matchContext(e){return Zm(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}},jr=class Nh extends Uw{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,r=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],d=l[e]+o.from;if(Ww(i,n,d,d+u.length)){if(u instanceof wa){if(r&ws.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,t,n-d,i);if(f>-1)return new e0(new dN(o,u,e,d),null,f)}else if(r&ws.IncludeAnonymous||!u.type.isAnonymous||s0(u)){let f;if(!(r&ws.IgnoreMounts)&&(f=Td.get(u))&&!f.overlay)return new Nh(f.tree,d,e,o);let p=new Nh(u,d,e,o);return r&ws.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,n,i)}}}if(r&ws.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&ws.IgnoreOverlays)&&(i=Td.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=r:o<r)&&(t<0?a>=r:a>r))return new Nh(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function Hw(s,e,t,n){let i=s.cursor(),r=[];if(!i.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return r}for(;;){if(n!=null&&i.type.is(n))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return n==null?r:[]}}function Zm(s,e,t=e.length-1){for(let n=s;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}let dN=class{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}},e0=class kc extends Uw{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new kc(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&ws.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new kc(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new kc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new kc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];e.push(n.slice(i,r,o)),t.push(0)}return new Yn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function Qw(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let n=t instanceof jr&&t.index<0?null:t.parent,i=s.slice();return n?i[e]=n:i.splice(e,1),new hN(i,t)}let hN=class{constructor(e,t){this.heads=e,this.node=t}get next(){return Qw(this.heads)}};function fN(s,e,t){let n=s.resolveInner(e,t),i=null;for(let r=n instanceof jr?n:n.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(i||(i=[n])).push(o.resolve(e,t)),r=o}else{let o=Td.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new jr(o.tree,o.overlay[0].from+r.from,-1,r);(i||(i=[n])).push(Kl(a,e,t,!1))}}return i?Qw(i):n}let t0=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof jr)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof jr?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&ws.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ws.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ws.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let r=t+e,o=e<0?-1:n._tree.children.length;r!=o;r+=e){let a=n._tree.children[r];if(this.mode&ws.IncludeAnonymous||a instanceof wa||!a.type.isAnonymous||s0(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new e0(this.buffer,t,this.stack[i]);return this.bufferNode=new e0(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return Zm(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return Zm(this._tree,e,i);let o=n[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}};function s0(s){return s.children.some(e=>e instanceof wa||!e.type.isAnonymous||s0(e))}function pN(s){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=zw,reused:r=[],minRepeatType:o=n.types.length}=s,a=Array.isArray(t)?new uN(t,t.length):t,l=n.types,c=0,u=0;function d(w,R,T,E,F,K){let{id:W,start:A,end:D,size:N}=a,Q=u,H=c;for(;N<0;)if(a.next(),N==-1){let Xe=r[W];T.push(Xe),E.push(A-w);return}else if(N==-3){c=W;return}else if(N==-4){u=W;return}else throw new RangeError(`Unrecognized record size: ${N}`);let J=l[W],ae,be,We=A-w;if(D-A<=i&&(be=k(a.pos-R,F))){let Xe=new Uint16Array(be.size-be.skip),re=a.pos-be.size,le=Xe.length;for(;a.pos>re;)le=O(be.start,Xe,le);ae=new wa(Xe,D-be.start,n),We=be.start-w}else{let Xe=a.pos-N;a.next();let re=[],le=[],se=W>=o?W:-1,Te=0,Ye=D;for(;a.pos>Xe;)se>=0&&a.id==se&&a.size>=0?(a.end<=Ye-i&&(g(re,le,A,Te,a.end,Ye,se,Q,H),Te=re.length,Ye=a.end),a.next()):K>2500?f(A,Xe,re,le):d(A,Xe,re,le,se,K+1);if(se>=0&&Te>0&&Te<re.length&&g(re,le,A,Te,A,Ye,se,Q,H),re.reverse(),le.reverse(),se>-1&&Te>0){let Z=p(J,H);ae=n0(J,re,le,0,re.length,0,D-A,Z,Z)}else ae=S(J,re,le,D-A,Q-D,H)}T.push(ae),E.push(We)}function f(w,R,T,E){let F=[],K=0,W=-1;for(;a.pos>R;){let{id:A,start:D,end:N,size:Q}=a;if(Q>4)a.next();else{if(W>-1&&D<W)break;W<0&&(W=N-i),F.push(A,D,N),K++,a.next()}}if(K){let A=new Uint16Array(K*4),D=F[F.length-2];for(let N=F.length-3,Q=0;N>=0;N-=3)A[Q++]=F[N],A[Q++]=F[N+1]-D,A[Q++]=F[N+2]-D,A[Q++]=Q;T.push(new wa(A,F[2]-D,n)),E.push(D-w)}}function p(w,R){return(T,E,F)=>{let K=0,W=T.length-1,A,D;if(W>=0&&(A=T[W])instanceof Yn){if(!W&&A.type==w&&A.length==F)return A;(D=A.prop(Ut.lookAhead))&&(K=E[W]+A.length+D)}return S(w,T,E,F,K,R)}}function g(w,R,T,E,F,K,W,A,D){let N=[],Q=[];for(;w.length>E;)N.push(w.pop()),Q.push(R.pop()+T-F);w.push(S(n.types[W],N,Q,K-F,A-K,D)),R.push(F-T)}function S(w,R,T,E,F,K,W){if(K){let A=[Ut.contextHash,K];W=W?[A].concat(W):[A]}if(F>25){let A=[Ut.lookAhead,F];W=W?[A].concat(W):[A]}return new Yn(w,R,T,E,W)}function k(w,R){let T=a.fork(),E=0,F=0,K=0,W=T.end-i,A={size:0,start:0,skip:0};e:for(let D=T.pos-w;T.pos>D;){let N=T.size;if(T.id==R&&N>=0){A.size=E,A.start=F,A.skip=K,K+=4,E+=4,T.next();continue}let Q=T.pos-N;if(N<0||Q<D||T.start<W)break;let H=T.id>=o?4:0,J=T.start;for(T.next();T.pos>Q;){if(T.size<0)if(T.size==-3)H+=4;else break e;else T.id>=o&&(H+=4);T.next()}F=J,E+=N,K+=H}return(R<0||E==w)&&(A.size=E,A.start=F,A.skip=K),A.size>4?A:void 0}function O(w,R,T){let{id:E,start:F,end:K,size:W}=a;if(a.next(),W>=0&&E<o){let A=T;if(W>4){let D=a.pos-(W-4);for(;a.pos>D;)T=O(w,R,T)}R[--T]=A,R[--T]=K-w,R[--T]=F-w,R[--T]=E}else W==-3?c=E:W==-4&&(u=E);return T}let $=[],M=[];for(;a.pos>0;)d(s.start||0,s.bufferStart||0,$,M,-1,0);let b=(e=s.length)!==null&&e!==void 0?e:$.length?M[0]+$[0].length:0;return new Yn(l[s.topID],$.reverse(),M.reverse(),b)}const Yw=new WeakMap;function Ld(s,e){if(!s.isAnonymous||e instanceof wa||e.type!=s)return 1;let t=Yw.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=s||!(n instanceof Yn)){t=1;break}t+=Ld(s,n)}Yw.set(e,t)}return t}function n0(s,e,t,n,i,r,o,a,l){let c=0;for(let g=n;g<i;g++)c+=Ld(s,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,S,k,O,$){for(let M=k;M<O;){let b=M,w=S[M],R=Ld(s,g[M]);for(M++;M<O;M++){let T=Ld(s,g[M]);if(R+T>=u)break;R+=T}if(M==b+1){if(R>u){let T=g[b];p(T.children,T.positions,0,T.children.length,S[b]+$);continue}d.push(g[b])}else{let T=S[M-1]+g[M-1].length-w;d.push(n0(s,g,S,b,M,w,T,null,l))}f.push(w+$-r)}}return p(e,t,n,i,0),(a||l)(d,f,o)}let mN=class{startParse(e,t,n){return typeof e=="string"&&(e=new gN(e)),n=n?n.length?n.map(i=>new Xm(i.from,i.to)):[new Xm(0,0)]:[new Xm(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let r=i.advance();if(r)return r}}},gN=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};new Ut({perNode:!0});var qw={};class Ed{constructor(e,t,n,i,r,o,a,l,c,u=0,d){this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=r,this.score=o,this.buffer=a,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=d}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let i=e.parser.context;return new Ed(e,[],t,n,n,0,[],0,i?new Gw(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=e&65535,{parser:r}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let a=r.dynamicPrecedence(i);if(a&&(this.score+=a),n==0){this.pushState(r.getGoto(this.state,i,!0),this.reducePos),i<r.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(n-1)*3-(e&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let d=l?this.stack[l-1]:0,f=this.bufferBase+this.buffer.length-d;if(i<r.minRepeatTerm||e&131072){let p=r.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,c,p,f+4,!0)}if(e&262144)this.state=this.stack[l];else{let p=this.stack[l-3];this.state=r.getGoto(p,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,c)}storeNode(e,t,n,i=4,r=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,a=this.buffer.length;if(a==0&&o.parent&&(a=o.bufferBase-o.parent.bufferBase,o=o.parent),a>0&&o.buffer[a-4]==0&&o.buffer[a-1]>-1){if(t==n)return;if(o.buffer[a-2]>=t){o.buffer[a-2]=n;return}}}if(!r||this.pos==n)this.buffer.push(e,t,n,i);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let a=!1;for(let l=o;l>0&&this.buffer[l-2]>n;l-=4)if(this.buffer[l-1]>=0){a=!0;break}if(a)for(;o>0&&this.buffer[o-2]>n;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,i>4&&(i-=4)}this.buffer[o]=e,this.buffer[o+1]=t,this.buffer[o+2]=n,this.buffer[o+3]=i}}shift(e,t,n,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4);else{let r=e,{parser:o}=this.p;(i>this.pos||t<=o.maxNode)&&(this.pos=i,o.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,i,4)}}apply(e,t,n,i){e&65536?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Ed(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new vN(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(n==0)return!1;if(!(n&65536))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let r=0,o;r<t.length;r+=2)(o=t[r+1])!=this.state&&this.p.parser.hasAction(o,e)&&i.push(t[r],o);if(this.stack.length<120)for(let r=0;i.length<8&&r<t.length;r+=2){let o=t[r+1];i.some((a,l)=>l&1&&a==o)||i.push(t[r],o)}t=i}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let r=t[i+1];if(r==this.state)continue;let o=this.split();o.pushState(r,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(t[i],this.pos),o.reducePos=this.pos,o.score-=200,n.push(o)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=t&65535,r=this.stack.length-n*3;if(r<0||e.getGoto(this.stack[r],i,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;t=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,r)=>{if(!t.includes(i))return t.push(i),e.allActions(i,o=>{if(!(o&393216))if(o&65536){let a=(o>>19)-r;if(a>1){let l=o&65535,c=this.stack.length-a*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return a<<19|65536|l}}else{let a=n(o,r+1);if(a!=null)return a}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new Gw(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class Gw{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class vN{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class Dd{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new Dd(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Dd(this.stack,this.pos,this.index)}}function Xl(s,e=Uint16Array){if(typeof s!="string")return s;let t=null;for(let n=0,i=0;n<s.length;){let r=0;for(;;){let o=s.charCodeAt(n++),a=!1;if(o==126){r=65535;break}o>=92&&o--,o>=34&&o--;let l=o-32;if(l>=46&&(l-=46,a=!0),r+=l,a)break;r*=46}t?t[i++]=r:t=new e(r)}return t}class Id{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Kw=new Id;class yN{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Kw,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,r=this.pos+e;for(;r<n.from;){if(!i)return null;let o=this.ranges[--i];r-=n.from-o.to,n=o}for(;t<0?r>n.to:r>=n.to;){if(i==this.ranges.length-1)return null;let o=this.ranges[++i];r+=o.from-n.to,n=o}return r}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,n,i;if(t>=0&&t<this.chunk.length)n=this.pos+e,i=this.chunk.charCodeAt(t);else{let r=this.resolveOffset(e,1);if(r==null)return-1;if(n=r,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let o=this.rangeIndex,a=this.range;for(;a.to<=n;)a=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>a.to&&(this.chunk2=this.chunk2.slice(0,a.to-n)),i=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),i}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Kw,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class xa{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;Jw(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}xa.prototype.contextual=xa.prototype.fallback=xa.prototype.extend=!1;class Xw{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data=typeof e=="string"?Xl(e):e}token(e,t){let n=e.pos,i=0;for(;;){let r=e.next<0,o=e.resolveOffset(1,1);if(Jw(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(this.elseToken==null)return;if(r||i++,o==null)break;e.reset(o,e.token)}i&&(e.reset(n,e.token),e.acceptToken(this.elseToken,i))}}Xw.prototype.contextual=xa.prototype.fallback=xa.prototype.extend=!1;class Rd{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Jw(s,e,t,n,i,r){let o=0,a=1<<n,{dialect:l}=t.p.parser;e:for(;a&s[o];){let c=s[o+1];for(let p=o+3;p<c;p+=2)if((s[p+1]&a)>0){let g=s[p];if(l.allows(g)&&(e.token.value==-1||e.token.value==g||_N(g,e.token.value,i,r))){e.acceptToken(g);break}}let u=e.next,d=0,f=s[o+2];if(e.next<0&&f>d&&s[c+f*3-3]==65535){o=s[c+f*3-1];continue e}for(;d<f;){let p=d+f>>1,g=c+p+(p<<1),S=s[g],k=s[g+1]||65536;if(u<S)f=p;else if(u>=k)d=p+1;else{o=s[g+2],e.advance();continue e}}break}}function Zw(s,e,t){for(let n=e,i;(i=s[n])!=65535;n++)if(i==t)return n-e;return-1}function _N(s,e,t,n){let i=Zw(t,n,e);return i<0||Zw(t,n,s)<i}const hn=typeof process<"u"&&qw&&/\bparse\b/.test(qw.LOG);let i0=null;function ex(s,e,t){let n=s.cursor(ws.IncludeAnonymous);for(n.moveTo(e);;)if(!(t<0?n.childBefore(e):n.childAfter(e)))for(;;){if((t<0?n.to<e:n.from>e)&&!n.type.isError)return t<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(s.length,Math.max(n.from+1,e+25));if(t<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return t<0?0:s.length}}class bN{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ex(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ex(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let r=n.children[i],o=this.start[t]+n.positions[i];if(o>e)return this.nextStart=o,null;if(r instanceof Yn){if(o==e){if(o<this.safeFrom)return null;let a=o+r.length;if(a<=this.safeTo){let l=r.prop(Ut.lookAhead);if(!l||a+l<this.fragment.to)return r}}this.index[t]++,o+r.length>=Math.max(this.safeFrom,e)&&(this.trees.push(r),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+r.length}}}class wN{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new Id)}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:r}=i,o=i.stateSlot(e.state,3),a=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<r.length;c++){if(!(1<<c&o))continue;let u=r[c],d=this.tokens[c];if(!(n&&!u.fallback)&&((u.contextual||d.start!=e.pos||d.mask!=o||d.context!=a)&&(this.updateCachedToken(d,u,e),d.mask=o,d.context=a),d.lookAhead>d.end+25&&(l=Math.max(d.lookAhead,l)),d.value!=0)){let f=t;if(d.extended>-1&&(t=this.addActions(e,d.extended,d.end,t)),t=this.addActions(e,d.value,d.end,t),!u.extend&&(n=d,t>f))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!n&&e.pos==this.stream.end&&(n=new Id,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Id,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:r}=n.p;for(let o=0;o<r.specialized.length;o++)if(r.specialized[o]==e.value){let a=r.specializers[o](this.stream.read(e.start,e.end),n);if(a>=0&&n.p.parser.dialect.allows(a>>1)){a&1?e.extended=a>>1:e.value=a>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let r=0;r<i;r+=3)if(this.actions[r]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:r}=e,{parser:o}=e.p,{data:a}=o;for(let l=0;l<2;l++)for(let c=o.stateSlot(r,l?2:1);;c+=3){if(a[c]==65535)if(a[c+1]==1)c=lr(a,c+2);else{i==0&&a[c+1]==2&&(i=this.putAction(lr(a,c+2),t,n,i));break}a[c]==t&&(i=this.putAction(lr(a,c+1),t,n,i))}return i}}class xN{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new yN(t,i),this.tokens=new wN(e,this.stream),this.topTerm=e.top[1];let{from:r}=i[0];this.stacks=[Ed.start(this,e.top[0],r)],this.fragments=n.length&&this.stream.end-r>e.bufferLength*4?new bN(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],i,r;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let a=e[o];for(;;){if(this.tokens.mainToken=null,a.pos>t)n.push(a);else{if(this.advanceStack(a,n,e))continue;{i||(i=[],r=[]),i.push(a);let l=this.tokens.getMainToken(a);r.push(l.value,l.end)}}break}}if(!n.length){let o=i&&SN(i);if(o)return hn&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw hn&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let o=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,r,n);if(o)return hn&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(n.length>o)for(n.sort((a,l)=>l.score-a.score);n.length>o;)n.pop();n.some(a=>a.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let o=0;o<n.length-1;o++){let a=n[o];for(let l=o+1;l<n.length;l++){let c=n[l];if(a.sameState(c)||a.buffer.length>500&&c.buffer.length>500)if((a.score-c.score||a.buffer.length-c.buffer.length)>0)n.splice(l--,1);else{n.splice(o--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let o=1;o<n.length;o++)n[o].pos<this.minStackPos&&(this.minStackPos=n[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:r}=this,o=hn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let f=this.parser.nodeSet.types[d.type.id]==d.type?r.getGoto(e.state,d.type.id):-1;if(f>-1&&d.length&&(!c||(d.prop(Ut.contextHash)||0)==u))return e.useNode(d,f),hn&&console.log(o+this.stackID(e)+` (via reuse of ${r.getName(d.type.id)})`),!0;if(!(d instanceof Yn)||d.children.length==0||d.positions[0]>0)break;let p=d.children[0];if(p instanceof Yn&&d.positions[0]==0)d=p;else break}}let a=r.stateSlot(e.state,4);if(a>0)return e.reduce(a),hn&&console.log(o+this.stackID(e)+` (via always-reduce ${r.getName(a&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],d=l[c++],f=l[c++],p=c==l.length||!n,g=p?e:e.split(),S=this.tokens.mainToken;if(g.apply(u,d,S?S.start:g.pos,f),hn&&console.log(o+this.stackID(g)+` (via ${u&65536?`reduce of ${r.getName(u&65535)}`:"shift"} for ${r.getName(d)} @ ${i}${g==e?"":", split"})`),p)return!0;g.pos>i?t.push(g):n.push(g)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return tx(e,t),!0}}runRecovery(e,t,n){let i=null,r=!1;for(let o=0;o<e.length;o++){let a=e[o],l=t[o<<1],c=t[(o<<1)+1],u=hn?this.stackID(a)+" -> ":"";if(a.deadEnd&&(r||(r=!0,a.restart(),hn&&console.log(u+this.stackID(a)+" (restarted)"),this.advanceFully(a,n))))continue;let d=a.split(),f=u;for(let p=0;d.forceReduce()&&p<10&&(hn&&console.log(f+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,n));p++)hn&&(f=this.stackID(d)+" -> ");for(let p of a.recoverByInsert(l))hn&&console.log(u+this.stackID(p)+" (via recover-insert)"),this.advanceFully(p,n);this.stream.end>a.pos?(c==a.pos&&(c++,l=0),a.recoverByDelete(l,c),hn&&console.log(u+this.stackID(a)+` (via recover-delete ${this.parser.getName(l)})`),tx(a,n)):(!i||i.score<a.score)&&(i=a)}return i}stackToTree(e){return e.close(),Yn.build({buffer:Dd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(i0||(i0=new WeakMap)).get(e);return t||i0.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function tx(s,e){for(let t=0;t<e.length;t++){let n=e[t];if(n.pos==s.pos&&n.sameState(s)){e[t].score<s.score&&(e[t]=s);return}}e.push(s)}class kN{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}class Fd extends mN{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let a=0;a<e.repeatNodeCount;a++)t.push("");let n=Object.keys(e.topRules).map(a=>e.topRules[a][1]),i=[];for(let a=0;a<t.length;a++)i.push([]);function r(a,l,c){i[a].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let a of e.nodeProps){let l=a[0];typeof l=="string"&&(l=Ut[l]);for(let c=1;c<a.length;){let u=a[c++];if(u>=0)r(u,l,a[c++]);else{let d=a[c+-u];for(let f=-u;f>0;f--)r(a[c++],l,d);c++}}}this.nodeSet=new Jm(t.map((a,l)=>ar.define({name:l>=this.minRepeatTerm?void 0:a,id:l,props:i[l],top:n.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=zw;let o=Xl(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let a=0;a<this.specializerSpecs.length;a++)this.specialized[a]=this.specializerSpecs[a].term;this.specializers=this.specializerSpecs.map(sx),this.states=Xl(e.states,Uint32Array),this.data=Xl(e.stateData),this.goto=Xl(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(a=>typeof a=="number"?new xa(o,a):a),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new xN(this,e,t,n);for(let r of this.wrappers)i=r(i,e,t,n);return i}getGoto(e,t,n=!1){let i=this.goto;if(t>=i[0])return-1;for(let r=i[t+1];;){let o=i[r++],a=o&1,l=i[r++];if(a&&n)return l;for(let c=r+(o>>1);r<c;r++)if(i[r]==e)return l;if(a)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let r=this.stateSlot(e,i?2:1),o;;r+=3){if((o=n[r])==65535)if(n[r+1]==1)o=n[r=lr(n,r+2)];else{if(n[r+1]==2)return lr(n,r+2);break}if(o==t||o==0)return lr(n,r+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,n=>n==t?!0:null)}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let r=this.stateSlot(e,1);i==null;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=lr(this.data,r+2);else break;i=t(lr(this.data,r+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=lr(this.data,n+2);else break;if(!(this.data[n+2]&1)){let i=this.data[n+1];t.some((r,o)=>o&1&&r==i)||t.push(this.data[n],i)}}return t}configure(e){let t=Object.assign(Object.create(Fd.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(n=>{let i=e.tokenizers.find(r=>r.from==n);return i?i.to:n})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,i)=>{let r=e.specializers.find(a=>a.from==n.external);if(!r)return n;let o=Object.assign(Object.assign({},n),{external:r.to});return t.specializers[i]=sx(o),o})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let r of e.split(" ")){let o=t.indexOf(r);o>=0&&(n[o]=!0)}let i=null;for(let r=0;r<t.length;r++)if(!n[r])for(let o=this.dialects[t[r]],a;(a=this.data[o++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[a]=1;return new kN(e,n,i)}static deserialize(e){return new Fd(e)}}function lr(s,e){return s[e]|s[e+1]<<16}function SN(s){let e=null;for(let t of s){let n=t.p.stoppedAt;(t.pos==t.p.stream.end||n!=null&&t.pos>n)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function sx(s){if(s.external){let e=s.extend?1:0;return(t,n)=>s.external(t,n)<<1|e}return s.get}let CN=0,cr=class $g{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=CN++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof $g&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new $g(n,[],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(e){let t=new nx(e);return n=>n.modified.indexOf(t)>-1?n:nx.get(n.base||n,n.modified.concat(t).sort((i,r)=>i.id-r.id))}},ON=0,nx=class i4{constructor(e){this.name=e,this.instances=[],this.id=ON++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(a=>a.base==e&&MN(t,a.modified));if(n)return n;let i=[],r=new cr(e.name,i,e,t);for(let a of t)a.instances.push(r);let o=AN(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(i4.get(a,l));return r}};function MN(s,e){return s.length==e.length&&s.every((t,n)=>t==e[n])}function AN(s){let e=[[]];for(let t=0;t<s.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(s[t]));return e.sort((t,n)=>n.length-t.length)}function $N(s){let e=Object.create(null);for(let t in s){let n=s[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let r=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(r.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=r.length-1,c=r[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new r0(n,o,l>0?r.slice(0,l):null);e[c]=u.sort(e[c])}}return TN.add(e)}const TN=new Ut;let r0=class{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};r0.empty=new r0([],2,null);function PN(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:n,all:i=null}={};return{style:r=>{let o=i;for(let a of r)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}const xe=cr.define,Bd=xe(),Wr=xe(),ix=xe(Wr),rx=xe(Wr),Ur=xe(),Nd=xe(Ur),o0=xe(Ur),vi=xe(),To=xe(vi),yi=xe(),_i=xe(),a0=xe(),Jl=xe(a0),Vd=xe(),Ee={comment:Bd,lineComment:xe(Bd),blockComment:xe(Bd),docComment:xe(Bd),name:Wr,variableName:xe(Wr),typeName:ix,tagName:xe(ix),propertyName:rx,attributeName:xe(rx),className:xe(Wr),labelName:xe(Wr),namespace:xe(Wr),macroName:xe(Wr),literal:Ur,string:Nd,docString:xe(Nd),character:xe(Nd),attributeValue:xe(Nd),number:o0,integer:xe(o0),float:xe(o0),bool:xe(Ur),regexp:xe(Ur),escape:xe(Ur),color:xe(Ur),url:xe(Ur),keyword:yi,self:xe(yi),null:xe(yi),atom:xe(yi),unit:xe(yi),modifier:xe(yi),operatorKeyword:xe(yi),controlKeyword:xe(yi),definitionKeyword:xe(yi),moduleKeyword:xe(yi),operator:_i,derefOperator:xe(_i),arithmeticOperator:xe(_i),logicOperator:xe(_i),bitwiseOperator:xe(_i),compareOperator:xe(_i),updateOperator:xe(_i),definitionOperator:xe(_i),typeOperator:xe(_i),controlOperator:xe(_i),punctuation:a0,separator:xe(a0),bracket:Jl,angleBracket:xe(Jl),squareBracket:xe(Jl),paren:xe(Jl),brace:xe(Jl),content:vi,heading:To,heading1:xe(To),heading2:xe(To),heading3:xe(To),heading4:xe(To),heading5:xe(To),heading6:xe(To),contentSeparator:xe(vi),list:xe(vi),quote:xe(vi),emphasis:xe(vi),strong:xe(vi),link:xe(vi),monospace:xe(vi),strikethrough:xe(vi),inserted:xe(),deleted:xe(),changed:xe(),invalid:xe(),meta:Vd,documentMeta:xe(Vd),annotation:xe(Vd),processingInstruction:xe(Vd),definition:cr.defineModifier("definition"),constant:cr.defineModifier("constant"),function:cr.defineModifier("function"),standard:cr.defineModifier("standard"),local:cr.defineModifier("local"),special:cr.defineModifier("special")};for(let s in Ee){let e=Ee[s];e instanceof cr&&(e.name=s)}PN([{tag:Ee.link,class:"tok-link"},{tag:Ee.heading,class:"tok-heading"},{tag:Ee.emphasis,class:"tok-emphasis"},{tag:Ee.strong,class:"tok-strong"},{tag:Ee.keyword,class:"tok-keyword"},{tag:Ee.atom,class:"tok-atom"},{tag:Ee.bool,class:"tok-bool"},{tag:Ee.url,class:"tok-url"},{tag:Ee.labelName,class:"tok-labelName"},{tag:Ee.inserted,class:"tok-inserted"},{tag:Ee.deleted,class:"tok-deleted"},{tag:Ee.literal,class:"tok-literal"},{tag:Ee.string,class:"tok-string"},{tag:Ee.number,class:"tok-number"},{tag:[Ee.regexp,Ee.escape,Ee.special(Ee.string)],class:"tok-string2"},{tag:Ee.variableName,class:"tok-variableName"},{tag:Ee.local(Ee.variableName),class:"tok-variableName tok-local"},{tag:Ee.definition(Ee.variableName),class:"tok-variableName tok-definition"},{tag:Ee.special(Ee.variableName),class:"tok-variableName2"},{tag:Ee.definition(Ee.propertyName),class:"tok-propertyName tok-definition"},{tag:Ee.typeName,class:"tok-typeName"},{tag:Ee.namespace,class:"tok-namespace"},{tag:Ee.className,class:"tok-className"},{tag:Ee.macroName,class:"tok-macroName"},{tag:Ee.propertyName,class:"tok-propertyName"},{tag:Ee.operator,class:"tok-operator"},{tag:Ee.comment,class:"tok-comment"},{tag:Ee.meta,class:"tok-meta"},{tag:Ee.invalid,class:"tok-invalid"},{tag:Ee.punctuation,class:"tok-punctuation"}]);const LN=122,ox=1,EN=123,DN=124,ax=2,IN=125,RN=3,FN=4,lx=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],BN=58,NN=40,cx=95,VN=91,zd=45,zN=46,jN=35,WN=37,UN=38,HN=92,QN=10,YN=42;function Zl(s){return s>=65&&s<=90||s>=97&&s<=122||s>=161}function l0(s){return s>=48&&s<=57}function ux(s){return l0(s)||s>=97&&s<=102||s>=65&&s<=70}const dx=(s,e,t)=>(n,i)=>{for(let r=!1,o=0,a=0;;a++){let{next:l}=n;if(Zl(l)||l==zd||l==cx||r&&l0(l))!r&&(l!=zd||a>0)&&(r=!0),o===a&&l==zd&&o++,n.advance();else if(l==HN&&n.peek(1)!=QN){if(n.advance(),ux(n.next)){do n.advance();while(ux(n.next));n.next==32&&n.advance()}else n.next>-1&&n.advance();r=!0}else{r&&n.acceptToken(o==2&&i.canShift(ax)?e:l==NN?t:s);break}}},qN=new Rd(dx(EN,ax,DN)),GN=new Rd(dx(IN,RN,FN)),KN=new Rd(s=>{if(lx.includes(s.peek(-1))){let{next:e}=s;(Zl(e)||e==cx||e==jN||e==zN||e==YN||e==VN||e==BN&&Zl(s.peek(1))||e==zd||e==UN)&&s.acceptToken(LN)}}),XN=new Rd(s=>{if(!lx.includes(s.peek(-1))){let{next:e}=s;if(e==WN&&(s.advance(),s.acceptToken(ox)),Zl(e)){do s.advance();while(Zl(s.next)||l0(s.next));s.acceptToken(ox)}}}),JN=$N({"AtKeyword import charset namespace keyframes media supports":Ee.definitionKeyword,"from to selector":Ee.keyword,NamespaceName:Ee.namespace,KeyframeName:Ee.labelName,KeyframeRangeName:Ee.operatorKeyword,TagName:Ee.tagName,ClassName:Ee.className,PseudoClassName:Ee.constant(Ee.className),IdName:Ee.labelName,"FeatureName PropertyName":Ee.propertyName,AttributeName:Ee.attributeName,NumberLiteral:Ee.number,KeywordQuery:Ee.keyword,UnaryQueryOp:Ee.operatorKeyword,"CallTag ValueName":Ee.atom,VariableName:Ee.variableName,Callee:Ee.operatorKeyword,Unit:Ee.unit,"UniversalSelector NestingSelector":Ee.definitionOperator,"MatchOp CompareOp":Ee.compareOperator,"ChildOp SiblingOp, LogicOp":Ee.logicOperator,BinOp:Ee.arithmeticOperator,Important:Ee.modifier,Comment:Ee.blockComment,ColorLiteral:Ee.color,"ParenthesizedContent StringLiteral":Ee.string,":":Ee.punctuation,"PseudoOp #":Ee.derefOperator,"; ,":Ee.separator,"( )":Ee.paren,"[ ]":Ee.squareBracket,"{ }":Ee.brace}),ZN={__proto__:null,lang:38,"nth-child":38,"nth-last-child":38,"nth-of-type":38,"nth-last-of-type":38,dir:38,"host-context":38,if:84,url:124,"url-prefix":124,domain:124,regexp:124},eV={__proto__:null,or:98,and:98,not:106,only:106,layer:170},tV={__proto__:null,selector:112,layer:166},sV={__proto__:null,"@import":162,"@media":174,"@charset":178,"@namespace":182,"@keyframes":188,"@supports":200,"@scope":204},nV={__proto__:null,to:207},iV=Fd.deserialize({version:14,states:"EbQYQdOOO#qQdOOP#xO`OOOOQP'#Cf'#CfOOQP'#Ce'#CeO#}QdO'#ChO$nQaO'#CcO$xQdO'#CkO%TQdO'#DpO%YQdO'#DrO%_QdO'#DuO%_QdO'#DxOOQP'#FV'#FVO&eQhO'#EhOOQS'#FU'#FUOOQS'#Ek'#EkQYQdOOO&lQdO'#EOO&PQhO'#EUO&lQdO'#EWO'aQdO'#EYO'lQdO'#E]O'tQhO'#EcO(VQdO'#EeO(bQaO'#CfO)VQ`O'#D{O)[Q`O'#F`O)gQdO'#F`QOQ`OOP)qO&jO'#CaPOOO)C@t)C@tOOQP'#Cj'#CjOOQP,59S,59SO#}QdO,59SO)|QdO,59VO%TQdO,5:[O%YQdO,5:^O%_QdO,5:aO%_QdO,5:cO%_QdO,5:dO%_QdO'#ErO*XQ`O,58}O*aQdO'#DzOOQS,58},58}OOQP'#Cn'#CnOOQO'#Dn'#DnOOQP,59V,59VO*hQ`O,59VO*mQ`O,59VOOQP'#Dq'#DqOOQP,5:[,5:[OOQO'#Ds'#DsO*rQpO,5:^O+]QaO,5:aO+sQaO,5:dOOQW'#DZ'#DZO,ZQhO'#DdO,xQhO'#FaO'tQhO'#DbO-WQ`O'#DhOOQW'#F['#F[O-]Q`O,5;SO-eQ`O'#DeOOQS-E8i-E8iOOQ['#Cs'#CsO-jQdO'#CtO.QQdO'#CzO.hQdO'#C}O/OQ!pO'#DPO1RQ!jO,5:jOOQO'#DU'#DUO*mQ`O'#DTO1cQ!nO'#FXO3`Q`O'#DVO3eQ`O'#DkOOQ['#FX'#FXO-`Q`O,5:pO3jQ!bO,5:rOOQS'#E['#E[O3rQ`O,5:tO3wQdO,5:tOOQO'#E_'#E_O4PQ`O,5:wO4UQhO,5:}O%_QdO'#DgOOQS,5;P,5;PO-eQ`O,5;PO4^QdO,5;PO4fQdO,5:gO4vQdO'#EtO5TQ`O,5;zO5TQ`O,5;zPOOO'#Ej'#EjP5`O&jO,58{POOO,58{,58{OOQP1G.n1G.nOOQP1G.q1G.qO*hQ`O1G.qO*mQ`O1G.qOOQP1G/v1G/vO5kQpO1G/xO5sQaO1G/{O6ZQaO1G/}O6qQaO1G0OO7XQaO,5;^OOQO-E8p-E8pOOQS1G.i1G.iO7cQ`O,5:fO7hQdO'#DoO7oQdO'#CrOOQP1G/x1G/xO&lQdO1G/xO7vQ!jO'#DZO8UQ!bO,59vO8^QhO,5:OOOQO'#F]'#F]O8XQ!bO,59zO'tQhO,59xO8fQhO'#EvO8sQ`O,5;{O9OQhO,59|O9uQhO'#DiOOQW,5:S,5:SOOQS1G0n1G0nOOQW,5:P,5:PO9|Q!fO'#FYOOQS'#FY'#FYOOQS'#Em'#EmO;^QdO,59`OOQ[,59`,59`O;tQdO,59fOOQ[,59f,59fO<[QdO,59iOOQ[,59i,59iOOQ[,59k,59kO&lQdO,59mO<rQhO'#EQOOQW'#EQ'#EQO=WQ`O1G0UO1[QhO1G0UOOQ[,59o,59oO'tQhO'#DXOOQ[,59q,59qO=]Q#tO,5:VOOQS1G0[1G0[OOQS1G0^1G0^OOQS1G0`1G0`O=hQ`O1G0`O=mQdO'#E`OOQS1G0c1G0cOOQS1G0i1G0iO=xQaO,5:RO-`Q`O1G0kOOQS1G0k1G0kO-eQ`O1G0kO>PQ!fO1G0ROOQO1G0R1G0ROOQO,5;`,5;`O>gQdO,5;`OOQO-E8r-E8rO>tQ`O1G1fPOOO-E8h-E8hPOOO1G.g1G.gOOQP7+$]7+$]OOQP7+%d7+%dO&lQdO7+%dOOQS1G0Q1G0QO?PQaO'#F_O?ZQ`O,5:ZO?`Q!fO'#ElO@^QdO'#FWO@hQ`O,59^O@mQ!bO7+%dO&lQdO1G/bO@uQhO1G/fOOQW1G/j1G/jOOQW1G/d1G/dOAWQhO,5;bOOQO-E8t-E8tOAfQhO'#DZOAtQhO'#F^OBPQ`O'#F^OBUQ`O,5:TOOQS-E8k-E8kOOQ[1G.z1G.zOOQ[1G/Q1G/QOOQ[1G/T1G/TOOQ[1G/X1G/XOBZQdO,5:lOOQS7+%p7+%pOB`Q`O7+%pOBeQhO'#DYOBmQ`O,59sO'tQhO,59sOOQ[1G/q1G/qOBuQ`O1G/qOOQS7+%z7+%zOBzQbO'#DPOOQO'#Eb'#EbOCYQ`O'#EaOOQO'#Ea'#EaOCeQ`O'#EwOCmQdO,5:zOOQS,5:z,5:zOOQ[1G/m1G/mOOQS7+&V7+&VO-`Q`O7+&VOCxQ!fO'#EsO&lQdO'#EsOEPQdO7+%mOOQO7+%m7+%mOOQO1G0z1G0zOEdQ!bO<<IOOElQdO'#EqOEvQ`O,5;yOOQP1G/u1G/uOOQS-E8j-E8jOFOQdO'#EpOFYQ`O,5;rOOQ]1G.x1G.xOOQP<<IO<<IOOFbQdO7+$|OOQO'#D]'#D]OFiQ!bO7+%QOFqQhO'#EoOF{Q`O,5;xO&lQdO,5;xOOQW1G/o1G/oOOQO'#ES'#ESOGTQ`O1G0WOOQS<<I[<<I[O&lQdO,59tOGnQhO1G/_OOQ[1G/_1G/_OGuQ`O1G/_OOQW-E8l-E8lOOQ[7+%]7+%]OOQO,5:{,5:{O=pQdO'#ExOCeQ`O,5;cOOQS,5;c,5;cOOQS-E8u-E8uOOQS1G0f1G0fOOQS<<Iq<<IqOG}Q!fO,5;_OOQS-E8q-E8qOOQO<<IX<<IXOOQPAN>jAN>jOIUQaO,5;]OOQO-E8o-E8oOI`QdO,5;[OOQO-E8n-E8nOOQW<<Hh<<HhOOQW<<Hl<<HlOIjQhO<<HlOI{QhO,5;ZOJWQ`O,5;ZOOQO-E8m-E8mOJ]QdO1G1dOBZQdO'#EuOJgQ`O7+%rOOQW7+%r7+%rOJoQ!bO1G/`OOQ[7+$y7+$yOJzQhO7+$yPKRQ`O'#EnOOQO,5;d,5;dOOQO-E8v-E8vOOQS1G0}1G0}OKWQ`OAN>WO&lQdO1G0uOK]Q`O7+'OOOQO,5;a,5;aOOQO-E8s-E8sOOQW<<I^<<I^OOQ[<<He<<HePOQW,5;Y,5;YOOQWG23rG23rOKeQdO7+&a",stateData:"Kx~O#sOS#tQQ~OW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#oRO~OQiOW[OZ[O]TO`VOaVOi]OjWOmXO!jYO!mZO!saO!ybO!{cO!}dO#QeO#WfO#YgO#ohO~O#m$SP~P!dO#tmO~O#ooO~O]qO`rOarOjsOmtO!juO!mwO#nvO~OpzO!^xO~P$SOc!QO#o|O#p}O~O#o!RO~O#o!TO~OW[OZ[O]TO`VOaVOjWOmXO!jYO!mZO#oRO~OS!]Oe!YO!V![O!Y!`O#q!XOp$TP~Ok$TP~P&POQ!jOe!cOm!dOp!eOr!mOt!mOz!kO!`!lO#o!bO#p!hO#}!fO~Ot!qO!`!lO#o!pO~Ot!sO#o!sO~OS!]Oe!YO!V![O!Y!`O#q!XO~Oe!vOpzO#Z!xO~O]YX`YX`!pXaYXjYXmYXpYX!^YX!jYX!mYX#nYX~O`!zO~Ok!{O#m$SXo$SX~O#m$SXo$SX~P!dO#u#OO#v#OO#w#QO~Oc#UO#o|O#p}O~OpzO!^xO~Oo$SP~P!dOe#`O~Oe#aO~Ol#bO!h#cO~O]qO`rOarOjsOmtO~Op!ia!^!ia!j!ia!m!ia#n!iad!ia~P*zOp!la!^!la!j!la!m!la#n!lad!la~P*zOR#gOS!]Oe!YOr#gOt#gO!V![O!Y!`O#q#dO#}!fO~O!R#iO!^#jOk$TXp$TX~Oe#mO~Ok#oOpzO~Oe!vO~O]#rO`#rOd#uOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl#wO~P&lO]#rO`#rOi#rOj#rOk#rOo#yO~P&lOP#zOSsXesXksXvsX!VsX!YsX!usX!wsX#qsX!TsXQsX]sX`sXdsXisXjsXmsXpsXrsXtsXzsX!`sX#osX#psX#}sXlsXosX!^sX!qsX#msX~Ov#{O!u#|O!w#}Ok$TP~P'tOe#aOS#{Xk#{Xv#{X!V#{X!Y#{X!u#{X!w#{X#q#{XQ#{X]#{X`#{Xd#{Xi#{Xj#{Xm#{Xp#{Xr#{Xt#{Xz#{X!`#{X#o#{X#p#{X#}#{Xl#{Xo#{X!^#{X!q#{X#m#{X~Oe$RO~Oe$TO~Ok$VOv#{O~Ok$WO~Ot$XO!`!lO~Op$YO~OpzO!R#iO~OpzO#Z$`O~O!q$bOk!oa#m!oao!oa~P&lOk#hX#m#hXo#hX~P!dOk!{O#m$Sao$Sa~O#u#OO#v#OO#w$hO~Ol$jO!h$kO~Op!ii!^!ii!j!ii!m!ii#n!iid!ii~P*zOp!ki!^!ki!j!ki!m!ki#n!kid!ki~P*zOp!li!^!li!j!li!m!li#n!lid!li~P*zOp#fa!^#fa~P$SOo$lO~Od$RP~P%_Od#zP~P&lO`!PXd}X!R}X!T!PX~O`$sO!T$tO~Od$uO!R#iO~Ok#jXp#jX!^#jX~P'tO!^#jOk$Tap$Ta~O!R#iOk!Uap!Ua!^!Uad!Ua`!Ua~OS!]Oe!YO!V![O!Y!`O#q$yO~Od$QP~P9dOv#{OQ#|X]#|X`#|Xd#|Xe#|Xi#|Xj#|Xk#|Xm#|Xp#|Xr#|Xt#|Xz#|X!`#|X#o#|X#p#|X#}#|Xl#|Xo#|X~O]#rO`#rOd%OOi#rOj#rOk#rO~P&lO]#rO`#rOi#rOj#rOk#rOl%PO~P&lO]#rO`#rOi#rOj#rOk#rOo%QO~P&lOe%SOS!tXk!tX!V!tX!Y!tX#q!tX~Ok%TO~Od%YOt%ZO!a%ZO~Ok%[O~Oo%cO#o%^O#}%]O~Od%dO~P$SOv#{O!^%hO!q%jOk!oi#m!oio!oi~P&lOk#ha#m#hao#ha~P!dOk!{O#m$Sio$Si~O!^%mOd$RX~P$SOd%oO~Ov#{OQ#`Xd#`Xe#`Xm#`Xp#`Xr#`Xt#`Xz#`X!^#`X!`#`X#o#`X#p#`X#}#`X~O!^%qOd#zX~P&lOd%sO~Ol%tOv#{O~OR#gOr#gOt#gO#q%vO#}!fO~O!R#iOk#jap#ja!^#ja~O`!PXd}X!R}X!^}X~O!R#iO!^%xOd$QX~O`%zO~Od%{O~O#o%|O~Ok&OO~O`&PO!R#iO~Od&ROk&QO~Od&UO~OP#zOpsX!^sXdsX~O#}%]Op#TX!^#TX~OpzO!^&WO~Oo&[O#o%^O#}%]O~Ov#{OQ#gXe#gXk#gXm#gXp#gXr#gXt#gXz#gX!^#gX!`#gX!q#gX#m#gX#o#gX#p#gX#}#gXo#gX~O!^%hO!q&`Ok!oq#m!oqo!oq~P&lOl&aOv#{O~Od#eX!^#eX~P%_O!^%mOd$Ra~Od#dX!^#dX~P&lO!^%qOd#za~Od&fO~P&lOd&gO!T&hO~Od#cX!^#cX~P9dO!^%xOd$Qa~O]&mOd&oO~OS#bae#ba!V#ba!Y#ba#q#ba~Od&qO~PG]Od&qOk&rO~Ov#{OQ#gae#gak#gam#gap#gar#gat#gaz#ga!^#ga!`#ga!q#ga#m#ga#o#ga#p#ga#}#gao#ga~Od#ea!^#ea~P$SOd#da!^#da~P&lOR#gOr#gOt#gO#q%vO#}%]O~O!R#iOd#ca!^#ca~O`&xO~O!^%xOd$Qi~P&lO]&mOd&|O~Ov#{Od|ik|i~Od&}O~PG]Ok'OO~Od'PO~O!^%xOd$Qq~Od#cq!^#cq~P&lO#s!a#t#}]#}v!m~",goto:"2h$UPPPPP$VP$YP$c$uP$cP%X$cPP%_PPP%e%o%oPPPPP%oPP%oP&]P%oP%o'W%oP't'w'}'}(^'}P'}P'}P'}'}P(m'}(yP(|PP)p)v$c)|$c*SP$cP$c$cP*Y*{+YP$YP+aP+dP$YP$YP$YP+j$YP+m+p+s+z$YP$YPP$YP,P,V,f,|-[-b-l-r-x.O.U.`.f.l.rPPPPPPPPPPP.x/R/w/z0|P1U1u2O2R2U2[RnQ_^OP`kz!{$dq[OPYZ`kuvwxz!v!{#`$d%mqSOPYZ`kuvwxz!v!{#`$d%mQpTR#RqQ!OVR#SrQ#S!QS$Q!i!jR$i#U!V!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'Q!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QU#g!Y$t&hU%`$Y%b&WR&V%_!V!iac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QR$S!kQ%W$RR&S%Xk!^]bf!Y![!g#i#j#m$P$R%X%xQ#e!YQ${#mQ%w$tQ&j%xR&w&hQ!ygQ#p!`Q$^!xR%f$`R#n!]!U!mac!c!d!e!z#a#c#t#v#x#{$a$k$p$s%h%i%q%u%z&P&d&l&x'QQ!qdR$X!rQ!PVR#TrQ#S!PR$i#TQ!SWR#VsQ!UXR#WtQ{UQ!wgQ#^yQ#o!_Q$U!nQ$[!uQ$_!yQ%e$^Q&Y%aQ&]%fR&v&XSjPzQ!}kQ$c!{R%k$dZiPkz!{$dR$P!gQ%}%SR&z&mR!rdR!teR$Z!tS%a$Y%bR&t&WV%_$Y%b&WQ#PmR$g#PQ`OSkPzU!a`k$dR$d!{Q$p#aY%p$p%u&d&l'QQ%u$sQ&d%qQ&l%zR'Q&xQ#t!cQ#v!dQ#x!eV$}#t#v#xQ%X$RR&T%XQ%y$zS&k%y&yR&y&lQ%r$pR&e%rQ%n$mR&c%nQyUR#]yQ%i$aR&_%iQ!|jS$e!|$fR$f!}Q&n%}R&{&nQ#k!ZR$x#kQ%b$YR&Z%bQ&X%aR&u&X__OP`kz!{$d^UOP`kz!{$dQ!VYQ!WZQ#XuQ#YvQ#ZwQ#[xQ$]!vQ$m#`R&b%mR$q#aQ!gaQ!oc[#q!c!d!e#t#v#xQ$a!zd$o#a$p$s%q%u%z&d&l&x'QQ$r#cQ%R#{S%g$a%iQ%l$kQ&^%hR&p&P]#s!c!d!e#t#v#xW!Z]b!g$PQ!ufQ#f!YQ#l![Q$v#iQ$w#jQ$z#mS%V$R%XR&i%xQ#h!YQ%w$tR&w&hR$|#mR$n#`QlPR#_zQ!_]Q!nbQ$O!gR%U$P",nodeNames:" Unit VariableName VariableName QueryCallee Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector . ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue AtKeyword # ; ] [ BracketedValue } { BracedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee IfExpression if ArgList IfBranch KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp ComparisonQuery CompareOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector ParenthesizedSelector CallQuery ArgList , CallLiteral CallTag ParenthesizedContent PseudoClassName ArgList IdSelector IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp Block Declaration PropertyName Important ImportStatement import Layer layer LayerName layer MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports ScopeStatement scope to AtRule Styles",maxTerm:143,nodeProps:[["isolate",-2,5,36,""],["openedBy",20,"(",28,"[",31,"{"],["closedBy",21,")",29,"]",32,"}"]],propSources:[JN],skippedNodes:[0,5,106],repeatNodeCount:15,tokenData:"JQ~R!YOX$qX^%i^p$qpq%iqr({rs-ust/itu6Wuv$qvw7Qwx7cxy9Qyz9cz{9h{|:R|}>t}!O?V!O!P?t!P!Q@]!Q![AU![!]BP!]!^B{!^!_C^!_!`DY!`!aDm!a!b$q!b!cEn!c!}$q!}#OG{#O#P$q#P#QH^#Q#R6W#R#o$q#o#pHo#p#q6W#q#rIQ#r#sIc#s#y$q#y#z%i#z$f$q$f$g%i$g#BY$q#BY#BZ%i#BZ$IS$q$IS$I_%i$I_$I|$q$I|$JO%i$JO$JT$q$JT$JU%i$JU$KV$q$KV$KW%i$KW&FU$q&FU&FV%i&FV;'S$q;'S;=`Iz<%lO$q`$tSOy%Qz;'S%Q;'S;=`%c<%lO%Q`%VS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q`%fP;=`<%l%Q~%nh#s~OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Q~'ah#s~!a`OX%QX^'Y^p%Qpq'Yqy%Qz#y%Q#y#z'Y#z$f%Q$f$g'Y$g#BY%Q#BY#BZ'Y#BZ$IS%Q$IS$I_'Y$I_$I|%Q$I|$JO'Y$JO$JT%Q$JT$JU'Y$JU$KV%Q$KV$KW'Y$KW&FU%Q&FU&FV'Y&FV;'S%Q;'S;=`%c<%lO%Qj)OUOy%Qz#]%Q#]#^)b#^;'S%Q;'S;=`%c<%lO%Qj)gU!a`Oy%Qz#a%Q#a#b)y#b;'S%Q;'S;=`%c<%lO%Qj*OU!a`Oy%Qz#d%Q#d#e*b#e;'S%Q;'S;=`%c<%lO%Qj*gU!a`Oy%Qz#c%Q#c#d*y#d;'S%Q;'S;=`%c<%lO%Qj+OU!a`Oy%Qz#f%Q#f#g+b#g;'S%Q;'S;=`%c<%lO%Qj+gU!a`Oy%Qz#h%Q#h#i+y#i;'S%Q;'S;=`%c<%lO%Qj,OU!a`Oy%Qz#T%Q#T#U,b#U;'S%Q;'S;=`%c<%lO%Qj,gU!a`Oy%Qz#b%Q#b#c,y#c;'S%Q;'S;=`%c<%lO%Qj-OU!a`Oy%Qz#h%Q#h#i-b#i;'S%Q;'S;=`%c<%lO%Qj-iS!qY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Q~-xWOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c<%lO-u~.gOt~~.jRO;'S-u;'S;=`.s;=`O-u~.vXOY-uZr-urs.bs#O-u#O#P.g#P;'S-u;'S;=`/c;=`<%l-u<%lO-u~/fP;=`<%l-uj/nYjYOy%Qz!Q%Q!Q![0^![!c%Q!c!i0^!i#T%Q#T#Z0^#Z;'S%Q;'S;=`%c<%lO%Qj0cY!a`Oy%Qz!Q%Q!Q![1R![!c%Q!c!i1R!i#T%Q#T#Z1R#Z;'S%Q;'S;=`%c<%lO%Qj1WY!a`Oy%Qz!Q%Q!Q![1v![!c%Q!c!i1v!i#T%Q#T#Z1v#Z;'S%Q;'S;=`%c<%lO%Qj1}YrY!a`Oy%Qz!Q%Q!Q![2m![!c%Q!c!i2m!i#T%Q#T#Z2m#Z;'S%Q;'S;=`%c<%lO%Qj2tYrY!a`Oy%Qz!Q%Q!Q![3d![!c%Q!c!i3d!i#T%Q#T#Z3d#Z;'S%Q;'S;=`%c<%lO%Qj3iY!a`Oy%Qz!Q%Q!Q![4X![!c%Q!c!i4X!i#T%Q#T#Z4X#Z;'S%Q;'S;=`%c<%lO%Qj4`YrY!a`Oy%Qz!Q%Q!Q![5O![!c%Q!c!i5O!i#T%Q#T#Z5O#Z;'S%Q;'S;=`%c<%lO%Qj5TY!a`Oy%Qz!Q%Q!Q![5s![!c%Q!c!i5s!i#T%Q#T#Z5s#Z;'S%Q;'S;=`%c<%lO%Qj5zSrY!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qd6ZUOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qd6tS!hS!a`Oy%Qz;'S%Q;'S;=`%c<%lO%Qb7VSZQOy%Qz;'S%Q;'S;=`%c<%lO%Q~7fWOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z<%lO7c~8RRO;'S7c;'S;=`8[;=`O7c~8_XOY7cZw7cwx.bx#O7c#O#P8O#P;'S7c;'S;=`8z;=`<%l7c<%lO7c~8}P;=`<%l7cj9VSeYOy%Qz;'S%Q;'S;=`%c<%lO%Q~9hOd~n9oUWQvWOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Qj:YWvW!mQOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj:wU!a`Oy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Qj;bY!a`#}YOy%Qz!Q%Q!Q![;Z![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj<VY!a`Oy%Qz{%Q{|<u|}%Q}!O<u!O!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj<zU!a`Oy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj=eU!a`#}YOy%Qz!Q%Q!Q![=^![;'S%Q;'S;=`%c<%lO%Qj>O[!a`#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%Qj>yS!^YOy%Qz;'S%Q;'S;=`%c<%lO%Qj?[WvWOy%Qz!O%Q!O!P:r!P!Q%Q!Q![=w![;'S%Q;'S;=`%c<%lO%Qj?yU]YOy%Qz!Q%Q!Q![;Z![;'S%Q;'S;=`%c<%lO%Q~@bTvWOy%Qz{@q{;'S%Q;'S;=`%c<%lO%Q~@xS!a`#t~Oy%Qz;'S%Q;'S;=`%c<%lO%QjAZ[#}YOy%Qz!O%Q!O!P;Z!P!Q%Q!Q![=w![!g%Q!g!h<Q!h#X%Q#X#Y<Q#Y;'S%Q;'S;=`%c<%lO%QjBUU`YOy%Qz![%Q![!]Bh!];'S%Q;'S;=`%c<%lO%QbBoSaQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjCQSkYOy%Qz;'S%Q;'S;=`%c<%lO%QhCcU!TWOy%Qz!_%Q!_!`Cu!`;'S%Q;'S;=`%c<%lO%QhC|S!TW!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QlDaS!TW!hSOy%Qz;'S%Q;'S;=`%c<%lO%QjDtV!jQ!TWOy%Qz!_%Q!_!`Cu!`!aEZ!a;'S%Q;'S;=`%c<%lO%QbEbS!jQ!a`Oy%Qz;'S%Q;'S;=`%c<%lO%QjEqYOy%Qz}%Q}!OFa!O!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjFfW!a`Oy%Qz!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjGV[iY!a`Oy%Qz}%Q}!OGO!O!Q%Q!Q![GO![!c%Q!c!}GO!}#T%Q#T#oGO#o;'S%Q;'S;=`%c<%lO%QjHQSmYOy%Qz;'S%Q;'S;=`%c<%lO%QnHcSl^Oy%Qz;'S%Q;'S;=`%c<%lO%QjHtSpYOy%Qz;'S%Q;'S;=`%c<%lO%QjIVSoYOy%Qz;'S%Q;'S;=`%c<%lO%QfIhU!mQOy%Qz!_%Q!_!`6m!`;'S%Q;'S;=`%c<%lO%Q`I}P;=`<%l$q",tokenizers:[KN,XN,qN,GN,1,2,3,4,new Xw("m~RRYZ[z{a~~g~aO#v~~dP!P!Qg~lO#w~~",28,129)],topRules:{StyleSheet:[0,6],Styles:[1,105]},specialized:[{term:124,get:s=>ZN[s]||-1},{term:125,get:s=>eV[s]||-1},{term:4,get:s=>tV[s]||-1},{term:25,get:s=>sV[s]||-1},{term:123,get:s=>nV[s]||-1}],tokenPrec:1963}),rV=1024;let oV=0,c0=class{constructor(e,t){this.from=e,this.to=t}},It=class{constructor(e={}){this.id=oV++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=bi.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}};It.closedBy=new It({deserialize:s=>s.split(" ")}),It.openedBy=new It({deserialize:s=>s.split(" ")}),It.group=new It({deserialize:s=>s.split(" ")}),It.isolate=new It({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}}),It.contextHash=new It({perNode:!0}),It.lookAhead=new It({perNode:!0}),It.mounted=new It({perNode:!0});let jd=class{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[It.mounted.id]}};const aV=Object.create(null);let bi=class r4{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):aV,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new r4(e.name||"",t,e.id,n);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(It.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(It.group),r=-1;r<(i?i.length:0);r++){let o=t[r<0?n.name:i[r]];if(o)return o}}}};bi.none=new bi("",Object.create(null),0,8);const Wd=new WeakMap,hx=new WeakMap;var gs;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(gs||(gs={}));let fn=class Tg{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,a]of r)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=jd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new d0(this.topNode,e)}cursorAt(e,t=0,n=0){let i=Wd.get(this)||this.topNode,r=new d0(i);return r.moveTo(e,t),Wd.set(this,r._tree),r}get topNode(){return new wi(this,0,0,null)}resolve(e,t=0){let n=ec(Wd.get(this)||this.topNode,e,t,!1);return Wd.set(this,n),n}resolveInner(e,t=0){let n=ec(hx.get(this)||this.topNode,e,t,!0);return hx.set(this,n),n}resolveStack(e,t=0){return dV(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,o=e.mode||0,a=(o&gs.IncludeAnonymous)>0;for(let l=this.cursor(o|gs.IncludeAnonymous);;){let c=!1;if(l.from<=r&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:f0(bi.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new Tg(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new Tg(bi.none,t,n,i)))}static build(e){return hV(e)}};fn.empty=new fn(bi.none,[],[],0);let lV=class o4{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new o4(this.buffer,this.index)}},ka=class a4{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return bi.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,n==e)return r;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,n,i,r){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(fx(r,i,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){r[l++]=i[a++],r[l++]=i[a++]-n;let c=r[l++]=i[a++]-n;r[l++]=i[a++]-e,o=Math.max(o,c)}return new a4(r,o,this.set)}};function fx(s,e,t,n){switch(s){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function ec(s,e,t,n){for(var i;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!n&&s instanceof wi&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=n?0:gs.IgnoreOverlays;if(n)for(let o=s,a=o.parent;a;o=a,a=o.parent)o instanceof wi&&o.index<0&&((i=a.enter(e,t,r))===null||i===void 0?void 0:i.from)!=o.from&&(s=a);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}let px=class{cursor(e=0){return new d0(this,e)}getChild(e,t=null,n=null){let i=mx(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return mx(this,e,t,n)}resolve(e,t=0){return ec(this,e,t,!1)}resolveInner(e,t=0){return ec(this,e,t,!0)}matchContext(e){return u0(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}},wi=class Vh extends px{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,r=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],d=l[e]+o.from;if(fx(i,n,d,d+u.length)){if(u instanceof ka){if(r&gs.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,t,n-d,i);if(f>-1)return new tc(new cV(o,u,e,d),null,f)}else if(r&gs.IncludeAnonymous||!u.type.isAnonymous||h0(u)){let f;if(!(r&gs.IgnoreMounts)&&(f=jd.get(u))&&!f.overlay)return new Vh(f.tree,d,e,o);let p=new Vh(u,d,e,o);return r&gs.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,n,i)}}}if(r&gs.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&gs.IgnoreOverlays)&&(i=jd.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=r:o<r)&&(t<0?a>=r:a>r))return new Vh(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function mx(s,e,t,n){let i=s.cursor(),r=[];if(!i.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return r}for(;;){if(n!=null&&i.type.is(n))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return n==null?r:[]}}function u0(s,e,t=e.length-1){for(let n=s;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}let cV=class{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}},tc=class Sc extends px{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new Sc(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&gs.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new Sc(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Sc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Sc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];e.push(n.slice(i,r,o)),t.push(0)}return new fn(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function gx(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let n=t instanceof wi&&t.index<0?null:t.parent,i=s.slice();return n?i[e]=n:i.splice(e,1),new uV(i,t)}let uV=class{constructor(e,t){this.heads=e,this.node=t}get next(){return gx(this.heads)}};function dV(s,e,t){let n=s.resolveInner(e,t),i=null;for(let r=n instanceof wi?n:n.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(i||(i=[n])).push(o.resolve(e,t)),r=o}else{let o=jd.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new wi(o.tree,o.overlay[0].from+r.from,-1,r);(i||(i=[n])).push(ec(a,e,t,!1))}}return i?gx(i):n}let d0=class{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof wi)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof wi?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&gs.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&gs.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&gs.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let r=t+e,o=e<0?-1:n._tree.children.length;r!=o;r+=e){let a=n._tree.children[r];if(this.mode&gs.IncludeAnonymous||a instanceof ka||!a.type.isAnonymous||h0(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new tc(this.buffer,t,this.stack[i]);return this.bufferNode=new tc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return u0(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return u0(this._tree,e,i);let o=n[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}};function h0(s){return s.children.some(e=>e instanceof ka||!e.type.isAnonymous||h0(e))}function hV(s){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=rV,reused:r=[],minRepeatType:o=n.types.length}=s,a=Array.isArray(t)?new lV(t,t.length):t,l=n.types,c=0,u=0;function d(w,R,T,E,F,K){let{id:W,start:A,end:D,size:N}=a,Q=u,H=c;for(;N<0;)if(a.next(),N==-1){let Xe=r[W];T.push(Xe),E.push(A-w);return}else if(N==-3){c=W;return}else if(N==-4){u=W;return}else throw new RangeError(`Unrecognized record size: ${N}`);let J=l[W],ae,be,We=A-w;if(D-A<=i&&(be=k(a.pos-R,F))){let Xe=new Uint16Array(be.size-be.skip),re=a.pos-be.size,le=Xe.length;for(;a.pos>re;)le=O(be.start,Xe,le);ae=new ka(Xe,D-be.start,n),We=be.start-w}else{let Xe=a.pos-N;a.next();let re=[],le=[],se=W>=o?W:-1,Te=0,Ye=D;for(;a.pos>Xe;)se>=0&&a.id==se&&a.size>=0?(a.end<=Ye-i&&(g(re,le,A,Te,a.end,Ye,se,Q,H),Te=re.length,Ye=a.end),a.next()):K>2500?f(A,Xe,re,le):d(A,Xe,re,le,se,K+1);if(se>=0&&Te>0&&Te<re.length&&g(re,le,A,Te,A,Ye,se,Q,H),re.reverse(),le.reverse(),se>-1&&Te>0){let Z=p(J,H);ae=f0(J,re,le,0,re.length,0,D-A,Z,Z)}else ae=S(J,re,le,D-A,Q-D,H)}T.push(ae),E.push(We)}function f(w,R,T,E){let F=[],K=0,W=-1;for(;a.pos>R;){let{id:A,start:D,end:N,size:Q}=a;if(Q>4)a.next();else{if(W>-1&&D<W)break;W<0&&(W=N-i),F.push(A,D,N),K++,a.next()}}if(K){let A=new Uint16Array(K*4),D=F[F.length-2];for(let N=F.length-3,Q=0;N>=0;N-=3)A[Q++]=F[N],A[Q++]=F[N+1]-D,A[Q++]=F[N+2]-D,A[Q++]=Q;T.push(new ka(A,F[2]-D,n)),E.push(D-w)}}function p(w,R){return(T,E,F)=>{let K=0,W=T.length-1,A,D;if(W>=0&&(A=T[W])instanceof fn){if(!W&&A.type==w&&A.length==F)return A;(D=A.prop(It.lookAhead))&&(K=E[W]+A.length+D)}return S(w,T,E,F,K,R)}}function g(w,R,T,E,F,K,W,A,D){let N=[],Q=[];for(;w.length>E;)N.push(w.pop()),Q.push(R.pop()+T-F);w.push(S(n.types[W],N,Q,K-F,A-K,D)),R.push(F-T)}function S(w,R,T,E,F,K,W){if(K){let A=[It.contextHash,K];W=W?[A].concat(W):[A]}if(F>25){let A=[It.lookAhead,F];W=W?[A].concat(W):[A]}return new fn(w,R,T,E,W)}function k(w,R){let T=a.fork(),E=0,F=0,K=0,W=T.end-i,A={size:0,start:0,skip:0};e:for(let D=T.pos-w;T.pos>D;){let N=T.size;if(T.id==R&&N>=0){A.size=E,A.start=F,A.skip=K,K+=4,E+=4,T.next();continue}let Q=T.pos-N;if(N<0||Q<D||T.start<W)break;let H=T.id>=o?4:0,J=T.start;for(T.next();T.pos>Q;){if(T.size<0)if(T.size==-3)H+=4;else break e;else T.id>=o&&(H+=4);T.next()}F=J,E+=N,K+=H}return(R<0||E==w)&&(A.size=E,A.start=F,A.skip=K),A.size>4?A:void 0}function O(w,R,T){let{id:E,start:F,end:K,size:W}=a;if(a.next(),W>=0&&E<o){let A=T;if(W>4){let D=a.pos-(W-4);for(;a.pos>D;)T=O(w,R,T)}R[--T]=A,R[--T]=K-w,R[--T]=F-w,R[--T]=E}else W==-3?c=E:W==-4&&(u=E);return T}let $=[],M=[];for(;a.pos>0;)d(s.start||0,s.bufferStart||0,$,M,-1,0);let b=(e=s.length)!==null&&e!==void 0?e:$.length?M[0]+$[0].length:0;return new fn(l[s.topID],$.reverse(),M.reverse(),b)}const vx=new WeakMap;function Ud(s,e){if(!s.isAnonymous||e instanceof ka||e.type!=s)return 1;let t=vx.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=s||!(n instanceof fn)){t=1;break}t+=Ud(s,n)}vx.set(e,t)}return t}function f0(s,e,t,n,i,r,o,a,l){let c=0;for(let g=n;g<i;g++)c+=Ud(s,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,S,k,O,$){for(let M=k;M<O;){let b=M,w=S[M],R=Ud(s,g[M]);for(M++;M<O;M++){let T=Ud(s,g[M]);if(R+T>=u)break;R+=T}if(M==b+1){if(R>u){let T=g[b];p(T.children,T.positions,0,T.children.length,S[b]+$);continue}d.push(g[b])}else{let T=S[M-1]+g[M-1].length-w;d.push(f0(s,g,S,b,M,w,T,null,l))}f.push(w+$-r)}}return p(e,t,n,i,0),(a||l)(d,f,o)}class fV{constructor(){this.map=new WeakMap}setBuffer(e,t,n){let i=this.map.get(e);i||this.map.set(e,i=new Map),i.set(t,n)}getBuffer(e,t){let n=this.map.get(e);return n&&n.get(t)}set(e,t){e instanceof tc?this.setBuffer(e.context.buffer,e.index,t):e instanceof wi&&this.map.set(e.tree,t)}get(e){return e instanceof tc?this.getBuffer(e.context.buffer,e.index):e instanceof wi?this.map.get(e.tree):void 0}cursorSet(e,t){e.buffer?this.setBuffer(e.buffer.buffer,e.index,t):this.map.set(e.tree,t)}cursorGet(e){return e.buffer?this.getBuffer(e.buffer.buffer,e.index):this.map.get(e.tree)}}let Hd=class Pg{constructor(e,t,n,i,r=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new Pg(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],r=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,d=u?u.fromA:1e9;if(d-l>=n)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new Pg(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>d)break;o=r<e.length?e[r++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}},pV=class{startParse(e,t,n){return typeof e=="string"&&(e=new mV(e)),n=n?n.length?n.map(i=>new c0(i.from,i.to)):[new c0(0,0)]:[new c0(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let r=i.advance();if(r)return r}}},mV=class{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}};new It({perNode:!0});let gV=0,ur=class Lg{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=gV++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof Lg&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Lg(n,[],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(e){let t=new yx(e);return n=>n.modified.indexOf(t)>-1?n:yx.get(n.base||n,n.modified.concat(t).sort((i,r)=>i.id-r.id))}},vV=0,yx=class l4{constructor(e){this.name=e,this.instances=[],this.id=vV++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(a=>a.base==e&&yV(t,a.modified));if(n)return n;let i=[],r=new ur(e.name,i,e,t);for(let a of t)a.instances.push(r);let o=_V(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(l4.get(a,l));return r}};function yV(s,e){return s.length==e.length&&s.every((t,n)=>t==e[n])}function _V(s){let e=[[]];for(let t=0;t<s.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(s[t]));return e.sort((t,n)=>n.length-t.length)}function bV(s){let e=Object.create(null);for(let t in s){let n=s[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let r=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(r.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=r.length-1,c=r[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new p0(n,o,l>0?r.slice(0,l):null);e[c]=u.sort(e[c])}}return wV.add(e)}const wV=new It;let p0=class{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}};p0.empty=new p0([],2,null);function xV(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:n,all:i=null}={};return{style:r=>{let o=i;for(let a of r)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}const ke=ur.define,Qd=ke(),Hr=ke(),_x=ke(Hr),bx=ke(Hr),Qr=ke(),Yd=ke(Qr),m0=ke(Qr),xi=ke(),Po=ke(xi),ki=ke(),Si=ke(),g0=ke(),sc=ke(g0),qd=ke(),at={comment:Qd,lineComment:ke(Qd),blockComment:ke(Qd),docComment:ke(Qd),name:Hr,variableName:ke(Hr),typeName:_x,tagName:ke(_x),propertyName:bx,attributeName:ke(bx),className:ke(Hr),labelName:ke(Hr),namespace:ke(Hr),macroName:ke(Hr),literal:Qr,string:Yd,docString:ke(Yd),character:ke(Yd),attributeValue:ke(Yd),number:m0,integer:ke(m0),float:ke(m0),bool:ke(Qr),regexp:ke(Qr),escape:ke(Qr),color:ke(Qr),url:ke(Qr),keyword:ki,self:ke(ki),null:ke(ki),atom:ke(ki),unit:ke(ki),modifier:ke(ki),operatorKeyword:ke(ki),controlKeyword:ke(ki),definitionKeyword:ke(ki),moduleKeyword:ke(ki),operator:Si,derefOperator:ke(Si),arithmeticOperator:ke(Si),logicOperator:ke(Si),bitwiseOperator:ke(Si),compareOperator:ke(Si),updateOperator:ke(Si),definitionOperator:ke(Si),typeOperator:ke(Si),controlOperator:ke(Si),punctuation:g0,separator:ke(g0),bracket:sc,angleBracket:ke(sc),squareBracket:ke(sc),paren:ke(sc),brace:ke(sc),content:xi,heading:Po,heading1:ke(Po),heading2:ke(Po),heading3:ke(Po),heading4:ke(Po),heading5:ke(Po),heading6:ke(Po),contentSeparator:ke(xi),list:ke(xi),quote:ke(xi),emphasis:ke(xi),strong:ke(xi),link:ke(xi),monospace:ke(xi),strikethrough:ke(xi),inserted:ke(),deleted:ke(),changed:ke(),invalid:ke(),meta:qd,documentMeta:ke(qd),annotation:ke(qd),processingInstruction:ke(qd),definition:ur.defineModifier("definition"),constant:ur.defineModifier("constant"),function:ur.defineModifier("function"),standard:ur.defineModifier("standard"),local:ur.defineModifier("local"),special:ur.defineModifier("special")};for(let s in at){let e=at[s];e instanceof ur&&(e.name=s)}xV([{tag:at.link,class:"tok-link"},{tag:at.heading,class:"tok-heading"},{tag:at.emphasis,class:"tok-emphasis"},{tag:at.strong,class:"tok-strong"},{tag:at.keyword,class:"tok-keyword"},{tag:at.atom,class:"tok-atom"},{tag:at.bool,class:"tok-bool"},{tag:at.url,class:"tok-url"},{tag:at.labelName,class:"tok-labelName"},{tag:at.inserted,class:"tok-inserted"},{tag:at.deleted,class:"tok-deleted"},{tag:at.literal,class:"tok-literal"},{tag:at.string,class:"tok-string"},{tag:at.number,class:"tok-number"},{tag:[at.regexp,at.escape,at.special(at.string)],class:"tok-string2"},{tag:at.variableName,class:"tok-variableName"},{tag:at.local(at.variableName),class:"tok-variableName tok-local"},{tag:at.definition(at.variableName),class:"tok-variableName tok-definition"},{tag:at.special(at.variableName),class:"tok-variableName2"},{tag:at.definition(at.propertyName),class:"tok-propertyName tok-definition"},{tag:at.typeName,class:"tok-typeName"},{tag:at.namespace,class:"tok-namespace"},{tag:at.className,class:"tok-className"},{tag:at.macroName,class:"tok-macroName"},{tag:at.propertyName,class:"tok-propertyName"},{tag:at.operator,class:"tok-operator"},{tag:at.comment,class:"tok-comment"},{tag:at.meta,class:"tok-meta"},{tag:at.invalid,class:"tok-invalid"},{tag:at.punctuation,class:"tok-punctuation"}]);var v0;const nc=new It;function kV(s){return De.define({combine:s?e=>e.concat(s):void 0})}const SV=new It;let Ci=class{constructor(e,t,n=[],i=""){this.data=e,this.name=i,ut.prototype.hasOwnProperty("tree")||Object.defineProperty(ut.prototype,"tree",{get(){return Kd(this)}}),this.parser=t,this.extension=[Sa.of(this),ut.languageData.of((r,o,a)=>{let l=wx(r,o,a),c=l.type.prop(nc);if(!c)return[];let u=r.facet(c),d=l.type.prop(SV);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,r)){let g=r.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return wx(e,t,n).type.prop(nc)==this.data}findRegions(e){let t=e.facet(Sa);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(r,o)=>{if(r.prop(nc)==this.data){n.push({from:o,to:o+r.length});return}let a=r.prop(It.mounted);if(a){if(a.tree.prop(nc)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+r.length});return}else if(a.overlay){let l=n.length;if(i(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<r.children.length;l++){let c=r.children[l];c instanceof fn&&i(c,r.positions[l]+o)}};return i(Kd(e),0),n}get allowsNesting(){return!0}};Ci.setState=rt.define();function wx(s,e,t){let n=s.facet(Sa),i=Kd(s).topNode;if(!n||n.allowsNesting)for(let r=i;r;r=r.enter(e,t,gs.ExcludeBuffers))r.type.isTop&&(i=r);return i}class Gd extends Ci{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=kV(e.languageData);return new Gd(t,e.parser.configure({props:[nc.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Gd(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Kd(s){let e=s.field(Ci.state,!1);return e?e.tree:fn.empty}let CV=class{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}},ic=null,OV=class Eg{constructor(e,t,n=[],i,r,o,a,l){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new Eg(e,t,[],fn.empty,0,n,[],null)}startParse(){return this.parser.startParse(new CV(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=fn.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Hd.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Hd.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=ic;ic=this;try{return e()}finally{ic=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=xx(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),n=Hd.applyChanges(n,l),i=fn.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new Eg(this.parser,t,n,i,r,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:r}=this.skipped[n];i<e.to&&r>e.from&&(this.fragments=xx(this.fragments,i,r),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends pV{createParse(t,n,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let l=ic;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new fn(bi.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return ic}};function xx(s,e,t){return Hd.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}let y0=class Dg{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Dg(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=OV.create(e.facet(Sa).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Dg(n)}};Ci.state=ms.define({create:y0.init,update(s,e){for(let t of e.effects)if(t.is(Ci.setState))return t.value;return e.startState.facet(Sa)!=e.state.facet(Sa)?y0.init(e.state):s.apply(e)}});let kx=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(kx=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const _0=typeof navigator<"u"&&(!((v0=navigator.scheduling)===null||v0===void 0)&&v0.isInputPending)?()=>navigator.scheduling.isInputPending():null,MV=Xt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Ci.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Ci.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=kx(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field(Ci.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!_0?Math.max(25,e.timeRemaining()-5):1e9),a=r.context.treeLen<i&&n.doc.length>i+1e3,l=r.context.work(()=>_0&&_0()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:Ci.setState.of(new y0(r.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ws(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Sa=De.define({combine(s){return s.length?s[0]:null},enables:s=>[Ci.state,MV,Le.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]});class AV{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const $V=new It;function TV({except:s,units:e=1}={}){return t=>{let n=s&&s.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const PV=new It;function LV(s){let e=s.firstChild,t=s.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?s.to:t.from}:null}const EV=Object.create(null),Sx=[bi.none],Cx=[],Ox=Object.create(null),DV=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])DV[s]=IV(EV,e);function b0(s,e){Cx.indexOf(s)>-1||(Cx.push(s),console.warn(e))}function IV(s,e){let t=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=s[c]||at[c];u?typeof u=="function"?l.length?l=l.map(u):b0(c,`Modifier ${c} used at start of tag`):l.length?b0(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:b0(c,`Unknown highlighting tag ${c}`)}for(let c of l)t.push(c)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(a=>a.id),r=Ox[i];if(r)return r.id;let o=Ox[i]=bi.define({id:Sx.length,name:n,props:[bV({[n]:t})]});return Sx.push(o),o.id}Et.RTL,Et.LTR;let w0=null;function x0(){if(!w0&&typeof document=="object"&&document.body){let{style:s}=document.body,e=[],t=new Set;for(let n in s)n!="cssText"&&n!="cssFloat"&&typeof s[n]=="string"&&(/[A-Z]/.test(n)&&(n=n.replace(/[A-Z]/g,i=>"-"+i.toLowerCase())),t.has(n)||(e.push(n),t.add(n)));w0=e.sort().map(n=>({type:"property",label:n,apply:n+": "}))}return w0||[]}const Mx=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(s=>({type:"class",label:s})),Ax=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(s=>({type:"keyword",label:s})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(s=>({type:"constant",label:s}))),RV=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(s=>({type:"type",label:s})),FV=["@charset","@color-profile","@container","@counter-style","@font-face","@font-feature-values","@font-palette-values","@import","@keyframes","@layer","@media","@namespace","@page","@position-try","@property","@scope","@starting-style","@supports","@view-transition"].map(s=>({type:"keyword",label:s})),dr=/^(\w[\w-]*|-\w[\w-]*|)$/,BV=/^-(-[\w-]*)?$/;function NV(s,e){var t;if((s.name=="("||s.type.isError)&&(s=s.parent||s),s.name!="ArgList")return!1;let n=(t=s.parent)===null||t===void 0?void 0:t.firstChild;return(n==null?void 0:n.name)!="Callee"?!1:e.sliceString(n.from,n.to)=="var"}const $x=new fV,VV=["Declaration"];function zV(s){for(let e=s;;){if(e.type.isTop)return e;if(!(e=e.parent))return s}}function Tx(s,e,t){if(e.to-e.from>4096){let n=$x.get(e);if(n)return n;let i=[],r=new Set,o=e.cursor(gs.IncludeAnonymous);if(o.firstChild())do for(let a of Tx(s,o.node,t))r.has(a.label)||(r.add(a.label),i.push(a));while(o.nextSibling());return $x.set(e,i),i}else{let n=[],i=new Set;return e.cursor().iterate(r=>{var o;if(t(r)&&r.matchContext(VV)&&((o=r.node.nextSibling)===null||o===void 0?void 0:o.name)==":"){let a=s.sliceString(r.from,r.to);i.has(a)||(i.add(a),n.push({label:a,type:"variable"}))}}),n}}const jV=(s=>e=>{let{state:t,pos:n}=e,i=Kd(t).resolveInner(n,-1),r=i.type.isError&&i.from==i.to-1&&t.doc.sliceString(i.from,i.to)=="-";if(i.name=="PropertyName"||(r||i.name=="TagName")&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:x0(),validFor:dr};if(i.name=="ValueName")return{from:i.from,options:Ax,validFor:dr};if(i.name=="PseudoClassName")return{from:i.from,options:Mx,validFor:dr};if(s(i)||(e.explicit||r)&&NV(i,t.doc))return{from:s(i)||r?i.from:n,options:Tx(t.doc,zV(i),s),validFor:BV};if(i.name=="TagName"){for(let{parent:l}=i;l;l=l.parent)if(l.name=="Block")return{from:i.from,options:x0(),validFor:dr};return{from:i.from,options:RV,validFor:dr}}if(i.name=="AtKeyword")return{from:i.from,options:FV,validFor:dr};if(!e.explicit)return null;let o=i.resolve(n),a=o.childBefore(n);return a&&a.name==":"&&o.name=="PseudoClassSelector"?{from:n,options:Mx,validFor:dr}:a&&a.name==":"&&o.name=="Declaration"||o.name=="ArgList"?{from:n,options:Ax,validFor:dr}:o.name=="Block"||o.name=="Styles"?{from:n,options:x0(),validFor:dr}:null})(s=>s.name=="VariableName"),Px=Gd.define({name:"css",parser:iV.configure({props:[$V.add({Declaration:TV()}),PV.add({"Block KeyframeList":LV})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function WV(){return new AV(Px,Px.data.of({autocomplete:jV}))}const UV=1024;let HV=0;class k0{constructor(e,t){this.from=e,this.to=t}}class pt{constructor(e={}){this.id=HV++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=$n.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}pt.closedBy=new pt({deserialize:s=>s.split(" ")}),pt.openedBy=new pt({deserialize:s=>s.split(" ")}),pt.group=new pt({deserialize:s=>s.split(" ")}),pt.isolate=new pt({deserialize:s=>{if(s&&s!="rtl"&&s!="ltr"&&s!="auto")throw new RangeError("Invalid value for isolate: "+s);return s||"auto"}}),pt.contextHash=new pt({perNode:!0}),pt.lookAhead=new pt({perNode:!0}),pt.mounted=new pt({perNode:!0});class Xd{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[pt.mounted.id]}}const QV=Object.create(null);class $n{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):QV,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new $n(e.name||"",t,e.id,n);if(e.props){for(let r of e.props)if(Array.isArray(r)||(r=r(i)),r){if(r[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[r[0].id]=r[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(pt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(pt.group),r=-1;r<(i?i.length:0);r++){let o=t[r<0?n.name:i[r]];if(o)return o}}}}$n.none=new $n("",Object.create(null),0,8);const Jd=new WeakMap,Lx=new WeakMap;var xs;(function(s){s[s.ExcludeBuffers=1]="ExcludeBuffers",s[s.IncludeAnonymous=2]="IncludeAnonymous",s[s.IgnoreMounts=4]="IgnoreMounts",s[s.IgnoreOverlays=8]="IgnoreOverlays"})(xs||(xs={}));class $s{constructor(e,t,n,i,r){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,r&&r.length){this.props=Object.create(null);for(let[o,a]of r)this.props[typeof o=="number"?o:o.id]=a}}toString(){let e=Xd.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new O0(this.topNode,e)}cursorAt(e,t=0,n=0){let i=Jd.get(this)||this.topNode,r=new O0(i);return r.moveTo(e,t),Jd.set(this,r._tree),r}get topNode(){return new Tn(this,0,0,null)}resolve(e,t=0){let n=rc(Jd.get(this)||this.topNode,e,t,!1);return Jd.set(this,n),n}resolveInner(e,t=0){let n=rc(Lx.get(this)||this.topNode,e,t,!0);return Lx.set(this,n),n}resolveStack(e,t=0){return GV(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:r=this.length}=e,o=e.mode||0,a=(o&xs.IncludeAnonymous)>0;for(let l=this.cursor(o|xs.IncludeAnonymous);;){let c=!1;if(l.from<=r&&l.to>=i&&(!a&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(a||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:A0($n.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new $s(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new $s($n.none,t,n,i)))}static build(e){return KV(e)}}$s.empty=new $s($n.none,[],[],0);class S0{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new S0(this.buffer,this.index)}}class Yr{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return $n.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],r=i.name;if(/\W/.test(r)&&!i.isError&&(r=JSON.stringify(r)),e+=4,n==e)return r;let o=[];for(;e<n;)o.push(this.childString(e)),e=this.buffer[e+3];return r+"("+o.join(",")+")"}findChild(e,t,n,i,r){let{buffer:o}=this,a=-1;for(let l=e;l!=t&&!(Ex(r,i,o[l+1],o[l+2])&&(a=l,n>0));l=o[l+3]);return a}slice(e,t,n){let i=this.buffer,r=new Uint16Array(t-e),o=0;for(let a=e,l=0;a<t;){r[l++]=i[a++],r[l++]=i[a++]-n;let c=r[l++]=i[a++]-n;r[l++]=i[a++]-e,o=Math.max(o,c)}return new Yr(r,o,this.set)}}function Ex(s,e,t,n){switch(s){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function rc(s,e,t,n){for(var i;s.from==s.to||(t<1?s.from>=e:s.from>e)||(t>-1?s.to<=e:s.to<e);){let o=!n&&s instanceof Tn&&s.index<0?null:s.parent;if(!o)return s;s=o}let r=n?0:xs.IgnoreOverlays;if(n)for(let o=s,a=o.parent;a;o=a,a=o.parent)o instanceof Tn&&o.index<0&&((i=a.enter(e,t,r))===null||i===void 0?void 0:i.from)!=o.from&&(s=a);for(;;){let o=s.enter(e,t,r);if(!o)return s;s=o}}class Dx{cursor(e=0){return new O0(this,e)}getChild(e,t=null,n=null){let i=Ix(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return Ix(this,e,t,n)}resolve(e,t=0){return rc(this,e,t,!1)}resolveInner(e,t=0){return rc(this,e,t,!0)}matchContext(e){return C0(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class Tn extends Dx{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,r=0){for(let o=this;;){for(let{children:a,positions:l}=o._tree,c=t>0?a.length:-1;e!=c;e+=t){let u=a[e],d=l[e]+o.from;if(Ex(i,n,d,d+u.length)){if(u instanceof Yr){if(r&xs.ExcludeBuffers)continue;let f=u.findChild(0,u.buffer.length,t,n-d,i);if(f>-1)return new qr(new YV(o,u,e,d),null,f)}else if(r&xs.IncludeAnonymous||!u.type.isAnonymous||M0(u)){let f;if(!(r&xs.IgnoreMounts)&&(f=Xd.get(u))&&!f.overlay)return new Tn(f.tree,d,e,o);let p=new Tn(u,d,e,o);return r&xs.IncludeAnonymous||!p.type.isAnonymous?p:p.nextChild(t<0?u.children.length-1:0,t,n,i)}}}if(r&xs.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+t:e=t<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&xs.IgnoreOverlays)&&(i=Xd.get(this._tree))&&i.overlay){let r=e-this.from;for(let{from:o,to:a}of i.overlay)if((t>0?o<=r:o<r)&&(t<0?a>=r:a>r))return new Tn(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Ix(s,e,t,n){let i=s.cursor(),r=[];if(!i.firstChild())return r;if(t!=null){for(let o=!1;!o;)if(o=i.type.is(t),!i.nextSibling())return r}for(;;){if(n!=null&&i.type.is(n))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return n==null?r:[]}}function C0(s,e,t=e.length-1){for(let n=s;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class YV{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class qr extends Dx{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return r<0?null:new qr(this.context,this,r)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&xs.ExcludeBuffers)return null;let{buffer:i}=this.context,r=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return r<0?null:new qr(this.context,this,r)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new qr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new qr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,r=n.buffer[this.index+3];if(r>i){let o=n.buffer[this.index+1];e.push(n.slice(i,r,o)),t.push(0)}return new $s(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Rx(s){if(!s.length)return null;let e=0,t=s[0];for(let r=1;r<s.length;r++){let o=s[r];(o.from>t.from||o.to<t.to)&&(t=o,e=r)}let n=t instanceof Tn&&t.index<0?null:t.parent,i=s.slice();return n?i[e]=n:i.splice(e,1),new qV(i,t)}class qV{constructor(e,t){this.heads=e,this.node=t}get next(){return Rx(this.heads)}}function GV(s,e,t){let n=s.resolveInner(e,t),i=null;for(let r=n instanceof Tn?n:n.context.parent;r;r=r.parent)if(r.index<0){let o=r.parent;(i||(i=[n])).push(o.resolve(e,t)),r=o}else{let o=Xd.get(r.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let a=new Tn(o.tree,o.overlay[0].from+r.from,-1,r);(i||(i=[n])).push(rc(a,e,t,!1))}}return i?Rx(i):n}class O0{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Tn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof Tn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,r=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return r<0?!1:(this.stack.push(this.index),this.yieldBuf(r))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&xs.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&xs.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&xs.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let r=0;r<this.index;r++)if(i.buffer.buffer[r+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let r=t+e,o=e<0?-1:n._tree.children.length;r!=o;r+=e){let a=n._tree.children[r];if(this.mode&xs.IncludeAnonymous||a instanceof Yr||!a.type.isAnonymous||M0(a))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,r=this.stack.length;r>=0;){for(let o=e;o;o=o._parent)if(o.index==i){if(i==this.index)return o;t=o,n=r+1;break e}i=this.stack[--r]}for(let i=n;i<this.stack.length;i++)t=new qr(this.buffer,t,this.stack[i]);return this.bufferNode=new qr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return C0(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,r=this.stack.length-1;i>=0;r--){if(r<0)return C0(this._tree,e,i);let o=n[t.buffer[this.stack[r]]];if(!o.isAnonymous){if(e[i]&&e[i]!=o.name)return!1;i--}}return!0}}function M0(s){return s.children.some(e=>e instanceof Yr||!e.type.isAnonymous||M0(e))}function KV(s){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=UV,reused:r=[],minRepeatType:o=n.types.length}=s,a=Array.isArray(t)?new S0(t,t.length):t,l=n.types,c=0,u=0;function d(w,R,T,E,F,K){let{id:W,start:A,end:D,size:N}=a,Q=u,H=c;for(;N<0;)if(a.next(),N==-1){let Xe=r[W];T.push(Xe),E.push(A-w);return}else if(N==-3){c=W;return}else if(N==-4){u=W;return}else throw new RangeError(`Unrecognized record size: ${N}`);let J=l[W],ae,be,We=A-w;if(D-A<=i&&(be=k(a.pos-R,F))){let Xe=new Uint16Array(be.size-be.skip),re=a.pos-be.size,le=Xe.length;for(;a.pos>re;)le=O(be.start,Xe,le);ae=new Yr(Xe,D-be.start,n),We=be.start-w}else{let Xe=a.pos-N;a.next();let re=[],le=[],se=W>=o?W:-1,Te=0,Ye=D;for(;a.pos>Xe;)se>=0&&a.id==se&&a.size>=0?(a.end<=Ye-i&&(g(re,le,A,Te,a.end,Ye,se,Q,H),Te=re.length,Ye=a.end),a.next()):K>2500?f(A,Xe,re,le):d(A,Xe,re,le,se,K+1);if(se>=0&&Te>0&&Te<re.length&&g(re,le,A,Te,A,Ye,se,Q,H),re.reverse(),le.reverse(),se>-1&&Te>0){let Z=p(J,H);ae=A0(J,re,le,0,re.length,0,D-A,Z,Z)}else ae=S(J,re,le,D-A,Q-D,H)}T.push(ae),E.push(We)}function f(w,R,T,E){let F=[],K=0,W=-1;for(;a.pos>R;){let{id:A,start:D,end:N,size:Q}=a;if(Q>4)a.next();else{if(W>-1&&D<W)break;W<0&&(W=N-i),F.push(A,D,N),K++,a.next()}}if(K){let A=new Uint16Array(K*4),D=F[F.length-2];for(let N=F.length-3,Q=0;N>=0;N-=3)A[Q++]=F[N],A[Q++]=F[N+1]-D,A[Q++]=F[N+2]-D,A[Q++]=Q;T.push(new Yr(A,F[2]-D,n)),E.push(D-w)}}function p(w,R){return(T,E,F)=>{let K=0,W=T.length-1,A,D;if(W>=0&&(A=T[W])instanceof $s){if(!W&&A.type==w&&A.length==F)return A;(D=A.prop(pt.lookAhead))&&(K=E[W]+A.length+D)}return S(w,T,E,F,K,R)}}function g(w,R,T,E,F,K,W,A,D){let N=[],Q=[];for(;w.length>E;)N.push(w.pop()),Q.push(R.pop()+T-F);w.push(S(n.types[W],N,Q,K-F,A-K,D)),R.push(F-T)}function S(w,R,T,E,F,K,W){if(K){let A=[pt.contextHash,K];W=W?[A].concat(W):[A]}if(F>25){let A=[pt.lookAhead,F];W=W?[A].concat(W):[A]}return new $s(w,R,T,E,W)}function k(w,R){let T=a.fork(),E=0,F=0,K=0,W=T.end-i,A={size:0,start:0,skip:0};e:for(let D=T.pos-w;T.pos>D;){let N=T.size;if(T.id==R&&N>=0){A.size=E,A.start=F,A.skip=K,K+=4,E+=4,T.next();continue}let Q=T.pos-N;if(N<0||Q<D||T.start<W)break;let H=T.id>=o?4:0,J=T.start;for(T.next();T.pos>Q;){if(T.size<0)if(T.size==-3)H+=4;else break e;else T.id>=o&&(H+=4);T.next()}F=J,E+=N,K+=H}return(R<0||E==w)&&(A.size=E,A.start=F,A.skip=K),A.size>4?A:void 0}function O(w,R,T){let{id:E,start:F,end:K,size:W}=a;if(a.next(),W>=0&&E<o){let A=T;if(W>4){let D=a.pos-(W-4);for(;a.pos>D;)T=O(w,R,T)}R[--T]=A,R[--T]=K-w,R[--T]=F-w,R[--T]=E}else W==-3?c=E:W==-4&&(u=E);return T}let $=[],M=[];for(;a.pos>0;)d(s.start||0,s.bufferStart||0,$,M,-1,0);let b=(e=s.length)!==null&&e!==void 0?e:$.length?M[0]+$[0].length:0;return new $s(l[s.topID],$.reverse(),M.reverse(),b)}const Fx=new WeakMap;function Zd(s,e){if(!s.isAnonymous||e instanceof Yr||e.type!=s)return 1;let t=Fx.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=s||!(n instanceof $s)){t=1;break}t+=Zd(s,n)}Fx.set(e,t)}return t}function A0(s,e,t,n,i,r,o,a,l){let c=0;for(let g=n;g<i;g++)c+=Zd(s,e[g]);let u=Math.ceil(c*1.5/8),d=[],f=[];function p(g,S,k,O,$){for(let M=k;M<O;){let b=M,w=S[M],R=Zd(s,g[M]);for(M++;M<O;M++){let T=Zd(s,g[M]);if(R+T>=u)break;R+=T}if(M==b+1){if(R>u){let T=g[b];p(T.children,T.positions,0,T.children.length,S[b]+$);continue}d.push(g[b])}else{let T=S[M-1]+g[M-1].length-w;d.push(A0(s,g,S,b,M,w,T,null,l))}f.push(w+$-r)}}return p(e,t,n,i,0),(a||l)(d,f,o)}class Lo{constructor(e,t,n,i,r=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(r?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new Lo(0,e.length,e,0,!1,n)];for(let r of t)r.to>e.length&&i.push(r);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],r=1,o=e.length?e[0]:null;for(let a=0,l=0,c=0;;a++){let u=a<t.length?t[a]:null,d=u?u.fromA:1e9;if(d-l>=n)for(;o&&o.from<d;){let f=o;if(l>=f.from||d<=f.to||c){let p=Math.max(f.from,l)-c,g=Math.min(f.to,d)-c;f=p>=g?null:new Lo(p,g,f.tree,f.offset+c,a>0,!!u)}if(f&&i.push(f),o.to>d)break;o=r<e.length?e[r++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class XV{startParse(e,t,n){return typeof e=="string"&&(e=new JV(e)),n=n?n.length?n.map(i=>new k0(i.from,i.to)):[new k0(0,0)]:[new k0(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let r=i.advance();if(r)return r}}}class JV{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new pt({perNode:!0});let ZV=0;class Pn{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=ZV++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof Pn&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let i=new Pn(n,[],null,[]);if(i.set.push(i),t)for(let r of t.set)i.set.push(r);return i}static defineModifier(e){let t=new eh(e);return n=>n.modified.indexOf(t)>-1?n:eh.get(n.base||n,n.modified.concat(t).sort((i,r)=>i.id-r.id))}}let ez=0;class eh{constructor(e){this.name=e,this.instances=[],this.id=ez++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(a=>a.base==e&&tz(t,a.modified));if(n)return n;let i=[],r=new Pn(e.name,i,e,t);for(let a of t)a.instances.push(r);let o=sz(t);for(let a of e.set)if(!a.modified.length)for(let l of o)i.push(eh.get(a,l));return r}}function tz(s,e){return s.length==e.length&&s.every((t,n)=>t==e[n])}function sz(s){let e=[[]];for(let t=0;t<s.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(s[t]));return e.sort((t,n)=>n.length-t.length)}function nz(s){let e=Object.create(null);for(let t in s){let n=s[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let r=[],o=2,a=i;for(let d=0;;){if(a=="..."&&d>0&&d+3==i.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(a);if(!f)throw new RangeError("Invalid path: "+i);if(r.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),d+=f[0].length,d==i.length)break;let p=i[d++];if(d==i.length&&p=="!"){o=0;break}if(p!="/")throw new RangeError("Invalid path: "+i);a=i.slice(d)}let l=r.length-1,c=r[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new th(n,o,l>0?r.slice(0,l):null);e[c]=u.sort(e[c])}}return Bx.add(e)}const Bx=new pt;class th{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}th.empty=new th([],2,null);function Nx(s,e){let t=Object.create(null);for(let r of s)if(!Array.isArray(r.tag))t[r.tag.id]=r.class;else for(let o of r.tag)t[o.id]=r.class;let{scope:n,all:i=null}=e||{};return{style:r=>{let o=i;for(let a of r)for(let l of a.set){let c=t[l.id];if(c){o=o?o+" "+c:c;break}}return o},scope:n}}function iz(s,e){let t=null;for(let n of s){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function rz(s,e,t,n=0,i=s.length){let r=new oz(n,Array.isArray(e)?e:[e],t);r.highlightRange(s.cursor(),n,i,"",r.highlighters),r.flush(i)}class oz{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,r){let{type:o,from:a,to:l}=e;if(a>=n||l<=t)return;o.isTop&&(r=this.highlighters.filter(p=>!p.scope||p.scope(o)));let c=i,u=az(e)||th.empty,d=iz(r,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,a),c),u.opaque)return;let f=e.tree&&e.tree.prop(pt.mounted);if(f&&f.overlay){let p=e.node.enter(f.overlay[0].from+a,1),g=this.highlighters.filter(k=>!k.scope||k.scope(f.tree.type)),S=e.firstChild();for(let k=0,O=a;;k++){let $=k<f.overlay.length?f.overlay[k]:null,M=$?$.from+a:l,b=Math.max(t,O),w=Math.min(n,M);if(b<w&&S)for(;e.from<w&&(this.highlightRange(e,b,w,i,r),this.startSpan(Math.min(w,e.to),c),!(e.to>=M||!e.nextSibling())););if(!$||M>n)break;O=$.to+a,O>t&&(this.highlightRange(p.cursor(),Math.max(t,$.from+a),Math.min(n,O),"",g),this.startSpan(Math.min(n,O),c))}S&&e.parent()}else if(e.firstChild()){f&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,r),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function az(s){let e=s.type.prop(Bx);for(;e&&e.context&&!s.matchContext(e.context);)e=e.next;return e||null}const Se=Pn.define,sh=Se(),Gr=Se(),Vx=Se(Gr),zx=Se(Gr),Kr=Se(),nh=Se(Kr),$0=Se(Kr),Oi=Se(),Eo=Se(Oi),Mi=Se(),Ai=Se(),T0=Se(),oc=Se(T0),ih=Se(),Ae={comment:sh,lineComment:Se(sh),blockComment:Se(sh),docComment:Se(sh),name:Gr,variableName:Se(Gr),typeName:Vx,tagName:Se(Vx),propertyName:zx,attributeName:Se(zx),className:Se(Gr),labelName:Se(Gr),namespace:Se(Gr),macroName:Se(Gr),literal:Kr,string:nh,docString:Se(nh),character:Se(nh),attributeValue:Se(nh),number:$0,integer:Se($0),float:Se($0),bool:Se(Kr),regexp:Se(Kr),escape:Se(Kr),color:Se(Kr),url:Se(Kr),keyword:Mi,self:Se(Mi),null:Se(Mi),atom:Se(Mi),unit:Se(Mi),modifier:Se(Mi),operatorKeyword:Se(Mi),controlKeyword:Se(Mi),definitionKeyword:Se(Mi),moduleKeyword:Se(Mi),operator:Ai,derefOperator:Se(Ai),arithmeticOperator:Se(Ai),logicOperator:Se(Ai),bitwiseOperator:Se(Ai),compareOperator:Se(Ai),updateOperator:Se(Ai),definitionOperator:Se(Ai),typeOperator:Se(Ai),controlOperator:Se(Ai),punctuation:T0,separator:Se(T0),bracket:oc,angleBracket:Se(oc),squareBracket:Se(oc),paren:Se(oc),brace:Se(oc),content:Oi,heading:Eo,heading1:Se(Eo),heading2:Se(Eo),heading3:Se(Eo),heading4:Se(Eo),heading5:Se(Eo),heading6:Se(Eo),contentSeparator:Se(Oi),list:Se(Oi),quote:Se(Oi),emphasis:Se(Oi),strong:Se(Oi),link:Se(Oi),monospace:Se(Oi),strikethrough:Se(Oi),inserted:Se(),deleted:Se(),changed:Se(),invalid:Se(),meta:ih,documentMeta:Se(ih),annotation:Se(ih),processingInstruction:Se(ih),definition:Pn.defineModifier("definition"),constant:Pn.defineModifier("constant"),function:Pn.defineModifier("function"),standard:Pn.defineModifier("standard"),local:Pn.defineModifier("local"),special:Pn.defineModifier("special")};for(let s in Ae){let e=Ae[s];e instanceof Pn&&(e.name=s)}Nx([{tag:Ae.link,class:"tok-link"},{tag:Ae.heading,class:"tok-heading"},{tag:Ae.emphasis,class:"tok-emphasis"},{tag:Ae.strong,class:"tok-strong"},{tag:Ae.keyword,class:"tok-keyword"},{tag:Ae.atom,class:"tok-atom"},{tag:Ae.bool,class:"tok-bool"},{tag:Ae.url,class:"tok-url"},{tag:Ae.labelName,class:"tok-labelName"},{tag:Ae.inserted,class:"tok-inserted"},{tag:Ae.deleted,class:"tok-deleted"},{tag:Ae.literal,class:"tok-literal"},{tag:Ae.string,class:"tok-string"},{tag:Ae.number,class:"tok-number"},{tag:[Ae.regexp,Ae.escape,Ae.special(Ae.string)],class:"tok-string2"},{tag:Ae.variableName,class:"tok-variableName"},{tag:Ae.local(Ae.variableName),class:"tok-variableName tok-local"},{tag:Ae.definition(Ae.variableName),class:"tok-variableName tok-definition"},{tag:Ae.special(Ae.variableName),class:"tok-variableName2"},{tag:Ae.definition(Ae.propertyName),class:"tok-propertyName tok-definition"},{tag:Ae.typeName,class:"tok-typeName"},{tag:Ae.namespace,class:"tok-namespace"},{tag:Ae.className,class:"tok-className"},{tag:Ae.macroName,class:"tok-macroName"},{tag:Ae.propertyName,class:"tok-propertyName"},{tag:Ae.operator,class:"tok-operator"},{tag:Ae.comment,class:"tok-comment"},{tag:Ae.meta,class:"tok-meta"},{tag:Ae.invalid,class:"tok-invalid"},{tag:Ae.punctuation,class:"tok-punctuation"}]);var P0;const ac=new pt,lz=new pt;class $i{constructor(e,t,n=[],i=""){this.data=e,this.name=i,ut.prototype.hasOwnProperty("tree")||Object.defineProperty(ut.prototype,"tree",{get(){return Ts(this)}}),this.parser=t,this.extension=[Xr.of(this),ut.languageData.of((r,o,a)=>{let l=jx(r,o,a),c=l.type.prop(ac);if(!c)return[];let u=r.facet(c),d=l.type.prop(lz);if(d){let f=l.resolve(o-l.from,a);for(let p of d)if(p.test(f,r)){let g=r.facet(p.facet);return p.type=="replace"?g:g.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return jx(e,t,n).type.prop(ac)==this.data}findRegions(e){let t=e.facet(Xr);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(r,o)=>{if(r.prop(ac)==this.data){n.push({from:o,to:o+r.length});return}let a=r.prop(pt.mounted);if(a){if(a.tree.prop(ac)==this.data){if(a.overlay)for(let l of a.overlay)n.push({from:l.from+o,to:l.to+o});else n.push({from:o,to:o+r.length});return}else if(a.overlay){let l=n.length;if(i(a.tree,a.overlay[0].from+o),n.length>l)return}}for(let l=0;l<r.children.length;l++){let c=r.children[l];c instanceof $s&&i(c,r.positions[l]+o)}};return i(Ts(e),0),n}get allowsNesting(){return!0}}$i.setState=rt.define();function jx(s,e,t){let n=s.facet(Xr),i=Ts(s).topNode;if(!n||n.allowsNesting)for(let r=i;r;r=r.enter(e,t,xs.ExcludeBuffers))r.type.isTop&&(i=r);return i}function Ts(s){let e=s.field($i.state,!1);return e?e.tree:$s.empty}class cz{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let lc=null;class rh{constructor(e,t,n=[],i,r,o,a,l){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=r,this.viewport=o,this.skipped=a,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new rh(e,t,[],$s.empty,0,n,[],null)}startParse(){return this.parser.startParse(new cz(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=$s.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(Lo.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Lo.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=lc;lc=this;try{return e()}finally{lc=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Wx(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:r,viewport:o,skipped:a}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,f)=>l.push({fromA:c,toA:u,fromB:d,toB:f})),n=Lo.applyChanges(n,l),i=$s.empty,r=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){a=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&a.push({from:u,to:d})}}}return new rh(this.parser,t,n,i,r,o,a,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:r}=this.skipped[n];i<e.to&&r>e.from&&(this.fragments=Wx(this.fragments,i,r),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends XV{createParse(t,n,i){let r=i[0].from,o=i[i.length-1].to;return{parsedPos:r,advance(){let l=lc;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=o,new $s($n.none,[],[],o-r)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return lc}}function Wx(s,e,t){return Lo.applyChanges(s,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ca{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new Ca(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=rh.create(e.facet(Xr).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new Ca(n)}}$i.state=ms.define({create:Ca.init,update(s,e){for(let t of e.effects)if(t.is($i.setState))return t.value;return e.startState.facet(Xr)!=e.state.facet(Xr)?Ca.init(e.state):s.apply(e)}});let Ux=s=>{let e=setTimeout(()=>s(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ux=s=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(s,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const L0=typeof navigator<"u"&&(!((P0=navigator.scheduling)===null||P0===void 0)&&P0.isInputPending)?()=>navigator.scheduling.isInputPending():null,uz=Xt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field($i.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field($i.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Ux(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,r=n.field($i.state);if(r.tree==r.context.tree&&r.context.isDone(i+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!L0?Math.max(25,e.timeRemaining()-5):1e9),a=r.context.treeLen<i&&n.doc.length>i+1e3,l=r.context.work(()=>L0&&L0()||Date.now()>o,i+(a?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(r.context.takeTree(),this.view.dispatch({effects:$i.setState.of(new Ca(r.context))})),this.chunkBudget>0&&!(l&&!a)&&this.scheduleWork(),this.checkAsyncSchedule(r.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Ws(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Xr=De.define({combine(s){return s.length?s[0]:null},enables:s=>[$i.state,uz,Le.contentAttributes.compute([s],e=>{let t=e.facet(s);return t&&t.name?{"data-language":t.name}:{}})]}),dz=De.define(),E0=De.define({combine:s=>{if(!s.length)return"  ";let e=s[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(s[0]));return e}});function oh(s){let e=s.facet(E0);return e.charCodeAt(0)==9?s.tabSize*e.length:e.length}function cc(s,e){let t="",n=s.tabSize,i=s.facet(E0)[0];if(i=="	"){for(;e>=n;)t+="	",e-=n;i=" "}for(let r=0;r<e;r++)t+=i;return t}function D0(s,e){s instanceof ut&&(s=new ah(s));for(let n of s.state.facet(dz)){let i=n(s,e);if(i!==void 0)return i}let t=Ts(s.state);return t.length>=e?fz(s,t,e):null}class ah{constructor(e,t={}){this.state=e,this.options=t,this.unit=oh(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:r}=this.options;return i!=null&&i>=n.from&&i<=n.to?r&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),r=this.countColumn(n,e-i),o=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return o>-1&&(r+=o-this.countColumn(n,n.search(/\S|$/))),r}countColumn(e,t=e.length){return da(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),r=this.options.overrideIndentation;if(r){let o=r(i);if(o>-1)return o}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const hz=new pt;function fz(s,e,t){let n=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=n.node){let r=[];for(let o=i;o&&!(o.from<n.node.from||o.to>n.node.to||o.from==n.node.from&&o.type==n.node.type);o=o.parent)r.push(o);for(let o=r.length-1;o>=0;o--)n={node:r[o],next:n}}return Hx(n,s,t)}function Hx(s,e,t){for(let n=s;n;n=n.next){let i=mz(n.node);if(i)return i(I0.create(e,t,n))}return 0}function pz(s){return s.pos==s.options.simulateBreak&&s.options.simulateDoubleBreak}function mz(s){let e=s.type.prop(hz);if(e)return e;let t=s.firstChild,n;if(t&&(n=t.type.prop(pt.closedBy))){let i=s.lastChild,r=i&&n.indexOf(i.name)>-1;return o=>_z(o,!0,1,void 0,r&&!pz(o)?i.from:void 0)}return s.parent==null?gz:null}function gz(){return 0}class I0 extends ah{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new I0(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(vz(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return Hx(this.context.next,this.base,this.pos)}}function vz(s,e){for(let t=e;t;t=t.parent)if(s==t)return!0;return!1}function yz(s){let e=s.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=s.options.simulateBreak,r=s.state.doc.lineAt(t.from),o=i==null||i<=r.from?r.to:Math.min(r.to,i);for(let a=t.to;;){let l=e.childAfter(a);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=o)return null;let c=/^ */.exec(r.text.slice(t.to-r.from))[0].length;return{from:t.from,to:t.to+c}}a=l.to}}function _z(s,e,t,n,i){let r=s.textAfter,o=r.match(/^\s*/)[0].length,a=n&&r.slice(o,o+n.length)==n||i==s.pos+o,l=yz(s);return l?a?s.column(l.from):s.column(l.to):s.baseIndent+(a?0:s.unit*t)}const bz=200;function wz(){return ut.transactionFilter.of(s=>{if(!s.docChanged||!s.isUserEvent("input.type")&&!s.isUserEvent("input.complete"))return s;let e=s.startState.languageDataAt("indentOnInput",s.startState.selection.main.head);if(!e.length)return s;let t=s.newDoc,{head:n}=s.newSelection.main,i=t.lineAt(n);if(n>i.from+bz)return s;let r=t.sliceString(i.from,n);if(!e.some(c=>c.test(r)))return s;let{state:o}=s,a=-1,l=[];for(let{head:c}of o.selection.ranges){let u=o.doc.lineAt(c);if(u.from==a)continue;a=u.from;let d=D0(o,u.from);if(d==null)continue;let f=/^\s*/.exec(u.text)[0],p=cc(o,d);f!=p&&l.push({from:u.from,to:u.from+f.length,insert:p})}return l.length?[s,{changes:l,sequential:!0}]:s})}const xz=De.define(),kz=new pt;function Sz(s,e,t){let n=Ts(s);if(n.length<t)return null;let i=n.resolveStack(t,1),r=null;for(let o=i;o;o=o.next){let a=o.node;if(a.to<=t||a.from>t)continue;if(r&&a.from<e)break;let l=a.type.prop(kz);if(l&&(a.to<n.length-50||n.length==s.doc.length||!Cz(a))){let c=l(a,s);c&&c.from<=t&&c.from>=e&&c.to>t&&(r=c)}}return r}function Cz(s){let e=s.lastChild;return e&&e.to==s.to&&e.type.isError}function lh(s,e,t){for(let n of s.facet(xz)){let i=n(s,e,t);if(i)return i}return Sz(s,e,t)}function Qx(s,e){let t=e.mapPos(s.from,1),n=e.mapPos(s.to,-1);return t>=n?void 0:{from:t,to:n}}const ch=rt.define({map:Qx}),uc=rt.define({map:Qx});function Yx(s){let e=[];for(let{head:t}of s.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(s.lineBlockAt(t));return e}const Do=ms.define({create(){return Qe.none},update(s,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((t,n)=>s=qx(s,t,n)),s=s.map(e.changes);for(let t of e.effects)if(t.is(ch)&&!Oz(s,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(Xx),i=n?Qe.replace({widget:new Pz(n(e.state,t.value))}):e5;s=s.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(uc)&&(s=s.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));return e.selection&&(s=qx(s,e.selection.main.head)),s},provide:s=>Le.decorations.from(s),toJSON(s,e){let t=[];return s.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(s){if(!Array.isArray(s)||s.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<s.length;){let n=s[t++],i=s[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(e5.range(n,i))}return Qe.set(e,!0)}});function qx(s,e,t=e){let n=!1;return s.between(e,t,(i,r)=>{i<t&&r>e&&(n=!0)}),n?s.update({filterFrom:e,filterTo:t,filter:(i,r)=>i>=t||r<=e}):s}function uh(s,e,t){var n;let i=null;return(n=s.field(Do,!1))===null||n===void 0||n.between(e,t,(r,o)=>{(!i||i.from>r)&&(i={from:r,to:o})}),i}function Oz(s,e,t){let n=!1;return s.between(e,e,(i,r)=>{i==e&&r==t&&(n=!0)}),n}function Gx(s,e){return s.field(Do,!1)?e:e.concat(rt.appendConfig.of(Jx()))}const Mz=s=>{for(let e of Yx(s)){let t=lh(s.state,e.from,e.to);if(t)return s.dispatch({effects:Gx(s.state,[ch.of(t),Kx(s,t)])}),!0}return!1},Az=s=>{if(!s.state.field(Do,!1))return!1;let e=[];for(let t of Yx(s)){let n=uh(s.state,t.from,t.to);n&&e.push(uc.of(n),Kx(s,n,!1))}return e.length&&s.dispatch({effects:e}),e.length>0};function Kx(s,e,t=!0){let n=s.state.doc.lineAt(e.from).number,i=s.state.doc.lineAt(e.to).number;return Le.announce.of(`${s.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${s.state.phrase("to")} ${i}.`)}const $z=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Mz},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Az},{key:"Ctrl-Alt-[",run:s=>{let{state:e}=s,t=[];for(let n=0;n<e.doc.length;){let i=s.lineBlockAt(n),r=lh(e,i.from,i.to);r&&t.push(ch.of(r)),n=(r?s.lineBlockAt(r.to):i).to+1}return t.length&&s.dispatch({effects:Gx(s.state,t)}),!!t.length}},{key:"Ctrl-Alt-]",run:s=>{let e=s.state.field(Do,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,s.state.doc.length,(n,i)=>{t.push(uc.of({from:n,to:i}))}),s.dispatch({effects:t}),!0}}],Tz={placeholderDOM:null,preparePlaceholder:null,placeholderText:""},Xx=De.define({combine(s){return fi(s,Tz)}});function Jx(s){return[Do,Dz]}function Zx(s,e){let{state:t}=s,n=t.facet(Xx),i=o=>{let a=s.lineBlockAt(s.posAtDOM(o.target)),l=uh(s.state,a.from,a.to);l&&s.dispatch({effects:uc.of(l)}),o.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(s,i,e);let r=document.createElement("span");return r.textContent=n.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}const e5=Qe.replace({widget:new class extends nr{toDOM(s){return Zx(s,null)}}});class Pz extends nr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Zx(e,this.value)}}const Lz={openText:"",closedText:"",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class R0 extends or{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Ez(s={}){let e={...Lz,...s},t=new R0(e,!0),n=new R0(e,!1),i=Xt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Xr)!=o.state.facet(Xr)||o.startState.field(Do,!1)!=o.state.field(Do,!1)||Ts(o.startState)!=Ts(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let a=new tr;for(let l of o.viewportLineBlocks){let c=uh(o.state,l.from,l.to)?n:lh(o.state,l.from,l.to)?t:null;c&&a.add(l.from,l.from,c)}return a.finish()}}),{domEventHandlers:r}=e;return[i,XB({class:"cm-foldGutter",markers(o){var a;return((a=o.plugin(i))===null||a===void 0?void 0:a.markers)||bt.empty},initialSpacer(){return new R0(e,!1)},domEventHandlers:{...r,click:(o,a,l)=>{if(r.click&&r.click(o,a,l))return!0;let c=uh(o.state,a.from,a.to);if(c)return o.dispatch({effects:uc.of(c)}),!0;let u=lh(o.state,a.from,a.to);return u?(o.dispatch({effects:ch.of(u)}),!0):!1}}}),Jx()]}const Dz=Le.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class dh{constructor(e,t){this.specs=e;let n;function i(a){let l=Rr.newName();return(n||(n=Object.create(null)))["."+l]=a,l}const r=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,o=t.scope;this.scope=o instanceof $i?a=>a.prop(ac)==o.data:o?a=>a==o:void 0,this.style=Nx(e.map(a=>({tag:a.tag,class:a.class||i(Object.assign({},a,{tag:null}))})),{all:r}).style,this.module=n?new Rr(n):null,this.themeType=t.themeType}static define(e,t){return new dh(e,t||{})}}const F0=De.define(),t5=De.define({combine(s){return s.length?[s[0]]:null}});function B0(s){let e=s.facet(F0);return e.length?e:s.facet(t5)}function Iz(s,e){let t=[Fz],n;return s instanceof dh&&(s.module&&t.push(Le.styleModule.of(s.module)),n=s.themeType),e!=null&&e.fallback?t.push(t5.of(s)):n?t.push(F0.computeN([Le.darkTheme],i=>i.facet(Le.darkTheme)==(n=="dark")?[s]:[])):t.push(F0.of(s)),t}class Rz{constructor(e){this.markCache=Object.create(null),this.tree=Ts(e.state),this.decorations=this.buildDeco(e,B0(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Ts(e.state),n=B0(e.state),i=n!=B0(e.startState),{viewport:r}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<r.to&&!i&&t.type==this.tree.type&&o>=r.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=r.to)}buildDeco(e,t){if(!t||!this.tree.length)return Qe.none;let n=new tr;for(let{from:i,to:r}of e.visibleRanges)rz(this.tree,t,(o,a,l)=>{n.add(o,a,this.markCache[l]||(this.markCache[l]=Qe.mark({class:l})))},i,r);return n.finish()}}const Fz=Co.high(Xt.fromClass(Rz,{decorations:s=>s.decorations})),Bz=dh.define([{tag:Ae.meta,color:"#404740"},{tag:Ae.link,textDecoration:"underline"},{tag:Ae.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Ae.emphasis,fontStyle:"italic"},{tag:Ae.strong,fontWeight:"bold"},{tag:Ae.strikethrough,textDecoration:"line-through"},{tag:Ae.keyword,color:"#708"},{tag:[Ae.atom,Ae.bool,Ae.url,Ae.contentSeparator,Ae.labelName],color:"#219"},{tag:[Ae.literal,Ae.inserted],color:"#164"},{tag:[Ae.string,Ae.deleted],color:"#a11"},{tag:[Ae.regexp,Ae.escape,Ae.special(Ae.string)],color:"#e40"},{tag:Ae.definition(Ae.variableName),color:"#00f"},{tag:Ae.local(Ae.variableName),color:"#30a"},{tag:[Ae.typeName,Ae.namespace],color:"#085"},{tag:Ae.className,color:"#167"},{tag:[Ae.special(Ae.variableName),Ae.macroName],color:"#256"},{tag:Ae.definition(Ae.propertyName),color:"#00c"},{tag:Ae.comment,color:"#940"},{tag:Ae.invalid,color:"#f00"}]),Nz=Le.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),s5=1e4,n5="()[]{}",i5=De.define({combine(s){return fi(s,{afterCursor:!0,brackets:n5,maxScanDistance:s5,renderMatch:jz})}}),Vz=Qe.mark({class:"cm-matchingBracket"}),zz=Qe.mark({class:"cm-nonmatchingBracket"});function jz(s){let e=[],t=s.matched?Vz:zz;return e.push(t.range(s.start.from,s.start.to)),s.end&&e.push(t.range(s.end.from,s.end.to)),e}const Wz=[ms.define({create(){return Qe.none},update(s,e){if(!e.docChanged&&!e.selection)return s;let t=[],n=e.state.facet(i5);for(let i of e.state.selection.ranges){if(!i.empty)continue;let r=Ti(e.state,i.head,-1,n)||i.head>0&&Ti(e.state,i.head-1,1,n)||n.afterCursor&&(Ti(e.state,i.head,1,n)||i.head<e.state.doc.length&&Ti(e.state,i.head+1,-1,n));r&&(t=t.concat(n.renderMatch(r,e.state)))}return Qe.set(t,!0)},provide:s=>Le.decorations.from(s)}),Nz];function Uz(s={}){return[i5.of(s),Wz]}const Hz=new pt;function N0(s,e,t){let n=s.prop(e<0?pt.openedBy:pt.closedBy);if(n)return n;if(s.name.length==1){let i=t.indexOf(s.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function V0(s){let e=s.type.prop(Hz);return e?e(s.node):s}function Ti(s,e,t,n={}){let i=n.maxScanDistance||s5,r=n.brackets||n5,o=Ts(s),a=o.resolveInner(e,t);for(let l=a;l;l=l.parent){let c=N0(l.type,t,r);if(c&&l.from<l.to){let u=V0(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return Qz(s,e,t,l,u,c,r)}}return Yz(s,e,t,o,a.type,i,r)}function Qz(s,e,t,n,i,r,o){let a=n.parent,l={from:i.from,to:i.to},c=0,u=a==null?void 0:a.cursor();if(u&&(t<0?u.childBefore(n.from):u.childAfter(n.to)))do if(t<0?u.to<=n.from:u.from>=n.to){if(c==0&&r.indexOf(u.type.name)>-1&&u.from<u.to){let d=V0(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(N0(u.type,t,o))c++;else if(N0(u.type,-t,o)){if(c==0){let d=V0(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function Yz(s,e,t,n,i,r,o){let a=t<0?s.sliceDoc(e-1,e):s.sliceDoc(e,e+1),l=o.indexOf(a);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=s.doc.iterRange(e,t>0?s.doc.length:0),d=0;for(let f=0;!u.next().done&&f<=r;){let p=u.value;t<0&&(f+=p.length);let g=e+f*t;for(let S=t>0?0:p.length-1,k=t>0?p.length:-1;S!=k;S+=t){let O=o.indexOf(p[S]);if(!(O<0||n.resolveInner(g+S,1).type!=i))if(O%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:g+S,to:g+S+1},matched:O>>1==l>>1};d--}}t>0&&(f+=p.length)}return u.done?{start:c,matched:!1}:null}const qz=Object.create(null),r5=[$n.none],o5=[],a5=Object.create(null),Gz=Object.create(null);for(let[s,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Gz[s]=Kz(qz,e);function z0(s,e){o5.indexOf(s)>-1||(o5.push(s),console.warn(e))}function Kz(s,e){let t=[];for(let a of e.split(" ")){let l=[];for(let c of a.split(".")){let u=s[c]||Ae[c];u?typeof u=="function"?l.length?l=l.map(u):z0(c,`Modifier ${c} used at start of tag`):l.length?z0(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:z0(c,`Unknown highlighting tag ${c}`)}for(let c of l)t.push(c)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(a=>a.id),r=a5[i];if(r)return r.id;let o=a5[i]=$n.define({id:r5.length,name:n,props:[nz({[n]:t})]});return r5.push(o),o.id}Et.RTL,Et.LTR;const Xz=s=>{let{state:e}=s,t=e.doc.lineAt(e.selection.main.from),n=W0(s.state,t.from);return n.line?Jz(s):n.block?ej(s):!1};function j0(s,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=s(e,t);return i?(n(t.update(i)),!0):!1}}const Jz=j0(nj,0),Zz=j0(l5,0),ej=j0((s,e)=>l5(s,e,sj(e)),0);function W0(s,e){let t=s.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const dc=50;function tj(s,{open:e,close:t},n,i){let r=s.sliceDoc(n-dc,n),o=s.sliceDoc(i,i+dc),a=/\s*$/.exec(r)[0].length,l=/^\s*/.exec(o)[0].length,c=r.length-a;if(r.slice(c-e.length,c)==e&&o.slice(l,l+t.length)==t)return{open:{pos:n-a,margin:a&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-n<=2*dc?u=d=s.sliceDoc(n,i):(u=s.sliceDoc(n,n+dc),d=s.sliceDoc(i-dc,i));let f=/^\s*/.exec(u)[0].length,p=/\s*$/.exec(d)[0].length,g=d.length-p-t.length;return u.slice(f,f+e.length)==e&&d.slice(g,g+t.length)==t?{open:{pos:n+f+e.length,margin:/\s/.test(u.charAt(f+e.length))?1:0},close:{pos:i-p-t.length,margin:/\s/.test(d.charAt(g-1))?1:0}}:null}function sj(s){let e=[];for(let t of s.selection.ranges){let n=s.doc.lineAt(t.from),i=t.to<=n.to?n:s.doc.lineAt(t.to);i.from>n.from&&i.from==t.to&&(i=t.to==n.to+1?n:s.doc.lineAt(t.to-1));let r=e.length-1;r>=0&&e[r].to>n.from?e[r].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function l5(s,e,t=e.selection.ranges){let n=t.map(r=>W0(e,r.from).block);if(!n.every(r=>r))return null;let i=t.map((r,o)=>tj(e,n[o],r.from,r.to));if(s!=2&&!i.every(r=>r))return{changes:e.changes(t.map((r,o)=>i[o]?[]:[{from:r.from,insert:n[o].open+" "},{from:r.to,insert:" "+n[o].close}]))};if(s!=1&&i.some(r=>r)){let r=[];for(let o=0,a;o<i.length;o++)if(a=i[o]){let l=n[o],{open:c,close:u}=a;r.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:r}}return null}function nj(s,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:r,to:o}of t){let a=n.length,l=1e9,c=W0(e,r).line;if(c){for(let u=r;u<=o;){let d=e.doc.lineAt(u);if(d.from>i&&(r==o||o>d.from)){i=d.from;let f=/^\s*/.exec(d.text)[0].length,p=f==d.length,g=d.text.slice(f,f+c.length)==c?f:-1;f<d.text.length&&f<l&&(l=f),n.push({line:d,comment:g,token:c,indent:f,empty:p,single:!1})}u=d.to+1}if(l<1e9)for(let u=a;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=l);n.length==a+1&&(n[a].single=!0)}}if(s!=2&&n.some(r=>r.comment<0&&(!r.empty||r.single))){let r=[];for(let{line:a,token:l,indent:c,empty:u,single:d}of n)(d||!u)&&r.push({from:a.from+c,insert:l+" "});let o=e.changes(r);return{changes:o,selection:e.selection.map(o,1)}}else if(s!=1&&n.some(r=>r.comment>=0)){let r=[];for(let{line:o,comment:a,token:l}of n)if(a>=0){let c=o.from+a,u=c+l.length;o.text[u-o.from]==" "&&u++,r.push({from:c,to:u})}return{changes:r}}return null}const U0=er.define(),ij=er.define(),rj=De.define(),c5=De.define({combine(s){return fi(s,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}}),u5=ms.define({create(){return Pi.empty},update(s,e){let t=e.state.facet(c5),n=e.annotation(U0);if(n){let l=sn.fromTransaction(e,n.selection),c=n.side,u=c==0?s.undone:s.done;return l?u=fh(u,u.length,t.minDepth,l):u=f5(u,e.startState.selection),new Pi(c==0?n.rest:u,c==0?u:n.rest)}let i=e.annotation(ij);if((i=="full"||i=="before")&&(s=s.isolate()),e.annotation(us.addToHistory)===!1)return e.changes.empty?s:s.addMapping(e.changes.desc);let r=sn.fromTransaction(e),o=e.annotation(us.time),a=e.annotation(us.userEvent);return r?s=s.addChanges(r,o,a,t,e):e.selection&&(s=s.addSelection(e.startState.selection,o,a,t.newGroupDelay)),(i=="full"||i=="after")&&(s=s.isolate()),s},toJSON(s){return{done:s.done.map(e=>e.toJSON()),undone:s.undone.map(e=>e.toJSON())}},fromJSON(s){return new Pi(s.done.map(sn.fromJSON),s.undone.map(sn.fromJSON))}});function oj(s={}){return[u5,c5.of(s),Le.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?d5:e.inputType=="historyRedo"?H0:null;return n?(e.preventDefault(),n(t)):!1}})]}function hh(s,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field(u5,!1);if(!i)return!1;let r=i.pop(s,t,e);return r?(n(r),!0):!1}}const d5=hh(0,!1),H0=hh(1,!1),aj=hh(0,!0),lj=hh(1,!0);class sn{constructor(e,t,n,i,r){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=r}setSelAfter(e){return new sn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new sn(e.changes&&cs.fromJSON(e.changes),[],e.mapped&&hi.fromJSON(e.mapped),e.startSelection&&de.fromJSON(e.startSelection),e.selectionsAfter.map(de.fromJSON))}static fromTransaction(e,t){let n=Ln;for(let i of e.startState.facet(rj)){let r=i(e);r.length&&(n=n.concat(r))}return!n.length&&e.changes.empty?null:new sn(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Ln)}static selection(e){return new sn(void 0,Ln,void 0,void 0,e)}}function fh(s,e,t,n){let i=e+1>t+20?e-t-1:0,r=s.slice(i,e);return r.push(n),r}function cj(s,e){let t=[],n=!1;return s.iterChangedRanges((i,r)=>t.push(i,r)),e.iterChangedRanges((i,r,o,a)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];a>=c&&o<=u&&(n=!0)}}),n}function uj(s,e){return s.ranges.length==e.ranges.length&&s.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function h5(s,e){return s.length?e.length?s.concat(e):s:e}const Ln=[],dj=200;function f5(s,e){if(s.length){let t=s[s.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-dj));return n.length&&n[n.length-1].eq(e)?s:(n.push(e),fh(s,s.length-1,1e9,t.setSelAfter(n)))}else return[sn.selection([e])]}function hj(s){let e=s[s.length-1],t=s.slice();return t[s.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function Q0(s,e){if(!s.length)return s;let t=s.length,n=Ln;for(;t;){let i=fj(s[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let r=s.slice(0,t);return r[t-1]=i,r}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[sn.selection(n)]:Ln}function fj(s,e,t){let n=h5(s.selectionsAfter.length?s.selectionsAfter.map(a=>a.map(e)):Ln,t);if(!s.changes)return sn.selection(n);let i=s.changes.map(e),r=e.mapDesc(s.changes,!0),o=s.mapped?s.mapped.composeDesc(r):r;return new sn(i,rt.mapEffects(s.effects,e),o,s.startSelection.map(r),n)}const pj=/^(input\.type|delete)($|\.)/;class Pi{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Pi(this.done,this.undone):this}addChanges(e,t,n,i,r){let o=this.done,a=o[o.length-1];return a&&a.changes&&!a.changes.empty&&e.changes&&(!n||pj.test(n))&&(!a.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(r,cj(a.changes,e.changes))||n=="input.type.compose")?o=fh(o,o.length-1,i.minDepth,new sn(e.changes.compose(a.changes),h5(rt.mapEffects(e.effects,a.changes),a.effects),a.mapped,a.startSelection,Ln)):o=fh(o,o.length,i.minDepth,e),new Pi(o,Ln,t,n)}addSelection(e,t,n,i){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:Ln;return r.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&uj(r[r.length-1],e)?this:new Pi(f5(this.done,e),this.undone,t,n)}addMapping(e){return new Pi(Q0(this.done,e),Q0(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let r=i[i.length-1],o=r.selectionsAfter[0]||t.selection;if(n&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:U0.of({side:e,rest:hj(i),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(r.changes){let a=i.length==1?Ln:i.slice(0,i.length-1);return r.mapped&&(a=Q0(a,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:U0.of({side:e,rest:a,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Pi.empty=new Pi(Ln,Ln);const mj=[{key:"Mod-z",run:d5,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:H0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:H0,preventDefault:!0},{key:"Mod-u",run:aj,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:lj,preventDefault:!0}];function Oa(s,e){return de.create(s.ranges.map(e),s.mainIndex)}function Li(s,e){return s.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function qn({state:s,dispatch:e},t){let n=Oa(s.selection,t);return n.eq(s.selection,!0)?!1:(e(Li(s,n)),!0)}function ph(s,e){return de.cursor(e?s.to:s.from)}function p5(s,e){return qn(s,t=>t.empty?s.moveByChar(t,e):ph(t,e))}function Ps(s){return s.textDirectionAt(s.state.selection.main.head)==Et.LTR}const m5=s=>p5(s,!Ps(s)),g5=s=>p5(s,Ps(s));function v5(s,e){return qn(s,t=>t.empty?s.moveByGroup(t,e):ph(t,e))}const gj=s=>v5(s,!Ps(s)),vj=s=>v5(s,Ps(s));function yj(s,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(s.sliceDoc(e.from,e.to)))||e.firstChild}function mh(s,e,t){let n=Ts(s).resolveInner(e.head),i=t?pt.closedBy:pt.openedBy;for(let l=e.head;;){let c=t?n.childAfter(l):n.childBefore(l);if(!c)break;yj(s,c,i)?n=c:l=t?c.to:c.from}let r=n.type.prop(i),o,a;return r&&(o=t?Ti(s,n.from,1):Ti(s,n.to,-1))&&o.matched?a=t?o.end.to:o.end.from:a=t?n.to:n.from,de.cursor(a,t?-1:1)}const _j=s=>qn(s,e=>mh(s.state,e,!Ps(s))),bj=s=>qn(s,e=>mh(s.state,e,Ps(s)));function y5(s,e){return qn(s,t=>{if(!t.empty)return ph(t,e);let n=s.moveVertically(t,e);return n.head!=t.head?n:s.moveToLineBoundary(t,e)})}const _5=s=>y5(s,!1),b5=s=>y5(s,!0);function w5(s){let e=s.scrollDOM.clientHeight<s.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let r of s.state.facet(Le.scrollMargins)){let o=r(s);o!=null&&o.top&&(t=Math.max(o==null?void 0:o.top,t)),o!=null&&o.bottom&&(n=Math.max(o==null?void 0:o.bottom,n))}i=s.scrollDOM.clientHeight-t-n}else i=(s.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(s.defaultLineHeight,i-5)}}function x5(s,e){let t=w5(s),{state:n}=s,i=Oa(n.selection,o=>o.empty?s.moveVertically(o,e,t.height):ph(o,e));if(i.eq(n.selection))return!1;let r;if(t.selfScroll){let o=s.coordsAtPos(n.selection.main.head),a=s.scrollDOM.getBoundingClientRect(),l=a.top+t.marginTop,c=a.bottom-t.marginBottom;o&&o.top>l&&o.bottom<c&&(r=Le.scrollIntoView(i.main.head,{y:"start",yMargin:o.top-l}))}return s.dispatch(Li(n,i),{effects:r}),!0}const k5=s=>x5(s,!1),Y0=s=>x5(s,!0);function Jr(s,e,t){let n=s.lineBlockAt(e.head),i=s.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=s.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let r=/^\s*/.exec(s.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;r&&e.head!=n.from+r&&(i=de.cursor(n.from+r))}return i}const wj=s=>qn(s,e=>Jr(s,e,!0)),xj=s=>qn(s,e=>Jr(s,e,!1)),kj=s=>qn(s,e=>Jr(s,e,!Ps(s))),Sj=s=>qn(s,e=>Jr(s,e,Ps(s))),Cj=s=>qn(s,e=>de.cursor(s.lineBlockAt(e.head).from,1)),Oj=s=>qn(s,e=>de.cursor(s.lineBlockAt(e.head).to,-1));function Mj(s,e,t){let n=!1,i=Oa(s.selection,r=>{let o=Ti(s,r.head,-1)||Ti(s,r.head,1)||r.head>0&&Ti(s,r.head-1,1)||r.head<s.doc.length&&Ti(s,r.head+1,-1);if(!o||!o.end)return r;n=!0;let a=o.start.from==r.head?o.end.to:o.end.from;return de.cursor(a)});return n?(e(Li(s,i)),!0):!1}const Aj=({state:s,dispatch:e})=>Mj(s,e);function En(s,e){let t=Oa(s.state.selection,n=>{let i=e(n);return de.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(s.state.selection)?!1:(s.dispatch(Li(s.state,t)),!0)}function S5(s,e){return En(s,t=>s.moveByChar(t,e))}const C5=s=>S5(s,!Ps(s)),O5=s=>S5(s,Ps(s));function M5(s,e){return En(s,t=>s.moveByGroup(t,e))}const $j=s=>M5(s,!Ps(s)),Tj=s=>M5(s,Ps(s)),Pj=s=>En(s,e=>mh(s.state,e,!Ps(s))),Lj=s=>En(s,e=>mh(s.state,e,Ps(s)));function A5(s,e){return En(s,t=>s.moveVertically(t,e))}const $5=s=>A5(s,!1),T5=s=>A5(s,!0);function P5(s,e){return En(s,t=>s.moveVertically(t,e,w5(s).height))}const L5=s=>P5(s,!1),E5=s=>P5(s,!0),Ej=s=>En(s,e=>Jr(s,e,!0)),Dj=s=>En(s,e=>Jr(s,e,!1)),Ij=s=>En(s,e=>Jr(s,e,!Ps(s))),Rj=s=>En(s,e=>Jr(s,e,Ps(s))),Fj=s=>En(s,e=>de.cursor(s.lineBlockAt(e.head).from)),Bj=s=>En(s,e=>de.cursor(s.lineBlockAt(e.head).to)),D5=({state:s,dispatch:e})=>(e(Li(s,{anchor:0})),!0),I5=({state:s,dispatch:e})=>(e(Li(s,{anchor:s.doc.length})),!0),R5=({state:s,dispatch:e})=>(e(Li(s,{anchor:s.selection.main.anchor,head:0})),!0),F5=({state:s,dispatch:e})=>(e(Li(s,{anchor:s.selection.main.anchor,head:s.doc.length})),!0),Nj=({state:s,dispatch:e})=>(e(s.update({selection:{anchor:0,head:s.doc.length},userEvent:"select"})),!0),Vj=({state:s,dispatch:e})=>{let t=vh(s).map(({from:n,to:i})=>de.range(n,Math.min(i+1,s.doc.length)));return e(s.update({selection:de.create(t),userEvent:"select"})),!0},zj=({state:s,dispatch:e})=>{let t=Oa(s.selection,n=>{let i=Ts(s),r=i.resolveStack(n.from,1);if(n.empty){let o=i.resolveStack(n.from,-1);o.node.from>=r.node.from&&o.node.to<=r.node.to&&(r=o)}for(let o=r;o;o=o.next){let{node:a}=o;if((a.from<n.from&&a.to>=n.to||a.to>n.to&&a.from<=n.from)&&o.next)return de.range(a.to,a.from)}return n});return t.eq(s.selection)?!1:(e(Li(s,t)),!0)},jj=({state:s,dispatch:e})=>{let t=s.selection,n=null;return t.ranges.length>1?n=de.create([t.main]):t.main.empty||(n=de.create([de.cursor(t.main.head)])),n?(e(Li(s,n)),!0):!1};function hc(s,e){if(s.state.readOnly)return!1;let t="delete.selection",{state:n}=s,i=n.changeByRange(r=>{let{from:o,to:a}=r;if(o==a){let l=e(r);l<o?(t="delete.backward",l=gh(s,l,!1)):l>o&&(t="delete.forward",l=gh(s,l,!0)),o=Math.min(o,l),a=Math.max(a,l)}else o=gh(s,o,!1),a=gh(s,a,!0);return o==a?{range:r}:{changes:{from:o,to:a},range:de.cursor(o,o<r.head?-1:1)}});return i.changes.empty?!1:(s.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Le.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function gh(s,e,t){if(s instanceof Le)for(let n of s.state.facet(Le.atomicRanges).map(i=>i(s)))n.between(e,e,(i,r)=>{i<e&&r>e&&(e=t?r:i)});return e}const B5=(s,e,t)=>hc(s,n=>{let i=n.from,{state:r}=s,o=r.doc.lineAt(i),a,l;if(t&&!e&&i>o.from&&i<o.from+200&&!/[^ \t]/.test(a=o.text.slice(0,i-o.from))){if(a[a.length-1]=="	")return i-1;let c=da(a,r.tabSize),u=c%oh(r)||oh(r);for(let d=0;d<u&&a[a.length-1-d]==" ";d++)i--;l=i}else l=ys(o.text,i-o.from,e,e)+o.from,l==i&&o.number!=(e?r.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(l-o.from,i-o.from))&&(l=ys(o.text,l-o.from,!1,!1)+o.from);return l}),q0=s=>B5(s,!1,!0),N5=s=>B5(s,!0,!1),V5=(s,e)=>hc(s,t=>{let n=t.head,{state:i}=s,r=i.doc.lineAt(n),o=i.charCategorizer(n);for(let a=null;;){if(n==(e?r.to:r.from)){n==t.head&&r.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=ys(r.text,n-r.from,e)+r.from,c=r.text.slice(Math.min(n,l)-r.from,Math.max(n,l)-r.from),u=o(c);if(a!=null&&u!=a)break;(c!=" "||n!=t.head)&&(a=u),n=l}return n}),z5=s=>V5(s,!1),Wj=s=>V5(s,!0),Uj=s=>hc(s,e=>{let t=s.lineBlockAt(e.head).to;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),Hj=s=>hc(s,e=>{let t=s.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),Qj=s=>hc(s,e=>{let t=s.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(s.state.doc.length,e.head+1)}),Yj=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:_t.of(["",""])},range:de.cursor(n.from)}));return e(s.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},qj=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=s.changeByRange(n=>{if(!n.empty||n.from==0||n.from==s.doc.length)return{range:n};let i=n.from,r=s.doc.lineAt(i),o=i==r.from?i-1:ys(r.text,i-r.from,!1)+r.from,a=i==r.to?i+1:ys(r.text,i-r.from,!0)+r.from;return{changes:{from:o,to:a,insert:s.doc.slice(i,a).append(s.doc.slice(o,i))},range:de.cursor(a)}});return t.changes.empty?!1:(e(s.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function vh(s){let e=[],t=-1;for(let n of s.selection.ranges){let i=s.doc.lineAt(n.from),r=s.doc.lineAt(n.to);if(!n.empty&&n.to==r.from&&(r=s.doc.lineAt(n.to-1)),t>=i.number){let o=e[e.length-1];o.to=r.to,o.ranges.push(n)}else e.push({from:i.from,to:r.to,ranges:[n]});t=r.number+1}return e}function j5(s,e,t){if(s.readOnly)return!1;let n=[],i=[];for(let r of vh(s)){if(t?r.to==s.doc.length:r.from==0)continue;let o=s.doc.lineAt(t?r.to+1:r.from-1),a=o.length+1;if(t){n.push({from:r.to,to:o.to},{from:r.from,insert:o.text+s.lineBreak});for(let l of r.ranges)i.push(de.range(Math.min(s.doc.length,l.anchor+a),Math.min(s.doc.length,l.head+a)))}else{n.push({from:o.from,to:r.from},{from:r.to,insert:s.lineBreak+o.text});for(let l of r.ranges)i.push(de.range(l.anchor-a,l.head-a))}}return n.length?(e(s.update({changes:n,scrollIntoView:!0,selection:de.create(i,s.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Gj=({state:s,dispatch:e})=>j5(s,e,!1),Kj=({state:s,dispatch:e})=>j5(s,e,!0);function W5(s,e,t){if(s.readOnly)return!1;let n=[];for(let i of vh(s))t?n.push({from:i.from,insert:s.doc.slice(i.from,i.to)+s.lineBreak}):n.push({from:i.to,insert:s.lineBreak+s.doc.slice(i.from,i.to)});return e(s.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Xj=({state:s,dispatch:e})=>W5(s,e,!1),Jj=({state:s,dispatch:e})=>W5(s,e,!0),Zj=s=>{if(s.state.readOnly)return!1;let{state:e}=s,t=e.changes(vh(e).map(({from:i,to:r})=>(i>0?i--:r<e.doc.length&&r++,{from:i,to:r}))),n=Oa(e.selection,i=>{let r;if(s.lineWrapping){let o=s.lineBlockAt(i.head),a=s.coordsAtPos(i.head,i.assoc||1);a&&(r=o.bottom+s.documentTop-a.bottom+s.defaultLineHeight/2)}return s.moveVertically(i,!0,r)}).map(t);return s.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function eW(s,e){if(/\(\)|\[\]|\{\}/.test(s.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Ts(s).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),r;return n&&i&&n.to<=e&&i.from>=e&&(r=n.type.prop(pt.closedBy))&&r.indexOf(i.name)>-1&&s.doc.lineAt(n.to).from==s.doc.lineAt(i.from).from&&!/\S/.test(s.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const U5=H5(!1),tW=H5(!0);function H5(s){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:r,to:o}=i,a=e.doc.lineAt(r),l=!s&&r==o&&eW(e,r);s&&(r=o=(o<=a.to?a:e.doc.lineAt(o)).to);let c=new ah(e,{simulateBreak:r,simulateDoubleBreak:!!l}),u=D0(c,r);for(u==null&&(u=da(/^\s*/.exec(e.doc.lineAt(r).text)[0],e.tabSize));o<a.to&&/\s/.test(a.text[o-a.from]);)o++;l?{from:r,to:o}=l:r>a.from&&r<a.from+100&&!/\S/.test(a.text.slice(0,r))&&(r=a.from);let d=["",cc(e,u)];return l&&d.push(cc(e,c.lineIndent(a.from,-1))),{changes:{from:r,to:o,insert:_t.of(d)},range:de.cursor(r+1+d[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function G0(s,e){let t=-1;return s.changeByRange(n=>{let i=[];for(let o=n.from;o<=n.to;){let a=s.doc.lineAt(o);a.number>t&&(n.empty||n.to>a.from)&&(e(a,i,n),t=a.number),o=a.to+1}let r=s.changes(i);return{changes:i,range:de.range(r.mapPos(n.anchor,1),r.mapPos(n.head,1))}})}const sW=({state:s,dispatch:e})=>{if(s.readOnly)return!1;let t=Object.create(null),n=new ah(s,{overrideIndentation:r=>{let o=t[r];return o??-1}}),i=G0(s,(r,o,a)=>{let l=D0(n,r.from);if(l==null)return;/\S/.test(r.text)||(l=0);let c=/^\s*/.exec(r.text)[0],u=cc(s,l);(c!=u||a.from<r.from+c.length)&&(t[r.from]=l,o.push({from:r.from,to:r.from+c.length,insert:u}))});return i.changes.empty||e(s.update(i,{userEvent:"indent"})),!0},nW=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(G0(s,(t,n)=>{n.push({from:t.from,insert:s.facet(E0)})}),{userEvent:"input.indent"})),!0),iW=({state:s,dispatch:e})=>s.readOnly?!1:(e(s.update(G0(s,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let r=da(i,s.tabSize),o=0,a=cc(s,Math.max(0,r-oh(s)));for(;o<i.length&&o<a.length&&i.charCodeAt(o)==a.charCodeAt(o);)o++;n.push({from:t.from+o,to:t.from+i.length,insert:a.slice(o)})}),{userEvent:"delete.dedent"})),!0),rW=s=>(s.setTabFocusMode(),!0),oW=[{key:"Ctrl-b",run:m5,shift:C5,preventDefault:!0},{key:"Ctrl-f",run:g5,shift:O5},{key:"Ctrl-p",run:_5,shift:$5},{key:"Ctrl-n",run:b5,shift:T5},{key:"Ctrl-a",run:Cj,shift:Fj},{key:"Ctrl-e",run:Oj,shift:Bj},{key:"Ctrl-d",run:N5},{key:"Ctrl-h",run:q0},{key:"Ctrl-k",run:Uj},{key:"Ctrl-Alt-h",run:z5},{key:"Ctrl-o",run:Yj},{key:"Ctrl-t",run:qj},{key:"Ctrl-v",run:Y0}],aW=[{key:"ArrowLeft",run:m5,shift:C5,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:gj,shift:$j,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:kj,shift:Ij,preventDefault:!0},{key:"ArrowRight",run:g5,shift:O5,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:vj,shift:Tj,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Sj,shift:Rj,preventDefault:!0},{key:"ArrowUp",run:_5,shift:$5,preventDefault:!0},{mac:"Cmd-ArrowUp",run:D5,shift:R5},{mac:"Ctrl-ArrowUp",run:k5,shift:L5},{key:"ArrowDown",run:b5,shift:T5,preventDefault:!0},{mac:"Cmd-ArrowDown",run:I5,shift:F5},{mac:"Ctrl-ArrowDown",run:Y0,shift:E5},{key:"PageUp",run:k5,shift:L5},{key:"PageDown",run:Y0,shift:E5},{key:"Home",run:xj,shift:Dj,preventDefault:!0},{key:"Mod-Home",run:D5,shift:R5},{key:"End",run:wj,shift:Ej,preventDefault:!0},{key:"Mod-End",run:I5,shift:F5},{key:"Enter",run:U5,shift:U5},{key:"Mod-a",run:Nj},{key:"Backspace",run:q0,shift:q0},{key:"Delete",run:N5},{key:"Mod-Backspace",mac:"Alt-Backspace",run:z5},{key:"Mod-Delete",mac:"Alt-Delete",run:Wj},{mac:"Mod-Backspace",run:Hj},{mac:"Mod-Delete",run:Qj}].concat(oW.map(s=>({mac:s.key,run:s.run,shift:s.shift}))),lW=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:_j,shift:Pj},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:bj,shift:Lj},{key:"Alt-ArrowUp",run:Gj},{key:"Shift-Alt-ArrowUp",run:Xj},{key:"Alt-ArrowDown",run:Kj},{key:"Shift-Alt-ArrowDown",run:Jj},{key:"Escape",run:jj},{key:"Mod-Enter",run:tW},{key:"Alt-l",mac:"Ctrl-l",run:Vj},{key:"Mod-i",run:zj,preventDefault:!0},{key:"Mod-[",run:iW},{key:"Mod-]",run:nW},{key:"Mod-Alt-\\",run:sW},{key:"Shift-Mod-k",run:Zj},{key:"Shift-Mod-\\",run:Aj},{key:"Mod-/",run:Xz},{key:"Alt-A",run:Zz},{key:"Ctrl-m",mac:"Shift-Alt-m",run:rW}].concat(aW),Q5=typeof String.prototype.normalize=="function"?s=>s.normalize("NFKD"):s=>s;class Ma{constructor(e,t,n=0,i=e.length,r,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=r?a=>r(Q5(a)):Q5,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return en(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=jp(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=di(e);let i=this.normalize(t);if(i.length)for(let r=0,o=n;;r++){let a=i.charCodeAt(r),l=this.match(a,o,this.bufferPos+this.bufferStart);if(r==i.length-1){if(l)return this.value=l,this;break}o==n&&r<t.length&&t.charCodeAt(r)==a&&o++}}}match(e,t,n){let i=null;for(let r=0;r<this.matches.length;r+=2){let o=this.matches[r],a=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?i={from:this.matches[r+1],to:n}:(this.matches[r]++,a=!0)),a||(this.matches.splice(r,2),r-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(Ma.prototype[Symbol.iterator]=function(){return this});const Y5={from:-1,to:-1,match:/.*/.exec("")},K0="gm"+(/x/.unicode==null?"":"u");class q5{constructor(e,t,n,i=0,r=e.length){if(this.text=e,this.to=r,this.curLine="",this.done=!1,this.value=Y5,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new G5(e,t,n,i,r);this.re=new RegExp(t,K0+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.iter=e.iter();let o=e.lineAt(i);this.curLineStart=o.from,this.matchPos=yh(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=yh(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const X0=new WeakMap;class Aa{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=X0.get(e);if(!i||i.from>=n||i.to<=t){let a=new Aa(t,e.sliceString(t,n));return X0.set(e,a),a}if(i.from==t&&i.to==n)return i;let{text:r,from:o}=i;return o>t&&(r=e.sliceString(t,o)+r,o=t),i.to<n&&(r+=e.sliceString(i.to,n)),X0.set(e,new Aa(o,r)),new Aa(t,r.slice(t-o,n-o))}}class G5{constructor(e,t,n,i,r){this.text=e,this.to=r,this.done=!1,this.value=Y5,this.matchPos=yh(e,i),this.re=new RegExp(t,K0+(n!=null&&n.ignoreCase?"i":"")),this.test=n==null?void 0:n.test,this.flat=Aa.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=yh(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Aa.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(q5.prototype[Symbol.iterator]=G5.prototype[Symbol.iterator]=function(){return this});function cW(s){try{return new RegExp(s,K0),!0}catch{return!1}}function yh(s,e){if(e>=s.length)return e;let t=s.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function J0(s){let e=String(s.state.doc.lineAt(s.state.selection.main.head).number),t=Pt("input",{class:"cm-textfield",name:"line",value:e}),n=Pt("form",{class:"cm-gotoLine",onkeydown:r=>{r.keyCode==27?(r.preventDefault(),s.dispatch({effects:fc.of(!1)}),s.focus()):r.keyCode==13&&(r.preventDefault(),i())},onsubmit:r=>{r.preventDefault(),i()}},Pt("label",s.state.phrase("Go to line"),": ",t)," ",Pt("button",{class:"cm-button",type:"submit"},s.state.phrase("go")),Pt("button",{name:"close",onclick:()=>{s.dispatch({effects:fc.of(!1)}),s.focus()},"aria-label":s.state.phrase("close"),type:"button"},[""]));function i(){let r=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!r)return;let{state:o}=s,a=o.doc.lineAt(o.selection.main.head),[,l,c,u,d]=r,f=u?+u.slice(1):0,p=c?+c:a.number;if(c&&d){let k=p/100;l&&(k=k*(l=="-"?-1:1)+a.number/o.doc.lines),p=Math.round(o.doc.lines*k)}else c&&l&&(p=p*(l=="-"?-1:1)+a.number);let g=o.doc.line(Math.max(1,Math.min(o.doc.lines,p))),S=de.cursor(g.from+Math.max(0,Math.min(f,g.length)));s.dispatch({effects:[fc.of(!1),Le.scrollIntoView(S.from,{y:"center"})],selection:S}),s.focus()}return{dom:n}}const fc=rt.define(),K5=ms.define({create(){return!0},update(s,e){for(let t of e.effects)t.is(fc)&&(s=t.value);return s},provide:s=>ql.from(s,e=>e?J0:null)}),uW=s=>{let e=Yl(s,J0);if(!e){let t=[fc.of(!0)];s.state.field(K5,!1)==null&&t.push(rt.appendConfig.of([K5,dW])),s.dispatch({effects:t}),e=Yl(s,J0)}return e&&e.dom.querySelector("input").select(),!0},dW=Le.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),hW={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},fW=De.define({combine(s){return fi(s,hW,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function pW(s){return[_W,yW]}const mW=Qe.mark({class:"cm-selectionMatch"}),gW=Qe.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function X5(s,e,t,n){return(t==0||s(e.sliceDoc(t-1,t))!=Yt.Word)&&(n==e.doc.length||s(e.sliceDoc(n,n+1))!=Yt.Word)}function vW(s,e,t,n){return s(e.sliceDoc(t,t+1))==Yt.Word&&s(e.sliceDoc(n-1,n))==Yt.Word}const yW=Xt.fromClass(class{constructor(s){this.decorations=this.getDeco(s)}update(s){(s.selectionSet||s.docChanged||s.viewportChanged)&&(this.decorations=this.getDeco(s.view))}getDeco(s){let e=s.state.facet(fW),{state:t}=s,n=t.selection;if(n.ranges.length>1)return Qe.none;let i=n.main,r,o=null;if(i.empty){if(!e.highlightWordAroundCursor)return Qe.none;let l=t.wordAt(i.head);if(!l)return Qe.none;o=t.charCategorizer(i.head),r=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Qe.none;if(e.wholeWords){if(r=t.sliceDoc(i.from,i.to),o=t.charCategorizer(i.head),!(X5(o,t,i.from,i.to)&&vW(o,t,i.from,i.to)))return Qe.none}else if(r=t.sliceDoc(i.from,i.to),!r)return Qe.none}let a=[];for(let l of s.visibleRanges){let c=new Ma(t.doc,r,l.from,l.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!o||X5(o,t,u,d))&&(i.empty&&u<=i.from&&d>=i.to?a.push(gW.range(u,d)):(u>=i.to||d<=i.from)&&a.push(mW.range(u,d)),a.length>e.maxMatches))return Qe.none}}return Qe.set(a)}},{decorations:s=>s.decorations}),_W=Le.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),bW=({state:s,dispatch:e})=>{let{selection:t}=s,n=de.create(t.ranges.map(i=>s.wordAt(i.head)||de.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(s.update({selection:n})),!0)};function wW(s,e){let{main:t,ranges:n}=s.selection,i=s.wordAt(t.head),r=i&&i.from==t.from&&i.to==t.to;for(let o=!1,a=new Ma(s.doc,e,n[n.length-1].to);;)if(a.next(),a.done){if(o)return null;a=new Ma(s.doc,e,0,Math.max(0,n[n.length-1].from-1)),o=!0}else{if(o&&n.some(l=>l.from==a.value.from))continue;if(r){let l=s.wordAt(a.value.from);if(!l||l.from!=a.value.from||l.to!=a.value.to)continue}return a.value}}const xW=({state:s,dispatch:e})=>{let{ranges:t}=s.selection;if(t.some(r=>r.from===r.to))return bW({state:s,dispatch:e});let n=s.sliceDoc(t[0].from,t[0].to);if(s.selection.ranges.some(r=>s.sliceDoc(r.from,r.to)!=n))return!1;let i=wW(s,n);return i?(e(s.update({selection:s.selection.addRange(de.range(i.from,i.to),!1),effects:Le.scrollIntoView(i.to)})),!0):!1},$a=De.define({combine(s){return fi(s,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new DW(e),scrollToMatch:e=>Le.scrollIntoView(e)})}});class J5{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||cW(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new OW(this):new SW(this)}getCursor(e,t=0,n){let i=e.doc?e:ut.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?Pa(this,i,t,n):Ta(this,i,t,n)}}class Z5{constructor(e){this.spec=e}}function Ta(s,e,t,n){return new Ma(e.doc,s.unquoted,t,n,s.caseSensitive?void 0:i=>i.toLowerCase(),s.wholeWord?kW(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function kW(s,e){return(t,n,i,r)=>((r>t||r+i.length<n)&&(r=Math.max(0,t-2),i=s.sliceString(r,Math.min(s.length,n+2))),(e(_h(i,t-r))!=Yt.Word||e(bh(i,t-r))!=Yt.Word)&&(e(bh(i,n-r))!=Yt.Word||e(_h(i,n-r))!=Yt.Word))}class SW extends Z5{constructor(e){super(e)}nextMatch(e,t,n){let i=Ta(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let r=Math.min(e.doc.length,t+this.spec.unquoted.length);i=Ta(this.spec,e,0,r).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==n?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let r=Math.max(t,i-1e4-this.spec.unquoted.length),o=Ta(this.spec,e,r,i),a=null;for(;!o.nextOverlapping().done;)a=o.value;if(a)return a;if(r==t)return null;i-=1e4}}prevMatch(e,t,n){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=Ta(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=Ta(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}function Pa(s,e,t,n){return new q5(e.doc,s.search,{ignoreCase:!s.caseSensitive,test:s.wholeWord?CW(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function _h(s,e){return s.slice(ys(s,e,!1),e)}function bh(s,e){return s.slice(e,ys(s,e))}function CW(s){return(e,t,n)=>!n[0].length||(s(_h(n.input,n.index))!=Yt.Word||s(bh(n.input,n.index))!=Yt.Word)&&(s(bh(n.input,n.index+n[0].length))!=Yt.Word||s(_h(n.input,n.index+n[0].length))!=Yt.Word)}class OW extends Z5{nextMatch(e,t,n){let i=Pa(this.spec,e,n,e.doc.length).next();return i.done&&(i=Pa(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let r=Math.max(t,n-i*1e4),o=Pa(this.spec,e,r,n),a=null;for(;!o.next().done;)a=o.value;if(a&&(r==t||a.from>r+10))return a;if(r==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let i=n.length;i>0;i--){let r=+n.slice(0,i);if(r>0&&r<e.match.length)return e.match[r]+n.slice(i)}return t})}matchAll(e,t){let n=Pa(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let r=Pa(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!r.next().done;)i(r.value.from,r.value.to)}}const pc=rt.define(),Z0=rt.define(),Zr=ms.define({create(s){return new eg(sg(s).create(),null)},update(s,e){for(let t of e.effects)t.is(pc)?s=new eg(t.value.create(),s.panel):t.is(Z0)&&(s=new eg(s.query,t.value?tg:null));return s},provide:s=>ql.from(s,e=>e.panel)});class eg{constructor(e,t){this.query=e,this.panel=t}}const MW=Qe.mark({class:"cm-searchMatch"}),AW=Qe.mark({class:"cm-searchMatch cm-searchMatch-selected"}),$W=Xt.fromClass(class{constructor(s){this.view=s,this.decorations=this.highlight(s.state.field(Zr))}update(s){let e=s.state.field(Zr);(e!=s.startState.field(Zr)||s.docChanged||s.selectionSet||s.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:s,panel:e}){if(!e||!s.spec.valid)return Qe.none;let{view:t}=this,n=new tr;for(let i=0,r=t.visibleRanges,o=r.length;i<o;i++){let{from:a,to:l}=r[i];for(;i<o-1&&l>r[i+1].from-2*250;)l=r[++i].to;s.highlight(t.state,a,l,(c,u)=>{let d=t.state.selection.ranges.some(f=>f.from==c&&f.to==u);n.add(c,u,d?AW:MW)})}return n.finish()}},{decorations:s=>s.decorations});function mc(s){return e=>{let t=e.state.field(Zr,!1);return t&&t.query.spec.valid?s(e,t):nk(e)}}const wh=mc((s,{query:e})=>{let{to:t}=s.state.selection.main,n=e.nextMatch(s.state,t,t);if(!n)return!1;let i=de.single(n.from,n.to),r=s.state.facet($a);return s.dispatch({selection:i,effects:[ng(s,n),r.scrollToMatch(i.main,s)],userEvent:"select.search"}),sk(s),!0}),xh=mc((s,{query:e})=>{let{state:t}=s,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let r=de.single(i.from,i.to),o=s.state.facet($a);return s.dispatch({selection:r,effects:[ng(s,i),o.scrollToMatch(r.main,s)],userEvent:"select.search"}),sk(s),!0}),TW=mc((s,{query:e})=>{let t=e.matchAll(s.state,1e3);return!t||!t.length?!1:(s.dispatch({selection:de.create(t.map(n=>de.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),PW=({state:s,dispatch:e})=>{let t=s.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,r=[],o=0;for(let a=new Ma(s.doc,s.sliceDoc(n,i));!a.next().done;){if(r.length>1e3)return!1;a.value.from==n&&(o=r.length),r.push(de.range(a.value.from,a.value.to))}return e(s.update({selection:de.create(r,o),userEvent:"select.search.matches"})),!0},ek=mc((s,{query:e})=>{let{state:t}=s,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let r=e.nextMatch(t,n,n);if(!r)return!1;let o=r,a=[],l,c,u=[];o.from==n&&o.to==i&&(c=t.toText(e.getReplacement(o)),a.push({from:o.from,to:o.to,insert:c}),o=e.nextMatch(t,o.from,o.to),u.push(Le.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+".")));let d=s.state.changes(a);return o&&(l=de.single(o.from,o.to).map(d),u.push(ng(s,o)),u.push(t.facet($a).scrollToMatch(l.main,s))),s.dispatch({changes:d,selection:l,effects:u,userEvent:"input.replace"}),!0}),LW=mc((s,{query:e})=>{if(s.state.readOnly)return!1;let t=e.matchAll(s.state,1e9).map(i=>{let{from:r,to:o}=i;return{from:r,to:o,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=s.state.phrase("replaced $ matches",t.length)+".";return s.dispatch({changes:t,effects:Le.announce.of(n),userEvent:"input.replace.all"}),!0});function tg(s){return s.state.facet($a).createPanel(s)}function sg(s,e){var t,n,i,r,o;let a=s.selection.main,l=a.empty||a.to>a.from+100?"":s.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=s.facet($a);return new J5({search:((t=e==null?void 0:e.literal)!==null&&t!==void 0?t:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e==null?void 0:e.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=e==null?void 0:e.literal)!==null&&i!==void 0?i:c.literal,regexp:(r=e==null?void 0:e.regexp)!==null&&r!==void 0?r:c.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:c.wholeWord})}function tk(s){let e=Yl(s,tg);return e&&e.dom.querySelector("[main-field]")}function sk(s){let e=tk(s);e&&e==s.root.activeElement&&e.select()}const nk=s=>{let e=s.state.field(Zr,!1);if(e&&e.panel){let t=tk(s);if(t&&t!=s.root.activeElement){let n=sg(s.state,e.query.spec);n.valid&&s.dispatch({effects:pc.of(n)}),t.focus(),t.select()}}else s.dispatch({effects:[Z0.of(!0),e?pc.of(sg(s.state,e.query.spec)):rt.appendConfig.of(RW)]});return!0},ik=s=>{let e=s.state.field(Zr,!1);if(!e||!e.panel)return!1;let t=Yl(s,tg);return t&&t.dom.contains(s.root.activeElement)&&s.focus(),s.dispatch({effects:Z0.of(!1)}),!0},EW=[{key:"Mod-f",run:nk,scope:"editor search-panel"},{key:"F3",run:wh,shift:xh,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:wh,shift:xh,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:ik,scope:"editor search-panel"},{key:"Mod-Shift-l",run:PW},{key:"Mod-Alt-g",run:uW},{key:"Mod-d",run:xW,preventDefault:!0}];class DW{constructor(e){this.view=e;let t=this.query=e.state.field(Zr).query.spec;this.commit=this.commit.bind(this),this.searchField=Pt("input",{value:t.search,placeholder:pn(e,"Find"),"aria-label":pn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Pt("input",{value:t.replace,placeholder:pn(e,"Replace"),"aria-label":pn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Pt("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=Pt("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=Pt("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,r,o){return Pt("button",{class:"cm-button",name:i,onclick:r,type:"button"},o)}this.dom=Pt("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>wh(e),[pn(e,"next")]),n("prev",()=>xh(e),[pn(e,"previous")]),n("select",()=>TW(e),[pn(e,"all")]),Pt("label",null,[this.caseField,pn(e,"match case")]),Pt("label",null,[this.reField,pn(e,"regexp")]),Pt("label",null,[this.wordField,pn(e,"by word")]),...e.state.readOnly?[]:[Pt("br"),this.replaceField,n("replace",()=>ek(e),[pn(e,"replace")]),n("replaceAll",()=>LW(e),[pn(e,"replace all")])],Pt("button",{name:"close",onclick:()=>ik(e),"aria-label":pn(e,"close"),type:"button"},[""])])}commit(){let e=new J5({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:pc.of(e)}))}keydown(e){oB(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?xh:wh)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),ek(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(pc)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet($a).top}}function pn(s,e){return s.state.phrase(e)}const kh=30,Sh=/[\s\.,:;?!]/;function ng(s,{from:e,to:t}){let n=s.state.doc.lineAt(e),i=s.state.doc.lineAt(t).to,r=Math.max(n.from,e-kh),o=Math.min(i,t+kh),a=s.state.sliceDoc(r,o);if(r!=n.from){for(let l=0;l<kh;l++)if(!Sh.test(a[l+1])&&Sh.test(a[l])){a=a.slice(l);break}}if(o!=i){for(let l=a.length-1;l>a.length-kh;l--)if(!Sh.test(a[l-1])&&Sh.test(a[l])){a=a.slice(0,l);break}}return Le.announce.of(`${s.state.phrase("current match")}. ${a} ${s.state.phrase("on line")} ${n.number}.`)}const IW=Le.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),RW=[Zr,Co.low($W),IW];class rk{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Ts(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),r=i.search(lk(e,!1));return r<0?null:{from:n+r,to:this.pos,text:i.slice(r)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function ok(s){let e=Object.keys(s).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function FW(s){let e=Object.create(null),t=Object.create(null);for(let{label:i}of s){e[i[0]]=!0;for(let r=1;r<i.length;r++)t[i[r]]=!0}let n=ok(e)+ok(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function BW(s){let e=s.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:FW(e);return i=>{let r=i.matchBefore(n);return r||i.explicit?{from:r?r.from:i.pos,options:e,validFor:t}:null}}class ak{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}}function Io(s){return s.selection.main.from}function lk(s,e){var t;let{source:n}=s,i=e&&n[0]!="^",r=n[n.length-1]!="$";return!i&&!r?s:new RegExp(`${i?"^":""}(?:${n})${r?"$":""}`,(t=s.flags)!==null&&t!==void 0?t:s.ignoreCase?"i":"")}const ck=er.define();function NW(s,e,t,n){let{main:i}=s.selection,r=t-i.from,o=n-i.from;return Object.assign(Object.assign({},s.changeByRange(a=>{if(a!=i&&t!=n&&s.sliceDoc(a.from+r,a.from+o)!=s.sliceDoc(t,n))return{range:a};let l=s.toText(e);return{changes:{from:a.from+r,to:n==i.from?a.to:a.from+o,insert:l},range:de.cursor(a.from+r+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const uk=new WeakMap;function VW(s){if(!Array.isArray(s))return s;let e=uk.get(s);return e||uk.set(s,e=BW(s)),e}const Ch=rt.define(),gc=rt.define();class zW{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=en(e,t),i=di(n);this.chars.push(n);let r=e.slice(t,t+i),o=r.toUpperCase();this.folded.push(en(o==r?r.toLowerCase():o,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:r,byWord:o}=this;if(t.length==1){let $=en(e,0),M=di($),b=M==e.length?0:-100;if($!=t[0])if($==n[0])b+=-200;else return null;return this.ret(b,[0,M])}let a=e.indexOf(this.pattern);if(a==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,c=0;if(a<0){for(let $=0,M=Math.min(e.length,200);$<M&&c<l;){let b=en(e,$);(b==t[c]||b==n[c])&&(i[c++]=$),$+=di(b)}if(c<l)return null}let u=0,d=0,f=!1,p=0,g=-1,S=-1,k=/[a-z]/.test(e),O=!0;for(let $=0,M=Math.min(e.length,200),b=0;$<M&&d<l;){let w=en(e,$);a<0&&(u<l&&w==t[u]&&(r[u++]=$),p<l&&(w==t[p]||w==n[p]?(p==0&&(g=$),S=$+1,p++):p=0));let R,T=w<255?w>=48&&w<=57||w>=97&&w<=122?2:w>=65&&w<=90?1:0:(R=jp(w))!=R.toLowerCase()?1:R!=R.toUpperCase()?2:0;(!$||T==1&&k||b==0&&T!=0)&&(t[d]==w||n[d]==w&&(f=!0)?o[d++]=$:o.length&&(O=!1)),b=T,$+=di(w)}return d==l&&o[0]==0&&O?this.result(-100+(f?-200:0),o,e):p==l&&g==0?this.ret(-200-e.length+(S==e.length?0:-100),[0,S]):a>-1?this.ret(-700-e.length,[a,a+this.pattern.length]):p==l?this.ret(-900-e.length,[g,S]):d==l?this.result(-100+(f?-200:0)+-700+(O?0:-1100),o,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],r=0;for(let o of t){let a=o+(this.astral?di(en(n,o)):1);r&&i[r-1]==o?i[r-1]=a:(i[r++]=o,i[r++]=a)}return this.ret(e-n.length,i)}}class jW{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const vs=De.define({combine(s){return fi(s,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:WW,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>dk(e(n),t(n)),optionClass:(e,t)=>n=>dk(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function dk(s,e){return s?e?s+" "+e:s:e}function WW(s,e,t,n,i,r){let o=s.textDirection==Et.RTL,a=o,l=!1,c="top",u,d,f=e.left-i.left,p=i.right-e.right,g=n.right-n.left,S=n.bottom-n.top;if(a&&f<Math.min(g,p)?a=!1:!a&&p<Math.min(g,f)&&(a=!0),g<=(a?f:p))u=Math.max(i.top,Math.min(t.top,i.bottom-S))-e.top,d=Math.min(400,a?f:p);else{l=!0,d=Math.min(400,(o?e.right:i.right-e.left)-30);let $=i.bottom-e.bottom;$>=S||$>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let k=(e.bottom-e.top)/r.offsetHeight,O=(e.right-e.left)/r.offsetWidth;return{style:`${c}: ${u/k}px; max-width: ${d/O}px`,class:"cm-completionInfo-"+(l?o?"left-narrow":"right-narrow":a?"left":"right")}}function UW(s){let e=s.addToOptions.slice();return s.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i,r){let o=document.createElement("span");o.className="cm-completionLabel";let a=t.displayLabel||t.label,l=0;for(let c=0;c<r.length;){let u=r[c++],d=r[c++];u>l&&o.appendChild(document.createTextNode(a.slice(l,u)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(a.slice(u,d))),f.className="cm-completionMatchedText",l=d}return l<a.length&&o.appendChild(document.createTextNode(a.slice(l))),o},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function ig(s,e,t){if(s<=t)return{from:0,to:s};if(e<0&&(e=0),e<=s>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((s-e)/t);return{from:s-(n+1)*t,to:s-n*t}}class HW{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:r,selected:o}=i.open,a=e.state.facet(vs);this.optionContent=UW(a),this.optionClass=a.optionClass,this.tooltipClass=a.tooltipClass,this.range=ig(r.length,o,a.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(t).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(vs).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:gc.of(null)})}),this.showOptions(r,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:r,selected:o,disabled:a}=n.open;(!i.open||i.open.options!=r)&&(this.range=ig(r.length,o,e.state.facet(vs).maxRenderedOptions),this.showOptions(r,n.id)),this.updateSel(),a!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!a)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=ig(t.options.length,t.selected,this.view.state.facet(vs).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let r=typeof i=="string"?document.createTextNode(i):i(n);if(!r)return;"then"in r?r.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,n)}).catch(o=>Ws(this.view.state,o,"completion info")):this.addInfoPane(r,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:r}=e;n.appendChild(i),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&YW(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),r=this.space;if(!r){let o=this.dom.ownerDocument.documentElement;r={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return i.top>Math.min(r.bottom,t.bottom)-10||i.bottom<Math.max(r.top,t.top)+10?null:this.view.state.facet(vs).positionInfo(this.view,t,i,n,r,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",o=>{o.target==i&&o.preventDefault()});let r=null;for(let o=n.from;o<n.to;o++){let{completion:a,match:l}=e[o],{section:c}=a;if(c){let f=typeof c=="string"?c:c.name;if(f!=r&&(o>n.from||n.from==0))if(r=f,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let p=i.appendChild(document.createElement("completion-section"));p.textContent=f}}const u=i.appendChild(document.createElement("li"));u.id=t+"-"+o,u.setAttribute("role","option");let d=this.optionClass(a);d&&(u.className=d);for(let f of this.optionContent){let p=f(a,this.view.state,this.view,l);p&&u.appendChild(p)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function QW(s,e){return t=>new HW(t,s,e)}function YW(s,e){let t=s.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/s.offsetHeight;n.top<t.top?s.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(s.scrollTop+=(n.bottom-t.bottom)/i)}function hk(s){return(s.boost||0)*100+(s.apply?10:0)+(s.info?5:0)+(s.type?1:0)}function qW(s,e){let t=[],n=null,i=c=>{t.push(c);let{section:u}=c.completion;if(u){n||(n=[]);let d=typeof u=="string"?u:u.name;n.some(f=>f.name==d)||n.push(typeof u=="string"?{name:d}:u)}},r=e.facet(vs);for(let c of s)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)i(new ak(d,c.source,u?u(d):[],1e9-t.length));else{let d=e.sliceDoc(c.from,c.to),f,p=r.filterStrict?new jW(d):new zW(d);for(let g of c.result.options)if(f=p.match(g.label)){let S=g.displayLabel?u?u(g,f.matched):[]:f.matched;i(new ak(g,c.source,S,f.score+(g.boost||0)))}}}if(n){let c=Object.create(null),u=0,d=(f,p)=>{var g,S;return((g=f.rank)!==null&&g!==void 0?g:1e9)-((S=p.rank)!==null&&S!==void 0?S:1e9)||(f.name<p.name?-1:1)};for(let f of n.sort(d))u-=1e5,c[f.name]=u;for(let f of t){let{section:p}=f.completion;p&&(f.score+=c[typeof p=="string"?p:p.name])}}let o=[],a=null,l=r.compareCompletions;for(let c of t.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!a||a.label!=u.label||a.detail!=u.detail||a.type!=null&&u.type!=null&&a.type!=u.type||a.apply!=u.apply||a.boost!=u.boost?o.push(c):hk(c.completion)>hk(a)&&(o[o.length-1]=c),a=c.completion}return o}class La{constructor(e,t,n,i,r,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=r,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new La(this.options,fk(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,r,o){if(i&&!o&&e.some(c=>c.isPending))return i.setDisabled();let a=qW(e,t);if(!a.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=t.facet(vs).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<a.length;u++)if(a[u].completion==c){l=u;break}}return new La(a,fk(n,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:eU,above:r.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new La(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new La(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Oh{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new Oh(JW,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(vs),r=(n.override||t.languageDataAt("autocomplete",Io(t)).map(VW)).map(l=>(this.active.find(u=>u.source==l)||new Dn(l,this.active.some(u=>u.state!=0)?1:0)).update(e,n));r.length==this.active.length&&r.every((l,c)=>l==this.active[c])&&(r=this.active);let o=this.open,a=e.effects.some(l=>l.is(rg));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||r.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!GW(r,this.active)||a?o=La.build(r,t,this.id,o,n,a):o&&o.disabled&&!r.some(l=>l.isPending)&&(o=null),!o&&r.every(l=>!l.isPending)&&r.some(l=>l.hasResult())&&(r=r.map(l=>l.hasResult()?new Dn(l.source,0):l));for(let l of e.effects)l.is(mk)&&(o=o&&o.setSelected(l.value,this.id));return r==this.active&&o==this.open?this:new Oh(r,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?KW:XW}}function GW(s,e){if(s==e)return!0;for(let t=0,n=0;;){for(;t<s.length&&!s[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let i=t==s.length,r=n==e.length;if(i||r)return i==r;if(s[t++].result!=e[n++].result)return!1}}const KW={"aria-autocomplete":"list"},XW={};function fk(s,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":s};return e>-1&&(t["aria-activedescendant"]=s+"-"+e),t}const JW=[];function pk(s,e){if(s.isUserEvent("input.complete")){let n=s.annotation(ck);if(n&&e.activateOnCompletion(n))return 12}let t=s.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:s.isUserEvent("delete.backward")?2:s.selection?8:s.docChanged?16:0}class Dn{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=pk(e,t),i=this;(n&8||n&16&&this.touches(e))&&(i=new Dn(i.source,0)),n&4&&i.state==0&&(i=new Dn(this.source,1)),i=i.updateFor(e,n);for(let r of e.effects)if(r.is(Ch))i=new Dn(i.source,1,r.value);else if(r.is(gc))i=new Dn(i.source,0);else if(r.is(rg))for(let o of r.value)o.source==i.source&&(i=o);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(Io(e.state))}}class Ea extends Dn{constructor(e,t,n,i,r,o){super(e,3,t),this.limit=n,this.result=i,this.from=r,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let r=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),a=Io(e.state);if(a>o||!i||t&2&&(Io(e.startState)==this.from||a<this.limit))return new Dn(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return ZW(i.validFor,e.state,r,o)?new Ea(this.source,this.explicit,l,i,r,o):i.update&&(i=i.update(i,r,o,new rk(e.state,a,!1)))?new Ea(this.source,this.explicit,l,i,i.from,(n=i.to)!==null&&n!==void 0?n:Io(e.state)):new Dn(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Ea(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Dn(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function ZW(s,e,t,n){if(!s)return!1;let i=e.sliceDoc(t,n);return typeof s=="function"?s(i,t,n,e):lk(s,!0).test(i)}const rg=rt.define({map(s,e){return s.map(t=>t.map(e))}}),mk=rt.define(),nn=ms.define({create(){return Oh.start()},update(s,e){return s.update(e)},provide:s=>[Ym.from(s,e=>e.tooltip),Le.contentAttributes.from(s,e=>e.attrs)]});function og(s,e){const t=e.completion.apply||e.completion.label;let n=s.state.field(nn).active.find(i=>i.source==e.source);return n instanceof Ea?(typeof t=="string"?s.dispatch(Object.assign(Object.assign({},NW(s.state,t,n.from,n.to)),{annotations:ck.of(e.completion)})):t(s,e.completion,n.from,n.to),!0):!1}const eU=QW(nn,og);function Mh(s,e="option"){return t=>{let n=t.state.field(nn,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(vs).interactionDelay)return!1;let i=1,r;e=="page"&&(r=Pw(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(r.dom.offsetHeight/r.dom.querySelector("li").offsetHeight)-1));let{length:o}=n.open.options,a=n.open.selected>-1?n.open.selected+i*(s?1:-1):s?0:o-1;return a<0?a=e=="page"?0:o-1:a>=o&&(a=e=="page"?o-1:0),t.dispatch({effects:mk.of(a)}),!0}}const tU=s=>{let e=s.state.field(nn,!1);return s.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<s.state.facet(vs).interactionDelay?!1:og(s,e.open.options[e.open.selected])},gk=s=>s.state.field(nn,!1)?(s.dispatch({effects:Ch.of(!0)}),!0):!1,sU=s=>{let e=s.state.field(nn,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(s.dispatch({effects:gc.of(null)}),!0)};class nU{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const iU=50,rU=1e3,oU=Xt.fromClass(class{constructor(s){this.view=s,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of s.state.field(nn).active)e.isPending&&this.startQuery(e)}update(s){let e=s.state.field(nn),t=s.state.facet(vs);if(!s.selectionSet&&!s.docChanged&&s.startState.field(nn)==e)return;let n=s.transactions.some(r=>{let o=pk(r,t);return o&8||(r.selection||r.docChanged)&&!(o&3)});for(let r=0;r<this.running.length;r++){let o=this.running[r];if(n||o.context.abortOnDocChange&&s.docChanged||o.updates.length+s.transactions.length>iU&&Date.now()-o.time>rU){for(let a of o.context.abortListeners)try{a()}catch(l){Ws(this.view.state,l)}o.context.abortListeners=null,this.running.splice(r--,1)}else o.updates.push(...s.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),s.transactions.some(r=>r.effects.some(o=>o.is(Ch)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(r=>r.isPending&&!this.running.some(o=>o.active.source==r.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let r of s.transactions)r.isUserEvent("input.type")?this.composing=2:this.composing==2&&r.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:s}=this.view,e=s.field(nn);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vs).updateSyncTime))}startQuery(s){let{state:e}=this.view,t=Io(e),n=new rk(e,t,s.explicit,this.view),i=new nU(s,n);this.running.push(i),Promise.resolve(s.source(n)).then(r=>{i.context.aborted||(i.done=r||null,this.scheduleAccept())},r=>{this.view.dispatch({effects:gc.of(null)}),Ws(this.view.state,r)})}scheduleAccept(){this.running.every(s=>s.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(vs).updateSyncTime))}accept(){var s;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(vs),n=this.view.state.field(nn);for(let i=0;i<this.running.length;i++){let r=this.running[i];if(r.done===void 0)continue;if(this.running.splice(i--,1),r.done){let a=Io(r.updates.length?r.updates[0].startState:this.view.state),l=Math.min(a,r.done.from+(r.active.explicit?0:1)),c=new Ea(r.active.source,r.active.explicit,l,r.done,r.done.from,(s=r.done.to)!==null&&s!==void 0?s:a);for(let u of r.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let o=n.active.find(a=>a.source==r.active.source);if(o&&o.isPending)if(r.done==null){let a=new Dn(r.active.source,0);for(let l of r.updates)a=a.update(l,t);a.isPending||e.push(a)}else this.startQuery(o)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:rg.of(e)})}},{eventHandlers:{blur(s){let e=this.view.state.field(nn,!1);if(e&&e.tooltip&&this.view.state.facet(vs).closeOnBlur){let t=e.open&&Pw(this.view,e.open.tooltip);(!t||!t.dom.contains(s.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:gc.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Ch.of(!1)}),20),this.composing=0}}}),aU=typeof navigator=="object"&&/Win/.test(navigator.platform),lU=Co.highest(Le.domEventHandlers({keydown(s,e){let t=e.state.field(nn,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||s.key.length>1||s.ctrlKey&&!(aU&&s.altKey)||s.metaKey)return!1;let n=t.open.options[t.open.selected],i=t.active.find(o=>o.source==n.source),r=n.completion.commitCharacters||i.result.commitCharacters;return r&&r.indexOf(s.key)>-1&&og(e,n),!1}})),cU=Le.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"''"}},".cm-completionIcon-class":{"&:after":{content:"''"}},".cm-completionIcon-interface":{"&:after":{content:"''"}},".cm-completionIcon-variable":{"&:after":{content:"''"}},".cm-completionIcon-constant":{"&:after":{content:"''"}},".cm-completionIcon-type":{"&:after":{content:"''"}},".cm-completionIcon-enum":{"&:after":{content:"''"}},".cm-completionIcon-property":{"&:after":{content:"''"}},".cm-completionIcon-keyword":{"&:after":{content:"''"}},".cm-completionIcon-namespace":{"&:after":{content:"''"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),vc={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ro=rt.define({map(s,e){let t=e.mapPos(s,-1,zs.TrackAfter);return t??void 0}}),ag=new class extends Oo{};ag.startSide=1,ag.endSide=-1;const vk=ms.define({create(){return bt.empty},update(s,e){if(s=s.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);s=s.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(Ro)&&(s=s.update({add:[ag.range(t.value,t.value+1)]}));return s}});function uU(){return[hU,vk]}const lg="()[]{}<>";function yk(s){for(let e=0;e<lg.length;e+=2)if(lg.charCodeAt(e)==s)return lg.charAt(e+1);return jp(s<128?s:s+1)}function _k(s,e){return s.languageDataAt("closeBrackets",e)[0]||vc}const dU=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),hU=Le.inputHandler.of((s,e,t,n)=>{if((dU?s.composing:s.compositionStarted)||s.state.readOnly)return!1;let i=s.state.selection.main;if(n.length>2||n.length==2&&di(en(n,0))==1||e!=i.from||t!=i.to)return!1;let r=pU(s.state,n);return r?(s.dispatch(r),!0):!1}),fU=[{key:"Backspace",run:({state:s,dispatch:e})=>{if(s.readOnly)return!1;let n=_k(s,s.selection.main.head).brackets||vc.brackets,i=null,r=s.changeByRange(o=>{if(o.empty){let a=mU(s.doc,o.head);for(let l of n)if(l==a&&Ah(s.doc,o.head)==yk(en(l,0)))return{changes:{from:o.head-l.length,to:o.head+l.length},range:de.cursor(o.head-l.length)}}return{range:i=o}});return i||e(s.update(r,{scrollIntoView:!0,userEvent:"delete.backward"})),!i}}];function pU(s,e){let t=_k(s,s.selection.main.head),n=t.brackets||vc.brackets;for(let i of n){let r=yk(en(i,0));if(e==i)return r==i?yU(s,i,n.indexOf(i+i+i)>-1,t):gU(s,i,r,t.before||vc.before);if(e==r&&bk(s,s.selection.main.from))return vU(s,i,r)}return null}function bk(s,e){let t=!1;return s.field(vk).between(0,s.doc.length,n=>{n==e&&(t=!0)}),t}function Ah(s,e){let t=s.sliceString(e,e+2);return t.slice(0,di(en(t,0)))}function mU(s,e){let t=s.sliceString(e-2,e);return di(en(t,0))==t.length?t:t.slice(1)}function gU(s,e,t,n){let i=null,r=s.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:t,from:o.to}],effects:Ro.of(o.to+e.length),range:de.range(o.anchor+e.length,o.head+e.length)};let a=Ah(s.doc,o.head);return!a||/\s/.test(a)||n.indexOf(a)>-1?{changes:{insert:e+t,from:o.head},effects:Ro.of(o.head+e.length),range:de.cursor(o.head+e.length)}:{range:i=o}});return i?null:s.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function vU(s,e,t){let n=null,i=s.changeByRange(r=>r.empty&&Ah(s.doc,r.head)==t?{changes:{from:r.head,to:r.head+t.length,insert:t},range:de.cursor(r.head+t.length)}:n={range:r});return n?null:s.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function yU(s,e,t,n){let i=n.stringPrefixes||vc.stringPrefixes,r=null,o=s.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:e,from:a.to}],effects:Ro.of(a.to+e.length),range:de.range(a.anchor+e.length,a.head+e.length)};let l=a.head,c=Ah(s.doc,l),u;if(c==e){if(wk(s,l))return{changes:{insert:e+e,from:l},effects:Ro.of(l+e.length),range:de.cursor(l+e.length)};if(bk(s,l)){let f=t&&s.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+f.length,insert:f},range:de.cursor(l+f.length)}}}else{if(t&&s.sliceDoc(l-2*e.length,l)==e+e&&(u=xk(s,l-2*e.length,i))>-1&&wk(s,u))return{changes:{insert:e+e+e+e,from:l},effects:Ro.of(l+e.length),range:de.cursor(l+e.length)};if(s.charCategorizer(l)(c)!=Yt.Word&&xk(s,l,i)>-1&&!_U(s,l,e,i))return{changes:{insert:e+e,from:l},effects:Ro.of(l+e.length),range:de.cursor(l+e.length)}}return{range:r=a}});return r?null:s.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function wk(s,e){let t=Ts(s).resolveInner(e+1);return t.parent&&t.from==e}function _U(s,e,t,n){let i=Ts(s).resolveInner(e,-1),r=n.reduce((o,a)=>Math.max(o,a.length),0);for(let o=0;o<5;o++){let a=s.sliceDoc(i.from,Math.min(i.to,i.from+t.length+r)),l=a.indexOf(t);if(!l||l>-1&&n.indexOf(a.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>t.length+l;){if(s.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function xk(s,e,t){let n=s.charCategorizer(e);if(n(s.sliceDoc(e-1,e))!=Yt.Word)return e;for(let i of t){let r=e-i.length;if(s.sliceDoc(r,e)==i&&n(s.sliceDoc(r-1,r))!=Yt.Word)return r}return-1}function bU(s={}){return[lU,nn,vs.of(s),oU,wU,cU]}const kk=[{key:"Ctrl-Space",run:gk},{mac:"Alt-`",run:gk},{key:"Escape",run:sU},{key:"ArrowDown",run:Mh(!0)},{key:"ArrowUp",run:Mh(!1)},{key:"PageDown",run:Mh(!0,"page")},{key:"PageUp",run:Mh(!1,"page")},{key:"Enter",run:tU}],wU=Co.highest(Vm.computeN([vs],s=>s.facet(vs).defaultKeymap?[kk]:[]));class Sk{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class Fo{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=n.facet(yc).markerFilter;i&&(e=i(e,n));let r=e.slice().sort((u,d)=>u.from-d.from||u.to-d.to),o=new tr,a=[],l=0;for(let u=0;;){let d=u==r.length?null:r[u];if(!d&&!a.length)break;let f,p;for(a.length?(f=l,p=a.reduce((S,k)=>Math.min(S,k.to),d&&d.from>f?d.from:1e8)):(f=d.from,p=d.to,a.push(d),u++);u<r.length;){let S=r[u];if(S.from==f&&(S.to>S.from||S.to==f))a.push(S),u++,p=Math.min(S.to,p);else{p=Math.min(S.from,p);break}}let g=EU(a);if(a.some(S=>S.from==S.to||S.from==S.to-1&&n.doc.lineAt(S.from).to==S.from))o.add(f,f,Qe.widget({widget:new $U(g),diagnostics:a.slice()}));else{let S=a.reduce((k,O)=>O.markClass?k+" "+O.markClass:k,"");o.add(f,p,Qe.mark({class:"cm-lintRange cm-lintRange-"+g+S,diagnostics:a.slice(),inclusiveEnd:a.some(k=>k.to>p)}))}l=p;for(let S=0;S<a.length;S++)a[S].to<=l&&a.splice(S--,1)}let c=o.finish();return new Fo(c,t,Da(c))}}function Da(s,e=null,t=0){let n=null;return s.between(t,1e9,(i,r,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!n)n=new Sk(i,r,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new Sk(n.from,r,n.diagnostic)}}),n}function xU(s,e){let t=e.pos,n=e.end||t,i=s.state.facet(yc).hideOn(s,t,n);if(i!=null)return i;let r=s.startState.doc.lineAt(e.pos);return!!(s.effects.some(o=>o.is(Ck))||s.changes.touchesRange(r.from,Math.max(r.to,n)))}function kU(s,e){return s.field(mn,!1)?e:e.concat(rt.appendConfig.of(DU))}const Ck=rt.define(),cg=rt.define(),Ok=rt.define(),mn=ms.define({create(){return new Fo(Qe.none,null,null)},update(s,e){if(e.docChanged&&s.diagnostics.size){let t=s.diagnostics.map(e.changes),n=null,i=s.panel;if(s.selected){let r=e.changes.mapPos(s.selected.from,1);n=Da(t,s.selected.diagnostic,r)||Da(t,null,r)}!t.size&&i&&e.state.facet(yc).autoPanel&&(i=null),s=new Fo(t,i,n)}for(let t of e.effects)if(t.is(Ck)){let n=e.state.facet(yc).autoPanel?t.value.length?_c.open:null:s.panel;s=Fo.init(t.value,n,e.state)}else t.is(cg)?s=new Fo(s.diagnostics,t.value?_c.open:null,s.selected):t.is(Ok)&&(s=new Fo(s.diagnostics,s.panel,t.value));return s},provide:s=>[ql.from(s,e=>e.panel),Le.decorations.from(s,e=>e.diagnostics)]}),SU=Qe.mark({class:"cm-lintRange cm-lintRange-active"});function CU(s,e,t){let{diagnostics:n}=s.state.field(mn),i,r=-1,o=-1;n.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0)))return i=u.diagnostics,r=l,o=c,!1});let a=s.state.facet(yc).tooltipFilter;return i&&a&&(i=a(i,s.state)),i?{pos:r,end:o,above:s.state.doc.lineAt(r).to<o,create(){return{dom:OU(s,i)}}}:null}function OU(s,e){return Pt("ul",{class:"cm-tooltip-lint"},e.map(t=>$k(s,t,!1)))}const MU=s=>{let e=s.state.field(mn,!1);(!e||!e.panel)&&s.dispatch({effects:kU(s.state,[cg.of(!0)])});let t=Yl(s,_c.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Mk=s=>{let e=s.state.field(mn,!1);return!e||!e.panel?!1:(s.dispatch({effects:cg.of(!1)}),!0)},AU=[{key:"Mod-Shift-m",run:MU,preventDefault:!0},{key:"F8",run:s=>{let e=s.state.field(mn,!1);if(!e)return!1;let t=s.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(s.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)}}],yc=De.define({combine(s){return Object.assign({sources:s.map(e=>e.source).filter(e=>e!=null)},fi(s.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function Ak(s){let e=[];if(s)e:for(let{name:t}of s){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(r=>r.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function $k(s,e,t){var n;let i=t?Ak(e.actions):[];return Pt("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Pt("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(s):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((r,o)=>{let a=!1,l=f=>{if(f.preventDefault(),a)return;a=!0;let p=Da(s.state.field(mn).diagnostics,e);p&&r.apply(s,p.from,p.to)},{name:c}=r,u=i[o]?c.indexOf(i[o]):-1,d=u<0?c:[c.slice(0,u),Pt("u",c.slice(u,u+1)),c.slice(u+1)];return Pt("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[o]})"`}.`},d)}),e.source&&Pt("div",{class:"cm-diagnosticSource"},e.source))}class $U extends nr{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return Pt("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Tk{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=$k(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class _c{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Mk(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:r}=this.items[this.selectedIndex],o=Ak(r.actions);for(let a=0;a<o.length;a++)if(o[a].toUpperCase().charCodeAt(0)==i.keyCode){let l=Da(this.view.state.field(mn).diagnostics,r);l&&r.actions[a].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let r=0;r<this.items.length;r++)this.items[r].dom.contains(i.target)&&this.moveSelection(r)};this.list=Pt("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=Pt("div",{class:"cm-panel-lint"},this.list,Pt("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Mk(this.view)},"")),this.update()}get selectedIndex(){let e=this.view.state.field(mn).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(mn),n=0,i=!1,r=null,o=new Set;for(e.between(0,this.view.state.doc.length,(a,l,{spec:c})=>{for(let u of c.diagnostics){if(o.has(u))continue;o.add(u);let d=-1,f;for(let p=n;p<this.items.length;p++)if(this.items[p].diagnostic==u){d=p;break}d<0?(f=new Tk(this.view,u),this.items.splice(n,0,f),i=!0):(f=this.items[d],d>n&&(this.items.splice(n,d-n),i=!0)),t&&f.diagnostic==t.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),r=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new Tk(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:a,panel:l})=>{let c=l.height/this.list.offsetHeight;a.top<l.top?this.list.scrollTop-=(l.top-a.top)/c:a.bottom>l.bottom&&(this.list.scrollTop+=(a.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(mn),n=Da(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:Ok.of(n)})}static open(e){return new _c(e)}}function TU(s,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(s)}</svg>')`}function $h(s){return TU(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${s}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const PU=Le.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:$h("#d11")},".cm-lintRange-warning":{backgroundImage:$h("orange")},".cm-lintRange-info":{backgroundImage:$h("#999")},".cm-lintRange-hint":{backgroundImage:$h("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function LU(s){return s=="error"?4:s=="warning"?3:s=="info"?2:1}function EU(s){let e="hint",t=1;for(let n of s){let i=LU(n.severity);i>t&&(t=i,e=n.severity)}return e}const DU=[mn,Le.decorations.compute([mn],s=>{let{selected:e,panel:t}=s.field(mn);return!e||!t||e.from==e.to?Qe.none:Qe.set([SU.range(e.from,e.to)])}),YB(CU,{hideOn:xU}),PU],IU=[iN(),aN(),xB(),oj(),Ez(),ww(),gB(),ut.allowMultipleSelections.of(!0),wz(),Iz(Bz,{fallback:!0}),Uz(),uU(),bU(),RB(),NB(),AB(),pW(),Vm.of([...fU,...lW,...EW,...mj,...$z,...kk,...AU])],RU={name:"CustomCSS",components:{Button:ct,Toast:np},setup(){return{toast:fl()}},data(){const s=formychat_admin_vars.custom_css||"";return{cssContent:s,savedContent:s,editor:null,editorExtensions:null,saving:!1}},computed:{lineCount(){return this.cssContent.split(`
`).length},hasChanges(){return this.cssContent!==this.savedContent}},mounted(){this.initializeEditor()},beforeUnmount(){this.editor&&this.editor.destroy()},methods:{initializeEditor(){const s=[IU,WV(),ww(),ut.allowMultipleSelections.of(!0),Le.editable.of(!0),LB("/** Enter your custom CSS here */"),Le.updateListener.of(t=>{t.docChanged&&(this.cssContent=t.state.doc.toString())}),Le.theme({"&":{fontSize:"14px",height:"100%",fontFamily:'"JetBrains Mono", "Fira Code", ui-monospace, SFMono-Regular, "SF Mono", Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},".cm-content":{padding:"20px",backgroundColor:"#ffffff",lineHeight:"1.6",cursor:"text"},".cm-focused":{outline:"none"},".cm-editor":{height:"100%",backgroundColor:"#ffffff",border:"1px solid #e2e8f0"},".cm-scroller":{minHeight:"500px"},".cm-gutters":{backgroundColor:"#f8fafc",border:"none",borderRight:"1px solid #e2e8f0",paddingRight:"8px"},".cm-lineNumbers":{color:"#64748b",fontSize:"13px",minWidth:"40px"},".cm-activeLineGutter":{backgroundColor:"#e0f2fe",color:"#0369a1"},".cm-activeLine":{backgroundColor:"#f0f9ff"},".cm-selectionMatch":{backgroundColor:"#fef3c7",border:"1px solid #f59e0b"},".cm-searchMatch":{backgroundColor:"#dbeafe",border:"1px solid #3b82f6"},".cm-cursor":{borderColor:"#0369a1",borderWidth:"2px"},".cm-selectionBackground":{backgroundColor:"#3b82f6"},"&.cm-editor.cm-focused .cm-selectionBackground":{backgroundColor:"#3b82f6"},".cm-selection":{backgroundColor:"#3b82f6",color:"#ffffff"},".cm-content ::selection":{backgroundColor:"#3b82f6",color:"#ffffff"},".cm-content ::-moz-selection":{backgroundColor:"#3b82f6",color:"#ffffff"},".cm-selectionMatch.cm-selectionMatch":{backgroundColor:"#fef3c7",border:"1px solid #f59e0b",borderRadius:"2px"},".cm-line":{cursor:"text"},".cm-tooltip":{backgroundColor:"#1e293b",color:"white",border:"none",borderRadius:"4px",padding:"4px 8px",fontSize:"12px"},".tok-comment":{color:"#64748b",fontStyle:"italic"},".tok-keyword":{color:"#7c3aed",fontWeight:"600"},".tok-string":{color:"#059669"},".tok-number":{color:"#dc2626"},".tok-propertyName":{color:"#0369a1",fontWeight:"500"},".tok-variableName":{color:"#0f172a"},".tok-typeName":{color:"#7c2d12"},".tok-atom":{color:"#be185d"},".tok-meta":{color:"#64748b"},".tok-punctuation":{color:"#475569"},".tok-bracket":{color:"#374151",fontWeight:"600"},".tok-operator":{color:"#7c3aed"}})];this.editorExtensions=s;const e=ut.create({doc:this.cssContent,extensions:s});this.editor=new Le({state:e,parent:this.$refs.editorContainer})},async saveCSS(){this.saving=!0;try{const e=await(await fetch(`${formychat_admin_vars.rest_endpoint}/custom_css`,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":formychat_admin_vars.rest_nonce},body:JSON.stringify({custom_css:this.cssContent})})).json();if(e.success)formychat_admin_vars.custom_css=this.cssContent,this.savedContent=this.cssContent,this.toast.success("Custom CSS saved successfully!");else throw new Error(e.message||"Failed to save CSS")}catch(s){console.error("Error saving CSS:",s),this.toast.error("Error saving CSS. Please try again.")}finally{this.saving=!1}},cancelChanges(){this.cssContent=this.savedContent,this.editor&&(this.editor.destroy(),this.editor=null),this.initializeEditor()}}},FU={class:"w-full p-3 sm:p-6 h-full"},BU={class:"bg-white p-2 sm:p-6 w-full h-full flex flex-col gap-3 sm:gap-5"},NU={class:"flex items-center justify-between gap-2 h-10 w-full"},VU=h("h3",{class:"font-semibold text-base whitespace-nowrap"},"Custom CSS Editor",-1),zU={class:"flex items-center gap-3"},jU=h("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),WU={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},UU=[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)],HU={key:1,class:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"},QU={class:"flex items-center justify-between text-sm text-gray-500"},YU=h("p",{class:"text-gray-600"},"Add custom CSS to customize your site's appearance",-1),qU={class:"flex items-center gap-4"},GU={class:"flex items-center gap-1"},KU=h("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[h("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),XU={class:"flex items-center gap-1"},JU=h("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[h("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1),ZU={class:"flex-1 border border-gray-200 rounded-lg overflow-hidden"},eH={ref:"editorContainer",class:"h-full min-h-[500px]"},tH=Fs('<div class="bg-blue-50 border border-blue-200 rounded-lg p-4"><h4 class="font-medium text-blue-900 mb-2 flex items-center gap-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg> CSS Styling Guide </h4><div class="text-sm text-blue-800 space-y-2"><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4"><strong class="flex-shrink-0">Target all widgets:</strong><code class="bg-white px-2 py-1 rounded border text-xs font-mono">.formychat-widget { /* your styles */ }</code></div><div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-4"><strong class="flex-shrink-0">Target specific widget:</strong><code class="bg-white px-2 py-1 rounded border text-xs font-mono">#formychat-widget-1 { /* styles for widget ID 1 */ }</code></div><p class="text-sm text-blue-600 mt-2">  <strong>Tip:</strong> Use browser developer tools to inspect widget elements and find the exact selectors you need. </p></div></div>',1);function sH(s,e,t,n,i,r){const o=on("Button"),a=on("Toast");return v(),C("div",FU,[h("div",BU,[h("div",NU,[VU,h("div",zU,[r.hasChanges?(v(),qe(o,{key:0,onClick:r.cancelChanges,disabled:i.saving,outline:"",color:"secondary"},{default:P(()=>[jU,B(" Cancel ")]),_:1},8,["onClick","disabled"])):z("",!0),y(o,{color:"primary",onClick:r.saveCSS,disabled:i.saving||!r.hasChanges,class:X({"opacity-50 cursor-not-allowed":i.saving||!r.hasChanges})},{default:P(()=>[i.saving?(v(),C("div",HU)):(v(),C("svg",WU,UU)),B(" "+q(i.saving?"Saving...":"Save Changes"),1)]),_:1},8,["onClick","disabled","class"])])]),h("div",QU,[YU,h("div",qU,[h("span",GU,[KU,B(" "+q(r.lineCount)+" lines ",1)]),h("span",XU,[JU,B(" "+q(i.cssContent.length)+" characters ",1)])])]),h("div",ZU,[h("div",eH,null,512)]),tH]),y(a)])}const nH=Nt(RU,[["render",sH]]),ug=Or("countries",()=>{const s=pe([]),e=pe(!1),t=pe(!1);return{countries:s,loading:e,loaded:t,fetch:async()=>{var i;if(!(t.value||e.value)){e.value=!0;try{const o=await(await window.fetch("/wp-json/formychat/contents",{method:"GET",headers:{"X-WP-Nonce":((i=window.formychat_admin_vars)==null?void 0:i.rest_nonce)||""}})).json();o.countries&&(s.value=o.countries.sort((a,l)=>a.name.localeCompare(l.name)).map(a=>({value:a.code,label:`<span>${a.flag} (${a.code})</span> ${a.name}`,name:`<span>${a.flag}</span> ${a.code}`}))),t.value=!0}catch(r){console.error("Error fetching countries:",r)}finally{e.value=!1}}}}}),Th=s=>(Ds("data-v-53cf7338"),s=s(),Is(),s),iH={class:"p-2 sm:p-6 w-full h-full flex flex-col gap-3 sm:gap-5",style:{"min-height":"calc(100vh - 100px)"}},rH={class:"flex flex-col sm:flex-row items-start justify-between gap-3 sm:gap-2 pb-4 border-b border-gray-200"},oH={class:"flex items-start gap-3 w-full sm:w-auto"},aH=Th(()=>h("div",{class:"flex-1 sm:flex-initial"},[h("h3",{class:"font-semibold text-lg sm:text-xl text-gray-900"},"FormyChat WooCommerce Buttons"),h("p",{class:"text-xs sm:text-sm text-gray-500 mt-1"},"Connect your WooCommerce store with WhatsApp to enable one-click product inquiries and instant order requests.")],-1)),lH=[Th(()=>h("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1))],cH=Fs('<div class="fm-header-actions hidden sm:flex items-center gap-2 lg:gap-3" data-v-53cf7338><a href="https://www.youtube.com/watch?v=bjJcWoY-8zA&amp;list=PLd6WEu38CQSyebRIikg4qX54h-R1n35TG" target="_blank" class="fm-btn fm-btn-secondary" data-v-53cf7338><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48" data-v-53cf7338><path fill="#FF3D00" d="M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z" data-v-53cf7338></path><path fill="#FFF" d="M20 31L20 17 32 24z" data-v-53cf7338></path></svg> Tutorial </a><a href="https://wppool.dev/docs/how-to-enable-the-whatsapp-button-on-the-shop-page-and-product-page-using-formychat/" target="_blank" class="fm-btn fm-btn-secondary" data-v-53cf7338><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0 0 48 48" data-v-53cf7338><linearGradient id="pg10I3OeSC0NOv22QZ6aWa_v0YYnU84T2c4_gr1" x1="-209.942" x2="-179.36" y1="-3.055" y2="27.526" gradientTransform="translate(208.979 6.006)" gradientUnits="userSpaceOnUse" data-v-53cf7338><stop offset="0" stop-color="#55adfd" data-v-53cf7338></stop><stop offset="1" stop-color="#438ffd" data-v-53cf7338></stop></linearGradient><path fill="url(#pg10I3OeSC0NOv22QZ6aWa_v0YYnU84T2c4_gr1)" d="M39.001,13.999v27c0,1.105-0.896,2-2,2h-26	c-1.105,0-2-0.895-2-2v-34c0-1.104,0.895-2,2-2h19l2,7L39.001,13.999z" data-v-53cf7338></path><path fill="#fff" fill-rule="evenodd" d="M15.999,18.001v2.999	h17.002v-2.999H15.999z" clip-rule="evenodd" data-v-53cf7338></path><path fill="#fff" fill-rule="evenodd" d="M16.001,24.001v2.999	h17.002v-2.999H16.001z" clip-rule="evenodd" data-v-53cf7338></path><path fill="#fff" fill-rule="evenodd" d="M15.999,30.001v2.999	h12.001v-2.999H15.999z" clip-rule="evenodd" data-v-53cf7338></path><linearGradient id="pg10I3OeSC0NOv22QZ6aWb_v0YYnU84T2c4_gr2" x1="-197.862" x2="-203.384" y1="-4.632" y2=".89" gradientTransform="translate(234.385 12.109)" gradientUnits="userSpaceOnUse" data-v-53cf7338><stop offset="0" stop-color="#427fdb" data-v-53cf7338></stop><stop offset="1" stop-color="#0c52bb" data-v-53cf7338></stop></linearGradient><path fill="url(#pg10I3OeSC0NOv22QZ6aWb_v0YYnU84T2c4_gr2)" d="M30.001,13.999l0.001-9l8.999,8.999L30.001,13.999z" data-v-53cf7338></path></svg> Documentation </a><a href="https://wordpress.org/plugins/social-contact-form/" target="_blank" class="fm-btn fm-btn-secondary" data-v-53cf7338><svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-53cf7338><path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z" fill="#FFD700" data-v-53cf7338></path></svg> Review Us </a></div>',1),uH={key:0,class:"md:hidden fixed left-0 top-0 bottom-0 w-64 bg-white shadow-xl z-50 flex flex-col"},dH={class:"flex items-center justify-between p-4 border-b border-gray-200"},hH=Th(()=>h("h4",{class:"font-semibold text-gray-900"},"Menu",-1)),fH=[Th(()=>h("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1))],pH={class:"flex-1 overflow-y-auto p-4 space-y-2"},mH={class:"flex flex-col md:flex-row gap-4 md:gap-6 flex-1 overflow-hidden"},gH={class:"hidden md:block w-48 flex-shrink-0"},vH={class:"space-y-2"},yH={class:"flex-1 overflow-y-auto bg-white p-3 sm:p-4 md:p-6 lg:p-8"},_H=Nt({__name:"WooCommerce",setup(s){const e=ug(),t=pe(!1);os(()=>{e.fetch()});const a=[{id:"shop",label:"Shop Page",icon:()=>ln("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ln("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})]),to:"/shop"},{id:"product",label:"Product Page",icon:()=>ln("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ln("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})]),to:"/product"},{id:"cart",label:"Cart Page",icon:()=>ln("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ln("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})]),to:"/cart"},{id:"checkout",label:"Checkout Page",icon:()=>ln("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[ln("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})]),to:"/checkout"}];return(l,c)=>{const u=on("router-link"),d=on("router-view");return v(),C("div",iH,[y(np),y(ip),y(m(fu)),h("div",rH,[h("div",oH,[aH,h("button",{onClick:c[0]||(c[0]=f=>t.value=!t.value),class:"md:hidden flex items-center justify-center w-8 h-8 rounded bg-gray-100 hover:bg-gray-200 transition-colors flex-shrink-0"},lH)]),cH]),y(ze,{name:"fade"},{default:P(()=>[t.value?(v(),C("div",{key:0,onClick:c[1]||(c[1]=f=>t.value=!1),class:"md:hidden fixed inset-0 bg-black bg-opacity-50 z-40"})):z("",!0)]),_:1}),y(ze,{name:"slide"},{default:P(()=>[t.value?(v(),C("div",uH,[h("div",dH,[hH,h("button",{onClick:c[2]||(c[2]=f=>t.value=!1),class:"flex items-center justify-center w-8 h-8 rounded hover:bg-gray-100 transition-colors"},fH)]),h("nav",pH,[(v(),C(Ve,null,ft(a,f=>y(u,{key:f.id,to:f.to,onClick:c[3]||(c[3]=p=>t.value=!1),class:X(["w-full text-left px-4 py-3 rounded text-sm font-medium transition-colors flex items-center gap-3 outline-none focus:outline-none focus:ring-0 focus:border-0 focus-visible:outline-none focus-visible:ring-0",l.$route.path===f.to?"bg-indigo-600 text-white":"text-gray-700 hover:bg-gray-100"])},{default:P(()=>[(v(),qe(Wa(f.icon),{class:"w-5 h-5"})),h("span",null,q(f.label),1)]),_:2},1032,["to","class"])),64))])])):z("",!0)]),_:1}),h("div",mH,[h("div",gH,[h("nav",vH,[(v(),C(Ve,null,ft(a,f=>y(u,{key:f.id,to:f.to,class:X(["w-full text-left px-4 py-2 rounded text-sm font-medium transition-colors flex items-center gap-2 outline-none focus:outline-none focus:ring-0 focus:border-0 focus-visible:outline-none focus-visible:ring-0 !shadow-none",l.$route.path===f.to?"bg-indigo-600 text-white":"bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900"])},{default:P(()=>[(v(),qe(Wa(f.icon),{class:"w-5 h-5"})),h("span",null,q(f.label),1)]),_:2},1032,["to","class"])),64))])]),h("div",yH,[y(d)])])])}}},[["__scopeId","data-v-53cf7338"]]),bH=[{path:"/",name:"widgets",meta:{title:"FormyChat Widgets"},component:()=>Pr(()=>Promise.resolve().then(()=>ZH),void 0)},{path:"/start",name:"start",meta:{title:"Get Started with FormyChat"},component:()=>Pr(()=>Promise.resolve().then(()=>aQ),void 0)},{path:"/widget/:widgetId",name:"widget.edit",meta:{title:"Edit Widget"},component:()=>Pr(()=>Promise.resolve().then(()=>jJ),void 0)},{path:"/:pathMatch(.*)*",redirect:"/"}],wH=[{path:"/",redirect:"/shop"},{path:"/shop",name:"woocommerce.shop",meta:{title:"Shop Page"},component:()=>Pr(()=>Promise.resolve().then(()=>eee),void 0)},{path:"/product",name:"woocommerce.product",meta:{title:"Product Page"},component:()=>Pr(()=>Promise.resolve().then(()=>xte),void 0)},{path:"/cart",name:"woocommerce.cart",meta:{title:"Cart Page"},component:()=>Pr(()=>Promise.resolve().then(()=>Mte),void 0)},{path:"/checkout",name:"woocommerce.checkout",meta:{title:"Checkout Page"},component:()=>Pr(()=>Promise.resolve().then(()=>Lte),void 0)}];(()=>{const s=e=>formychat_admin_vars.public+"images/"+e;if(document.getElementById("formychat-widgets")){const e=el(c$).use(sl());e.config.globalProperties.Image=s,e.use(Ay({history:dy(),routes:bH})),e.mount("#formychat-widgets")}if(document.getElementById("formychat-leads")){const e=el(HI).use(sl());e.config.globalProperties.Image=s,e.mount("#formychat-leads")}if(document.getElementById("formychat-integrations")){const e=el(aR).use(sl());e.config.globalProperties.Image=s,e.mount("#formychat-integrations")}if(document.getElementById("formychat-custom-css")){const e=el(nH).use(sl());e.config.globalProperties.Image=s,e.mount("#formychat-custom-css")}if(document.getElementById("formychat-woocommerce")){const e=el(_H).use(sl());e.config.globalProperties.Image=s,e.use(Ay({history:dy(),routes:wH})),e.mount("#formychat-woocommerce")}})();const bc={isNew:!0,name:`Widget ${Number(formychat_admin_vars.total.widgets)+1}`,is_active:!0,config:formychat_admin_vars.data.widget_config||{}};typeof window.formychat_country_code<"u"&&(bc.config.whatsapp.country_code=window.formychat_country_code);const eo=Or("widgets",()=>{const s=Es({errors:{},showSuccess:!1,defaultCountryCode:44}),e=Wf(),t=jf(),n=pe([{id:1,path:"whatsapp",title:"WhatsApp"},{id:2,path:"customize",title:"Customize"},{id:3,path:"greetings",title:"Greetings"},{id:4,path:"triggers",title:"Triggers & Targeting"}]),i=(H="")=>H==null?void 0:H.match(/^\d{7,15}$/),r=(H,J=!0)=>(s.errors[H]=J,setTimeout(()=>{const ae=document.querySelector(`[name="${H}"]`);ae&&(ae.scrollIntoView({behavior:"smooth",block:"center"}),ae.focus())},0),!1),o=async H=>{s.errors={};const J=k.value.config;if(a("whatsapp")&&(J.whatsapp.agent_mode==="single"?i(J.whatsapp.number||"")||r("whatsapp_number"):((!J.whatsapp.agents||J.whatsapp.agents.length===0)&&r("whatsapp_agents"),J.whatsapp.agents.forEach((ae,be)=>{if(!i(ae.number||"")){r(`agent_number_${be}`);return}}))),a("customize")&&(J.form.mode==="cf7"&&!J.form.cf7_id&&r("cf7_id"),J.form.mode==="gravity"&&!J.form.gravity_id&&r("gravity_id"),J.form.mode==="wpforms"&&!J.form.wpforms_id&&r("wpforms_id"),J.form.mode==="forminator"&&!J.form.forminator_id&&r("forminator_id"),J.form.mode==="formidable"&&!J.form.formidable_id&&r("formidable_id"),J.form.mode==="ninja"&&!J.form.ninja_id&&r("ninja_id"),J.email.enabled&&!J.email.admin_email&&J.email.address==""&&r("email_address")),Object.keys(s.errors).length>0)return!1;t.push({name:"widget.edit",params:{widgetId:e.params.widgetId},query:{tab:H}}),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},0)},a=H=>e.query.tab==H,l=ie(()=>n.value.find(H=>H.path==e.query.tab)||n.value[0]),c=ie(()=>!e.query.tab),u=H=>{const J=n.value.findIndex(be=>be.path==H),ae=n.value.findIndex(be=>be.path==e.query.tab);return J<=ae},d=()=>{const H=n.value.findIndex(J=>J.path==e.query.tab);H<n.value.length-1&&o(n.value[H+1].path)},f=()=>{const H=n.value.findIndex(J=>J.path==e.query.tab);H>0&&o(n.value[H-1].path)},p=pe([]),g=async H=>{const J=await Ke.post("widget",H);J.data.success&&(p.value.push(J.data.data),t.push({name:"widget.edit",params:{widgetId:J.data.data.id},query:{tab:"whatsapp"}}))},S=H=>{O(H),t.push({name:"widget.edit",params:{widgetId:H.id||"new"},query:{tab:"whatsapp"}})},k=pe(bc),O=H=>{k.value=H;const J=bc.config,ae={...H.config};if(!formychat_admin_vars.is_premium){ae.whatsapp.web_version=J.whatsapp.web_version,ae.whatsapp.agent_mode=J.whatsapp.agent_mode,ae.icon.image_url=J.icon.image_url,ae.icon.size=H.config.icon.size==="custom"?J.icon.size:H.config.icon.size,ae.icon.position=H.config.icon.position==="custom"?J.icon.position:H.config.icon.position,ae.cta.color=J.cta.color,ae.cta.background_color=J.cta.background_color,ae.form.size=H.config.form.size==="custom"?J.form.size:H.config.form.size,ae.form.show_country_code_field=J.form.show_country_code_field,ae.form.text_color=J.form.text_color,ae.form.background_color=J.form.background_color,ae.greetings.style=J.greetings.style,ae.greetings.on_click=J.greetings.on_click,ae.greetings.templates.simple.heading_size=H.config.greetings.templates.simple.heading_size==="custom"?J.greetings.templates.simple.heading_size:H.config.greetings.templates.simple.heading_size,ae.greetings.templates.simple.message_size=H.config.greetings.templates.simple.message_size==="custom"?J.greetings.templates.simple.message_size:H.config.greetings.templates.simple.message_size,ae.greetings.templates.simple.message_color=H.config.greetings.templates.simple.message_color==="custom"?J.greetings.templates.simple.message_color:H.config.greetings.templates.simple.message_color,ae.greetings.templates.simple.background_color=H.config.greetings.templates.simple.background_color==="custom"?J.greetings.templates.simple.background_color:H.config.greetings.templates.simple.background_color,ae.greetings.templates.wave.icon_url=J.greetings.templates.wave.icon_url,ae.greetings.templates.wave.icon_position=J.greetings.templates.wave.icon_position,ae.greetings.templates.wave.heading_size=H.config.greetings.templates.wave.heading_size==="custom"?J.greetings.templates.wave.heading_size:H.config.greetings.templates.wave.heading_size,ae.greetings.templates.wave.message_size=H.config.greetings.templates.wave.message_size==="custom"?J.greetings.templates.wave.message_size:H.config.greetings.templates.wave.message_size,ae.greetings.templates.wave.message_color=J.greetings.templates.wave.message_color,ae.greetings.templates.wave.background_color=J.greetings.templates.wave.background_color,ae.greetings.templates.wave.cta_icon_url=J.greetings.templates.wave.cta_icon_url,ae.greetings.templates.wave.cta_text_color=J.greetings.templates.wave.cta_text_color,ae.greetings.templates.wave.cta_background_color=J.greetings.templates.wave.cta_background_color,ae.greetings.templates.wave.cta_heading_color=J.greetings.templates.wave.cta_heading_color,ae.greetings.templates.wave.cta_message_color=J.greetings.templates.wave.cta_message_color,ae.greetings.templates.wave.cta_heading_size=H.config.greetings.templates.wave.cta_heading_size==="custom"?J.greetings.templates.wave.cta_heading_size:H.config.greetings.templates.wave.cta_heading_size,ae.greetings.templates.wave.cta_message_size=H.config.greetings.templates.wave.cta_message_size==="custom"?J.greetings.templates.wave.cta_message_size:H.config.greetings.templates.wave.cta_message_size,ae.icon={...formychat_admin_vars.data.widget_config.icon,...ae.icon,...J.icon,...k.value.config.icon};try{ae.integrations["fluent-crm"].enabled=!1}catch(be){console.error("Error turning off fluentcrm",be)}}ae.whatsapp&&!ae.whatsapp.agent_mode&&(ae.whatsapp.agent_mode="single"),k.value={...H,config:ae}},$=H=>{k.value.config.whatsapp.country_code=H},M=async(H=[])=>new Promise(async J=>{Array.isArray(H)||(H=[H]),H.length===0&&(H=[k.value.id]);const ae=p.value.filter(We=>H.includes(We.id));ae.forEach(We=>We.deleting=!0),(await Ke.delete("widgets",{data:{id:H}})).data.success?(ae.forEach(We=>We.deleted=!0),setTimeout(()=>{p.value=p.value.filter(We=>!H.includes(We.id)),J(p.value)},500)):(ae.forEach(We=>We.deleting=!1),J(p.value))}),b=async(H=null)=>{if(H=H||k.value,H.is_saving||!(()=>{var We,Xe,re;try{const le=((re=(Xe=(We=k.value)==null?void 0:We.config)==null?void 0:Xe.integrations)==null?void 0:re["fluent-crm"])||{};if(!le.enabled)return!0;const se=le.fields_mapping||[];let Te="";if(Array.isArray(se)){for(const Z of se)if(Z&&Z.to==="email"&&Z.from){Te=Z.from;break}}else se&&typeof se=="object"&&(Te=se.email||"");if(!Te)return r("fluentcrm_email_mapping"),!1;const Ye=Object.keys(N.value||{});return Ye.length&&!Ye.includes(Te)?(r("fluentcrm_email_mapping"),!1):!0}catch{return r("fluentcrm_email_mapping"),!1}})()||!(()=>{var We,Xe,re;try{const le=((re=(Xe=(We=k.value)==null?void 0:We.config)==null?void 0:Xe.integrations)==null?void 0:re.mailchimp)||{};if(!le.enabled)return!0;const se=le.fields_mapping||[];let Te="";if(Array.isArray(se)){for(const Z of se)if(Z&&Z.to==="EMAIL"&&Z.from){Te=Z.from;break}}else se&&typeof se=="object"&&(Te=se.EMAIL||"");if(!Te)return r("mailchimp_email_mapping"),!1;const Ye=Object.keys(N.value||{});return Ye.length&&!Ye.includes(Te)?(r("mailchimp_email_mapping"),!1):!0}catch(le){return console.error("Mailchimp validation error:",le),r("mailchimp_email_mapping"),!1}})())return!1;if(!H.is_active){let We=await Tr().fire({title:"The widget is currently turned off!",message:"This floating widget is currently turned off, would you like to turn it ON and save to show it on your site?",ok:"Save & Show on my site",cancel:"Just save and keep it off"});if(We.ok&&(H.is_active=!0),We.cancel&&(H.is_active=!1),We.close)return}H.is_loading=!0;const be=H.id===null||H.id===void 0||H.id===0;return new Promise(We=>{H.is_saving=!0,(be?Ke.post("widget",H):Ke.put(`widget/${H.id}`,H)).then(re=>{be&&(k.value.id=re.data.id),s.showSuccess=!0,We(re.data)}).catch(re=>{We(null)}).finally(()=>{H.is_loading=!1,H.is_saving=!1})})},w=async()=>(s.loading=!0,new Promise(H=>{Ke.get("widgets").then(J=>{p.value=J.data.map(ae=>({...ae,is_loading:!1,is_selected:!1})),H(p.value)}).catch(J=>{H(p.value)}).finally(()=>{s.loading=!1})})),R=Es({sortBy:"created_at",sortOrder:"desc"});Jt([()=>R.sortBy,()=>R.sortOrder],()=>{p.value.sort((H,J)=>R.sortOrder==="asc"?H[R.sortBy]>J[R.sortBy]?1:-1:H[R.sortBy]<J[R.sortBy]?1:-1)},{deep:!0});const T=H=>{R.sortBy===H?R.sortOrder=R.sortOrder==="asc"?"desc":"asc":(R.sortBy=H,R.sortOrder="asc")},E=ie(()=>p.value||[]),F=async H=>{const J=p.value.find(ae=>ae.id===H.id);J.statusLoading=!0,await Ke.put(`widget/${H.id}`,H),J.statusLoading=!1},K=pe(window.innerWidth<640);window.addEventListener("resize",()=>{K.value=window.innerWidth<640});const W=pe({countries:[],fonts:[],pages:[],forms:{}}),A=async()=>{var J,ae;let H=(await Ke.get("contents")).data;W.value.countries=(J=H.countries)==null?void 0:J.sort((be,We)=>be.name.localeCompare(We.name)).map(be=>({value:be.code,label:`<span>${be.flag} (${be.code})</span> ${be.name}`,name:`<span>${be.flag}</span> ${be.code}`})),W.value.fonts=(ae=Object.keys(H.fonts))==null?void 0:ae.map((be,We)=>({value:be,name:H.fonts[be],label:`<span style="font-family: ${be}">${H.fonts[be]}</span> <ProBadge/>`,locked:We>10&&!formychat_admin_vars.is_premium})),W.value.pages=H.pages.map(be=>({value:be.ID,name:be.post_title,label:be.post_title})),W.value.forms=H.forms||{}},D=H=>H.replace(/_/g," ").replace(/\b\w/g,J=>J.toUpperCase()),N=pe([]),Q=async()=>{s.loadingFields=!0;const H=await Ke.get("form_fields?mode="+k.value.config.form.mode+"&form_id="+k.value.config.form[k.value.config.form.mode+"_id"]||"");if(N.value=H.data.data||{},k.value.config.form.mode!="formychat"&&!k.value.config.whatsapp[k.value.config.form.mode+"_message_template"]){let J="";for(const ae in N.value)J+=`${D(ae)} : {${ae}}
`;k.value.config.whatsapp[k.value.config.form.mode+"_message_template"]=J}s.loadingFields=!1};return os(A),{tabs:n,currentTab:l,setTab:o,isTab:a,prevTab:f,nextTab:d,isTabEmpty:c,isTabDone:u,states:s,widgets:p,filters:R,getWidgets:E,setCurrentWidget:O,clone:g,editWidget:S,deleteWidgets:M,fetchWidgets:w,saveWidget:b,setSort:T,isLoading:ie(()=>s.loading),totalWidgets:ie(()=>p.value.length),update:F,isMobile:K,currentWidget:k,setError:r,errors:ie(()=>s.errors),contents:W,fetchContents:A,setCountryCode:$,isValidPhone:i,fields:N,fetchFields:Q}}),xH={class:"w-full h-full flex flex-col gap-8"},kH={class:"flex flex-col sm:flex-row sm:items-center justify-between gap-3"},SH=h("h3",{class:"font-medium text-base whitespace-nowrap"},"Floating Widgets",-1),CH={class:"flex items-center sm:justify-end gap-2 font-medium"},OH=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-3.5",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"})],-1),MH=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-3.5",viewBox:"0 0 16 16"},[h("path",{d:"M5.52.359A.5.5 0 0 1 6 0h4a.5.5 0 0 1 .474.658L8.694 6H12.5a.5.5 0 0 1 .395.807l-7 9a.5.5 0 0 1-.873-.454L6.823 9.5H3.5a.5.5 0 0 1-.48-.641z"})],-1),AH={key:0,class:"w-full h-full"},$H=[h("div",{class:"flex items-center justify-center gap-4 h-40"},[h("div",{class:"w-5 h-5 border-2 border-y-transparent border-indigo-500 animate-spin rounded-full"}),h("span",{class:"text-base text-slate-500"},"Please wait while we load your widgets.")],-1)],TH={key:1,class:"w-full"},PH={class:"w-full overflow-x-auto sm:overflow-visible border border-indigo-100 rounded child:w-max child:sm:w-full child:overflow-x-scroll child:sm:overflow-x-visible"},LH={class:"rounded-t-sm flex whitespace-nowrap sm:sticky top-7 z-20 items-center border-b border-indigo-100 bg-indigo-100 py-2 px-5 font-semibold"},EH=h("div",{class:"w-24"},"Status",-1),DH=h("div",{class:"w-1/6 cursor-pointer flex items-center gap-2"},"WhatsApp",-1),IH=h("div",{class:"w-1/6 cursor-pointer flex items-center gap-2"},"Form mode",-1),RH=h("div",{class:"w-32"},"Action",-1),FH={class:"w-24 text-center"},BH={class:"w-32 flex justify-end gap-3 child:h-8 child:w-9 child:rounded child:flex child:items-center child:outline-none child:justify-center child:transition child:cursor-pointer"},NH=["onClick"],VH=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4",viewBox:"0 0 16 16"},[h("path",{d:"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.5.5 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11z"})],-1)],zH=["onClick"],jH={key:1,xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4",viewBox:"0 0 16 16"},WH=[h("path",{"fill-rule":"evenodd",d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1zM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1z"},null,-1)],UH=["onClick"],HH=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4",viewBox:"0 0 16 16"},[h("path",{d:"M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"})],-1)],QH=h("div",{class:"h-8"},null,-1),YH={class:"w-full relative max-w-md p-7 rounded bg-white shadow flex flex-col gap-3"},qH=h("h3",{class:"font-medium text-base"},"Duplicate Widget?",-1),GH=h("p",{class:"text-sm text-gray-500"},"Please select a name for your new duplicated widget",-1),KH={class:"flex items-center justify-end gap-3 mt-3"},XH={key:0,class:"flex items-center justify-center"},JH={key:1},ZH=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"WidgetList",setup(s){const e=eo(),t=Tr(),n=jf(),i=window.formychat_admin_vars||{};os(async()=>{i.total.widgets==0?n.push({name:"start"}):await e.fetchWidgets()});const r=async u=>{if(!(await t.prompt({title:u.is_active?"This widget is currently in use!":"Delete Widget",message:u.is_active?"Deleting this will remove the widget permanently from your site. Are you sure you want to delete this widget permanently?":"Are you sure you want to delete this widget?"})).ok)return;(await e.deleteWidgets([u.id])).length==0&&(i.total.widgets=0,n.push({name:"start"}))},o=Es({duplicating:!1,error:""}),a=pe(null),l=async u=>{if(!i.is_premium){$r().show();return}a.value={...u,id:null,name:"Copy of "+u.name},setTimeout(()=>{var d;(d=document.getElementById("duplicate_widget_name"))==null||d.focus()},100)},c=async()=>{o.duplicating=!0,await e.clone(a.value)};return(u,d)=>(v(),C("div",xH,[h("div",kH,[SH,h("div",CH,[y(m(ct),{onClick:d[0]||(d[0]=Me(f=>m(i).is_premium||m(e).getWidgets.length===0?m(e).editWidget("new"):m($r)().show(),["prevent"])),outline:"",class:"gap-2"},{default:P(()=>[OH,B(" Create new")]),_:1}),m(i).is_premium?z("",!0):(v(),qe(m(ct),{key:0,class:"formychat-locked"},{default:P(()=>[MH,B(" Upgrade now")]),_:1}))])]),m(e).isLoading?(v(),C("div",AH,$H)):(v(),C("div",TH,[h("div",PH,[h("div",LH,[EH,h("div",{class:"w-1/6 cursor-pointer flex items-center gap-2",onClick:d[1]||(d[1]=f=>m(e).setSort("name"))},[B("Widget name "),y(m(Uf),{asc:m(e).filters.sortBy=="name"&&m(e).filters.sortOrder=="asc"},null,8,["asc"])]),DH,IH,h("div",{class:"w-1/6 cursor-pointer flex items-center gap-2",onClick:d[2]||(d[2]=f=>m(e).setSort("created_at"))},[B(" Created at "),y(m(Uf),{asc:m(e).filters.sortBy=="created_at"&&m(e).filters.sortOrder=="asc"},null,8,["asc"])]),RH]),(v(!0),C(Ve,null,ft(m(e).getWidgets,f=>(v(),C("div",{key:f.id,class:"w-full h-fit"},[y(ze,{name:"fade"},{default:P(()=>[f.deleted?z("",!0):(v(),C("div",{key:0,class:X(["flex items-center border-b border-indigo-100 py-4 px-5 transition hover:bg-slate-50 last:rounded-b-sm",{"bg-slate-100 hover:bg-slate-100":!f.is_active,"animate-pulse opacity-90 pointer-events-none":f.statusLoading||f.is_cloning}])},[h("div",FH,[y(m(At),{modelValue:f.is_active,"onUpdate:modelValue":p=>f.is_active=p,onChange:p=>m(e).update(f)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),h("div",{class:X(["w-1/6 whitespace-nowrap transition",{"opacity-70":!f.is_active}])},q(f.name||"Untitled widget"),3),h("div",{class:X(["w-1/6 whitespace-nowrap transition",{"opacity-70":!f.is_active}])},"+"+q(f.config.whatsapp.country_code)+q(f.config.whatsapp.number),3),h("div",{class:X(["w-1/6 whitespace-nowrap transition",{"opacity-70":!f.is_active}])},q(f.config.form.mode==="cf7"?"Contact Form 7":"FormyChat"),3),h("div",{class:X(["w-1/6 whitespace-nowrap transition",{"opacity-70":!f.is_active}])},q(m($e)(f.created_at).calendar()),3),h("div",BH,[h("button",{title:"Edit Widget",onClick:Me(p=>m(e).editWidget(f),["prevent"]),class:"bg-indigo-100 text-indigo-600 hover:bg-indigo-200"},VH,8,NH),h("button",{class:X([{"pointer-events-none":f.is_cloning||f.statusLoading},"bg-sky-100 text-sky-600 hover:bg-sky-200"]),title:"Duplicate Widget",onClick:Me(p=>l(f),["prevent"])},[f.is_cloning?(v(),qe(m(Bn),{key:0})):(v(),C("svg",jH,WH))],10,zH),h("button",{title:"Delete Widget",onClick:Me(p=>r(f),["prevent"]),class:"bg-red-100 text-red-600 hover:bg-red-200"},HH,8,UH)])],2))]),_:2},1024)]))),128))]),QH,y(ze,{name:"fade"},{default:P(()=>[a.value?(v(),C("div",{key:0,tabindex:"0",onKeydown:d[7]||(d[7]=Bs(f=>a.value=null,["esc"])),onClick:d[8]||(d[8]=Me(f=>a.value=null,["self"])),class:"fixed bg-black/50 z-[99999] w-full h-full flex items-center justify-center left-0 top-0"},[h("div",YH,[h("span",{class:"dashicons dashicons-no-alt absolute right-4 top-1 cursor-pointer text-gray-200 hover:text-gray-600 transition duration-75 text-2xl p-1",onClick:d[3]||(d[3]=f=>a.value=null)}),qH,GH,y(m(Gt),{id:"duplicate_widget_name",modelValue:a.value.name,"onUpdate:modelValue":d[4]||(d[4]=f=>a.value.name=f),placeholder:"Widget name"},null,8,["modelValue"]),h("div",KH,[y(m(ct),{outline:"",onClick:d[5]||(d[5]=Me(f=>a.value=null,["prevent"]))},{default:P(()=>[B("Cancel")]),_:1}),y(m(ct),{onClick:d[6]||(d[6]=Me(f=>c(),["prevent"]))},{default:P(()=>[o.duplicating?(v(),C("span",XH,[y(m(Bn)),B(" Creating... ")])):(v(),C("span",JH,"Create Widget"))]),_:1})])])],32)):z("",!0)]),_:1})]))]))}}},Symbol.toStringTag,{value:"Module"})),eQ={class:"bg-white w-full p-6 flex items-center justify-center"},tQ={class:"w-full max-w-sm mx-auto flex flex-col gap-10 items-center justify-center text-center"},sQ=["src"],nQ=h("h3",{class:"text-xl font-medium text-slate-500"},"Lets create your first widget and bring your dashboard to life!",-1),iQ={class:"flex items-center justify-center gap-4"},rQ=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-3.5",viewBox:"0 0 16 16"},[h("path",{d:"M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01 0 0 1 1.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01 0 0 1-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309 0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01 0 0 1-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82l-.008-.104A31 31 0 0 1 0 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01 0 0 1 1.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A100 100 0 0 1 7.858 2zM6.4 5.209v4.818l4.157-2.408z"})],-1),oQ=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-3.5",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"})],-1),aQ=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"EmptyWidget",setup(s){return os(()=>{formychat_admin_vars.total_widgets>0&&jf().push({name:"widgets"})}),(e,t)=>(v(),C("div",eQ,[h("div",tQ,[h("img",{src:e.Image("welcome.svg"),alt:""},null,8,sQ),nQ,h("div",iQ,[y(m(ct),{outline:"",a:"",href:"https://lnk.wppool.dev/9jJWfRk",target:"_blank"},{default:P(()=>[rQ,B(" Watch Tutorial")]),_:1}),y(m(ct),{onClick:t[0]||(t[0]=Me(n=>e.$router.push({name:"widget.edit",params:{widgetId:"new"}}),["prevent"]))},{default:P(()=>[oQ,B(" Create Floating Widget")]),_:1})])])]))}}},Symbol.toStringTag,{value:"Module"})),lQ={class:"w-full relative"},cQ={class:"absolute top-[13px] left-[12%] right-1/2 transition h-1 w-[calc(75%)] duration-100 bg-slate-200"},uQ={class:"grid grid-cols-4 w-full h-16 z-0"},dQ={class:"flex items-center flex-col justify-start cursor-pointer transition duration-100 relative font-medium"},hQ=["onClick"],fQ=["onClick"],pQ={class:"hidden sm:flex"},mQ={class:"sm:flex sm:ml-1 text-center"},gQ={class:"flex items-center justify-between gap-3 my-4 w-full flex-col sm:flex-row"},vQ={class:"text-lg font-medium"},yQ={__name:"Header",setup(s){const e=eo(),t=Wf(),n=ie(()=>e.tabs.findIndex(a=>a.path==t.query.tab)/(e.tabs.length-1)*100);os(()=>{e.isTabEmpty&&e.setTab("whatsapp")});const i=ie(()=>e.isTab("whatsapp")?"Cancel":" Prev"),r=ie(()=>e.isTab("triggers")?e.currentWidget.isNew?e.currentWidget.is_saving?"Creating...":"Create":e.currentWidget.is_saving?"Saving...":" Save":"Next ");return(o,a)=>(v(),C("div",lQ,[h("div",cQ,[h("div",{class:"absolute h-full bg-indigo-600 left-0 top-0 transition-[width] duration-200",style:et({width:n.value+"%"})},null,4)]),h("div",uQ,[(v(!0),C(Ve,null,ft(m(e).tabs,l=>(v(),C("div",dQ,[h("div",{class:X(["w-4 h-4 rounded-full z-0 translate-y-1.5 delay-75",[m(e).isTabDone(l.path)?"bg-indigo-600":"bg-slate-300"]]),onClick:Me(c=>m(e).setTab(l.path),["prevent"])},null,10,hQ),h("div",{class:X(["py-2 flex items-center",m(e).isTabDone(l.path)?"text-indigo-600":"text-slate-300"]),onClick:Me(c=>m(e).setTab(l.path),["prevent"])},[h("span",pQ,q(l.id)+" .",1),h("span",mQ,q(l.title),1)],10,fQ)]))),256))]),h("div",gQ,[h("div",vQ,"Step "+q(m(e).currentTab.id)+" : "+q(m(e).currentTab.title),1),h("div",{class:X(["flex z-10 items-center w-full sm:w-fit gap-6 sm:justify-end sm:gap-2",{"justify-end":m(e).isTab("whatsapp"),"justify-between":!m(e).isTab("whatsapp")}])},[m(e).isTab("whatsapp")?z("",!0):(v(),qe(m(ct),{key:0,outline:"",onClick:a[0]||(a[0]=l=>m(e).prevTab())},{default:P(()=>[B(q(i.value),1)]),_:1})),y(m(ct),{onClick:a[1]||(a[1]=l=>m(e).isTab("triggers")?m(e).saveWidget():m(e).nextTab()),class:X({"opacity-60 pointer-events-none":m(e).currentWidget.is_saving})},{default:P(()=>[m(e).currentWidget.is_saving?(v(),qe(m(Bn),{key:0,class:"w-3.5 h-3.5"})):z("",!0),B(" "+q(r.value),1)]),_:1},8,["class"])],2)])]))}},_Q={class:"w-full h-full flex flex-col gap-8"},bQ={class:"flex items-center gap-5"},wQ=["onClick"],xQ={xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-12",viewBox:"0 0 16 16"},kQ={key:0,d:"M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"},SQ={key:1,d:"M7 14s-1 0-1-1 1-4 5-4 5 3 5 4-1 1-1 1zm4-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6m-5.784 6A2.24 2.24 0 0 1 5 13c0-1.355.68-2.75 1.936-3.72A6.3 6.3 0 0 0 5 9c-4 0-5 3-5 4s1 1 1 1zM4.5 8a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5"},CQ={key:0,xmlns:"http://www.w3.org/2000/svg",class:"fill-indigo-500 w-4 absolute right-2 top-2",viewBox:"0 0 16 16"},OQ=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],MQ={key:0,class:"group-hover:opacity-100 transition duration-100 opacity-0 absolute inset-0 bg-white bg-opacity-50 rounded flex items-center justify-center"},AQ={class:"font-medium"},$Q={class:"flex items-center gap-3"},TQ={class:"w-full relative"},PQ=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})],-1)],LQ={key:1,class:"flex flex-col gap-4"},EQ={class:"bg-gray-50 p-3 rounded border border-gray-100 flex flex-col gap-4 relative"},DQ={class:"absolute z-10 right-3 top-3 child:cursor-pointer flex items-center gap-3"},IQ=["onClick"],RQ=[h("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"},null,-1)],FQ=["onClick"],BQ=[h("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"},null,-1)],NQ=["onClick"],VQ=[h("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"},null,-1)],zQ={class:"flex items-center gap-3"},jQ={class:"w-full relative"},WQ=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})],-1)],UQ={key:0,class:"text-red-500 text-sm py-4 flex items-center justify-between px-6 rounded bg-red-50 border border-red-200"},HQ=h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"currentColor",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"})],-1),QQ={class:"flex items-start gap-8 flex-col"},YQ=h("h3",{class:"font-semibold"},"Behaviors",-1),qQ={key:0,class:"flex flex-col gap-3"},GQ={class:"flex flex-col gap-2.5 child:cursor-pointer"},KQ=["onClick"],XQ=[h("span",null,null,-1)],JQ={__name:"WhatsApp",setup(s){const e=eo(),t=ie(()=>{var u,d;return((d=(u=e.currentWidget)==null?void 0:u.config)==null?void 0:d.whatsapp)||{}}),n=!window.formychat_admin_vars.is_premium||!1,i=Tr(),r=()=>{e.errors.whatsapp_number=!1},o=()=>{t.value.agents=t.value.agents||[],t.value.agents.push({name:"Agent "+(t.value.agents.length+1),subtitle:"",number:"",country_code:window.formychat_country_code||"44"}),e.errors.whatsapp_agents=!1},a=async u=>{(await i.prompt({title:"Delete Agent",message:"Are you sure you want to delete this agent?"})).ok&&t.value.agents.splice(u,1)},l=(u,d)=>{const f=t.value.agents,p=d==="up"?u-1:u+1;if(p<0||p>=f.length)return;const g=f[u];f.splice(u,1),f.splice(p,0,g)},c=()=>{(!t.value.country_code||t.value.country_code.length===0)&&e.setCountryCode(window.formychat_country_code.toString()||"44")};return os(async()=>{t.value.agent_mode=t.value.agent_mode||"single",window.addEventListener("formychat_ip_loaded",c),setTimeout(()=>{c()},300)}),(u,d)=>(v(),C("div",_Q,[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Widget name")]),_:1}),y(m(Gt),{modelValue:m(e).currentWidget.name,"onUpdate:modelValue":d[0]||(d[0]=f=>m(e).currentWidget.name=f),placeholder:"Widget name"},null,8,["modelValue"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Choose how you prefer to display your widget")]),_:1}),h("div",bQ,[(v(),C(Ve,null,ft({single:"Single",agents:"Multi-agents"},(f,p)=>h("div",{key:p,class:X([{"ring-1 ring-slate-200 hover:bg-white bg-gray-50":t.value.agent_mode!==p,"ring-[2px] ring-indigo-400 ":t.value.agent_mode==p,"formychat-locked":m(n)&&p!=="single"},"group relative w-40 h-40 ring-inset rounded cursor-pointer transition flex items-center justify-center flex-col gap-2"]),onClick:Me(g=>t.value.agent_mode=m(n)?"single":p,["prevent"])},[(v(),C("svg",xQ,[p==="single"?(v(),C("path",kQ)):(v(),C("path",SQ))])),y(ze,{name:"bounce"},{default:P(()=>[t.value.agent_mode==p?(v(),C("svg",CQ,OQ)):z("",!0)]),_:2},1024),m(n)&&p!=="single"?(v(),C("div",MQ,[y(m(Vt))])):z("",!0),h("span",AQ,q(f),1)],10,wQ)),64))])]),_:1}),t.value.agent_mode==="single"?(v(),qe(m(_e),{key:0},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("WhatsApp Number")]),_:1}),h("div",$Q,[y(m($t),{options:m(e).contents.countries,modelValue:t.value.country_code,"onUpdate:modelValue":d[1]||(d[1]=f=>t.value.country_code=f),cursor:!1,class:"w-24 justify-center text-center",placeholder:"Select"},null,8,["options","modelValue"]),h("div",TQ,[y(m(Gt),{name:"whatsapp_number",modelValue:t.value.number,"onUpdate:modelValue":d[2]||(d[2]=f=>t.value.number=f),onKeydown:r,type:"text",placeholder:"WhatsApp number",error:!m(e).isValidPhone(t.value.number)||m(e).errors.whatsapp_number},null,8,["modelValue","error"]),y(ze,{name:"bounce"},{default:P(()=>[!m(e).isValidPhone(t.value.number)||m(e).errors.whatsapp_number?(v(),C("div",{key:0,class:X(["absolute w-4 text-red-500 right-3 top-3 flex items-center gap-2 transition",{"bounce-enter-active":m(e).errors.whatsapp_number}])},PQ,2)):z("",!0)]),_:1})])])]),_:1})):z("",!0),t.value.agent_mode==="agents"?(v(),C("div",LQ,[t.value.agents&&t.value.agents.length?(v(!0),C(Ve,{key:0},ft(t.value.agents,(f,p)=>(v(),C("div",{key:p,class:"flex flex-col gap-4"},[h("div",EQ,[h("div",DQ,[p>0?(v(),qe(m(Xs),{key:0},{content:P(()=>[B(" Move up ")]),default:P(()=>[(v(),C("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:Me(g=>l(p,"up"),["prevent"]),class:"fill-current rotate-180 w-3 opacity-60 hover:opacity-100 transition",viewBox:"0 0 16 16"},RQ,8,IQ))]),_:2},1024)):z("",!0),p<t.value.agents.length-1?(v(),qe(m(Xs),{key:1},{content:P(()=>[B(" Move down ")]),default:P(()=>[(v(),C("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:Me(g=>l(p,"down"),["prevent"]),class:"fill-current w-3 opacity-60 hover:opacity-100 transition",viewBox:"0 0 16 16"},BQ,8,FQ))]),_:2},1024)):z("",!0),(v(),C("svg",{onClick:g=>a(p),xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-4 hover:opacity-100 transition hover:text-red-500",viewBox:"0 0 16 16"},VQ,8,NQ))]),y(m(_e),null,{default:P(()=>[y(m(du),{modelValue:f.avatar,"onUpdate:modelValue":g=>f.avatar=g,custom:f.custom_avatar,"onUpdate:custom":g=>f.custom_avatar=g,default:u.Image("whatsapp-circle.svg")},null,8,["modelValue","onUpdate:modelValue","custom","onUpdate:custom","default"])]),_:2},1024),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Agent name ")]),_:1}),y(m(Gt),{placeholder:"Example: John Doe",modelValue:f.name,"onUpdate:modelValue":g=>f.name=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Subtitle / Designation ")]),_:1}),y(m(Gt),{placeholder:"Example: Technical Support Executive",modelValue:f.subtitle,"onUpdate:modelValue":g=>f.subtitle=g},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Agent WhatsApp number ")]),_:1}),h("div",zQ,[y(m($t),{options:m(e).contents.countries,modelValue:f.country_code,"onUpdate:modelValue":g=>f.country_code=g,cursor:!1,class:"w-24 justify-center text-center",placeholder:"Select"},null,8,["options","modelValue","onUpdate:modelValue"]),h("div",jQ,[y(m(Gt),{modelValue:f.number,"onUpdate:modelValue":g=>f.number=g,type:"text",onKeydown:g=>m(e).errors["agent_number_"+p]=!1,error:!m(e).isValidPhone(f.number)||m(e).errors["agent_number_"+p],placeholder:"WhatsApp number",name:"agent_number_"+p},null,8,["modelValue","onUpdate:modelValue","onKeydown","error","name"]),y(ze,{name:"bounce"},{default:P(()=>[m(e).errors["agent_number_"+p]?(v(),C("div",{key:0,class:X(["absolute w-4 text-red-500 right-3 top-3 flex items-center gap-2 transition",{"bounce-enter-active":m(e).errors.whatsapp_number}])},WQ,2)):z("",!0)]),_:2},1024)])])]),_:2},1024)])]))),128)):z("",!0),y(ze,{name:"fade"},{default:P(()=>[m(e).errors.whatsapp_agents?(v(),C("div",UQ,[B(" Please add at least one agent "),h("span",{class:"cursor-pointer px-3 py-1 bg-red-300 rounded",onClick:d[3]||(d[3]=f=>m(e).errors.whatsapp_agents=!1)},"x")])):z("",!0)]),_:1}),h("div",null,[y(m(ct),{outline:"",class:"px-2 h-8",onClick:o},{default:P(()=>[HQ,B(" Add new agent")]),_:1})])])):z("",!0),h("div",QQ,[YQ,y(m(At),{modelValue:t.value.new_tab,"onUpdate:modelValue":d[4]||(d[4]=f=>t.value.new_tab=f),hints:"Open the WhatsApp link in a new tab on Desktop. <br/><b>Note:</b> In Safari, WhatsApp will be opened in current tab."},{default:P(()=>[B(" Open WhatsApp in a new tab")]),_:1},8,["modelValue"]),y(m(At),{modelValue:t.value.web_version,"onUpdate:modelValue":d[5]||(d[5]=f=>t.value.web_version=f),locked:"",hints:`By enabling this feature, WhatsApp will be automatically opened on your web
            browser when accessed from a laptop/PC.`},{default:P(()=>[B("Navigate to WhatsApp Web from desktop")]),_:1},8,["modelValue"]),t.value.agent_mode==="agents"?(v(),C("div",qQ,[y(m(Pe),null,{default:P(()=>[B("On click Agent")]),_:1}),h("div",GQ,[(v(),C(Ve,null,ft({show_form:"Load The Selected Form",redirect:"Redirected to WhatsApp directly"},(f,p)=>h("label",{class:X(["flex items-center gap-4 group",{"text-indigo-500":t.value.on_click_agent==p}]),onClick:Me(g=>m(n)&&p=="redirect"?null:t.value.on_click_agent=p,["prevent"])},[h("div",{class:X(["w-5 h-5 bg-white border-[5px] rounded-full transition",{"border-indigo-500":t.value.on_click_agent==p,"border-gray-100":t.value.on_click_agent!==p,"group-hover:border-indigo-500":t.value.on_click_agent!==p&&!m(n),"formychat-locked":m(n)&&p==="redirect"}])},XQ,2),B(),h("span",{class:X({"opacity-60 formychat-locked":m(n)&&p==="redirect"})},q(f),3),p==="redirect"?(v(),qe(m(Vt),{key:0})):z("",!0)],10,KQ)),64))])])):z("",!0)])]))}};var ZQ=Object.defineProperty,eY=(s,e,t)=>e in s?ZQ(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,Ft=(s,e,t)=>eY(s,typeof e!="symbol"?e+"":e,t),tY=class{requestAnimationFrame(s){return requestAnimationFrame(s)}cancelAnimationFrame(s){cancelAnimationFrame(s)}},sY=class{constructor(){Ft(this,"_lastHandleId",0),Ft(this,"_lastImmediate",null)}requestAnimationFrame(s){return this._lastHandleId>=Number.MAX_SAFE_INTEGER&&(this._lastHandleId=0),this._lastHandleId+=1,this._lastImmediate=setImmediate(()=>{s(Date.now())}),this._lastHandleId}cancelAnimationFrame(s){this._lastImmediate&&clearImmediate(this._lastImmediate)}},nY=class{constructor(){Ft(this,"_strategy"),this._strategy=typeof requestAnimationFrame=="function"?new tY:new sY}requestAnimationFrame(s){return this._strategy.requestAnimationFrame(s)}cancelAnimationFrame(s){this._strategy.cancelAnimationFrame(s)}},Bo=typeof window<"u"&&typeof window.document<"u",Ph={name:"@lottiefiles/dotlottie-web",version:"0.28.0"},iY=(()=>{var e;var s=typeof document<"u"?(e=document.currentScript)==null?void 0:e.src:void 0;return function(t={}){var n=t,i,r,o=new Promise((_,x)=>{i=_,r=x}),a=Object.assign({},n),l="./this.program",c="";typeof document<"u"&&document.currentScript&&(c=document.currentScript.src),s&&(c=s),c.startsWith("blob:")?c="":c=c.substr(0,c.replace(/[?#].*/,"").lastIndexOf("/")+1);var u=n.print||console.log.bind(console),d=n.printErr||console.error.bind(console);Object.assign(n,a),a=null,n.thisProgram&&(l=n.thisProgram);var f;n.wasmBinary&&(f=n.wasmBinary);var p,g=!1,S,k,O,$,M,b,w,R;function T(){var _=p.buffer;n.HEAP8=S=new Int8Array(_),n.HEAP16=O=new Int16Array(_),n.HEAPU8=k=new Uint8Array(_),n.HEAPU16=$=new Uint16Array(_),n.HEAP32=M=new Int32Array(_),n.HEAPU32=b=new Uint32Array(_),n.HEAPF32=w=new Float32Array(_),n.HEAPF64=R=new Float64Array(_)}var E=[],F=[],K=[];function W(){var _=n.preRun.shift();E.unshift(_)}var A=0,D=null;function N(_){var x;throw(x=n.onAbort)==null||x.call(n,_),_="Aborted("+_+")",d(_),g=!0,_=new WebAssembly.RuntimeError(_+". Build with -sASSERTIONS for more info."),r(_),_}var Q=_=>_.startsWith("data:application/octet-stream;base64,"),H;if(H="DotLottiePlayer.wasm",!Q(H)){var J=H;H=n.locateFile?n.locateFile(J,c):c+J}function ae(_){if(_==H&&f)return new Uint8Array(f);throw"both async and sync fetching of the wasm failed"}function be(_){return f||typeof fetch!="function"?Promise.resolve().then(()=>ae(_)):fetch(_,{credentials:"same-origin"}).then(x=>{if(!x.ok)throw`failed to load wasm binary file at '${_}'`;return x.arrayBuffer()}).catch(()=>ae(_))}function We(_,x,L){return be(_).then(I=>WebAssembly.instantiate(I,x)).then(L,I=>{d(`failed to asynchronously prepare wasm: ${I}`),N(I)})}function Xe(_,x){var L=H;return f||typeof WebAssembly.instantiateStreaming!="function"||Q(L)||typeof fetch!="function"?We(L,_,x):fetch(L,{credentials:"same-origin"}).then(I=>WebAssembly.instantiateStreaming(I,_).then(x,function(U){return d(`wasm streaming compile failed: ${U}`),d("falling back to ArrayBuffer instantiation"),We(L,_,x)}))}var re=_=>{for(;0<_.length;)_.shift()(n)},le=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,se=(_,x,L)=>{var I=x+L;for(L=x;_[L]&&!(L>=I);)++L;if(16<L-x&&_.buffer&&le)return le.decode(_.subarray(x,L));for(I="";x<L;){var U=_[x++];if(U&128){var G=_[x++]&63;if((U&224)==192)I+=String.fromCharCode((U&31)<<6|G);else{var ve=_[x++]&63;U=(U&240)==224?(U&15)<<12|G<<6|ve:(U&7)<<18|G<<12|ve<<6|_[x++]&63,65536>U?I+=String.fromCharCode(U):(U-=65536,I+=String.fromCharCode(55296|U>>10,56320|U&1023))}}else I+=String.fromCharCode(U)}return I};class Te{constructor(x){this.ya=x-24}}var Ye=0,Z=_=>{for(var x=0,L=0;L<_.length;++L){var I=_.charCodeAt(L);127>=I?x++:2047>=I?x+=2:55296<=I&&57343>=I?(x+=4,++L):x+=3}return x},ye=(_,x,L,I)=>{if(0<I){I=L+I-1;for(var U=0;U<_.length;++U){var G=_.charCodeAt(U);if(55296<=G&&57343>=G){var ve=_.charCodeAt(++U);G=65536+((G&1023)<<10)|ve&1023}if(127>=G){if(L>=I)break;x[L++]=G}else{if(2047>=G){if(L+1>=I)break;x[L++]=192|G>>6}else{if(65535>=G){if(L+2>=I)break;x[L++]=224|G>>12}else{if(L+3>=I)break;x[L++]=240|G>>18,x[L++]=128|G>>12&63}x[L++]=128|G>>6&63}x[L++]=128|G&63}}x[L]=0}},Oe={},je=_=>{for(;_.length;){var x=_.pop();_.pop()(x)}};function wt(_){return this.fromWireType(b[_>>2])}var V={},j={},Y={},ne,ce=(_,x,L)=>{function I(ue){if(ue=L(ue),ue.length!==_.length)throw new ne("Mismatched type converter count");for(var Be=0;Be<_.length;++Be)he(_[Be],ue[Be])}_.forEach(function(ue){Y[ue]=x});var U=Array(x.length),G=[],ve=0;x.forEach((ue,Be)=>{j.hasOwnProperty(ue)?U[Be]=j[ue]:(G.push(ue),V.hasOwnProperty(ue)||(V[ue]=[]),V[ue].push(()=>{U[Be]=j[ue],++ve,ve===G.length&&I(U)}))}),G.length===0&&I(U)},fe,ge=_=>{for(var x="";k[_];)x+=fe[k[_++]];return x},oe;function we(_,x,L={}){var I=x.name;if(!_)throw new oe(`type "${I}" must have a positive integer typeid pointer`);if(j.hasOwnProperty(_)){if(L.ib)return;throw new oe(`Cannot register type '${I}' twice`)}j[_]=x,delete Y[_],V.hasOwnProperty(_)&&(x=V[_],delete V[_],x.forEach(U=>U()))}function he(_,x,L={}){if(!("argPackAdvance"in x))throw new TypeError("registerType registeredInstance requires argPackAdvance");return we(_,x,L)}var Re=_=>{throw new oe(_.ma.za.xa.name+" instance already deleted")},Ge=!1,Ue=()=>{},Ze=(_,x,L)=>x===L?_:L.Ca===void 0?null:(_=Ze(_,x,L.Ca),_===null?null:L.ab(_)),lt={},vt=[],Rt=()=>{for(;vt.length;){var _=vt.pop();_.ma.Ka=!1,_.delete()}},ss,ks={},to=(_,x)=>{if(x===void 0)throw new oe("ptr should not be undefined");for(;_.Ca;)x=_.Na(x),_=_.Ca;return ks[x]},No=(_,x)=>{if(!x.za||!x.ya)throw new ne("makeClassHandle requires ptr and ptrType");if(!!x.Da!=!!x.Aa)throw new ne("Both smartPtrType and smartPtr must be specified");return x.count={value:1},Gn(Object.create(_,{ma:{value:x,writable:!0}}))},Gn=_=>typeof FinalizationRegistry>"u"?(Gn=x=>x,_):(Ge=new FinalizationRegistry(x=>{x=x.ma,--x.count.value,x.count.value===0&&(x.Aa?x.Da.Fa(x.Aa):x.za.xa.Fa(x.ya))}),Gn=x=>{var L=x.ma;return L.Aa&&Ge.register(x,{ma:L},x),x},Ue=x=>{Ge.unregister(x)},Gn(_));function Vo(){}var ds=(_,x)=>Object.defineProperty(x,"name",{value:_}),gn=(_,x,L)=>{if(_[x].Ba===void 0){var I=_[x];_[x]=function(...U){if(!_[x].Ba.hasOwnProperty(U.length))throw new oe(`Function '${L}' called with an invalid number of arguments (${U.length}) - expects one of (${_[x].Ba})!`);return _[x].Ba[U.length].apply(this,U)},_[x].Ba=[],_[x].Ba[I.Oa]=I}},Ia=(_,x,L)=>{if(n.hasOwnProperty(_)){if(L===void 0||n[_].Ba!==void 0&&n[_].Ba[L]!==void 0)throw new oe(`Cannot register public name '${_}' twice`);if(gn(n,_,_),n.hasOwnProperty(L))throw new oe(`Cannot register multiple overloads of a function with the same number of arguments (${L})!`);n[_].Ba[L]=x}else n[_]=x,L!==void 0&&(n[_].vb=L)},Ete=_=>{if(_===void 0)return"_unknown";_=_.replace(/[^a-zA-Z0-9_]/g,"$");var x=_.charCodeAt(0);return 48<=x&&57>=x?`_${_}`:_};function Dte(_,x,L,I,U,G,ve,ue){this.name=_,this.constructor=x,this.La=L,this.Fa=I,this.Ca=U,this.cb=G,this.Na=ve,this.ab=ue,this.kb=[]}var mg=(_,x,L)=>{for(;x!==L;){if(!x.Na)throw new oe(`Expected null or instance of ${L.name}, got an instance of ${x.name}`);_=x.Na(_),x=x.Ca}return _};function Ite(_,x){if(x===null){if(this.Ta)throw new oe(`null is not a valid ${this.name}`);return 0}if(!x.ma)throw new oe(`Cannot pass "${xg(x)}" as a ${this.name}`);if(!x.ma.ya)throw new oe(`Cannot pass deleted object as a pointer of type ${this.name}`);return mg(x.ma.ya,x.ma.za.xa,this.xa)}function Rte(_,x){if(x===null){if(this.Ta)throw new oe(`null is not a valid ${this.name}`);if(this.Qa){var L=this.Ua();return _!==null&&_.push(this.Fa,L),L}return 0}if(!x||!x.ma)throw new oe(`Cannot pass "${xg(x)}" as a ${this.name}`);if(!x.ma.ya)throw new oe(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.Pa&&x.ma.za.Pa)throw new oe(`Cannot convert argument of type ${x.ma.Da?x.ma.Da.name:x.ma.za.name} to parameter type ${this.name}`);if(L=mg(x.ma.ya,x.ma.za.xa,this.xa),this.Qa){if(x.ma.Aa===void 0)throw new oe("Passing raw pointer to smart pointer is illegal");switch(this.pb){case 0:if(x.ma.Da===this)L=x.ma.Aa;else throw new oe(`Cannot convert argument of type ${x.ma.Da?x.ma.Da.name:x.ma.za.name} to parameter type ${this.name}`);break;case 1:L=x.ma.Aa;break;case 2:if(x.ma.Da===this)L=x.ma.Aa;else{var I=x.clone();L=this.lb(L,Ih(()=>I.delete())),_!==null&&_.push(this.Fa,L)}break;default:throw new oe("Unsupporting sharing policy")}}return L}function Fte(_,x){if(x===null){if(this.Ta)throw new oe(`null is not a valid ${this.name}`);return 0}if(!x.ma)throw new oe(`Cannot pass "${xg(x)}" as a ${this.name}`);if(!x.ma.ya)throw new oe(`Cannot pass deleted object as a pointer of type ${this.name}`);if(x.ma.za.Pa)throw new oe(`Cannot convert argument of type ${x.ma.za.name} to parameter type ${this.name}`);return mg(x.ma.ya,x.ma.za.xa,this.xa)}function wc(_,x,L,I,U,G,ve,ue,Be,Ce,Ne){this.name=_,this.xa=x,this.Ta=L,this.Pa=I,this.Qa=U,this.jb=G,this.pb=ve,this.Za=ue,this.Ua=Be,this.lb=Ce,this.Fa=Ne,U||x.Ca!==void 0?this.toWireType=Rte:(this.toWireType=I?Ite:Fte,this.Ea=null)}var Bk=(_,x,L)=>{if(!n.hasOwnProperty(_))throw new ne("Replacing nonexistent public symbol");n[_].Ba!==void 0&&L!==void 0?n[_].Ba[L]=x:(n[_]=x,n[_].Oa=L)},In,Bte=(_,x,L=[])=>(_.includes("j")?(_=_.replace(/p/g,"i"),x=(0,n["dynCall_"+_])(x,...L)):x=In.get(x)(...L),x),Nte=(_,x)=>(...L)=>Bte(_,x,L),Ys=(_,x)=>{_=ge(_);var L=_.includes("j")?Nte(_,x):In.get(x);if(typeof L!="function")throw new oe(`unknown function pointer with signature ${_}: ${x}`);return L},Nk,Vk=_=>{_=Gk(_);var x=ge(_);return fr(_),x},Dh=(_,x)=>{function L(G){U[G]||j[G]||(Y[G]?Y[G].forEach(L):(I.push(G),U[G]=!0))}var I=[],U={};throw x.forEach(L),new Nk(`${_}: `+I.map(Vk).join([", "]))},gg=(_,x)=>{for(var L=[],I=0;I<_;I++)L.push(b[x+4*I>>2]);return L};function Vte(_){for(var x=1;x<_.length;++x)if(_[x]!==null&&_[x].Ea===void 0)return!0;return!1}function vg(_,x,L,I,U){var G=x.length;if(2>G)throw new oe("argTypes array size mismatch! Must at least get return value and 'this' types!");var ve=x[1]!==null&&L!==null,ue=Vte(x),Be=x[0].name!=="void",Ce=G-2,Ne=Array(Ce),mt=[],Ct=[];return ds(_,function(...ee){if(ee.length!==Ce)throw new oe(`function ${_} called with ${ee.length} arguments, expected ${Ce}`);if(Ct.length=0,mt.length=ve?2:1,mt[0]=U,ve){var Je=x[1].toWireType(Ct,this);mt[1]=Je}for(var st=0;st<Ce;++st)Ne[st]=x[st+2].toWireType(Ct,ee[st]),mt.push(Ne[st]);if(ee=I(...mt),ue)je(Ct);else for(st=ve?1:2;st<x.length;st++){var hs=st===1?Je:Ne[st-2];x[st].Ea!==null&&x[st].Ea(hs)}return Je=Be?x[0].fromWireType(ee):void 0,Je})}var zk=_=>{_=_.trim();let x=_.indexOf("(");return x!==-1?_.substr(0,x):_},yg=[],hr=[],_g=_=>{9<_&&--hr[_+1]===0&&(hr[_]=void 0,yg.push(_))},bg=_=>{if(!_)throw new oe("Cannot use deleted val. handle = "+_);return hr[_]},Ih=_=>{switch(_){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let x=yg.pop()||hr.length;return hr[x]=_,hr[x+1]=1,x}},jk={name:"emscripten::val",fromWireType:_=>{var x=bg(_);return _g(_),x},toWireType:(_,x)=>Ih(x),argPackAdvance:8,readValueFromPointer:wt,Ea:null},zte=(_,x,L)=>{switch(x){case 1:return L?function(I){return this.fromWireType(S[I])}:function(I){return this.fromWireType(k[I])};case 2:return L?function(I){return this.fromWireType(O[I>>1])}:function(I){return this.fromWireType($[I>>1])};case 4:return L?function(I){return this.fromWireType(M[I>>2])}:function(I){return this.fromWireType(b[I>>2])};default:throw new TypeError(`invalid integer width (${x}): ${_}`)}},wg=(_,x)=>{var L=j[_];if(L===void 0)throw _=`${x} has unknown type ${Vk(_)}`,new oe(_);return L},xg=_=>{if(_===null)return"null";var x=typeof _;return x==="object"||x==="array"||x==="function"?_.toString():""+_},jte=(_,x)=>{switch(x){case 4:return function(L){return this.fromWireType(w[L>>2])};case 8:return function(L){return this.fromWireType(R[L>>3])};default:throw new TypeError(`invalid float width (${x}): ${_}`)}},Wte=(_,x,L)=>{switch(x){case 1:return L?I=>S[I]:I=>k[I];case 2:return L?I=>O[I>>1]:I=>$[I>>1];case 4:return L?I=>M[I>>2]:I=>b[I>>2];default:throw new TypeError(`invalid integer width (${x}): ${_}`)}},Wk=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Ute=(_,x)=>{for(var L=_>>1,I=L+x/2;!(L>=I)&&$[L];)++L;if(L<<=1,32<L-_&&Wk)return Wk.decode(k.subarray(_,L));for(L="",I=0;!(I>=x/2);++I){var U=O[_+2*I>>1];if(U==0)break;L+=String.fromCharCode(U)}return L},Hte=(_,x,L)=>{if(L??(L=2147483647),2>L)return 0;L-=2;var I=x;L=L<2*_.length?L/2:_.length;for(var U=0;U<L;++U)O[x>>1]=_.charCodeAt(U),x+=2;return O[x>>1]=0,x-I},Qte=_=>2*_.length,Yte=(_,x)=>{for(var L=0,I="";!(L>=x/4);){var U=M[_+4*L>>2];if(U==0)break;++L,65536<=U?(U-=65536,I+=String.fromCharCode(55296|U>>10,56320|U&1023)):I+=String.fromCharCode(U)}return I},qte=(_,x,L)=>{if(L??(L=2147483647),4>L)return 0;var I=x;L=I+L-4;for(var U=0;U<_.length;++U){var G=_.charCodeAt(U);if(55296<=G&&57343>=G){var ve=_.charCodeAt(++U);G=65536+((G&1023)<<10)|ve&1023}if(M[x>>2]=G,x+=4,x+4>L)break}return M[x>>2]=0,x-I},Gte=_=>{for(var x=0,L=0;L<_.length;++L){var I=_.charCodeAt(L);55296<=I&&57343>=I&&++L,x+=4}return x},kg=[],Kte=_=>{var x=kg.length;return kg.push(_),x},Xte=(_,x)=>{for(var L=Array(_),I=0;I<_;++I)L[I]=wg(b[x+4*I>>2],"parameter "+I);return L},Jte=Reflect.construct,Sg={},Uk=()=>{if(!Cg){var _={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"},x;for(x in Sg)Sg[x]===void 0?delete _[x]:_[x]=Sg[x];var L=[];for(x in _)L.push(`${x}=${_[x]}`);Cg=L}return Cg},Cg,Zte=[null,[],[]],ese=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return _=>crypto.getRandomValues(_);N("initRandomDevice")},Hk=_=>(Hk=ese())(_),Rh=_=>_%4===0&&(_%100!==0||_%400===0),Qk=[31,29,31,30,31,30,31,31,30,31,30,31],Yk=[31,28,31,30,31,30,31,31,30,31,30,31];function tse(_){var x=Array(Z(_)+1);return ye(_,x,0,x.length),x}var sse=(_,x,L,I)=>{function U(ee,Je,st){for(ee=typeof ee=="number"?ee.toString():ee||"";ee.length<Je;)ee=st[0]+ee;return ee}function G(ee,Je){return U(ee,Je,"0")}function ve(ee,Je){function st(so){return 0>so?-1:0<so?1:0}var hs;return(hs=st(ee.getFullYear()-Je.getFullYear()))===0&&(hs=st(ee.getMonth()-Je.getMonth()))===0&&(hs=st(ee.getDate()-Je.getDate())),hs}function ue(ee){switch(ee.getDay()){case 0:return new Date(ee.getFullYear()-1,11,29);case 1:return ee;case 2:return new Date(ee.getFullYear(),0,3);case 3:return new Date(ee.getFullYear(),0,2);case 4:return new Date(ee.getFullYear(),0,1);case 5:return new Date(ee.getFullYear()-1,11,31);case 6:return new Date(ee.getFullYear()-1,11,30)}}function Be(ee){var Je=ee.Ia;for(ee=new Date(new Date(ee.Ja+1900,0,1).getTime());0<Je;){var st=ee.getMonth(),hs=(Rh(ee.getFullYear())?Qk:Yk)[st];if(Je>hs-ee.getDate())Je-=hs-ee.getDate()+1,ee.setDate(1),11>st?ee.setMonth(st+1):(ee.setMonth(0),ee.setFullYear(ee.getFullYear()+1));else{ee.setDate(ee.getDate()+Je);break}}return st=new Date(ee.getFullYear()+1,0,4),Je=ue(new Date(ee.getFullYear(),0,4)),st=ue(st),0>=ve(Je,ee)?0>=ve(st,ee)?ee.getFullYear()+1:ee.getFullYear():ee.getFullYear()-1}var Ce=b[I+40>>2];I={sb:M[I>>2],rb:M[I+4>>2],Ra:M[I+8>>2],Va:M[I+12>>2],Sa:M[I+16>>2],Ja:M[I+20>>2],Ga:M[I+24>>2],Ia:M[I+28>>2],wb:M[I+32>>2],qb:M[I+36>>2],tb:Ce&&Ce?se(k,Ce):""},L=L?se(k,L):"",Ce={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ne in Ce)L=L.replace(new RegExp(Ne,"g"),Ce[Ne]);var mt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ct="January February March April May June July August September October November December".split(" ");Ce={"%a":ee=>mt[ee.Ga].substring(0,3),"%A":ee=>mt[ee.Ga],"%b":ee=>Ct[ee.Sa].substring(0,3),"%B":ee=>Ct[ee.Sa],"%C":ee=>G((ee.Ja+1900)/100|0,2),"%d":ee=>G(ee.Va,2),"%e":ee=>U(ee.Va,2," "),"%g":ee=>Be(ee).toString().substring(2),"%G":Be,"%H":ee=>G(ee.Ra,2),"%I":ee=>(ee=ee.Ra,ee==0?ee=12:12<ee&&(ee-=12),G(ee,2)),"%j":ee=>{for(var Je=0,st=0;st<=ee.Sa-1;Je+=(Rh(ee.Ja+1900)?Qk:Yk)[st++]);return G(ee.Va+Je,3)},"%m":ee=>G(ee.Sa+1,2),"%M":ee=>G(ee.rb,2),"%n":()=>`
`,"%p":ee=>0<=ee.Ra&&12>ee.Ra?"AM":"PM","%S":ee=>G(ee.sb,2),"%t":()=>"	","%u":ee=>ee.Ga||7,"%U":ee=>G(Math.floor((ee.Ia+7-ee.Ga)/7),2),"%V":ee=>{var Je=Math.floor((ee.Ia+7-(ee.Ga+6)%7)/7);if(2>=(ee.Ga+371-ee.Ia-2)%7&&Je++,Je)Je==53&&(st=(ee.Ga+371-ee.Ia)%7,st==4||st==3&&Rh(ee.Ja)||(Je=1));else{Je=52;var st=(ee.Ga+7-ee.Ia-1)%7;(st==4||st==5&&Rh(ee.Ja%400-1))&&Je++}return G(Je,2)},"%w":ee=>ee.Ga,"%W":ee=>G(Math.floor((ee.Ia+7-(ee.Ga+6)%7)/7),2),"%y":ee=>(ee.Ja+1900).toString().substring(2),"%Y":ee=>ee.Ja+1900,"%z":ee=>{ee=ee.qb;var Je=0<=ee;return ee=Math.abs(ee)/60,(Je?"+":"-")+("0000"+(ee/60*100+ee%60)).slice(-4)},"%Z":ee=>ee.tb,"%%":()=>"%"},L=L.replace(/%%/g,"\0\0");for(Ne in Ce)L.includes(Ne)&&(L=L.replace(new RegExp(Ne,"g"),Ce[Ne](I)));return L=L.replace(/\0\0/g,"%"),Ne=tse(L),Ne.length>x?0:(S.set(Ne,_),Ne.length-1)};ne=n.InternalError=class extends Error{constructor(_){super(_),this.name="InternalError"}};for(var qk=Array(256),Fh=0;256>Fh;++Fh)qk[Fh]=String.fromCharCode(Fh);fe=qk,oe=n.BindingError=class extends Error{constructor(_){super(_),this.name="BindingError"}},Object.assign(Vo.prototype,{isAliasOf:function(_){if(!(this instanceof Vo&&_ instanceof Vo))return!1;var x=this.ma.za.xa,L=this.ma.ya;_.ma=_.ma;var I=_.ma.za.xa;for(_=_.ma.ya;x.Ca;)L=x.Na(L),x=x.Ca;for(;I.Ca;)_=I.Na(_),I=I.Ca;return x===I&&L===_},clone:function(){if(this.ma.ya||Re(this),this.ma.Ma)return this.ma.count.value+=1,this;var _=Gn,x=Object,L=x.create,I=Object.getPrototypeOf(this),U=this.ma;return _=_(L.call(x,I,{ma:{value:{count:U.count,Ka:U.Ka,Ma:U.Ma,ya:U.ya,za:U.za,Aa:U.Aa,Da:U.Da}}})),_.ma.count.value+=1,_.ma.Ka=!1,_},delete(){if(this.ma.ya||Re(this),this.ma.Ka&&!this.ma.Ma)throw new oe("Object already scheduled for deletion");Ue(this);var _=this.ma;--_.count.value,_.count.value===0&&(_.Aa?_.Da.Fa(_.Aa):_.za.xa.Fa(_.ya)),this.ma.Ma||(this.ma.Aa=void 0,this.ma.ya=void 0)},isDeleted:function(){return!this.ma.ya},deleteLater:function(){if(this.ma.ya||Re(this),this.ma.Ka&&!this.ma.Ma)throw new oe("Object already scheduled for deletion");return vt.push(this),vt.length===1&&ss&&ss(Rt),this.ma.Ka=!0,this}}),n.getInheritedInstanceCount=()=>Object.keys(ks).length,n.getLiveInheritedInstances=()=>{var _=[],x;for(x in ks)ks.hasOwnProperty(x)&&_.push(ks[x]);return _},n.flushPendingDeletes=Rt,n.setDelayFunction=_=>{ss=_,vt.length&&ss&&ss(Rt)},Object.assign(wc.prototype,{eb(_){return this.Za&&(_=this.Za(_)),_},Xa(_){var x;(x=this.Fa)==null||x.call(this,_)},argPackAdvance:8,readValueFromPointer:wt,fromWireType:function(_){function x(){return this.Qa?No(this.xa.La,{za:this.jb,ya:L,Da:this,Aa:_}):No(this.xa.La,{za:this,ya:_})}var L=this.eb(_);if(!L)return this.Xa(_),null;var I=to(this.xa,L);if(I!==void 0)return I.ma.count.value===0?(I.ma.ya=L,I.ma.Aa=_,I.clone()):(I=I.clone(),this.Xa(_),I);if(I=this.xa.cb(L),I=lt[I],!I)return x.call(this);I=this.Pa?I.$a:I.pointerType;var U=Ze(L,this.xa,I.xa);return U===null?x.call(this):this.Qa?No(I.xa.La,{za:I,ya:U,Da:this,Aa:_}):No(I.xa.La,{za:I,ya:U})}}),Nk=n.UnboundTypeError=((_,x)=>{var L=ds(x,function(I){this.name=x,this.message=I,I=Error(I).stack,I!==void 0&&(this.stack=this.toString()+`
`+I.replace(/^Error(:[^\n]*)?\n/,""))});return L.prototype=Object.create(_.prototype),L.prototype.constructor=L,L.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},L})(Error,"UnboundTypeError"),hr.push(0,1,void 0,1,null,1,!0,1,!1,1),n.count_emval_handles=()=>hr.length/2-5-yg.length;var nse={c:(_,x,L,I)=>{N(`Assertion failed: ${_?se(k,_):""}, at: `+[x?x?se(k,x):"":"unknown filename",L,I?I?se(k,I):"":"unknown function"])},m:(_,x,L)=>{var I=new Te(_);throw b[I.ya+16>>2]=0,b[I.ya+4>>2]=x,b[I.ya+8>>2]=L,Ye=_,Ye},B:function(){return 0},P:()=>{},M:()=>{},R:function(){return 0},N:()=>{},A:function(){},O:()=>{},v:_=>{var x=Oe[_];delete Oe[_];var L=x.Ua,I=x.Fa,U=x.Ya,G=U.map(ve=>ve.hb).concat(U.map(ve=>ve.nb));ce([_],G,ve=>{var ue={};return U.forEach((Be,Ce)=>{var Ne=ve[Ce],mt=Be.fb,Ct=Be.gb,ee=ve[Ce+U.length],Je=Be.mb,st=Be.ob;ue[Be.bb]={read:hs=>Ne.fromWireType(mt(Ct,hs)),write:(hs,so)=>{var vn=[];Je(st,hs,ee.toWireType(vn,so)),je(vn)}}}),[{name:x.name,fromWireType:Be=>{var Ce={},Ne;for(Ne in ue)Ce[Ne]=ue[Ne].read(Be);return I(Be),Ce},toWireType:(Be,Ce)=>{for(var Ne in ue)if(!(Ne in Ce))throw new TypeError(`Missing field: "${Ne}"`);var mt=L();for(Ne in ue)ue[Ne].write(mt,Ce[Ne]);return Be!==null&&Be.push(I,mt),mt},argPackAdvance:8,readValueFromPointer:wt,Ea:I}]})},I:()=>{},Y:(_,x,L,I)=>{x=ge(x),he(_,{name:x,fromWireType:function(U){return!!U},toWireType:function(U,G){return G?L:I},argPackAdvance:8,readValueFromPointer:function(U){return this.fromWireType(k[U])},Ea:null})},r:(_,x,L,I,U,G,ve,ue,Be,Ce,Ne,mt,Ct)=>{Ne=ge(Ne),G=Ys(U,G),ue&&(ue=Ys(ve,ue)),Ce&&(Ce=Ys(Be,Ce)),Ct=Ys(mt,Ct);var ee=Ete(Ne);Ia(ee,function(){Dh(`Cannot construct ${Ne} due to unbound types`,[I])}),ce([_,x,L],I?[I]:[],Je=>{if(Je=Je[0],I)var st=Je.xa,hs=st.La;else hs=Vo.prototype;Je=ds(Ne,function(...Mg){if(Object.getPrototypeOf(this)!==so)throw new oe("Use 'new' to construct "+Ne);if(vn.Ha===void 0)throw new oe(Ne+" has no accessible constructor");var Jk=vn.Ha[Mg.length];if(Jk===void 0)throw new oe(`Tried to invoke ctor of ${Ne} with invalid number of parameters (${Mg.length}) - expected (${Object.keys(vn.Ha).toString()}) parameters instead!`);return Jk.apply(this,Mg)});var so=Object.create(hs,{constructor:{value:Je}});Je.prototype=so;var vn=new Dte(Ne,Je,so,Ct,st,G,ue,Ce);if(vn.Ca){var xc;(xc=vn.Ca).Wa??(xc.Wa=[]),vn.Ca.Wa.push(vn)}return st=new wc(Ne,vn,!0,!1,!1),xc=new wc(Ne+"*",vn,!1,!1,!1),hs=new wc(Ne+" const*",vn,!1,!0,!1),lt[_]={pointerType:xc,$a:hs},Bk(ee,Je),[st,xc,hs]})},q:(_,x,L,I,U,G)=>{var ve=gg(x,L);U=Ys(I,U),ce([],[_],ue=>{ue=ue[0];var Be=`constructor ${ue.name}`;if(ue.xa.Ha===void 0&&(ue.xa.Ha=[]),ue.xa.Ha[x-1]!==void 0)throw new oe(`Cannot register multiple constructors with identical number of parameters (${x-1}) for class '${ue.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return ue.xa.Ha[x-1]=()=>{Dh(`Cannot construct ${ue.name} due to unbound types`,ve)},ce([],ve,Ce=>(Ce.splice(1,0,null),ue.xa.Ha[x-1]=vg(Be,Ce,null,U,G),[])),[]})},f:(_,x,L,I,U,G,ve,ue)=>{var Be=gg(L,I);x=ge(x),x=zk(x),G=Ys(U,G),ce([],[_],Ce=>{function Ne(){Dh(`Cannot call ${mt} due to unbound types`,Be)}Ce=Ce[0];var mt=`${Ce.name}.${x}`;x.startsWith("@@")&&(x=Symbol[x.substring(2)]),ue&&Ce.xa.kb.push(x);var Ct=Ce.xa.La,ee=Ct[x];return ee===void 0||ee.Ba===void 0&&ee.className!==Ce.name&&ee.Oa===L-2?(Ne.Oa=L-2,Ne.className=Ce.name,Ct[x]=Ne):(gn(Ct,x,mt),Ct[x].Ba[L-2]=Ne),ce([],Be,Je=>(Je=vg(mt,Je,Ce,G,ve),Ct[x].Ba===void 0?(Je.Oa=L-2,Ct[x]=Je):Ct[x].Ba[L-2]=Je,[])),[]})},X:_=>he(_,jk),x:(_,x,L,I)=>{function U(){}x=ge(x),U.values={},he(_,{name:x,constructor:U,fromWireType:function(G){return this.constructor.values[G]},toWireType:(G,ve)=>ve.value,argPackAdvance:8,readValueFromPointer:zte(x,L,I),Ea:null}),Ia(x,U)},k:(_,x,L)=>{var I=wg(_,"enum");x=ge(x),_=I.constructor,I=Object.create(I.constructor.prototype,{value:{value:L},constructor:{value:ds(`${I.name}_${x}`,function(){})}}),_.values[L]=I,_[x]=I},C:(_,x,L)=>{x=ge(x),he(_,{name:x,fromWireType:I=>I,toWireType:(I,U)=>U,argPackAdvance:8,readValueFromPointer:jte(x,L),Ea:null})},E:(_,x,L,I,U,G)=>{var ve=gg(x,L);_=ge(_),_=zk(_),U=Ys(I,U),Ia(_,function(){Dh(`Cannot call ${_} due to unbound types`,ve)},x-1),ce([],ve,ue=>(Bk(_,vg(_,[ue[0],null].concat(ue.slice(1)),null,U,G),x-1),[]))},l:(_,x,L,I,U)=>{if(x=ge(x),U===-1&&(U=4294967295),U=ue=>ue,I===0){var G=32-8*L;U=ue=>ue<<G>>>G}var ve=x.includes("unsigned")?function(ue,Be){return Be>>>0}:function(ue,Be){return Be};he(_,{name:x,fromWireType:U,toWireType:ve,argPackAdvance:8,readValueFromPointer:Wte(x,L,I!==0),Ea:null})},g:(_,x,L)=>{function I(G){return new U(S.buffer,b[G+4>>2],b[G>>2])}var U=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][x];L=ge(L),he(_,{name:L,fromWireType:I,argPackAdvance:8,readValueFromPointer:I},{ib:!0})},w:_=>{he(_,jk)},ca:(_,x,L,I,U,G,ve,ue,Be,Ce,Ne,mt)=>{L=ge(L),G=Ys(U,G),ue=Ys(ve,ue),Ce=Ys(Be,Ce),mt=Ys(Ne,mt),ce([_],[x],Ct=>(Ct=Ct[0],[new wc(L,Ct.xa,!1,!1,!0,Ct,I,G,ue,Ce,mt)]))},D:(_,x)=>{x=ge(x);var L=x==="std::string";he(_,{name:x,fromWireType:function(I){var U=b[I>>2],G=I+4;if(L)for(var ve=G,ue=0;ue<=U;++ue){var Be=G+ue;if(ue==U||k[Be]==0){if(ve=ve?se(k,ve,Be-ve):"",Ce===void 0)var Ce=ve;else Ce+="\0",Ce+=ve;ve=Be+1}}else{for(Ce=Array(U),ue=0;ue<U;++ue)Ce[ue]=String.fromCharCode(k[G+ue]);Ce=Ce.join("")}return fr(I),Ce},toWireType:function(I,U){U instanceof ArrayBuffer&&(U=new Uint8Array(U));var G=typeof U=="string";if(!(G||U instanceof Uint8Array||U instanceof Uint8ClampedArray||U instanceof Int8Array))throw new oe("Cannot pass non-string to std::string");var ve=L&&G?Z(U):U.length,ue=Og(4+ve+1),Be=ue+4;if(b[ue>>2]=ve,L&&G)ye(U,k,Be,ve+1);else if(G)for(G=0;G<ve;++G){var Ce=U.charCodeAt(G);if(255<Ce)throw fr(Be),new oe("String has UTF-16 code units that do not fit in 8 bits");k[Be+G]=Ce}else for(G=0;G<ve;++G)k[Be+G]=U[G];return I!==null&&I.push(fr,ue),ue},argPackAdvance:8,readValueFromPointer:wt,Ea(I){fr(I)}})},u:(_,x,L)=>{if(L=ge(L),x===2)var I=Ute,U=Hte,G=Qte,ve=ue=>$[ue>>1];else x===4&&(I=Yte,U=qte,G=Gte,ve=ue=>b[ue>>2]);he(_,{name:L,fromWireType:ue=>{for(var Be=b[ue>>2],Ce,Ne=ue+4,mt=0;mt<=Be;++mt){var Ct=ue+4+mt*x;(mt==Be||ve(Ct)==0)&&(Ne=I(Ne,Ct-Ne),Ce===void 0?Ce=Ne:(Ce+="\0",Ce+=Ne),Ne=Ct+x)}return fr(ue),Ce},toWireType:(ue,Be)=>{if(typeof Be!="string")throw new oe(`Cannot pass non-string to C++ string type ${L}`);var Ce=G(Be),Ne=Og(4+Ce+x);return b[Ne>>2]=Ce/x,U(Be,Ne+4,Ce+x),ue!==null&&ue.push(fr,Ne),Ne},argPackAdvance:8,readValueFromPointer:wt,Ea(ue){fr(ue)}})},s:(_,x,L,I,U,G)=>{Oe[_]={name:ge(x),Ua:Ys(L,I),Fa:Ys(U,G),Ya:[]}},j:(_,x,L,I,U,G,ve,ue,Be,Ce)=>{Oe[_].Ya.push({bb:ge(x),hb:L,fb:Ys(I,U),gb:G,nb:ve,mb:Ys(ue,Be),ob:Ce})},Z:(_,x)=>{x=ge(x),he(_,{ub:!0,name:x,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},J:()=>{throw 1/0},aa:(_,x,L,I)=>(_=kg[_],x=bg(x),_(null,x,L,I)),F:_g,$:(_,x,L)=>{var I=Xte(_,x),U=I.shift();_--;var G=Array(_);return x=`methodCaller<(${I.map(ve=>ve.name).join(", ")}) => ${U.name}>`,Kte(ds(x,(ve,ue,Be,Ce)=>{for(var Ne=0,mt=0;mt<_;++mt)G[mt]=I[mt].readValueFromPointer(Ce+Ne),Ne+=I[mt].argPackAdvance;return ue=L===1?Jte(ue,G):ue.apply(ve,G),ve=[],ue=U.toWireType(ve,ue),ve.length&&(b[Be>>2]=Ih(ve)),ue}))},ba:_=>{9<_&&(hr[_+1]+=1)},_:_=>{var x=bg(_);je(x),_g(_)},o:(_,x)=>(_=wg(_,"_emval_take_value"),_=_.readValueFromPointer(x),Ih(_)),W:()=>{N("")},V:()=>performance.now(),L:_=>{var x=k.length;if(_>>>=0,2147483648<_)return!1;for(var L=1;4>=L;L*=2){var I=x*(1+.2/L);I=Math.min(I,_+100663296);var U=Math;I=Math.max(_,I);e:{U=(U.min.call(U,2147483648,I+(65536-I%65536)%65536)-p.buffer.byteLength+65535)/65536;try{p.grow(U),T();var G=1;break e}catch{}G=void 0}if(G)return!0}return!1},S:(_,x)=>{var L=0;return Uk().forEach((I,U)=>{var G=x+L;for(U=b[_+4*U>>2]=G,G=0;G<I.length;++G)S[U++]=I.charCodeAt(G);S[U]=0,L+=I.length+1}),0},T:(_,x)=>{var L=Uk();b[_>>2]=L.length;var I=0;return L.forEach(U=>I+=U.length+1),b[x>>2]=I,0},t:()=>52,z:()=>52,H:function(){return 70},Q:(_,x,L,I)=>{for(var U=0,G=0;G<L;G++){var ve=b[x>>2],ue=b[x+4>>2];x+=8;for(var Be=0;Be<ue;Be++){var Ce=k[ve+Be],Ne=Zte[_];Ce===0||Ce===10?((_===1?u:d)(se(Ne,0)),Ne.length=0):Ne.push(Ce)}U+=ue}return b[I>>2]=U,0},U:(_,x)=>(Hk(k.subarray(_,_+x)),0),i:lse,d:ase,e:ose,p:cse,y:hse,b:ise,a:rse,h:dse,n:use,G:fse,K:(_,x,L,I)=>sse(_,x,L,I)},ns=function(){var L;function _(I){var U;return ns=I.exports,p=ns.da,T(),In=ns.ha,F.unshift(ns.ea),A--,(U=n.monitorRunDependencies)==null||U.call(n,A),A==0&&D&&(I=D,D=null,I()),ns}var x={a:nse};if(A++,(L=n.monitorRunDependencies)==null||L.call(n,A),n.instantiateWasm)try{return n.instantiateWasm(x,_)}catch(I){d(`Module.instantiateWasm callback failed with error: ${I}`),r(I)}return Xe(x,function(I){_(I.instance)}).catch(r),{}}(),Og=_=>(Og=ns.fa)(_),Gk=_=>(Gk=ns.ga)(_),fr=_=>(fr=ns.ia)(_),Kn=(_,x)=>(Kn=ns.ja)(_,x),Xn=_=>(Xn=ns.ka)(_),Jn=()=>(Jn=ns.la)();n.dynCall_iijj=(_,x,L,I,U,G)=>(n.dynCall_iijj=ns.na)(_,x,L,I,U,G),n.dynCall_vijj=(_,x,L,I,U,G)=>(n.dynCall_vijj=ns.oa)(_,x,L,I,U,G),n.dynCall_jiii=(_,x,L,I)=>(n.dynCall_jiii=ns.pa)(_,x,L,I),n.dynCall_jii=(_,x,L)=>(n.dynCall_jii=ns.qa)(_,x,L);var Kk=n.dynCall_viiij=(_,x,L,I,U,G)=>(Kk=n.dynCall_viiij=ns.ra)(_,x,L,I,U,G);n.dynCall_jiji=(_,x,L,I,U)=>(n.dynCall_jiji=ns.sa)(_,x,L,I,U),n.dynCall_viijii=(_,x,L,I,U,G,ve)=>(n.dynCall_viijii=ns.ta)(_,x,L,I,U,G,ve),n.dynCall_iiiiij=(_,x,L,I,U,G,ve)=>(n.dynCall_iiiiij=ns.ua)(_,x,L,I,U,G,ve),n.dynCall_iiiiijj=(_,x,L,I,U,G,ve,ue,Be)=>(n.dynCall_iiiiijj=ns.va)(_,x,L,I,U,G,ve,ue,Be),n.dynCall_iiiiiijj=(_,x,L,I,U,G,ve,ue,Be,Ce)=>(n.dynCall_iiiiiijj=ns.wa)(_,x,L,I,U,G,ve,ue,Be,Ce);function ise(_,x){var L=Jn();try{In.get(_)(x)}catch(I){if(Xn(L),I!==I+0)throw I;Kn(1,0)}}function rse(_,x,L){var I=Jn();try{In.get(_)(x,L)}catch(U){if(Xn(I),U!==U+0)throw U;Kn(1,0)}}function ose(_,x,L,I){var U=Jn();try{return In.get(_)(x,L,I)}catch(G){if(Xn(U),G!==G+0)throw G;Kn(1,0)}}function ase(_,x,L){var I=Jn();try{return In.get(_)(x,L)}catch(U){if(Xn(I),U!==U+0)throw U;Kn(1,0)}}function lse(_,x){var L=Jn();try{return In.get(_)(x)}catch(I){if(Xn(L),I!==I+0)throw I;Kn(1,0)}}function cse(_,x,L,I,U,G){var ve=Jn();try{return In.get(_)(x,L,I,U,G)}catch(ue){if(Xn(ve),ue!==ue+0)throw ue;Kn(1,0)}}function use(_,x,L,I,U){var G=Jn();try{In.get(_)(x,L,I,U)}catch(ve){if(Xn(G),ve!==ve+0)throw ve;Kn(1,0)}}function dse(_,x,L,I){var U=Jn();try{In.get(_)(x,L,I)}catch(G){if(Xn(U),G!==G+0)throw G;Kn(1,0)}}function hse(_){var x=Jn();try{In.get(_)()}catch(L){if(Xn(x),L!==L+0)throw L;Kn(1,0)}}function fse(_,x,L,I,U,G){var ve=Jn();try{Kk(_,x,L,I,U,G)}catch(ue){if(Xn(ve),ue!==ue+0)throw ue;Kn(1,0)}}var Bh;D=function _(){Bh||Xk(),Bh||(D=_)};function Xk(){function _(){if(!Bh&&(Bh=!0,n.calledRun=!0,!g)){if(re(F),i(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;){var x=n.postRun.shift();K.unshift(x)}re(K)}}if(!(0<A)){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)W();re(E),0<A||(n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),_()},1)):_())}}if(n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);0<n.preInit.length;)n.preInit.pop()();return Xk(),o}})(),rY=iY,Lh=class{constructor(){throw new Error("RendererLoader is a static class and cannot be instantiated.")}static async _tryLoad(s){return await rY({locateFile:()=>s})}static async _loadWithBackup(){return this._ModulePromise||(this._ModulePromise=this._tryLoad(this._wasmURL).catch(async s=>{let e=`https://unpkg.com/${Ph.name}@${Ph.version}/dist/dotlottie-player.wasm`;console.warn(`Primary WASM load failed from ${this._wasmURL}. Error: ${s.message}`),console.warn(`Attempting to load WASM from backup URL: ${e}`);try{return await this._tryLoad(e)}catch(t){throw console.error(`Primary WASM URL failed: ${s.message}`),console.error(`Backup WASM URL failed: ${t.message}`),new Error("WASM loading failed from all sources.")}})),this._ModulePromise}static async load(){return this._loadWithBackup()}static setWasmUrl(s){this._wasmURL=s,this._ModulePromise=null}};Ft(Lh,"_ModulePromise",null),Ft(Lh,"_wasmURL",`https://cdn.jsdelivr.net/npm/${Ph.name}@${Ph.version}/dist/dotlottie-player.wasm`);var Pk=class{constructor(){Ft(this,"_eventListeners",new Map)}addEventListener(s,e){let t=this._eventListeners.get(s);t||(t=new Set,this._eventListeners.set(s,t)),t.add(e)}removeEventListener(s,e){let t=this._eventListeners.get(s);t&&(e?(t.delete(e),t.size===0&&this._eventListeners.delete(s)):this._eventListeners.delete(s))}dispatch(s){var e;(e=this._eventListeners.get(s.type))==null||e.forEach(t=>t(s))}removeAllEventListeners(){this._eventListeners.clear()}};function oY(s){return/^#([\da-f]{6}|[\da-f]{8})$/iu.test(s)}function aY(s){if(!oY(s))return 0;let e=s.replace("#","");return e=e.length===6?`${e}ff`:e,parseInt(e,16)}var dg=(s,e)=>s==="reverse"?e.Mode.Reverse:s==="bounce"?e.Mode.Bounce:s==="reverse-bounce"?e.Mode.ReverseBounce:e.Mode.Forward,hg=(s,e)=>s==="contain"?e.Fit.Contain:s==="cover"?e.Fit.Cover:s==="fill"?e.Fit.Fill:s==="fit-height"?e.Fit.FitHeight:s==="fit-width"?e.Fit.FitWidth:e.Fit.None,fg=(s,e)=>{let t=new e.VectorFloat;return t.push_back(s[0]),t.push_back(s[1]),t},pg=(s,e)=>{let t=new e.VectorFloat;return s.length!==2||(t.push_back(s[0]),t.push_back(s[1])),t},Lk=class qt{constructor(e){Ft(this,"_canvas"),Ft(this,"_context",null),Ft(this,"_eventManager"),Ft(this,"_animationFrameId",null),Ft(this,"_frameManager"),Ft(this,"_dotLottieCore",null),Ft(this,"_renderConfig",{}),Ft(this,"_isFrozen",!1),Ft(this,"_backgroundColor",null),this._canvas=e.canvas,this._context=this._canvas.getContext("2d"),this._eventManager=new Pk,this._frameManager=new nY,this._renderConfig=e.renderConfig??{},Lh.load().then(t=>{qt._wasmModule=t,this._dotLottieCore=new t.DotLottiePlayer({autoplay:e.autoplay??!1,backgroundColor:0,loopAnimation:e.loop??!1,mode:dg(e.mode??"forward",t),segment:pg(e.segment??[],t),speed:e.speed??1,useFrameInterpolation:e.useFrameInterpolation??!0,marker:e.marker??"",layout:e.layout?{align:fg(e.layout.align,t),fit:hg(e.layout.fit,t)}:t.createDefaultLayout()}),this._eventManager.dispatch({type:"ready"}),e.data?this._loadFromData(e.data):e.src&&this._loadFromSrc(e.src),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor)}).catch(t=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load wasm module: ${t}`)})})}_loadFromSrc(e){async function t(){let n=await fetch(e);if(!n.ok)throw new Error(`Failed to fetch the animation data from URL: ${e}. ${n.status}: ${n.statusText}`);let i=(n.headers.get("content-type")??"").trim(),r;return["application/json","text/plain"].some(o=>i.startsWith(o))?r=await n.text():r=await n.arrayBuffer(),r}t().then(n=>{this._loadFromData(n)}).catch(n=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load animation data from URL: ${e}. ${n}`)})})}_loadFromData(e){if(this._dotLottieCore===null)return;let t=this._canvas.width,n=this._canvas.height,i=!1;if(typeof e=="string")i=this._dotLottieCore.loadAnimationData(e,t,n);else if(e instanceof ArrayBuffer)i=this._dotLottieCore.loadDotLottieData(e,t,n);else if(typeof e=="object")i=this._dotLottieCore.loadAnimationData(JSON.stringify(e),t,n);else{this._eventManager.dispatch({type:"loadError",error:new Error("Unsupported data type for animation data. Expected a string or ArrayBuffer.")});return}i?(this._eventManager.dispatch({type:"load"}),Bo&&this.resize(),this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._dotLottieCore.config().autoplay&&(this._dotLottieCore.play(),this._dotLottieCore.isPlaying()?(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))):console.error("something went wrong, the animation was suppose to autoplay"))):this._eventManager.dispatch({type:"loadError",error:new Error("Failed to load animation data")})}get activeAnimationId(){var e;return(e=this._dotLottieCore)==null?void 0:e.activeAnimationId()}get activeThemeId(){var e;return(e=this._dotLottieCore)==null?void 0:e.activeThemeId()}get layout(){var t;let e=(t=this._dotLottieCore)==null?void 0:t.config().layout;if(e)return{align:[e.align.get(0),e.align.get(1)],fit:(()=>{var n,i,r,o,a,l;switch(e.fit){case((n=qt._wasmModule)==null?void 0:n.Fit.Contain):return"contain";case((i=qt._wasmModule)==null?void 0:i.Fit.Cover):return"cover";case((r=qt._wasmModule)==null?void 0:r.Fit.Fill):return"fill";case((o=qt._wasmModule)==null?void 0:o.Fit.FitHeight):return"fit-height";case((a=qt._wasmModule)==null?void 0:a.Fit.FitWidth):return"fit-width";case((l=qt._wasmModule)==null?void 0:l.Fit.None):return"none";default:return"contain"}})()}}get marker(){var e;return(e=this._dotLottieCore)==null?void 0:e.config().marker}get manifest(){var e;try{let t=(e=this._dotLottieCore)==null?void 0:e.manifestString();if(this._dotLottieCore===null||!t)return null;let n=JSON.parse(t);return Object.keys(n).length===0?null:n}catch{return null}}get renderConfig(){return this._renderConfig}get segment(){var t;let e=(t=this._dotLottieCore)==null?void 0:t.config().segment;if(e&&e.size()===2)return[e.get(0),e.get(1)]}get loop(){var e;return((e=this._dotLottieCore)==null?void 0:e.config().loopAnimation)??!1}get mode(){var t,n,i,r;let e=(t=this._dotLottieCore)==null?void 0:t.config().mode;return e===((n=qt._wasmModule)==null?void 0:n.Mode.Reverse)?"reverse":e===((i=qt._wasmModule)==null?void 0:i.Mode.Bounce)?"bounce":e===((r=qt._wasmModule)==null?void 0:r.Mode.ReverseBounce)?"reverse-bounce":"forward"}get isFrozen(){return this._isFrozen}get backgroundColor(){return this._backgroundColor??""}get autoplay(){var e;return((e=this._dotLottieCore)==null?void 0:e.config().autoplay)??!1}get useFrameInterpolation(){var e;return((e=this._dotLottieCore)==null?void 0:e.config().useFrameInterpolation)??!1}get speed(){var e;return((e=this._dotLottieCore)==null?void 0:e.config().speed)??0}get isReady(){return this._dotLottieCore!==null}get isLoaded(){var e;return((e=this._dotLottieCore)==null?void 0:e.isLoaded())??!1}get isPlaying(){var e;return((e=this._dotLottieCore)==null?void 0:e.isPlaying())??!1}get isPaused(){var e;return((e=this._dotLottieCore)==null?void 0:e.isPaused())??!1}get isStopped(){var e;return((e=this._dotLottieCore)==null?void 0:e.isStopped())??!1}get currentFrame(){var e;return((e=this._dotLottieCore)==null?void 0:e.currentFrame())??0}get loopCount(){var e;return((e=this._dotLottieCore)==null?void 0:e.loopCount())??0}get totalFrames(){var e;return((e=this._dotLottieCore)==null?void 0:e.totalFrames())??0}get duration(){var e;return((e=this._dotLottieCore)==null?void 0:e.duration())??0}get segmentDuration(){var e;return((e=this._dotLottieCore)==null?void 0:e.segmentDuration())??0}get canvas(){return this._canvas}load(e){this._dotLottieCore===null||qt._wasmModule===null||(this._dotLottieCore.setConfig({autoplay:e.autoplay??!1,backgroundColor:0,loopAnimation:e.loop??!1,mode:dg(e.mode??"forward",qt._wasmModule),segment:pg(e.segment??[],qt._wasmModule),speed:e.speed??1,useFrameInterpolation:e.useFrameInterpolation??!0,marker:e.marker??"",layout:e.layout?{align:fg(e.layout.align,qt._wasmModule),fit:hg(e.layout.fit,qt._wasmModule)}:qt._wasmModule.createDefaultLayout()}),e.data?this._loadFromData(e.data):e.src&&this._loadFromSrc(e.src),this.setBackgroundColor(e.backgroundColor??""))}_render(){if(this._dotLottieCore===null||this._context===null)return!1;if(this._dotLottieCore.render()){let e=this._dotLottieCore.buffer(),t=new Uint8ClampedArray(e,0,this._canvas.width*this._canvas.height*4),n=null;return typeof ImageData>"u"?(n=this._context.createImageData(this._canvas.width,this._canvas.height),n.data.set(t)):n=new ImageData(t,this._canvas.width,this._canvas.height),this._context.putImageData(n,0,0),this._eventManager.dispatch({type:"render",currentFrame:this._dotLottieCore.currentFrame()}),!0}return!1}_draw(){if(this._dotLottieCore===null||this._context===null||!this._dotLottieCore.isPlaying())return;let e=this._dotLottieCore.requestFrame();this._dotLottieCore.setFrame(e)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render()&&this._dotLottieCore.isComplete()&&(this._dotLottieCore.config().loopAnimation?this._eventManager.dispatch({type:"loop",loopCount:this._dotLottieCore.loopCount()}):this._eventManager.dispatch({type:"complete"}))),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))}play(){if(this._dotLottieCore===null)return;let e=this._dotLottieCore.play();this._isFrozen=!1,e&&(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)))}pause(){this._dotLottieCore!==null&&this._dotLottieCore.pause()&&this._eventManager.dispatch({type:"pause"})}stop(){this._dotLottieCore!==null&&this._dotLottieCore.stop()&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._eventManager.dispatch({type:"stop"}))}setFrame(e){this._dotLottieCore===null||e<0||e>this._dotLottieCore.totalFrames()||this._dotLottieCore.seek(e)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render())}setSpeed(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),speed:e})}setBackgroundColor(e){this._dotLottieCore!==null&&(Bo&&this._canvas instanceof HTMLCanvasElement?this._canvas.style.backgroundColor=e:this._dotLottieCore.setConfig({...this._dotLottieCore.config(),backgroundColor:aY(e)}),this._backgroundColor=e)}setLoop(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),loopAnimation:e})}setUseFrameInterpolation(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),useFrameInterpolation:e})}addEventListener(e,t){this._eventManager.addEventListener(e,t)}removeEventListener(e,t){this._eventManager.removeEventListener(e,t)}destroy(){var e;(e=this._dotLottieCore)==null||e.delete(),this._dotLottieCore=null,this._context=null,this._eventManager.dispatch({type:"destroy"}),this._eventManager.removeAllEventListeners(),this._cleanupStateMachineListeners()}freeze(){this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._isFrozen=!0,this._eventManager.dispatch({type:"freeze"}))}unfreeze(){this._animationFrameId===null&&(this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)),this._isFrozen=!1,this._eventManager.dispatch({type:"unfreeze"}))}resize(){var e;if(Bo&&this._canvas instanceof HTMLCanvasElement){let t=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,{height:n,width:i}=this._canvas.getBoundingClientRect();this._canvas.width=i*t,this._canvas.height=n*t}(e=this._dotLottieCore)!=null&&e.resize(this._canvas.width,this._canvas.height)&&this._render()}setSegment(e,t){this._dotLottieCore===null||qt._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),segment:pg([e,t],qt._wasmModule)})}setMode(e){this._dotLottieCore===null||qt._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),mode:dg(e,qt._wasmModule)})}setRenderConfig(e){this._renderConfig=e}loadAnimation(e){this._dotLottieCore===null||this._dotLottieCore.activeAnimationId()===e||(this._dotLottieCore.loadAnimation(e,this._canvas.width,this._canvas.height)?(this._eventManager.dispatch({type:"load"}),this.resize()):this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to animation :${e}`)}))}setMarker(e){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),marker:e})}markers(){var t;let e=(t=this._dotLottieCore)==null?void 0:t.markers();if(e){let n=[];for(let i=0;i<e.size();i+=1){let r=e.get(i);n.push({name:r.name,time:r.time,duration:r.duration})}return n}return[]}loadTheme(e){if(this._dotLottieCore===null)return!1;let t=this._dotLottieCore.loadTheme(e);return this._render(),t}loadThemeData(e){if(this._dotLottieCore===null)return!1;let t=this._dotLottieCore.loadThemeData(e);return this._render(),t}setLayout(e){this._dotLottieCore===null||qt._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),layout:{align:fg(e.align,qt._wasmModule),fit:hg(e.fit,qt._wasmModule)}})}setViewport(e,t,n,i){return this._dotLottieCore===null?!1:this._dotLottieCore.setViewport(e,t,n,i)}static setWasmUrl(e){Lh.setWasmUrl(e)}loadStateMachine(e){var t;return((t=this._dotLottieCore)==null?void 0:t.loadStateMachine(e))??!1}startStateMachine(){var t;let e=((t=this._dotLottieCore)==null?void 0:t.startStateMachine())??!1;return e&&this._setupStateMachineListeners(),e}stopStateMachine(){var t;let e=((t=this._dotLottieCore)==null?void 0:t.stopStateMachine())??!1;return e&&this._cleanupStateMachineListeners(),e}_getPointerPosition(e){let t=this._canvas.getBoundingClientRect(),n=this._canvas.width/t.width,i=this._canvas.height/t.height,r=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,o=(e.clientX-t.left)*n/r,a=(e.clientY-t.top)*i/r;return{x:o,y:a}}_onPointerUp(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerUp: ${t} ${n}`)}_onPointerDown(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerDown: ${t} ${n}`)}_onPointerMove(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerMove: ${t} ${n}`)}_onPointerEnter(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerEnter: ${t} ${n}`)}_onPointerLeave(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerExit: ${t} ${n}`)}_onComplete(){this.postStateMachineEvent("OnComplete")}postStateMachineEvent(e){var t;return((t=this._dotLottieCore)==null?void 0:t.postEventPayload(e))??!1}getStateMachineListeners(){if(!this._dotLottieCore)return[];let e=this._dotLottieCore.stateMachineFrameworkSetup(),t=[];for(let n=0;n<e.size();n+=1)t.push(e.get(n));return t}_setupStateMachineListeners(){if(Bo&&this._canvas instanceof HTMLCanvasElement&&this._dotLottieCore!==null&&this.isLoaded){let e=this.getStateMachineListeners();e.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._onPointerUp.bind(this)),e.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._onPointerDown.bind(this)),e.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._onPointerMove.bind(this)),e.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._onPointerEnter.bind(this)),e.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._onPointerLeave.bind(this)),e.includes("Complete")&&this.addEventListener("complete",this._onComplete.bind(this))}}_cleanupStateMachineListeners(){Bo&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._onPointerUp.bind(this)),this._canvas.removeEventListener("pointerdown",this._onPointerDown.bind(this)),this._canvas.removeEventListener("pointermove",this._onPointerMove.bind(this)),this._canvas.removeEventListener("pointerenter",this._onPointerEnter.bind(this)),this._canvas.removeEventListener("pointerleave",this._onPointerLeave.bind(this)),this.removeEventListener("complete",this._onComplete.bind(this)))}loadStateMachineData(e){var t;return((t=this._dotLottieCore)==null?void 0:t.loadStateMachineData(e))??!1}animationSize(){var n,i;let e=((n=this._dotLottieCore)==null?void 0:n.animationSize().get(0))??0,t=((i=this._dotLottieCore)==null?void 0:i.animationSize().get(1))??0;return{width:e,height:t}}setStateMachineBooleanContext(e,t){var n;return((n=this._dotLottieCore)==null?void 0:n.setStateMachineBooleanContext(e,t))??!1}setStateMachineNumericContext(e,t){var n;return((n=this._dotLottieCore)==null?void 0:n.setStateMachineNumericContext(e,t))??!1}setStateMachineStringContext(e,t){var n;return((n=this._dotLottieCore)==null?void 0:n.setStateMachineStringContext(e,t))??!1}};Ft(Lk,"_wasmModule",null);var lY=Lk,cY='/**\n * This is a worker script for dotlottie.\n * Do not modify this file directly.\n * As it\'s generated by the build process.\n */\n    \nvar Pn=Object.defineProperty;var An=(s,n,a)=>n in s?Pn(s,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[n]=a;var I=(s,n,a)=>An(s,typeof n!="symbol"?n+"":n,a);var Ke=class{requestAnimationFrame(n){return requestAnimationFrame(n)}cancelAnimationFrame(n){cancelAnimationFrame(n);}},Xe=class{constructor(){I(this,"_lastHandleId",0);I(this,"_lastImmediate",null);}requestAnimationFrame(n){return this._lastHandleId>=Number.MAX_SAFE_INTEGER&&(this._lastHandleId=0),this._lastHandleId+=1,this._lastImmediate=setImmediate(()=>{n(Date.now());}),this._lastHandleId}cancelAnimationFrame(n){this._lastImmediate&&clearImmediate(this._lastImmediate);}},Ie=class{constructor(){I(this,"_strategy");this._strategy=typeof requestAnimationFrame=="function"?new Ke:new Xe;}requestAnimationFrame(n){return this._strategy.requestAnimationFrame(n)}cancelAnimationFrame(n){this._strategy.cancelAnimationFrame(n);}};var te=typeof window<"u"&&typeof window.document<"u";var me={name:"@lottiefiles/dotlottie-web",version:"0.28.0",type:"module",description:"Lottie and DotLottie player for the web",repository:{type:"git",url:"git+https://github.com/LottieFiles/dotlottie-web.git",directory:"packages/web"},homepage:"https://github.com/LottieFiles/dotlottie-web#readme",bugs:"https://github.com/LottieFiles/dotlottie-web/issues",author:"LottieFiles",contributors:["Abdelrahman Ashraf <a.theashraf@gmail.com>"],license:"MIT",main:"dist/index.cjs",module:"dist/index.js",types:"dist/index.d.ts",files:["dist"],keywords:["dotlottie","lottie","player","animation","web","canvas","javascript","thorvg"],scripts:{build:"tsup",dev:"tsup --watch",lint:"eslint --fix .","stats:eslint":"cross-env TIMING=1 eslint .","stats:ts":"tsc -p tsconfig.build.json --extendedDiagnostics",test:"vitest run --browser.headless","test:coverage":"vitest run --browser.headless --coverage","test:watch":"vitest","type-check":"tsc --noEmit"},devDependencies:{"@types/node":"^20.10.5","@vitest/browser":"^1.2.2 ","@vitest/coverage-istanbul":"^1.2.2","cross-env":"7.0.3",tsup:"8.1.0",typescript:"5.0.4",vitest:"^1.2.2",webdriverio:"^8.32.0"},publishConfig:{access:"public"}};var Sn=(()=>{var s=typeof document<"u"?document.currentScript?.src:void 0;return function(n={}){var a=n,d,w,T=new Promise((e,t)=>{d=e,w=t;}),W=Object.assign({},a),Y="./this.program",j="";typeof document<"u"&&document.currentScript&&(j=document.currentScript.src),s&&(j=s),j.startsWith("blob:")?j="":j=j.substr(0,j.replace(/[?#].*/,"").lastIndexOf("/")+1);var Wt=a.print||console.log.bind(console),Q=a.printErr||console.error.bind(console);Object.assign(a,W),W=null,a.thisProgram&&(Y=a.thisProgram);var ne;a.wasmBinary&&(ne=a.wasmBinary);var ve,tt=!1,G,L,Z,re,A,b,nt,rt;function at(){var e=ve.buffer;a.HEAP8=G=new Int8Array(e),a.HEAP16=Z=new Int16Array(e),a.HEAPU8=L=new Uint8Array(e),a.HEAPU16=re=new Uint16Array(e),a.HEAP32=A=new Int32Array(e),a.HEAPU32=b=new Uint32Array(e),a.HEAPF32=nt=new Float32Array(e),a.HEAPF64=rt=new Float64Array(e);}var ot=[],it=[],st=[];function jt(){var e=a.preRun.shift();ot.unshift(e);}var N=0,ae=null;function ye(e){throw a.onAbort?.(e),e="Aborted("+e+")",Q(e),tt=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),w(e),e}var lt=e=>e.startsWith("data:application/octet-stream;base64,"),q;if(q="DotLottiePlayer.wasm",!lt(q)){var dt=q;q=a.locateFile?a.locateFile(dt,j):j+dt;}function ut(e){if(e==q&&ne)return new Uint8Array(ne);throw "both async and sync fetching of the wasm failed"}function Bt(e){return ne||typeof fetch!="function"?Promise.resolve().then(()=>ut(e)):fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw `failed to load wasm binary file at \'${e}\'`;return t.arrayBuffer()}).catch(()=>ut(e))}function ct(e,t,r){return Bt(e).then(o=>WebAssembly.instantiate(o,t)).then(r,o=>{Q(`failed to asynchronously prepare wasm: ${o}`),ye(o);})}function Ut(e,t){var r=q;return ne||typeof WebAssembly.instantiateStreaming!="function"||lt(r)||typeof fetch!="function"?ct(r,e,t):fetch(r,{credentials:"same-origin"}).then(o=>WebAssembly.instantiateStreaming(o,e).then(t,function(i){return Q(`wasm streaming compile failed: ${i}`),Q("falling back to ArrayBuffer instantiation"),ct(r,e,t)}))}var Ae=e=>{for(;0<e.length;)e.shift()(a);},ht=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,J=(e,t,r)=>{var o=t+r;for(r=t;e[r]&&!(r>=o);)++r;if(16<r-t&&e.buffer&&ht)return ht.decode(e.subarray(t,r));for(o="";t<r;){var i=e[t++];if(i&128){var l=e[t++]&63;if((i&224)==192)o+=String.fromCharCode((i&31)<<6|l);else {var h=e[t++]&63;i=(i&240)==224?(i&15)<<12|l<<6|h:(i&7)<<18|l<<12|h<<6|e[t++]&63,65536>i?o+=String.fromCharCode(i):(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|i&1023));}}else o+=String.fromCharCode(i);}return o};class Ht{constructor(t){this.ya=t-24;}}var pt=0,mt=e=>{for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);127>=o?t++:2047>=o?t+=2:55296<=o&&57343>=o?(t+=4,++r):t+=3;}return t},ft=(e,t,r,o)=>{if(0<o){o=r+o-1;for(var i=0;i<e.length;++i){var l=e.charCodeAt(i);if(55296<=l&&57343>=l){var h=e.charCodeAt(++i);l=65536+((l&1023)<<10)|h&1023;}if(127>=l){if(r>=o)break;t[r++]=l;}else {if(2047>=l){if(r+1>=o)break;t[r++]=192|l>>6;}else {if(65535>=l){if(r+2>=o)break;t[r++]=224|l>>12;}else {if(r+3>=o)break;t[r++]=240|l>>18,t[r++]=128|l>>12&63;}t[r++]=128|l>>6&63;}t[r++]=128|l&63;}}t[r]=0;}},ge={},Te=e=>{for(;e.length;){var t=e.pop();e.pop()(t);}};function oe(e){return this.fromWireType(b[e>>2])}var ee={},K={},we={},ie,H=(e,t,r)=>{function o(c){if(c=r(c),c.length!==e.length)throw new ie("Mismatched type converter count");for(var m=0;m<e.length;++m)k(e[m],c[m]);}e.forEach(function(c){we[c]=t;});var i=Array(t.length),l=[],h=0;t.forEach((c,m)=>{K.hasOwnProperty(c)?i[m]=K[c]:(l.push(c),ee.hasOwnProperty(c)||(ee[c]=[]),ee[c].push(()=>{i[m]=K[c],++h,h===l.length&&o(i);}));}),l.length===0&&o(i);},vt,P=e=>{for(var t="";L[e];)t+=vt[L[e++]];return t},g;function Yt(e,t,r={}){var o=t.name;if(!e)throw new g(`type "${o}" must have a positive integer typeid pointer`);if(K.hasOwnProperty(e)){if(r.ib)return;throw new g(`Cannot register type \'${o}\' twice`)}K[e]=t,delete we[e],ee.hasOwnProperty(e)&&(t=ee[e],delete ee[e],t.forEach(i=>i()));}function k(e,t,r={}){if(!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Yt(e,t,r)}var Se=e=>{throw new g(e.ma.za.xa.name+" instance already deleted")},Re=!1,yt=()=>{},gt=(e,t,r)=>t===r?e:r.Ca===void 0?null:(e=gt(e,t,r.Ca),e===null?null:r.ab(e)),wt={},se=[],$e=()=>{for(;se.length;){var e=se.pop();e.ma.Ka=!1,e.delete();}},le,de={},Gt=(e,t)=>{if(t===void 0)throw new g("ptr should not be undefined");for(;e.Ca;)t=e.Na(t),e=e.Ca;return de[t]},_e=(e,t)=>{if(!t.za||!t.ya)throw new ie("makeClassHandle requires ptr and ptrType");if(!!t.Da!=!!t.Aa)throw new ie("Both smartPtrType and smartPtr must be specified");return t.count={value:1},ue(Object.create(e,{ma:{value:t,writable:!0}}))},ue=e=>typeof FinalizationRegistry>"u"?(ue=t=>t,e):(Re=new FinalizationRegistry(t=>{t=t.ma,--t.count.value,t.count.value===0&&(t.Aa?t.Da.Fa(t.Aa):t.za.xa.Fa(t.ya));}),ue=t=>{var r=t.ma;return r.Aa&&Re.register(t,{ma:r},t),t},yt=t=>{Re.unregister(t);},ue(e));function Ee(){}var ce=(e,t)=>Object.defineProperty(t,"name",{value:e}),_t=(e,t,r)=>{if(e[t].Ba===void 0){var o=e[t];e[t]=function(...i){if(!e[t].Ba.hasOwnProperty(i.length))throw new g(`Function \'${r}\' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].Ba})!`);return e[t].Ba[i.length].apply(this,i)},e[t].Ba=[],e[t].Ba[o.Oa]=o;}},ke=(e,t,r)=>{if(a.hasOwnProperty(e)){if(r===void 0||a[e].Ba!==void 0&&a[e].Ba[r]!==void 0)throw new g(`Cannot register public name \'${e}\' twice`);if(_t(a,e,e),a.hasOwnProperty(r))throw new g(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`);a[e].Ba[r]=t;}else a[e]=t,r!==void 0&&(a[e].vb=r);},Nt=e=>{if(e===void 0)return "_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return 48<=t&&57>=t?`_${e}`:e};function Jt(e,t,r,o,i,l,h,c){this.name=e,this.constructor=t,this.La=r,this.Fa=o,this.Ca=i,this.cb=l,this.Na=h,this.ab=c,this.kb=[];}var De=(e,t,r)=>{for(;t!==r;){if(!t.Na)throw new g(`Expected null or instance of ${r.name}, got an instance of ${t.name}`);e=t.Na(e),t=t.Ca;}return e};function Kt(e,t){if(t===null){if(this.Ta)throw new g(`null is not a valid ${this.name}`);return 0}if(!t.ma)throw new g(`Cannot pass "${He(t)}" as a ${this.name}`);if(!t.ma.ya)throw new g(`Cannot pass deleted object as a pointer of type ${this.name}`);return De(t.ma.ya,t.ma.za.xa,this.xa)}function Xt(e,t){if(t===null){if(this.Ta)throw new g(`null is not a valid ${this.name}`);if(this.Qa){var r=this.Ua();return e!==null&&e.push(this.Fa,r),r}return 0}if(!t||!t.ma)throw new g(`Cannot pass "${He(t)}" as a ${this.name}`);if(!t.ma.ya)throw new g(`Cannot pass deleted object as a pointer of type ${this.name}`);if(!this.Pa&&t.ma.za.Pa)throw new g(`Cannot convert argument of type ${t.ma.Da?t.ma.Da.name:t.ma.za.name} to parameter type ${this.name}`);if(r=De(t.ma.ya,t.ma.za.xa,this.xa),this.Qa){if(t.ma.Aa===void 0)throw new g("Passing raw pointer to smart pointer is illegal");switch(this.pb){case 0:if(t.ma.Da===this)r=t.ma.Aa;else throw new g(`Cannot convert argument of type ${t.ma.Da?t.ma.Da.name:t.ma.za.name} to parameter type ${this.name}`);break;case 1:r=t.ma.Aa;break;case 2:if(t.ma.Da===this)r=t.ma.Aa;else {var o=t.clone();r=this.lb(r,Me(()=>o.delete())),e!==null&&e.push(this.Fa,r);}break;default:throw new g("Unsupporting sharing policy")}}return r}function Qt(e,t){if(t===null){if(this.Ta)throw new g(`null is not a valid ${this.name}`);return 0}if(!t.ma)throw new g(`Cannot pass "${He(t)}" as a ${this.name}`);if(!t.ma.ya)throw new g(`Cannot pass deleted object as a pointer of type ${this.name}`);if(t.ma.za.Pa)throw new g(`Cannot convert argument of type ${t.ma.za.name} to parameter type ${this.name}`);return De(t.ma.ya,t.ma.za.xa,this.xa)}function he(e,t,r,o,i,l,h,c,m,p,f){this.name=e,this.xa=t,this.Ta=r,this.Pa=o,this.Qa=i,this.jb=l,this.pb=h,this.Za=c,this.Ua=m,this.lb=p,this.Fa=f,i||t.Ca!==void 0?this.toWireType=Xt:(this.toWireType=o?Kt:Qt,this.Ea=null);}var Et=(e,t,r)=>{if(!a.hasOwnProperty(e))throw new ie("Replacing nonexistent public symbol");a[e].Ba!==void 0&&r!==void 0?a[e].Ba[r]=t:(a[e]=t,a[e].Oa=r);},$,Zt=(e,t,r=[])=>(e.includes("j")?(e=e.replace(/p/g,"i"),t=(0, a["dynCall_"+e])(t,...r)):t=$.get(t)(...r),t),qt=(e,t)=>(...r)=>Zt(e,t,r),S=(e,t)=>{e=P(e);var r=e.includes("j")?qt(e,t):$.get(t);if(typeof r!="function")throw new g(`unknown function pointer with signature ${e}: ${t}`);return r},Ct,Mt=e=>{e=St(e);var t=P(e);return U(e),t},Ce=(e,t)=>{function r(l){i[l]||K[l]||(we[l]?we[l].forEach(r):(o.push(l),i[l]=!0));}var o=[],i={};throw t.forEach(r),new Ct(`${e}: `+o.map(Mt).join([", "]))},ze=(e,t)=>{for(var r=[],o=0;o<e;o++)r.push(b[t+4*o>>2]);return r};function en(e){for(var t=1;t<e.length;++t)if(e[t]!==null&&e[t].Ea===void 0)return !0;return !1}function Oe(e,t,r,o,i){var l=t.length;if(2>l)throw new g("argTypes array size mismatch! Must at least get return value and \'this\' types!");var h=t[1]!==null&&r!==null,c=en(t),m=t[0].name!=="void",p=l-2,f=Array(p),_=[],C=[];return ce(e,function(...u){if(u.length!==p)throw new g(`function ${e} called with ${u.length} arguments, expected ${p}`);if(C.length=0,_.length=h?2:1,_[0]=i,h){var v=t[1].toWireType(C,this);_[1]=v;}for(var y=0;y<p;++y)f[y]=t[y+2].toWireType(C,u[y]),_.push(f[y]);if(u=o(..._),c)Te(C);else for(y=h?1:2;y<t.length;y++){var x=y===1?v:f[y-2];t[y].Ea!==null&&t[y].Ea(x);}return v=m?t[0].fromWireType(u):void 0,v})}var bt=e=>{e=e.trim();let t=e.indexOf("(");return t!==-1?e.substr(0,t):e},We=[],B=[],je=e=>{9<e&&--B[e+1]===0&&(B[e]=void 0,We.push(e));},Be=e=>{if(!e)throw new g("Cannot use deleted val. handle = "+e);return B[e]},Me=e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let t=We.pop()||B.length;return B[t]=e,B[t+1]=1,t}},Lt={name:"emscripten::val",fromWireType:e=>{var t=Be(e);return je(e),t},toWireType:(e,t)=>Me(t),argPackAdvance:8,readValueFromPointer:oe,Ea:null},tn=(e,t,r)=>{switch(t){case 1:return r?function(o){return this.fromWireType(G[o])}:function(o){return this.fromWireType(L[o])};case 2:return r?function(o){return this.fromWireType(Z[o>>1])}:function(o){return this.fromWireType(re[o>>1])};case 4:return r?function(o){return this.fromWireType(A[o>>2])}:function(o){return this.fromWireType(b[o>>2])};default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ue=(e,t)=>{var r=K[e];if(r===void 0)throw e=`${t} has unknown type ${Mt(e)}`,new g(e);return r},He=e=>{if(e===null)return "null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e},nn=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(nt[r>>2])};case 8:return function(r){return this.fromWireType(rt[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},rn=(e,t,r)=>{switch(t){case 1:return r?o=>G[o]:o=>L[o];case 2:return r?o=>Z[o>>1]:o=>re[o>>1];case 4:return r?o=>A[o>>2]:o=>b[o>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},Ft=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,an=(e,t)=>{for(var r=e>>1,o=r+t/2;!(r>=o)&&re[r];)++r;if(r<<=1,32<r-e&&Ft)return Ft.decode(L.subarray(e,r));for(r="",o=0;!(o>=t/2);++o){var i=Z[e+2*o>>1];if(i==0)break;r+=String.fromCharCode(i);}return r},on=(e,t,r)=>{if(r??(r=2147483647),2>r)return 0;r-=2;var o=t;r=r<2*e.length?r/2:e.length;for(var i=0;i<r;++i)Z[t>>1]=e.charCodeAt(i),t+=2;return Z[t>>1]=0,t-o},sn=e=>2*e.length,ln=(e,t)=>{for(var r=0,o="";!(r>=t/4);){var i=A[e+4*r>>2];if(i==0)break;++r,65536<=i?(i-=65536,o+=String.fromCharCode(55296|i>>10,56320|i&1023)):o+=String.fromCharCode(i);}return o},dn=(e,t,r)=>{if(r??(r=2147483647),4>r)return 0;var o=t;r=o+r-4;for(var i=0;i<e.length;++i){var l=e.charCodeAt(i);if(55296<=l&&57343>=l){var h=e.charCodeAt(++i);l=65536+((l&1023)<<10)|h&1023;}if(A[t>>2]=l,t+=4,t+4>r)break}return A[t>>2]=0,t-o},un=e=>{for(var t=0,r=0;r<e.length;++r){var o=e.charCodeAt(r);55296<=o&&57343>=o&&++r,t+=4;}return t},Ve=[],cn=e=>{var t=Ve.length;return Ve.push(e),t},hn=(e,t)=>{for(var r=Array(e),o=0;o<e;++o)r[o]=Ue(b[t+4*o>>2],"parameter "+o);return r},pn=Reflect.construct,Ye={},It=()=>{if(!Ge){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Y||"./this.program"},t;for(t in Ye)Ye[t]===void 0?delete e[t]:e[t]=Ye[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Ge=r;}return Ge},Ge,mn=[null,[],[]],fn=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return e=>crypto.getRandomValues(e);ye("initRandomDevice");},xt=e=>(xt=fn())(e),be=e=>e%4===0&&(e%100!==0||e%400===0),Pt=[31,29,31,30,31,30,31,31,30,31,30,31],At=[31,28,31,30,31,30,31,31,30,31,30,31];function vn(e){var t=Array(mt(e)+1);return ft(e,t,0,t.length),t}var yn=(e,t,r,o)=>{function i(u,v,y){for(u=typeof u=="number"?u.toString():u||"";u.length<v;)u=y[0]+u;return u}function l(u,v){return i(u,v,"0")}function h(u,v){function y(V){return 0>V?-1:0<V?1:0}var x;return (x=y(u.getFullYear()-v.getFullYear()))===0&&(x=y(u.getMonth()-v.getMonth()))===0&&(x=y(u.getDate()-v.getDate())),x}function c(u){switch(u.getDay()){case 0:return new Date(u.getFullYear()-1,11,29);case 1:return u;case 2:return new Date(u.getFullYear(),0,3);case 3:return new Date(u.getFullYear(),0,2);case 4:return new Date(u.getFullYear(),0,1);case 5:return new Date(u.getFullYear()-1,11,31);case 6:return new Date(u.getFullYear()-1,11,30)}}function m(u){var v=u.Ia;for(u=new Date(new Date(u.Ja+1900,0,1).getTime());0<v;){var y=u.getMonth(),x=(be(u.getFullYear())?Pt:At)[y];if(v>x-u.getDate())v-=x-u.getDate()+1,u.setDate(1),11>y?u.setMonth(y+1):(u.setMonth(0),u.setFullYear(u.getFullYear()+1));else {u.setDate(u.getDate()+v);break}}return y=new Date(u.getFullYear()+1,0,4),v=c(new Date(u.getFullYear(),0,4)),y=c(y),0>=h(v,u)?0>=h(y,u)?u.getFullYear()+1:u.getFullYear():u.getFullYear()-1}var p=b[o+40>>2];o={sb:A[o>>2],rb:A[o+4>>2],Ra:A[o+8>>2],Va:A[o+12>>2],Sa:A[o+16>>2],Ja:A[o+20>>2],Ga:A[o+24>>2],Ia:A[o+28>>2],wb:A[o+32>>2],qb:A[o+36>>2],tb:p&&p?J(L,p):""},r=r?J(L,r):"",p={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in p)r=r.replace(new RegExp(f,"g"),p[f]);var _="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),C="January February March April May June July August September October November December".split(" ");p={"%a":u=>_[u.Ga].substring(0,3),"%A":u=>_[u.Ga],"%b":u=>C[u.Sa].substring(0,3),"%B":u=>C[u.Sa],"%C":u=>l((u.Ja+1900)/100|0,2),"%d":u=>l(u.Va,2),"%e":u=>i(u.Va,2," "),"%g":u=>m(u).toString().substring(2),"%G":m,"%H":u=>l(u.Ra,2),"%I":u=>(u=u.Ra,u==0?u=12:12<u&&(u-=12),l(u,2)),"%j":u=>{for(var v=0,y=0;y<=u.Sa-1;v+=(be(u.Ja+1900)?Pt:At)[y++]);return l(u.Va+v,3)},"%m":u=>l(u.Sa+1,2),"%M":u=>l(u.rb,2),"%n":()=>`\n`,"%p":u=>0<=u.Ra&&12>u.Ra?"AM":"PM","%S":u=>l(u.sb,2),"%t":()=>"	","%u":u=>u.Ga||7,"%U":u=>l(Math.floor((u.Ia+7-u.Ga)/7),2),"%V":u=>{var v=Math.floor((u.Ia+7-(u.Ga+6)%7)/7);if(2>=(u.Ga+371-u.Ia-2)%7&&v++,v)v==53&&(y=(u.Ga+371-u.Ia)%7,y==4||y==3&&be(u.Ja)||(v=1));else {v=52;var y=(u.Ga+7-u.Ia-1)%7;(y==4||y==5&&be(u.Ja%400-1))&&v++;}return l(v,2)},"%w":u=>u.Ga,"%W":u=>l(Math.floor((u.Ia+7-(u.Ga+6)%7)/7),2),"%y":u=>(u.Ja+1900).toString().substring(2),"%Y":u=>u.Ja+1900,"%z":u=>{u=u.qb;var v=0<=u;return u=Math.abs(u)/60,(v?"+":"-")+("0000"+(u/60*100+u%60)).slice(-4)},"%Z":u=>u.tb,"%%":()=>"%"},r=r.replace(/%%/g,"\\0\\0");for(f in p)r.includes(f)&&(r=r.replace(new RegExp(f,"g"),p[f](o)));return r=r.replace(/\\0\\0/g,"%"),f=vn(r),f.length>t?0:(G.set(f,e),f.length-1)};ie=a.InternalError=class extends Error{constructor(e){super(e),this.name="InternalError";}};for(var Tt=Array(256),Le=0;256>Le;++Le)Tt[Le]=String.fromCharCode(Le);vt=Tt,g=a.BindingError=class extends Error{constructor(e){super(e),this.name="BindingError";}},Object.assign(Ee.prototype,{isAliasOf:function(e){if(!(this instanceof Ee&&e instanceof Ee))return !1;var t=this.ma.za.xa,r=this.ma.ya;e.ma=e.ma;var o=e.ma.za.xa;for(e=e.ma.ya;t.Ca;)r=t.Na(r),t=t.Ca;for(;o.Ca;)e=o.Na(e),o=o.Ca;return t===o&&r===e},clone:function(){if(this.ma.ya||Se(this),this.ma.Ma)return this.ma.count.value+=1,this;var e=ue,t=Object,r=t.create,o=Object.getPrototypeOf(this),i=this.ma;return e=e(r.call(t,o,{ma:{value:{count:i.count,Ka:i.Ka,Ma:i.Ma,ya:i.ya,za:i.za,Aa:i.Aa,Da:i.Da}}})),e.ma.count.value+=1,e.ma.Ka=!1,e},delete(){if(this.ma.ya||Se(this),this.ma.Ka&&!this.ma.Ma)throw new g("Object already scheduled for deletion");yt(this);var e=this.ma;--e.count.value,e.count.value===0&&(e.Aa?e.Da.Fa(e.Aa):e.za.xa.Fa(e.ya)),this.ma.Ma||(this.ma.Aa=void 0,this.ma.ya=void 0);},isDeleted:function(){return !this.ma.ya},deleteLater:function(){if(this.ma.ya||Se(this),this.ma.Ka&&!this.ma.Ma)throw new g("Object already scheduled for deletion");return se.push(this),se.length===1&&le&&le($e),this.ma.Ka=!0,this}}),a.getInheritedInstanceCount=()=>Object.keys(de).length,a.getLiveInheritedInstances=()=>{var e=[],t;for(t in de)de.hasOwnProperty(t)&&e.push(de[t]);return e},a.flushPendingDeletes=$e,a.setDelayFunction=e=>{le=e,se.length&&le&&le($e);},Object.assign(he.prototype,{eb(e){return this.Za&&(e=this.Za(e)),e},Xa(e){this.Fa?.(e);},argPackAdvance:8,readValueFromPointer:oe,fromWireType:function(e){function t(){return this.Qa?_e(this.xa.La,{za:this.jb,ya:r,Da:this,Aa:e}):_e(this.xa.La,{za:this,ya:e})}var r=this.eb(e);if(!r)return this.Xa(e),null;var o=Gt(this.xa,r);if(o!==void 0)return o.ma.count.value===0?(o.ma.ya=r,o.ma.Aa=e,o.clone()):(o=o.clone(),this.Xa(e),o);if(o=this.xa.cb(r),o=wt[o],!o)return t.call(this);o=this.Pa?o.$a:o.pointerType;var i=gt(r,this.xa,o.xa);return i===null?t.call(this):this.Qa?_e(o.xa.La,{za:o,ya:i,Da:this,Aa:e}):_e(o.xa.La,{za:o,ya:i})}}),Ct=a.UnboundTypeError=((e,t)=>{var r=ce(t,function(o){this.name=t,this.message=o,o=Error(o).stack,o!==void 0&&(this.stack=this.toString()+`\n`+o.replace(/^Error(:[^\\n]*)?\\n/,""));});return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},r})(Error,"UnboundTypeError"),B.push(0,1,void 0,1,null,1,!0,1,!1,1),a.count_emval_handles=()=>B.length/2-5-We.length;var gn={c:(e,t,r,o)=>{ye(`Assertion failed: ${e?J(L,e):""}, at: `+[t?t?J(L,t):"":"unknown filename",r,o?o?J(L,o):"":"unknown function"]);},m:(e,t,r)=>{var o=new Ht(e);throw b[o.ya+16>>2]=0,b[o.ya+4>>2]=t,b[o.ya+8>>2]=r,pt=e,pt},B:function(){return 0},P:()=>{},M:()=>{},R:function(){return 0},N:()=>{},A:function(){},O:()=>{},v:e=>{var t=ge[e];delete ge[e];var r=t.Ua,o=t.Fa,i=t.Ya,l=i.map(h=>h.hb).concat(i.map(h=>h.nb));H([e],l,h=>{var c={};return i.forEach((m,p)=>{var f=h[p],_=m.fb,C=m.gb,u=h[p+i.length],v=m.mb,y=m.ob;c[m.bb]={read:x=>f.fromWireType(_(C,x)),write:(x,V)=>{var R=[];v(y,x,u.toWireType(R,V)),Te(R);}};}),[{name:t.name,fromWireType:m=>{var p={},f;for(f in c)p[f]=c[f].read(m);return o(m),p},toWireType:(m,p)=>{for(var f in c)if(!(f in p))throw new TypeError(`Missing field: "${f}"`);var _=r();for(f in c)c[f].write(_,p[f]);return m!==null&&m.push(o,_),_},argPackAdvance:8,readValueFromPointer:oe,Ea:o}]});},I:()=>{},Y:(e,t,r,o)=>{t=P(t),k(e,{name:t,fromWireType:function(i){return !!i},toWireType:function(i,l){return l?r:o},argPackAdvance:8,readValueFromPointer:function(i){return this.fromWireType(L[i])},Ea:null});},r:(e,t,r,o,i,l,h,c,m,p,f,_,C)=>{f=P(f),l=S(i,l),c&&(c=S(h,c)),p&&(p=S(m,p)),C=S(_,C);var u=Nt(f);ke(u,function(){Ce(`Cannot construct ${f} due to unbound types`,[o]);}),H([e,t,r],o?[o]:[],v=>{if(v=v[0],o)var y=v.xa,x=y.La;else x=Ee.prototype;v=ce(f,function(...Je){if(Object.getPrototypeOf(this)!==V)throw new g("Use \'new\' to construct "+f);if(R.Ha===void 0)throw new g(f+" has no accessible constructor");var kt=R.Ha[Je.length];if(kt===void 0)throw new g(`Tried to invoke ctor of ${f} with invalid number of parameters (${Je.length}) - expected (${Object.keys(R.Ha).toString()}) parameters instead!`);return kt.apply(this,Je)});var V=Object.create(x,{constructor:{value:v}});v.prototype=V;var R=new Jt(f,v,V,C,y,l,c,p);if(R.Ca){var pe;(pe=R.Ca).Wa??(pe.Wa=[]),R.Ca.Wa.push(R);}return y=new he(f,R,!0,!1,!1),pe=new he(f+"*",R,!1,!1,!1),x=new he(f+" const*",R,!1,!0,!1),wt[e]={pointerType:pe,$a:x},Et(u,v),[y,pe,x]});},q:(e,t,r,o,i,l)=>{var h=ze(t,r);i=S(o,i),H([],[e],c=>{c=c[0];var m=`constructor ${c.name}`;if(c.xa.Ha===void 0&&(c.xa.Ha=[]),c.xa.Ha[t-1]!==void 0)throw new g(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class \'${c.name}\'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return c.xa.Ha[t-1]=()=>{Ce(`Cannot construct ${c.name} due to unbound types`,h);},H([],h,p=>(p.splice(1,0,null),c.xa.Ha[t-1]=Oe(m,p,null,i,l),[])),[]});},f:(e,t,r,o,i,l,h,c)=>{var m=ze(r,o);t=P(t),t=bt(t),l=S(i,l),H([],[e],p=>{function f(){Ce(`Cannot call ${_} due to unbound types`,m);}p=p[0];var _=`${p.name}.${t}`;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),c&&p.xa.kb.push(t);var C=p.xa.La,u=C[t];return u===void 0||u.Ba===void 0&&u.className!==p.name&&u.Oa===r-2?(f.Oa=r-2,f.className=p.name,C[t]=f):(_t(C,t,_),C[t].Ba[r-2]=f),H([],m,v=>(v=Oe(_,v,p,l,h),C[t].Ba===void 0?(v.Oa=r-2,C[t]=v):C[t].Ba[r-2]=v,[])),[]});},X:e=>k(e,Lt),x:(e,t,r,o)=>{function i(){}t=P(t),i.values={},k(e,{name:t,constructor:i,fromWireType:function(l){return this.constructor.values[l]},toWireType:(l,h)=>h.value,argPackAdvance:8,readValueFromPointer:tn(t,r,o),Ea:null}),ke(t,i);},k:(e,t,r)=>{var o=Ue(e,"enum");t=P(t),e=o.constructor,o=Object.create(o.constructor.prototype,{value:{value:r},constructor:{value:ce(`${o.name}_${t}`,function(){})}}),e.values[r]=o,e[t]=o;},C:(e,t,r)=>{t=P(t),k(e,{name:t,fromWireType:o=>o,toWireType:(o,i)=>i,argPackAdvance:8,readValueFromPointer:nn(t,r),Ea:null});},E:(e,t,r,o,i,l)=>{var h=ze(t,r);e=P(e),e=bt(e),i=S(o,i),ke(e,function(){Ce(`Cannot call ${e} due to unbound types`,h);},t-1),H([],h,c=>(Et(e,Oe(e,[c[0],null].concat(c.slice(1)),null,i,l),t-1),[]));},l:(e,t,r,o,i)=>{if(t=P(t),i===-1&&(i=4294967295),i=c=>c,o===0){var l=32-8*r;i=c=>c<<l>>>l;}var h=t.includes("unsigned")?function(c,m){return m>>>0}:function(c,m){return m};k(e,{name:t,fromWireType:i,toWireType:h,argPackAdvance:8,readValueFromPointer:rn(t,r,o!==0),Ea:null});},g:(e,t,r)=>{function o(l){return new i(G.buffer,b[l+4>>2],b[l>>2])}var i=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];r=P(r),k(e,{name:r,fromWireType:o,argPackAdvance:8,readValueFromPointer:o},{ib:!0});},w:e=>{k(e,Lt);},ca:(e,t,r,o,i,l,h,c,m,p,f,_)=>{r=P(r),l=S(i,l),c=S(h,c),p=S(m,p),_=S(f,_),H([e],[t],C=>(C=C[0],[new he(r,C.xa,!1,!1,!0,C,o,l,c,p,_)]));},D:(e,t)=>{t=P(t);var r=t==="std::string";k(e,{name:t,fromWireType:function(o){var i=b[o>>2],l=o+4;if(r)for(var h=l,c=0;c<=i;++c){var m=l+c;if(c==i||L[m]==0){if(h=h?J(L,h,m-h):"",p===void 0)var p=h;else p+="\\0",p+=h;h=m+1;}}else {for(p=Array(i),c=0;c<i;++c)p[c]=String.fromCharCode(L[l+c]);p=p.join("");}return U(o),p},toWireType:function(o,i){i instanceof ArrayBuffer&&(i=new Uint8Array(i));var l=typeof i=="string";if(!(l||i instanceof Uint8Array||i instanceof Uint8ClampedArray||i instanceof Int8Array))throw new g("Cannot pass non-string to std::string");var h=r&&l?mt(i):i.length,c=Ne(4+h+1),m=c+4;if(b[c>>2]=h,r&&l)ft(i,L,m,h+1);else if(l)for(l=0;l<h;++l){var p=i.charCodeAt(l);if(255<p)throw U(m),new g("String has UTF-16 code units that do not fit in 8 bits");L[m+l]=p;}else for(l=0;l<h;++l)L[m+l]=i[l];return o!==null&&o.push(U,c),c},argPackAdvance:8,readValueFromPointer:oe,Ea(o){U(o);}});},u:(e,t,r)=>{if(r=P(r),t===2)var o=an,i=on,l=sn,h=c=>re[c>>1];else t===4&&(o=ln,i=dn,l=un,h=c=>b[c>>2]);k(e,{name:r,fromWireType:c=>{for(var m=b[c>>2],p,f=c+4,_=0;_<=m;++_){var C=c+4+_*t;(_==m||h(C)==0)&&(f=o(f,C-f),p===void 0?p=f:(p+="\\0",p+=f),f=C+t);}return U(c),p},toWireType:(c,m)=>{if(typeof m!="string")throw new g(`Cannot pass non-string to C++ string type ${r}`);var p=l(m),f=Ne(4+p+t);return b[f>>2]=p/t,i(m,f+4,p+t),c!==null&&c.push(U,f),f},argPackAdvance:8,readValueFromPointer:oe,Ea(c){U(c);}});},s:(e,t,r,o,i,l)=>{ge[e]={name:P(t),Ua:S(r,o),Fa:S(i,l),Ya:[]};},j:(e,t,r,o,i,l,h,c,m,p)=>{ge[e].Ya.push({bb:P(t),hb:r,fb:S(o,i),gb:l,nb:h,mb:S(c,m),ob:p});},Z:(e,t)=>{t=P(t),k(e,{ub:!0,name:t,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}});},J:()=>{throw 1/0},aa:(e,t,r,o)=>(e=Ve[e],t=Be(t),e(null,t,r,o)),F:je,$:(e,t,r)=>{var o=hn(e,t),i=o.shift();e--;var l=Array(e);return t=`methodCaller<(${o.map(h=>h.name).join(", ")}) => ${i.name}>`,cn(ce(t,(h,c,m,p)=>{for(var f=0,_=0;_<e;++_)l[_]=o[_].readValueFromPointer(p+f),f+=o[_].argPackAdvance;return c=r===1?pn(c,l):c.apply(h,l),h=[],c=i.toWireType(h,c),h.length&&(b[m>>2]=Me(h)),c}))},ba:e=>{9<e&&(B[e+1]+=1);},_:e=>{var t=Be(e);Te(t),je(e);},o:(e,t)=>(e=Ue(e,"_emval_take_value"),e=e.readValueFromPointer(t),Me(e)),W:()=>{ye("");},V:()=>performance.now(),L:e=>{var t=L.length;if(e>>>=0,2147483648<e)return !1;for(var r=1;4>=r;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var i=Math;o=Math.max(e,o);e:{i=(i.min.call(i,2147483648,o+(65536-o%65536)%65536)-ve.buffer.byteLength+65535)/65536;try{ve.grow(i),at();var l=1;break e}catch{}l=void 0;}if(l)return !0}return !1},S:(e,t)=>{var r=0;return It().forEach((o,i)=>{var l=t+r;for(i=b[e+4*i>>2]=l,l=0;l<o.length;++l)G[i++]=o.charCodeAt(l);G[i]=0,r+=o.length+1;}),0},T:(e,t)=>{var r=It();b[e>>2]=r.length;var o=0;return r.forEach(i=>o+=i.length+1),b[t>>2]=o,0},t:()=>52,z:()=>52,H:function(){return 70},Q:(e,t,r,o)=>{for(var i=0,l=0;l<r;l++){var h=b[t>>2],c=b[t+4>>2];t+=8;for(var m=0;m<c;m++){var p=L[h+m],f=mn[e];p===0||p===10?((e===1?Wt:Q)(J(f,0)),f.length=0):f.push(p);}i+=c;}return b[o>>2]=i,0},U:(e,t)=>(xt(L.subarray(e,e+t)),0),i:Mn,d:Cn,e:En,p:bn,y:In,b:wn,a:_n,h:Fn,n:Ln,G:xn,K:(e,t,r,o)=>yn(e,t,r,o)},F=function(){function e(r){return F=r.exports,ve=F.da,at(),$=F.ha,it.unshift(F.ea),N--,a.monitorRunDependencies?.(N),N==0&&(ae&&(r=ae,ae=null,r())),F}var t={a:gn};if(N++,a.monitorRunDependencies?.(N),a.instantiateWasm)try{return a.instantiateWasm(t,e)}catch(r){Q(`Module.instantiateWasm callback failed with error: ${r}`),w(r);}return Ut(t,function(r){e(r.instance);}).catch(w),{}}(),Ne=e=>(Ne=F.fa)(e),St=e=>(St=F.ga)(e),U=e=>(U=F.ia)(e),D=(e,t)=>(D=F.ja)(e,t),z=e=>(z=F.ka)(e),O=()=>(O=F.la)();a.dynCall_iijj=(e,t,r,o,i,l)=>(a.dynCall_iijj=F.na)(e,t,r,o,i,l),a.dynCall_vijj=(e,t,r,o,i,l)=>(a.dynCall_vijj=F.oa)(e,t,r,o,i,l),a.dynCall_jiii=(e,t,r,o)=>(a.dynCall_jiii=F.pa)(e,t,r,o),a.dynCall_jii=(e,t,r)=>(a.dynCall_jii=F.qa)(e,t,r);var Rt=a.dynCall_viiij=(e,t,r,o,i,l)=>(Rt=a.dynCall_viiij=F.ra)(e,t,r,o,i,l);a.dynCall_jiji=(e,t,r,o,i)=>(a.dynCall_jiji=F.sa)(e,t,r,o,i),a.dynCall_viijii=(e,t,r,o,i,l,h)=>(a.dynCall_viijii=F.ta)(e,t,r,o,i,l,h),a.dynCall_iiiiij=(e,t,r,o,i,l,h)=>(a.dynCall_iiiiij=F.ua)(e,t,r,o,i,l,h),a.dynCall_iiiiijj=(e,t,r,o,i,l,h,c,m)=>(a.dynCall_iiiiijj=F.va)(e,t,r,o,i,l,h,c,m),a.dynCall_iiiiiijj=(e,t,r,o,i,l,h,c,m,p)=>(a.dynCall_iiiiiijj=F.wa)(e,t,r,o,i,l,h,c,m,p);function wn(e,t){var r=O();try{$.get(e)(t);}catch(o){if(z(r),o!==o+0)throw o;D(1,0);}}function _n(e,t,r){var o=O();try{$.get(e)(t,r);}catch(i){if(z(o),i!==i+0)throw i;D(1,0);}}function En(e,t,r,o){var i=O();try{return $.get(e)(t,r,o)}catch(l){if(z(i),l!==l+0)throw l;D(1,0);}}function Cn(e,t,r){var o=O();try{return $.get(e)(t,r)}catch(i){if(z(o),i!==i+0)throw i;D(1,0);}}function Mn(e,t){var r=O();try{return $.get(e)(t)}catch(o){if(z(r),o!==o+0)throw o;D(1,0);}}function bn(e,t,r,o,i,l){var h=O();try{return $.get(e)(t,r,o,i,l)}catch(c){if(z(h),c!==c+0)throw c;D(1,0);}}function Ln(e,t,r,o,i){var l=O();try{$.get(e)(t,r,o,i);}catch(h){if(z(l),h!==h+0)throw h;D(1,0);}}function Fn(e,t,r,o){var i=O();try{$.get(e)(t,r,o);}catch(l){if(z(i),l!==l+0)throw l;D(1,0);}}function In(e){var t=O();try{$.get(e)();}catch(r){if(z(t),r!==r+0)throw r;D(1,0);}}function xn(e,t,r,o,i,l){var h=O();try{Rt(e,t,r,o,i,l);}catch(c){if(z(h),c!==c+0)throw c;D(1,0);}}var Fe;ae=function e(){Fe||$t(),Fe||(ae=e);};function $t(){function e(){if(!Fe&&(Fe=!0,a.calledRun=!0,!tt)){if(Ae(it),d(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;){var t=a.postRun.shift();st.unshift(t);}Ae(st);}}if(!(0<N)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)jt();Ae(ot),0<N||(a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("");},1),e();},1)):e());}}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);0<a.preInit.length;)a.preInit.pop()();return $t(),T}})(),Dt=Sn;var X=class{constructor(){throw new Error("RendererLoader is a static class and cannot be instantiated.")}static async _tryLoad(n){return await Dt({locateFile:()=>n})}static async _loadWithBackup(){return this._ModulePromise||(this._ModulePromise=this._tryLoad(this._wasmURL).catch(async n=>{let a=`https://unpkg.com/${me.name}@${me.version}/dist/dotlottie-player.wasm`;console.warn(`Primary WASM load failed from ${this._wasmURL}. Error: ${n.message}`),console.warn(`Attempting to load WASM from backup URL: ${a}`);try{return await this._tryLoad(a)}catch(d){throw console.error(`Primary WASM URL failed: ${n.message}`),console.error(`Backup WASM URL failed: ${d.message}`),new Error("WASM loading failed from all sources.")}})),this._ModulePromise}static async load(){return this._loadWithBackup()}static setWasmUrl(n){this._wasmURL=n,this._ModulePromise=null;}};I(X,"_ModulePromise",null),I(X,"_wasmURL",`https://cdn.jsdelivr.net/npm/${me.name}@${me.version}/dist/dotlottie-player.wasm`);var xe=class{constructor(){I(this,"_eventListeners",new Map);}addEventListener(n,a){let d=this._eventListeners.get(n);d||(d=new Set,this._eventListeners.set(n,d)),d.add(a);}removeEventListener(n,a){let d=this._eventListeners.get(n);d&&(a?(d.delete(a),d.size===0&&this._eventListeners.delete(n)):this._eventListeners.delete(n));}dispatch(n){this._eventListeners.get(n.type)?.forEach(d=>d(n));}removeAllEventListeners(){this._eventListeners.clear();}};function Rn(s){return /^#([\\da-f]{6}|[\\da-f]{8})$/iu.test(s)}function zt(s){if(!Rn(s))return 0;let n=s.replace("#","");return n=n.length===6?`${n}ff`:n,parseInt(n,16)}var Qe=(s,n)=>s==="reverse"?n.Mode.Reverse:s==="bounce"?n.Mode.Bounce:s==="reverse-bounce"?n.Mode.ReverseBounce:n.Mode.Forward,Ze=(s,n)=>s==="contain"?n.Fit.Contain:s==="cover"?n.Fit.Cover:s==="fill"?n.Fit.Fill:s==="fit-height"?n.Fit.FitHeight:s==="fit-width"?n.Fit.FitWidth:n.Fit.None,qe=(s,n)=>{let a=new n.VectorFloat;return a.push_back(s[0]),a.push_back(s[1]),a},et=(s,n)=>{let a=new n.VectorFloat;return s.length!==2||(a.push_back(s[0]),a.push_back(s[1])),a},M=class M{constructor(n){I(this,"_canvas");I(this,"_context",null);I(this,"_eventManager");I(this,"_animationFrameId",null);I(this,"_frameManager");I(this,"_dotLottieCore",null);I(this,"_renderConfig",{});I(this,"_isFrozen",!1);I(this,"_backgroundColor",null);this._canvas=n.canvas,this._context=this._canvas.getContext("2d"),this._eventManager=new xe,this._frameManager=new Ie,this._renderConfig=n.renderConfig??{},X.load().then(a=>{M._wasmModule=a,this._dotLottieCore=new a.DotLottiePlayer({autoplay:n.autoplay??!1,backgroundColor:0,loopAnimation:n.loop??!1,mode:Qe(n.mode??"forward",a),segment:et(n.segment??[],a),speed:n.speed??1,useFrameInterpolation:n.useFrameInterpolation??!0,marker:n.marker??"",layout:n.layout?{align:qe(n.layout.align,a),fit:Ze(n.layout.fit,a)}:a.createDefaultLayout()}),this._eventManager.dispatch({type:"ready"}),n.data?this._loadFromData(n.data):n.src&&this._loadFromSrc(n.src),n.backgroundColor&&this.setBackgroundColor(n.backgroundColor);}).catch(a=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load wasm module: ${a}`)});});}_loadFromSrc(n){async function a(){let d=await fetch(n);if(!d.ok)throw new Error(`Failed to fetch the animation data from URL: ${n}. ${d.status}: ${d.statusText}`);let w=(d.headers.get("content-type")??"").trim(),T;return ["application/json","text/plain"].some(W=>w.startsWith(W))?T=await d.text():T=await d.arrayBuffer(),T}a().then(d=>{this._loadFromData(d);}).catch(d=>{this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to load animation data from URL: ${n}. ${d}`)});});}_loadFromData(n){if(this._dotLottieCore===null)return;let a=this._canvas.width,d=this._canvas.height,w=!1;if(typeof n=="string")w=this._dotLottieCore.loadAnimationData(n,a,d);else if(n instanceof ArrayBuffer)w=this._dotLottieCore.loadDotLottieData(n,a,d);else if(typeof n=="object")w=this._dotLottieCore.loadAnimationData(JSON.stringify(n),a,d);else {this._eventManager.dispatch({type:"loadError",error:new Error("Unsupported data type for animation data. Expected a string or ArrayBuffer.")});return}w?(this._eventManager.dispatch({type:"load"}),te&&this.resize(),this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._dotLottieCore.config().autoplay&&(this._dotLottieCore.play(),this._dotLottieCore.isPlaying()?(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this))):console.error("something went wrong, the animation was suppose to autoplay"))):this._eventManager.dispatch({type:"loadError",error:new Error("Failed to load animation data")});}get activeAnimationId(){return this._dotLottieCore?.activeAnimationId()}get activeThemeId(){return this._dotLottieCore?.activeThemeId()}get layout(){let n=this._dotLottieCore?.config().layout;if(n)return {align:[n.align.get(0),n.align.get(1)],fit:(()=>{switch(n.fit){case M._wasmModule?.Fit.Contain:return "contain";case M._wasmModule?.Fit.Cover:return "cover";case M._wasmModule?.Fit.Fill:return "fill";case M._wasmModule?.Fit.FitHeight:return "fit-height";case M._wasmModule?.Fit.FitWidth:return "fit-width";case M._wasmModule?.Fit.None:return "none";default:return "contain"}})()}}get marker(){return this._dotLottieCore?.config().marker}get manifest(){try{let n=this._dotLottieCore?.manifestString();if(this._dotLottieCore===null||!n)return null;let a=JSON.parse(n);return Object.keys(a).length===0?null:a}catch{return null}}get renderConfig(){return this._renderConfig}get segment(){let n=this._dotLottieCore?.config().segment;if(n&&n.size()===2)return [n.get(0),n.get(1)]}get loop(){return this._dotLottieCore?.config().loopAnimation??!1}get mode(){let n=this._dotLottieCore?.config().mode;return n===M._wasmModule?.Mode.Reverse?"reverse":n===M._wasmModule?.Mode.Bounce?"bounce":n===M._wasmModule?.Mode.ReverseBounce?"reverse-bounce":"forward"}get isFrozen(){return this._isFrozen}get backgroundColor(){return this._backgroundColor??""}get autoplay(){return this._dotLottieCore?.config().autoplay??!1}get useFrameInterpolation(){return this._dotLottieCore?.config().useFrameInterpolation??!1}get speed(){return this._dotLottieCore?.config().speed??0}get isReady(){return this._dotLottieCore!==null}get isLoaded(){return this._dotLottieCore?.isLoaded()??!1}get isPlaying(){return this._dotLottieCore?.isPlaying()??!1}get isPaused(){return this._dotLottieCore?.isPaused()??!1}get isStopped(){return this._dotLottieCore?.isStopped()??!1}get currentFrame(){return this._dotLottieCore?.currentFrame()??0}get loopCount(){return this._dotLottieCore?.loopCount()??0}get totalFrames(){return this._dotLottieCore?.totalFrames()??0}get duration(){return this._dotLottieCore?.duration()??0}get segmentDuration(){return this._dotLottieCore?.segmentDuration()??0}get canvas(){return this._canvas}load(n){this._dotLottieCore===null||M._wasmModule===null||(this._dotLottieCore.setConfig({autoplay:n.autoplay??!1,backgroundColor:0,loopAnimation:n.loop??!1,mode:Qe(n.mode??"forward",M._wasmModule),segment:et(n.segment??[],M._wasmModule),speed:n.speed??1,useFrameInterpolation:n.useFrameInterpolation??!0,marker:n.marker??"",layout:n.layout?{align:qe(n.layout.align,M._wasmModule),fit:Ze(n.layout.fit,M._wasmModule)}:M._wasmModule.createDefaultLayout()}),n.data?this._loadFromData(n.data):n.src&&this._loadFromSrc(n.src),this.setBackgroundColor(n.backgroundColor??""));}_render(){if(this._dotLottieCore===null||this._context===null)return !1;if(this._dotLottieCore.render()){let a=this._dotLottieCore.buffer(),d=new Uint8ClampedArray(a,0,this._canvas.width*this._canvas.height*4),w=null;return typeof ImageData>"u"?(w=this._context.createImageData(this._canvas.width,this._canvas.height),w.data.set(d)):w=new ImageData(d,this._canvas.width,this._canvas.height),this._context.putImageData(w,0,0),this._eventManager.dispatch({type:"render",currentFrame:this._dotLottieCore.currentFrame()}),!0}return !1}_draw(){if(this._dotLottieCore===null||this._context===null||!this._dotLottieCore.isPlaying())return;let n=this._dotLottieCore.requestFrame();this._dotLottieCore.setFrame(n)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render()&&this._dotLottieCore.isComplete()&&(this._dotLottieCore.config().loopAnimation?this._eventManager.dispatch({type:"loop",loopCount:this._dotLottieCore.loopCount()}):this._eventManager.dispatch({type:"complete"}))),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this));}play(){if(this._dotLottieCore===null)return;let n=this._dotLottieCore.play();this._isFrozen=!1,n&&(this._eventManager.dispatch({type:"play"}),this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)));}pause(){if(this._dotLottieCore===null)return;this._dotLottieCore.pause()&&this._eventManager.dispatch({type:"pause"});}stop(){if(this._dotLottieCore===null)return;this._dotLottieCore.stop()&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render(),this._eventManager.dispatch({type:"stop"}));}setFrame(n){if(this._dotLottieCore===null||n<0||n>this._dotLottieCore.totalFrames())return;this._dotLottieCore.seek(n)&&(this._eventManager.dispatch({type:"frame",currentFrame:this._dotLottieCore.currentFrame()}),this._render());}setSpeed(n){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),speed:n});}setBackgroundColor(n){this._dotLottieCore!==null&&(te&&this._canvas instanceof HTMLCanvasElement?this._canvas.style.backgroundColor=n:this._dotLottieCore.setConfig({...this._dotLottieCore.config(),backgroundColor:zt(n)}),this._backgroundColor=n);}setLoop(n){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),loopAnimation:n});}setUseFrameInterpolation(n){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),useFrameInterpolation:n});}addEventListener(n,a){this._eventManager.addEventListener(n,a);}removeEventListener(n,a){this._eventManager.removeEventListener(n,a);}destroy(){this._dotLottieCore?.delete(),this._dotLottieCore=null,this._context=null,this._eventManager.dispatch({type:"destroy"}),this._eventManager.removeAllEventListeners(),this._cleanupStateMachineListeners();}freeze(){this._animationFrameId!==null&&(this._frameManager.cancelAnimationFrame(this._animationFrameId),this._animationFrameId=null,this._isFrozen=!0,this._eventManager.dispatch({type:"freeze"}));}unfreeze(){this._animationFrameId===null&&(this._animationFrameId=this._frameManager.requestAnimationFrame(this._draw.bind(this)),this._isFrozen=!1,this._eventManager.dispatch({type:"unfreeze"}));}resize(){if(te&&this._canvas instanceof HTMLCanvasElement){let a=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,{height:d,width:w}=this._canvas.getBoundingClientRect();this._canvas.width=w*a,this._canvas.height=d*a;}this._dotLottieCore?.resize(this._canvas.width,this._canvas.height)&&this._render();}setSegment(n,a){this._dotLottieCore===null||M._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),segment:et([n,a],M._wasmModule)});}setMode(n){this._dotLottieCore===null||M._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),mode:Qe(n,M._wasmModule)});}setRenderConfig(n){this._renderConfig=n;}loadAnimation(n){if(this._dotLottieCore===null||this._dotLottieCore.activeAnimationId()===n)return;this._dotLottieCore.loadAnimation(n,this._canvas.width,this._canvas.height)?(this._eventManager.dispatch({type:"load"}),this.resize()):this._eventManager.dispatch({type:"loadError",error:new Error(`Failed to animation :${n}`)});}setMarker(n){this._dotLottieCore!==null&&this._dotLottieCore.setConfig({...this._dotLottieCore.config(),marker:n});}markers(){let n=this._dotLottieCore?.markers();if(n){let a=[];for(let d=0;d<n.size();d+=1){let w=n.get(d);a.push({name:w.name,time:w.time,duration:w.duration});}return a}return []}loadTheme(n){if(this._dotLottieCore===null)return !1;let a=this._dotLottieCore.loadTheme(n);return this._render(),a}loadThemeData(n){if(this._dotLottieCore===null)return !1;let a=this._dotLottieCore.loadThemeData(n);return this._render(),a}setLayout(n){this._dotLottieCore===null||M._wasmModule===null||this._dotLottieCore.setConfig({...this._dotLottieCore.config(),layout:{align:qe(n.align,M._wasmModule),fit:Ze(n.fit,M._wasmModule)}});}setViewport(n,a,d,w){return this._dotLottieCore===null?!1:this._dotLottieCore.setViewport(n,a,d,w)}static setWasmUrl(n){X.setWasmUrl(n);}loadStateMachine(n){return this._dotLottieCore?.loadStateMachine(n)??!1}startStateMachine(){let n=this._dotLottieCore?.startStateMachine()??!1;return n&&this._setupStateMachineListeners(),n}stopStateMachine(){let n=this._dotLottieCore?.stopStateMachine()??!1;return n&&this._cleanupStateMachineListeners(),n}_getPointerPosition(n){let a=this._canvas.getBoundingClientRect(),d=this._canvas.width/a.width,w=this._canvas.height/a.height,T=this._renderConfig.devicePixelRatio||window.devicePixelRatio||1,W=(n.clientX-a.left)*d/T,Y=(n.clientY-a.top)*w/T;return {x:W,y:Y}}_onPointerUp(n){let{x:a,y:d}=this._getPointerPosition(n);this.postStateMachineEvent(`OnPointerUp: ${a} ${d}`);}_onPointerDown(n){let{x:a,y:d}=this._getPointerPosition(n);this.postStateMachineEvent(`OnPointerDown: ${a} ${d}`);}_onPointerMove(n){let{x:a,y:d}=this._getPointerPosition(n);this.postStateMachineEvent(`OnPointerMove: ${a} ${d}`);}_onPointerEnter(n){let{x:a,y:d}=this._getPointerPosition(n);this.postStateMachineEvent(`OnPointerEnter: ${a} ${d}`);}_onPointerLeave(n){let{x:a,y:d}=this._getPointerPosition(n);this.postStateMachineEvent(`OnPointerExit: ${a} ${d}`);}_onComplete(){this.postStateMachineEvent("OnComplete");}postStateMachineEvent(n){return this._dotLottieCore?.postEventPayload(n)??!1}getStateMachineListeners(){if(!this._dotLottieCore)return [];let n=this._dotLottieCore.stateMachineFrameworkSetup(),a=[];for(let d=0;d<n.size();d+=1)a.push(n.get(d));return a}_setupStateMachineListeners(){if(te&&this._canvas instanceof HTMLCanvasElement&&this._dotLottieCore!==null&&this.isLoaded){let n=this.getStateMachineListeners();n.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._onPointerUp.bind(this)),n.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._onPointerDown.bind(this)),n.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._onPointerMove.bind(this)),n.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._onPointerEnter.bind(this)),n.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._onPointerLeave.bind(this)),n.includes("Complete")&&this.addEventListener("complete",this._onComplete.bind(this));}}_cleanupStateMachineListeners(){te&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._onPointerUp.bind(this)),this._canvas.removeEventListener("pointerdown",this._onPointerDown.bind(this)),this._canvas.removeEventListener("pointermove",this._onPointerMove.bind(this)),this._canvas.removeEventListener("pointerenter",this._onPointerEnter.bind(this)),this._canvas.removeEventListener("pointerleave",this._onPointerLeave.bind(this)),this.removeEventListener("complete",this._onComplete.bind(this)));}loadStateMachineData(n){return this._dotLottieCore?.loadStateMachineData(n)??!1}animationSize(){let n=this._dotLottieCore?.animationSize().get(0)??0,a=this._dotLottieCore?.animationSize().get(1)??0;return {width:n,height:a}}setStateMachineBooleanContext(n,a){return this._dotLottieCore?.setStateMachineBooleanContext(n,a)??!1}setStateMachineNumericContext(n,a){return this._dotLottieCore?.setStateMachineNumericContext(n,a)??!1}setStateMachineStringContext(n,a){return this._dotLottieCore?.setStateMachineStringContext(n,a)??!1}};I(M,"_wasmModule",null);var fe=M;var E=new Map,$n={ready:s=>n=>{let a={id:"",method:"onReady",result:{instanceId:s,event:n}};self.postMessage(a);},complete:s=>n=>{let a={id:"",method:"onComplete",result:{instanceId:s,event:n}};self.postMessage(a);},load:s=>n=>{let d={id:"",method:"onLoad",result:{instanceId:s,event:n}};self.postMessage(d);},loadError:s=>n=>{let d={id:"",method:"onLoadError",result:{instanceId:s,event:n}};self.postMessage(d);},loop:s=>n=>{let d={id:"",method:"onLoop",result:{instanceId:s,event:n}};self.postMessage(d);},play:s=>n=>{let d={id:"",method:"onPlay",result:{instanceId:s,event:n}};self.postMessage(d);},pause:s=>n=>{let d={id:"",method:"onPause",result:{instanceId:s,event:n}};self.postMessage(d);},stop:s=>n=>{let d={id:"",method:"onStop",result:{instanceId:s,event:n}};self.postMessage(d);},frame:s=>n=>{let d={id:"",method:"onFrame",result:{instanceId:s,event:n}};self.postMessage(d);},render:s=>n=>{let d={id:"",method:"onRender",result:{instanceId:s,event:n}};self.postMessage(d);},freeze:s=>n=>{let d={id:"",method:"onFreeze",result:{instanceId:s,event:n}};self.postMessage(d);},unfreeze:s=>n=>{let d={id:"",method:"onUnfreeze",result:{instanceId:s,event:n}};self.postMessage(d);},destroy:s=>n=>{let d={id:"",method:"onDestroy",result:{instanceId:s,event:n}};self.postMessage(d);}},Ot={getDotLottieInstanceState(s){let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);return {state:{isLoaded:a.isLoaded,isPaused:a.isPaused,isPlaying:a.isPlaying,isStopped:a.isStopped,isFrozen:a.isFrozen,loop:a.loop,mode:a.mode,speed:a.speed,currentFrame:a.currentFrame,totalFrames:a.totalFrames,duration:a.duration,useFrameInterpolation:a.useFrameInterpolation,renderConfig:a.renderConfig,marker:a.marker,backgroundColor:a.backgroundColor,markers:a.markers(),activeAnimationId:a.activeAnimationId,activeThemeId:a.activeThemeId,autoplay:a.autoplay,segment:a.segment,layout:a.layout,segmentDuration:a.segmentDuration,isReady:a.isReady,manifest:a.manifest}}},setLayout(s){let n=s.params.instanceId,a=s.params.layout,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.setLayout(a),{success:!0}},getStateMachineListeners(s){let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);return a.getStateMachineListeners()},postStateMachineEvent(s){let n=s.params.instanceId,a=s.params.event,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.postStateMachineEvent(a)},startStateMachine(s){let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);return a.startStateMachine()},stopStateMachine(s){let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);return a.stopStateMachine()},loadStateMachine(s){let n=s.params.instanceId,a=s.params.stateMachineId,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.loadStateMachine(a)},create:s=>{let n=s.params.instanceId,a=s.params.config,d=s.params.width,w=s.params.height;if(E.has(n))throw new Error(`Instance with id ${n} already exists.`);let T=new fe(a);return T.canvas.height=w,T.canvas.width=d,E.set(n,T),["complete","frame","load","loadError","loop","pause","play","stop","destroy","freeze","unfreeze","render","ready"].forEach(Y=>{T.addEventListener(Y,$n[Y](n));}),{instanceId:n}},destroy:s=>{let n=s.params.instanceId,a=E.get(n);a&&(a.destroy(),E.delete(n));},freeze:s=>{let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);a.freeze();},load:s=>{let n=s.params.instanceId,a=s.params.config,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.load(a);},loadAnimation:s=>{let n=s.params.instanceId,a=s.params.animationId,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.loadAnimation(a);},loadTheme:s=>{let n=s.params.instanceId,a=s.params.themeId,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.loadTheme(a)},loadThemeData:s=>{let n=s.params.instanceId,a=s.params.themeData,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.loadThemeData(a)},pause:s=>{let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);return a.pause()},play:s=>{let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);return a.play()},resize:s=>{let n=s.params.instanceId,a=s.params.width,d=s.params.height,w=E.get(n);if(!w)throw new Error(`Instance with id ${n} does not exist.`);return w.canvas.height=d,w.canvas.width=a,w.resize(),{success:!0}},setBackgroundColor:s=>{let n=s.params.instanceId,a=s.params.backgroundColor,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setBackgroundColor(a);},setFrame:s=>{let n=s.params.instanceId,a=s.params.frame,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setFrame(a);},setMode:s=>{let n=s.params.instanceId,a=s.params.mode,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setMode(a);},setRenderConfig:s=>{let n=s.params.instanceId,a=s.params.renderConfig,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setRenderConfig(a);},setSegment:s=>{let n=s.params.instanceId,a=s.params.segment,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setSegment(a[0],a[1]);},setSpeed:s=>{let n=s.params.instanceId,a=s.params.speed,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setSpeed(a);},setUseFrameInterpolation:s=>{let n=s.params.instanceId,a=s.params.useFrameInterpolation,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);d.setUseFrameInterpolation(a);},setWasmUrl:s=>{fe.setWasmUrl(s.params.url);},stop:s=>{let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);a.stop();},unfreeze:s=>{let n=s.params.instanceId,a=E.get(n);if(!a)throw new Error(`Instance with id ${n} does not exist.`);a.unfreeze();},setViewport(s){let n=s.params.instanceId,a=s.params.x,d=s.params.y,w=s.params.width,T=s.params.height,W=E.get(n);if(!W)throw new Error(`Instance with id ${n} does not exist.`);return W.setViewport(a,d,w,T)},setMarker(s){let n=s.params.instanceId,a=s.params.marker,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.setMarker(a),{success:!0}},setLoop(s){let n=s.params.instanceId,a=s.params.loop,d=E.get(n);if(!d)throw new Error(`Instance with id ${n} does not exist.`);return d.setLoop(a),{success:!0}}};function kn(s){let n=s.method;if(typeof Ot[n]=="function")return Ot[n](s);throw new Error(`Method ${n} is not implemented in commands.`)}self.onmessage=s=>{try{let n=kn(s.data),a={id:s.data.id,method:s.data.method,result:n};self.postMessage(a);}catch(n){let a={id:s.data.id,method:s.data.method,error:n.message};self.postMessage(a);}};var Dn="",lr=Dn;\n\nexport { lr as default };\n',uY=class{constructor(){Ft(this,"_workers",new Map),Ft(this,"_animationWorkerMap",new Map)}_createWorker(s){let e=new Blob([cY],{type:"application/javascript"});return new Worker(URL.createObjectURL(e),{type:"module",name:s})}getWorker(s){return this._workers.has(s)||this._workers.set(s,this._createWorker(s)),this._workers.get(s)}assignAnimationToWorker(s,e){this._animationWorkerMap.set(s,e)}unassignAnimationFromWorker(s){this._animationWorkerMap.delete(s)}sendMessage(s,e,t){this.getWorker(s).postMessage(e,t||[])}terminateWorker(s){let e=this._workers.get(s);e&&(e.terminate(),this._workers.delete(s))}};function Ek(s){if(s instanceof OffscreenCanvas)return{width:s.width,height:s.height};let{height:e,width:t}=s.getBoundingClientRect();return{width:t*window.devicePixelRatio,height:e*window.devicePixelRatio}}function Dk(){return Date.now().toString(36)+Math.random().toString(36).substr(2,9)}var Ik=class zo{constructor(e){Ft(this,"_eventManager",new Pk),Ft(this,"_id"),Ft(this,"_worker"),Ft(this,"_canvas"),Ft(this,"_dotLottieInstanceState",{markers:[],autoplay:!1,backgroundColor:"",currentFrame:0,duration:0,loop:!1,mode:"forward",segment:[0,0],segmentDuration:0,speed:1,totalFrames:0,isLoaded:!1,isPlaying:!1,isPaused:!1,isStopped:!0,isFrozen:!1,useFrameInterpolation:!1,renderConfig:{devicePixelRatio:window.devicePixelRatio},activeAnimationId:"",activeThemeId:"",layout:void 0,marker:void 0,isReady:!1,manifest:null}),Ft(this,"_created",!1),this._canvas=e.canvas,this._id=`dotlottie-${Dk()}`;let t=e.workerId||"defaultWorker";this._worker=zo._workerManager.getWorker(t),zo._workerManager.assignAnimationToWorker(this._id,t),zo._wasmUrl&&this._sendMessage("setWasmUrl",{url:zo._wasmUrl}),this._create(e),this._worker.addEventListener("message",this._handleWorkerEvent.bind(this))}async _handleWorkerEvent(e){let t=e.data;t.id||(t.method==="onLoad"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onComplete"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onDestroy"&&t.result.instanceId===this._id&&this._eventManager.dispatch(t.result.event),t.method==="onUnfreeze"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._dotLottieInstanceState.isFrozen=!1,this._eventManager.dispatch(t.result.event)),t.method==="onFrame"&&t.result.instanceId===this._id&&(this._dotLottieInstanceState.currentFrame=t.result.event.currentFrame,this._eventManager.dispatch(t.result.event)),t.method==="onRender"&&t.result.instanceId===this._id&&this._eventManager.dispatch(t.result.event),t.method==="onFreeze"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onPause"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onPlay"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onStop"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onLoadError"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)),t.method==="onReady"&&t.result.instanceId===this._id&&(await this._updateDotLottieInstanceState(),this._eventManager.dispatch(t.result.event)))}async _create(e){let t;this._canvas instanceof HTMLCanvasElement?t=this._canvas.transferControlToOffscreen():t=this._canvas;let{instanceId:n}=await this._sendMessage("create",{instanceId:this._id,config:{...e,canvas:t},...Ek(this._canvas)},[t]);if(n!==this._id)throw new Error("Instance ID mismatch");this._created=!0,await this._updateDotLottieInstanceState()}get isLoaded(){return this._dotLottieInstanceState.isLoaded}get isPlaying(){return this._dotLottieInstanceState.isPlaying}get isPaused(){return this._dotLottieInstanceState.isPaused}get isStopped(){return this._dotLottieInstanceState.isStopped}get currentFrame(){return this._dotLottieInstanceState.currentFrame}get isFrozen(){return this._dotLottieInstanceState.isFrozen}get segmentDuration(){return this._dotLottieInstanceState.segmentDuration}get totalFrames(){return this._dotLottieInstanceState.totalFrames}get segment(){return this._dotLottieInstanceState.segment}get speed(){return this._dotLottieInstanceState.speed}get duration(){return this._dotLottieInstanceState.duration}get isReady(){return this._dotLottieInstanceState.isReady}get mode(){return this._dotLottieInstanceState.mode}get canvas(){return this._canvas}get autoplay(){return this._dotLottieInstanceState.autoplay}get backgroundColor(){return this._dotLottieInstanceState.backgroundColor}get loop(){return this._dotLottieInstanceState.loop}get useFrameInterpolation(){return this._dotLottieInstanceState.useFrameInterpolation}get renderConfig(){return this._dotLottieInstanceState.renderConfig}get manifest(){return this._dotLottieInstanceState.manifest}get activeAnimationId(){return this._dotLottieInstanceState.activeAnimationId}get marker(){return this._dotLottieInstanceState.marker}get activeThemeId(){return this._dotLottieInstanceState.activeThemeId}get layout(){return this._dotLottieInstanceState.layout}async play(){this._created&&(await this._sendMessage("play",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async pause(){this._created&&(await this._sendMessage("pause",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async stop(){this._created&&(await this._sendMessage("stop",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSpeed(e){this._created&&(await this._sendMessage("setSpeed",{instanceId:this._id,speed:e}),await this._updateDotLottieInstanceState())}async setMode(e){this._created&&(await this._sendMessage("setMode",{instanceId:this._id,mode:e}),await this._updateDotLottieInstanceState())}async setFrame(e){this._created&&(await this._sendMessage("setFrame",{frame:e,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setSegment(e,t){this._created&&(await this._sendMessage("setSegment",{instanceId:this._id,segment:[e,t]}),await this._updateDotLottieInstanceState())}async setRenderConfig(e){this._created&&(await this._sendMessage("setRenderConfig",{instanceId:this._id,renderConfig:e}),await this._updateDotLottieInstanceState())}async setUseFrameInterpolation(e){this._created&&(await this._sendMessage("setUseFrameInterpolation",{instanceId:this._id,useFrameInterpolation:e}),await this._updateDotLottieInstanceState())}async loadTheme(e){if(!this._created)return!1;let t=this._sendMessage("loadTheme",{instanceId:this._id,themeId:e});return await this._updateDotLottieInstanceState(),t}async load(e){this._created&&(await this._sendMessage("load",{config:e,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLoop(e){this._created&&(await this._sendMessage("setLoop",{instanceId:this._id,loop:e}),await this._updateDotLottieInstanceState())}async resize(){if(!this._created)return;let{height:e,width:t}=Ek(this._canvas);this._canvas.width=t,this._canvas.height=e,await this._sendMessage("resize",{height:e,instanceId:this._id,width:t}),await this._updateDotLottieInstanceState()}async destroy(){this._created&&(this._created=!1,await this._sendMessage("destroy",{instanceId:this._id}),this._cleanupStateMachineListeners(),zo._workerManager.unassignAnimationFromWorker(this._id),this._eventManager.removeAllEventListeners())}async freeze(){this._created&&(await this._sendMessage("freeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async unfreeze(){this._created&&(await this._sendMessage("unfreeze",{instanceId:this._id}),await this._updateDotLottieInstanceState())}async setBackgroundColor(e){this._created&&(await this._sendMessage("setBackgroundColor",{instanceId:this._id,backgroundColor:e}),await this._updateDotLottieInstanceState())}async loadAnimation(e){this._created&&(await this._sendMessage("loadAnimation",{animationId:e,instanceId:this._id}),await this._updateDotLottieInstanceState())}async setLayout(e){this._created&&(await this._sendMessage("setLayout",{instanceId:this._id,layout:e}),await this._updateDotLottieInstanceState())}async _updateDotLottieInstanceState(){if(!this._created)return;let e=await this._sendMessage("getDotLottieInstanceState",{instanceId:this._id});this._dotLottieInstanceState=e.state}markers(){return this._dotLottieInstanceState.markers}async setMarker(e){this._created&&(await this._sendMessage("setMarker",{instanceId:this._id,marker:e}),await this._updateDotLottieInstanceState())}async loadThemeData(e){if(!this._created)return!1;let t=await this._sendMessage("loadThemeData",{instanceId:this._id,themeData:e});return await this._updateDotLottieInstanceState(),t}async setViewport(e,t,n,i){return this._created?this._sendMessage("setViewport",{x:e,y:t,width:n,height:i,instanceId:this._id}):!1}async _sendMessage(e,t,n){let i={id:`dotlottie-request-${Dk()}`,method:e,params:t};return this._worker.postMessage(i,n||[]),new Promise((r,o)=>{let a=l=>{let c=l.data;c.id===i.id&&(this._worker.removeEventListener("message",a),c.error?o(new Error(`Failed to execute method ${e}: ${c.error}`)):r(c.result))};this._worker.addEventListener("message",a)})}addEventListener(e,t){this._eventManager.addEventListener(e,t)}removeEventListener(e,t){this._eventManager.removeEventListener(e,t)}static setWasmUrl(e){zo._wasmUrl=e}async loadStateMachine(e){if(!this._created)return!1;let t=await this._sendMessage("loadStateMachine",{instanceId:this._id,stateMachineId:e});return await this._updateDotLottieInstanceState(),t}async startStateMachine(){if(!this._created)return!1;this._setupStateMachineListeners();let e=await this._sendMessage("startStateMachine",{instanceId:this._id});return await this._updateDotLottieInstanceState(),e}async stopStateMachine(){return this._created?(this._cleanupStateMachineListeners(),this._sendMessage("stopStateMachine",{instanceId:this._id})):!1}async postStateMachineEvent(e){return this._created?this._sendMessage("postStateMachineEvent",{event:e,instanceId:this._id}):!1}async getStateMachineListeners(){return this._created?this._sendMessage("getStateMachineListeners",{instanceId:this._id}):[]}_getPointerPosition(e){let t=this._canvas.getBoundingClientRect(),n=this._canvas.width/t.width,i=this._canvas.height/t.height,r=this._dotLottieInstanceState.renderConfig.devicePixelRatio||window.devicePixelRatio||1,o=(e.clientX-t.left)*n/r,a=(e.clientY-t.top)*i/r;return{x:o,y:a}}_onPointerUp(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerUp: ${t} ${n}`)}_onPointerDown(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerDown: ${t} ${n}`)}_onPointerMove(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerMove: ${t} ${n}`)}_onPointerEnter(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerEnter: ${t} ${n}`)}_onPointerLeave(e){let{x:t,y:n}=this._getPointerPosition(e);this.postStateMachineEvent(`OnPointerExit: ${t} ${n}`)}_onComplete(){this.postStateMachineEvent("OnComplete")}async _setupStateMachineListeners(){if(Bo&&this._canvas instanceof HTMLCanvasElement&&this.isLoaded){let e=await this._sendMessage("getStateMachineListeners",{instanceId:this._id});e.includes("PointerUp")&&this._canvas.addEventListener("pointerup",this._onPointerUp.bind(this)),e.includes("PointerDown")&&this._canvas.addEventListener("pointerdown",this._onPointerDown.bind(this)),e.includes("PointerMove")&&this._canvas.addEventListener("pointermove",this._onPointerMove.bind(this)),e.includes("PointerEnter")&&this._canvas.addEventListener("pointerenter",this._onPointerEnter.bind(this)),e.includes("PointerExit")&&this._canvas.addEventListener("pointerleave",this._onPointerLeave.bind(this)),e.includes("Complete")&&this.addEventListener("complete",this._onComplete.bind(this))}}_cleanupStateMachineListeners(){Bo&&this._canvas instanceof HTMLCanvasElement&&(this._canvas.removeEventListener("pointerup",this._onPointerUp.bind(this)),this._canvas.removeEventListener("pointerdown",this._onPointerDown.bind(this)),this._canvas.removeEventListener("pointermove",this._onPointerMove.bind(this)),this._canvas.removeEventListener("pointerenter",this._onPointerEnter.bind(this)),this._canvas.removeEventListener("pointerleave",this._onPointerLeave.bind(this)),this.removeEventListener("complete",this._onComplete.bind(this)))}};Ft(Ik,"_workerManager",new uY),Ft(Ik,"_wasmUrl","");var dY=(s,e)=>{const t=s.getBoundingClientRect(),n=window.innerWidth,i=window.innerHeight,r=Math.max(0,-t.left),o=Math.max(0,-t.top),a=Math.min(t.width,n-t.left),l=Math.min(t.height,i-t.top),c=r*e,u=o*e,d=(a-r)*e,f=(l-o)*e;return{x:c,y:u,width:d,height:f}},hY=uf({props:{animationId:{type:String,required:!1},autoplay:{type:Boolean,required:!1},backgroundColor:{type:String,required:!1},data:{type:[String,ArrayBuffer],required:!1},loop:{type:Boolean,required:!1},mode:{type:String,required:!1},renderConfig:{type:Object,required:!1},segment:{type:Array,required:!1},speed:{type:Number,required:!1},src:{type:String,required:!1},useFrameInterpolation:{type:Boolean,required:!1},marker:{type:String,required:!1},autoResizeCanvas:{type:Boolean,required:!1,default:!0},playOnHover:{type:Boolean,required:!1},themeData:{type:String,required:!1},themeId:{type:String,required:!1}},setup(s,{attrs:e,expose:t}){const n=pe(void 0),{autoResizeCanvas:i,backgroundColor:r,loop:o,marker:a,mode:l,playOnHover:c,segment:u,speed:d,useFrameInterpolation:f}=x1(s);let p=null,g=null,S=null;Jt(()=>r==null?void 0:r.value,b=>{p&&typeof b<"u"&&p.setBackgroundColor(b)}),Jt(()=>a==null?void 0:a.value,b=>{p&&typeof b<"u"&&p.setMarker(b)}),Jt(()=>o==null?void 0:o.value,b=>{p&&typeof b<"u"&&p.setLoop(b)}),Jt(()=>l==null?void 0:l.value,b=>{p&&typeof b<"u"&&p.setMode(b)}),Jt(()=>u==null?void 0:u.value,b=>{p&&Array.isArray(b)&&b.length===2&&p.setSegment(b[0],b[1])}),Jt(()=>d==null?void 0:d.value,b=>{p&&typeof b<"u"&&p.setSpeed(b)}),Jt(()=>f==null?void 0:f.value,b=>{p&&typeof b<"u"&&p.setUseFrameInterpolation(b)}),Jt(()=>s.animationId,b=>{p&&p.isLoaded&&typeof b<"u"&&b!==p.activeAnimationId&&p.loadAnimation(b)}),Jt(()=>s.themeData,b=>{p&&typeof b<"u"&&p.loadTheme(b)}),Jt(()=>s.themeId,b=>{p&&typeof b<"u"&&p.loadThemeData(b)});function k(b){b.type==="mouseenter"?p==null||p.play():p==null||p.pause()}Jt(()=>c==null?void 0:c.value,b=>{var w,R,T,E;p&&typeof b<"u"&&b?((w=n.value)==null||w.addEventListener("mouseenter",k),(R=n.value)==null||R.addEventListener("mouseleave",k)):((T=n.value)==null||T.removeEventListener("mouseenter",k),(E=n.value)==null||E.removeEventListener("mouseleave",k))});function O(){var F;if(!n.value||!p)return;const b=((F=s.renderConfig)==null?void 0:F.devicePixelRatio)||window.devicePixelRatio||1,{height:w,width:R,x:T,y:E}=dY(n.value,b);p.setViewport(T,E,R,w)}function $(){return new IntersectionObserver(b=>{b.forEach(w=>{w.isIntersecting?p==null||p.unfreeze():p==null||p.freeze()})},{threshold:0})}function M(){return new ResizeObserver(b=>{b.forEach(()=>{p==null||p.resize()})})}return os(()=>{if(!n.value)return;let b=s.autoplay;typeof(c==null?void 0:c.value)<"u"&&c.value&&(b=!1),p=new lY({canvas:n.value,...s,autoplay:b}),g=$(),g.observe(n.value),typeof(i==null?void 0:i.value)=="boolean"&&i.value&&(S=M(),S.observe(n.value)),c!=null&&c.value&&(n.value.addEventListener("mouseenter",k),n.value.addEventListener("mouseleave",k)),p.addEventListener("frame",O)}),df(()=>{var b,w;S==null||S.disconnect(),g==null||g.disconnect(),(b=n.value)==null||b.addEventListener("mouseenter",k),(w=n.value)==null||w.addEventListener("mouseleave",k),p==null||p.removeEventListener("frame",O),p==null||p.destroy()}),t({getDotLottieInstance:()=>p}),()=>ln("div",{...e},ln("canvas",{style:"height: 100%; width: 100%",ref:n}))}});const fY={class:"w-full h-full space-y-8"},pY={key:0,class:"space-y-5 bg-gray-50 p-5"},mY=h("strong",null,"Time delay",-1),gY={class:"flex items-center gap-2"},vY=h("strong",null,"Page Scroll",-1),yY={class:"flex items-center gap-2"},_Y=h("strong",null,"Exit Intent",-1),bY=h("div",{class:"transition"}," Display when visitor is about to leave ",-1),wY={key:1,class:"bg-gray-50 border border-slate-100 rounded-lg py-5 px-6 gap-2 inline-flex items-center justify-start w-fit text-gray-600"},xY=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current text-yellow-500 w-4",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})],-1),kY={class:"flex items-center gap-3"},SY={class:"flex flex-wrap items-center justify-between gap-2"},CY=h("a",{href:"https://wppool.dev/docs/how-to-set-up-google-analytics-on-formychat-view-form-conversions/",target:"_blank",class:"flex items-center gap-1 bg-gray-100 border border-gray-200 hover:bg-gray-50 transition text-gray-700 px-3 py-1.5 rounded-full text-xs font-medium"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),B(" Documentation ")],-1),OY={class:"flex flex-wrap items-center justify-between gap-2"},MY={class:"flex items-center gap-2"},AY=h("a",{href:"https://www.youtube.com/watch?v=5VFeUIqw3cg",target:"_blank",class:"flex items-center gap-1 bg-gray-100 border border-gray-200 hover:bg-gray-50 transition text-gray-700 px-3 py-1.5 rounded-full text-xs font-medium"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"16",height:"16",viewBox:"0 0 48 48"},[h("path",{fill:"#FF3D00",d:"M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z"}),h("path",{fill:"#FFF",d:"M20 31L20 17 32 24z"})]),B(" Tutorial ")],-1),$Y={key:0,class:"mt-2"},TY={key:0,class:"bg-amber-50 border border-amber-100 rounded-lg p-5 flex items-start justify-between gap-6"},PY={class:"flex items-start gap-3 text-gray-700"},LY=h("div",null,[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current text-yellow-500 w-5 mt-0.5",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})])],-1),EY={class:"space-y-1"},DY={class:"font-semibold"},IY={class:"text-gray-500 text-sm"},RY={key:0,class:"shrink-0"},FY={key:0,class:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"},BY={key:1},NY={key:1,class:"w-content bg-gray-50 rounded p-5 mt-4 space-y-6"},VY=h("div",{class:"flex items-center gap-3"},[h("h3",{class:"text-gray-700 font-semibold text-lg"},"FluentCRM Settings"),h("a",{href:"https://www.youtube.com/watch?v=bjJcWoY-8zA&list=PLd6WEu38CQSyebRIikg4qX54h-R1n35TG",target:"_blank",class:"bg-gray-200 border flex items-center gap-1 border-gray-200 hover:bg-transparent transition text-gray-700 pl-2 pr-4 py-1 rounded-full text-xs"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"18",height:"18",viewBox:"0 0 48 48"},[h("path",{fill:"#FF3D00",d:"M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z"}),h("path",{fill:"#FFF",d:"M20 31L20 17 32 24z"})]),B(" Tutorial")])],-1),zY={class:"grid gap-6"},jY={class:"grid md:grid-cols-[220px_1fr] items-center gap-4"},WY={class:"relative flex items-center gap-2"},UY=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"}),h("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"})],-1)],HY={class:"grid md:grid-cols-[220px_1fr] items-center gap-4"},QY={class:"relative flex items-center gap-2"},YY=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"}),h("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"})],-1)],qY={class:"space-y-3"},GY=h("div",{class:"text-gray-700 font-semibold"},"Map Fields",-1),KY={class:"rounded-lg bg-white p-4 border border-gray-200 space-y-3"},XY=h("span",{name:"fluentcrm_email_mapping"},null,-1),JY={key:0,class:"text-[13px] text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-2"},ZY=h("div",{class:"flex items-center gap-2 text-gray-400 text-xs mb-2"},[h("div",{class:"w-full"},"Your Form Fields"),h("div",{class:"w-full"},"FluentCRM field"),h("div",{class:"w-[100px] flex h-1"})],-1),eq={class:"w-20 flex items-center gap-2"},tq=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"})],-1)],sq=["onClick"],nq=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash-fill",viewBox:"0 0 16 16"},[h("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"})],-1)],iq={key:1,class:"flex w-4"},rq={class:"flex items-center gap-3"},oq={class:"flex flex-wrap items-center justify-between gap-2"},aq={class:"flex items-center gap-2"},lq=h("a",{href:"https://youtu.be/x70qZf2KWwg",target:"_blank",class:"flex items-center gap-1 bg-gray-100 border border-gray-200 hover:bg-gray-50 transition text-gray-700 px-3 py-1.5 rounded-full text-xs font-medium"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"16",height:"16",viewBox:"0 0 48 48"},[h("path",{fill:"#FF3D00",d:"M43.2,33.9c-0.4,2.1-2.1,3.7-4.2,4c-3.3,0.5-8.8,1.1-15,1.1c-6.1,0-11.6-0.6-15-1.1c-2.1-0.3-3.8-1.9-4.2-4C4.4,31.6,4,28.2,4,24c0-4.2,0.4-7.6,0.8-9.9c0.4-2.1,2.1-3.7,4.2-4C12.3,9.6,17.8,9,24,9c6.2,0,11.6,0.6,15,1.1c2.1,0.3,3.8,1.9,4.2,4c0.4,2.3,0.9,5.7,0.9,9.9C44,28.2,43.6,31.6,43.2,33.9z"}),h("path",{fill:"#FFF",d:"M20 31L20 17 32 24z"})]),B(" Tutorial ")],-1),cq={key:0,class:"mt-2"},uq={key:0,class:"bg-amber-50 border border-amber-100 rounded-lg p-5 flex items-start justify-between gap-6"},dq={class:"flex items-start gap-3 text-gray-700"},hq=h("div",null,[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current text-yellow-500 w-5 mt-0.5",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})])],-1),fq={class:"space-y-1"},pq={class:"font-semibold"},mq={class:"text-gray-500 text-sm"},gq={key:0,class:"shrink-0"},vq={key:0,class:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"},yq={key:1},_q={key:1,class:"w-content bg-gray-50 rounded p-5 mt-4 space-y-6"},bq=h("div",{class:"flex items-center gap-3"},[h("h3",{class:"text-gray-700 font-semibold text-lg"},"Mailchimp Settings"),h("a",{href:"https://mailchimp.com/help/",target:"_blank",class:"bg-gray-200 border flex items-center gap-1 border-gray-200 hover:bg-transparent transition text-gray-700 pl-2 pr-4 py-1 rounded-full text-xs"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})]),B(" Documentation ")])],-1),wq={class:"grid gap-6"},xq={class:"grid md:grid-cols-[220px_1fr] items-center gap-4"},kq={class:"relative flex items-center gap-2"},Sq=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"}),h("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"})],-1)],Cq={class:"grid md:grid-cols-[220px_1fr] items-center gap-4"},Oq={class:"relative flex items-center gap-2"},Mq=[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M11.534 7h3.932a.25.25 0 0 1 .192.41l-1.966 2.36a.25.25 0 0 1-.384 0l-1.966-2.36a.25.25 0 0 1 .192-.41m-11 2h3.932a.25.25 0 0 0 .192-.41L2.692 6.23a.25.25 0 0 0-.384 0L.342 8.59A.25.25 0 0 0 .534 9"}),h("path",{"fill-rule":"evenodd",d:"M8 3c-1.552 0-2.94.707-3.857 1.818a.5.5 0 1 1-.771-.636A6.002 6.002 0 0 1 13.917 7H12.9A5 5 0 0 0 8 3M3.1 9a5.002 5.002 0 0 0 8.757 2.182.5.5 0 1 1 .771.636A6.002 6.002 0 0 1 2.083 9z"})],-1)],Aq={class:"space-y-3"},$q=h("div",{class:"text-gray-700 font-semibold"},"Map Fields",-1),Tq={class:"rounded-lg bg-white p-4 border border-gray-200 space-y-3"},Pq=h("span",{name:"mailchimp_email_mapping"},null,-1),Lq={key:0,class:"text-[13px] text-red-600 bg-red-50 border border-red-200 rounded px-3 py-2 mb-2"},Eq=h("div",{class:"flex items-center gap-2 text-gray-400 text-xs mb-2"},[h("div",{class:"w-full"},"Your Form Fields"),h("div",{class:"w-full"},"Mailchimp field"),h("div",{class:"w-[100px] flex h-1"})],-1),Dq={class:"w-20 flex items-center gap-2"},Iq=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus-lg",viewBox:"0 0 16 16"},[h("path",{"fill-rule":"evenodd",d:"M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"})],-1)],Rq=["onClick"],Fq=[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-trash-fill",viewBox:"0 0 16 16"},[h("path",{d:"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5M8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5m3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0"})],-1)],Bq={key:1,class:"flex w-4"},Nq={key:1,class:"text-[13px] text-amber-700 bg-amber-50 border border-amber-300 rounded px-3 py-2 mt-3"},Vq=h("strong",null,"Note:",-1),zq={class:"flex items-center gap-3"},jq={key:0,class:"absolute -translate-y-8 sm:translate-y-0 w-full h-full left-0 top-0 bg-white z-50"},Wq={class:"absolute -top-8 right-0 cursor-pointer w-12 h-12 flex items-center justify-center text-gray-300 hover:text-gray-700 transition"},Uq=[h("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708"},null,-1)],Hq={class:"flex flex-col gap-4 justify-center items-center h-96"},Qq={class:"text-2xl text-gray-700"},Yq={key:0,class:"text-lg text-gray-500"},qq=h("a",{href:"https://go.wppool.dev/2rc7",target:"_blank",class:"text-indigo-500 hover:text-indigo-400 transition"},"FormyChat",-1),Gq={class:"flex items-center gap-3 justify-center my-6 font-medium"},Kq={__name:"Triggers",setup(s){const e=eo(),t=ie(()=>!formychat_admin_vars.is_premium),n=ie(()=>{var re;return((re=e.currentWidget.config)==null?void 0:re.icon)||{}}),i=ie(()=>{var re;return((re=e.currentWidget.config)==null?void 0:re.form)||{}}),r=ie(()=>{var re;return((re=e.currentWidget.config)==null?void 0:re.target)||{}}),o=ie(()=>(e.currentWidget.config.integrations||(e.currentWidget.config.integrations={}),e.currentWidget.config.integrations)),a=ie(()=>(o.value["fluent-crm"]?Array.isArray(o.value["fluent-crm"].fields_mapping)||(o.value["fluent-crm"].fields_mapping=[{from:"email",to:"email"}]):o.value["fluent-crm"]={fields_mapping:[{from:"email",to:"email"}]},o.value["fluent-crm"])),l=ie(()=>(o.value.mailchimp?Array.isArray(o.value.mailchimp.fields_mapping)||(o.value.mailchimp.fields_mapping=[]):o.value.mailchimp={enabled:!1,fields_mapping:[],lists:[],tags:[],skip_if_exists:!1},o.value.mailchimp)),c=ie(()=>e.contents.pages?e.contents.pages.map(re=>({...re,label:re.label||"Untitled Page"})):[]);Jt(t,re=>{re&&(i.value.google_analytics=!1,i.value.fluent_crm=!1)},{immediate:!0});const u=formychat_admin_vars.public+"/js/animation.json",d=()=>{e.states.showSuccess=!1,e.currentWidget.isNew=!1,e.editWidget(e.currentWidget)},f=Es({is_loading_fluentcrm:!1,is_fetching_fluentcrm_meta:!1,is_fetching_mailchimp_meta:!1}),p=pe(formychat_admin_vars.additional||{}),g=async()=>{f.is_loading_fluentcrm=!0;const re=await Ke.post("integrations/install",{integration_id:"fluent-crm",action:"install"});f.is_loading_fluentcrm=!1,re.data.success&&(p.value.fluentcrm.is_installed=!0,p.value.fluentcrm.is_active=!0,p.value.fluentcrm.is_enabled=!0,Q())},S=ie(()=>!p.value.mailchimp||!p.value.mailchimp.is_enabled?{title:"Mailchimp module is not active.",desc:"To connect your leads with Mailchimp, please activate the module first.",button:{label:"Activate Mailchimp ",onClick:async()=>{f.is_fetching_mailchimp_meta=!0;const re=await Ke.post("integrations",{integration_id:"mailchimp",enabled:!0});f.is_fetching_mailchimp_meta=!1,re.data&&re.data.success&&(p.value.mailchimp.is_enabled=!0,be())}}}:E.value.length?null:{title:"Mailchimp API key is not connected.",desc:"Please connect your Mailchimp account by adding your API key in the integrations page.",button:{label:"Go to Mailchimp Module ",link:"/wp-admin/admin.php?page=formychat-integrations#/"}}),k=ie(()=>p.value.fluentcrm.is_installed?p.value.fluentcrm.is_active?p.value.fluentcrm.is_enabled?null:{title:"FluentCRM is not enabled.",desc:"Please enable the FluentCRM integration to send leads directly from FormyChat.",button:{label:"Enable FluentCRM ",onClick:async()=>{f.is_loading_fluentcrm=!0;const re=await Ke.post("integrations",{integration_id:"fluent-crm",enabled:!0});f.is_loading_fluentcrm=!1,re.data&&re.data.success&&(p.value.fluentcrm.is_enabled=!0,Q())}}}:{title:"FluentCRM is not active.",desc:"Please activate the FluentCRM plugin to send leads directly from FormyChat.",button:{label:"Activate FluentCRM ",onClick:g}}:{title:"FluentCRM is not installed.",desc:"To connect your leads with FluentCRM, please install and activate the plugin first.",button:{label:"Install FluentCRM ",onClick:g}}),O=ie(()=>{let re=[];for(const[le,se]of Object.entries(e.fields))re.push({label:se,value:le});return re}),$=re=>{const le=l.value.fields_mapping.filter(se=>se!==re).map(se=>se.to).filter(se=>se);return K.value.filter(se=>{const Te=se.value||se.key;return re.readonly&&re.to==="EMAIL"?Te==="EMAIL":Te!=="EMAIL"&&!le.includes(Te)})},M=ie(()=>{const re=(l.value.fields_mapping||[]).map(Te=>Te.to).filter(Te=>Te&&Te.startsWith("ADDRESS."));return re.length===0?!1:!["ADDRESS.addr1","ADDRESS.city","ADDRESS.state","ADDRESS.zip"].every(Te=>re.includes(Te))}),b=re=>{const le=a.value.fields_mapping.filter(se=>se!==re).map(se=>se.to).filter(se=>se);return T.value.filter(se=>{const Te=se.value||se.key;return re.readonly&&re.to==="email"?Te==="email":Te!=="email"&&!le.includes(Te)})},w=pe([]),R=pe([]),T=pe([]),E=pe([]),F=pe([]),K=pe([]),W=()=>{Array.isArray(a.value.fields_mapping)||(a.value.fields_mapping=[]),a.value.fields_mapping.push({from:"",to:""})},A=re=>{a.value.fields_mapping.splice(re,1)},D=()=>{Array.isArray(l.value.fields_mapping)||(l.value.fields_mapping=[]),l.value.fields_mapping.push({from:"",to:""})},N=re=>{l.value.fields_mapping.splice(re,1)},Q=async()=>{if(!(!p.value.fluentcrm.is_installed||!p.value.fluentcrm.is_active||!p.value.fluentcrm.is_enabled))try{f.is_fetching_fluentcrm_meta=!0;const re=await Ke.get("integrations/fluentcrm_meta");if(f.is_fetching_fluentcrm_meta=!1,re.data&&re.data.success&&re.data){const le=re.data;w.value=le.lists||[],R.value=le.tags||[],T.value=le.fields||[],ae()}}catch(re){console.error("Error fetching FluentCRM meta:",re)}},H=re=>String(re||"").toLowerCase().trim(),J=()=>{const re=Object.keys(e.fields||{});if(!re.length)return"";const le=re.map(ye=>({original:ye,norm:H(ye)})),se=le.find(ye=>ye.norm==="email");if(se)return se.original;const Te=le.find(ye=>ye.norm.startsWith("email")||ye.norm.endsWith("email"));if(Te)return Te.original;const Ye=le.find(ye=>ye.norm.indexOf("email")!==-1);if(Ye)return Ye.original;const Z=le.find(ye=>ye.norm.includes("mail")&&!ye.norm.includes("gmail")&&!ye.norm.includes("hotmail")&&!ye.norm.includes("yahoo"));return Z?Z.original:""},ae=()=>{a.value.fields_mapping=Array.isArray(a.value.fields_mapping)?a.value.fields_mapping:[],a.value.fields_mapping.length===0&&a.value.fields_mapping.push({from:J(),to:"email",readonly:!0})},be=async(re=!1)=>{try{f.is_fetching_mailchimp_meta=!0;const le=re?"integrations/mailchimp_meta?force_refresh=1":"integrations/mailchimp_meta",se=await Ke.get(le);if(f.is_fetching_mailchimp_meta=!1,se.data&&se.data.success){const Te=se.data;E.value=Te.lists||[],F.value=Te.tags||[],K.value=Te.fields||[],K.value.some(Z=>Z.key==="EMAIL"||Z.value==="EMAIL")||K.value.unshift({key:"EMAIL",label:"Email Address",value:"EMAIL",type:"email",required:!0}),We()}}catch(le){console.error("Error fetching Mailchimp meta:",le),f.is_fetching_mailchimp_meta=!1}},We=()=>{l.value.fields_mapping=Array.isArray(l.value.fields_mapping)?l.value.fields_mapping:[];let re=!1;for(const le of l.value.fields_mapping)if(le.to==="EMAIL"){le.readonly=!0,re=!0;break}re||l.value.fields_mapping.unshift({from:J(),to:"EMAIL",readonly:!0})},Xe=()=>{S.value.button.onClick?S.value.button.onClick():S.value.button.link&&(window.location.href=S.value.button.link)};return os(()=>{e.fetchFields(),Q(),p.value.mailchimp&&p.value.mailchimp.is_enabled&&be()}),(re,le)=>(v(),C("div",fY,[h("div",null,[y(m(ji),{title:"Triggers",gap:!1},{default:P(()=>[y(m(At),{class:"pt-1",modelValue:m(e).currentWidget.is_active,"onUpdate:modelValue":le[0]||(le[0]=se=>m(e).currentWidget.is_active=se)},{default:P(()=>[B("Activate Widget")]),_:1},8,["modelValue"]),m(e).currentWidget.is_active?(v(),C("div",pY,[y(m(_e),null,{default:P(()=>[y(m(At),{modelValue:n.value.has_delay,"onUpdate:modelValue":le[1]||(le[1]=se=>n.value.has_delay=se)},{default:P(()=>[mY]),_:1},8,["modelValue"]),h("div",{class:X(["transition",{"opacity-60 pointer-events-none":!n.value.has_delay}])},[B(" Display after "),y(m(Gt),{class:"w-16 inline mx-2",modelValue:n.value.delay,"onUpdate:modelValue":le[2]||(le[2]=se=>n.value.delay=se),type:"number",min:"0",max:"3600",placeholder:"3"},null,8,["modelValue"]),B(" seconds when page is loaded ")],2)]),_:1}),y(m(_e),null,{default:P(()=>[h("div",gY,[y(m(At),{modelValue:n.value.show_after_scroll,"onUpdate:modelValue":le[3]||(le[3]=se=>n.value.show_after_scroll=se)},{default:P(()=>[vY]),_:1},8,["modelValue"])]),h("div",{class:X(["transition",{"opacity-60 pointer-events-none":!n.value.show_after_scroll}])},[B(" Display after "),y(m(Gt),{class:"w-16 inline mx-2",modelValue:n.value.scroll_to,"onUpdate:modelValue":le[4]||(le[4]=se=>n.value.scroll_to=se),type:"number",min:"0",max:"100",placeholder:"25"},null,8,["modelValue"]),B(" % scrolling on the page ")],2)]),_:1}),y(m(_e),null,{default:P(()=>[h("div",yY,[y(m(At),{modelValue:n.value.show_on_exit,"onUpdate:modelValue":le[5]||(le[5]=se=>n.value.show_on_exit=se)},{default:P(()=>[_Y]),_:1},8,["modelValue"])]),bY]),_:1})])):(v(),C("div",wY,[xY,B(" Widget turned off ")]))]),_:1})]),y(m(ji),null,{title:P(()=>[h("div",kY,[B(" Targets "),y(m(Vt))])]),default:P(()=>[h("div",{class:X(["flex items-start gap-5",{"opacity-70 formychat-locked child:pointer-events-none":t.value}])},[y(m(Pe),{class:"w-40"},{default:P(()=>[B("Exclude pages")]),_:1}),y(m(_e),{class:"space-y-2"},{default:P(()=>[y(m(Xo),{options:c.value,modelValue:r.value.exclude_pages,"onUpdate:modelValue":le[6]||(le[6]=se=>r.value.exclude_pages=se),class:X({" opacity-60 pointer-events-none":r.value.exclude_all_pages})},null,8,["options","modelValue","class"]),y(m(At),{modelValue:r.value.exclude_all_pages,"onUpdate:modelValue":le[7]||(le[7]=se=>r.value.exclude_all_pages=se)},{default:P(()=>[B("Exclude all pages excepts:")]),_:1},8,["modelValue"]),y(m(Xo),{options:c.value,modelValue:r.value.exclude_all_pages_except,"onUpdate:modelValue":le[8]||(le[8]=se=>r.value.exclude_all_pages_except=se),class:X({" opacity-50 pointer-events-none":!r.value.exclude_all_pages})},null,8,["options","modelValue","class"])]),_:1})],2)]),_:1}),y(m(ji),{title:"Integrations",gap:!1},{default:P(()=>[y(m(_e),null,{default:P(()=>[h("div",SY,[y(m(At),{locked:t.value,modelValue:i.value.google_analytics,"onUpdate:modelValue":le[9]||(le[9]=se=>i.value.google_analytics=se),hints:"Enable this option to track form submissions with Google Analytics."},{default:P(()=>[B(" Google Analytics ")]),_:1},8,["locked","modelValue"]),CY])]),_:1}),y(m(_e),null,{default:P(()=>[h("div",OY,[h("div",MY,[y(m(At),{locked:t.value,modelValue:a.value.enabled,"onUpdate:modelValue":le[10]||(le[10]=se=>a.value.enabled=se),hints:"Automatically send form leads to FluentCRM for email marketing campaigns and customer relationship management."},{default:P(()=>[B(" Send leads to FluentCRM ")]),_:1},8,["locked","modelValue"]),y(m(hu))]),AY]),a.value.enabled?(v(),C("div",$Y,[k.value?(v(),C("div",TY,[h("div",PY,[LY,h("div",EY,[h("div",DY,q(k.value.title),1),h("div",IY,q(k.value.desc),1)])]),k.value.button?(v(),C("div",RY,[y(m(ct),{onClick:Me(k.value.button.onClick,["prevent"]),class:X(["text-sm",{"opacity-50 pointer-events-none":f.is_loading_fluentcrm}])},{default:P(()=>[f.is_loading_fluentcrm?(v(),C("div",FY)):(v(),C("span",BY,q(k.value.button.label),1))]),_:1},8,["onClick","class"])])):z("",!0)])):(v(),C("div",NY,[VY,h("div",zY,[h("div",jY,[y(m(Pe),null,{default:P(()=>[B("FluentCRM List(s):")]),_:1}),h("div",WY,[y(m(Xo),{options:w.value,placeholder:"- Select lists -",modelValue:a.value.lists,"onUpdate:modelValue":le[11]||(le[11]=se=>a.value.lists=se),class:X({"opacity-50 pointer-events-none":f.is_fetching_fluentcrm_meta})},null,8,["options","modelValue","class"]),h("button",{onClick:Me(Q,["prevent"]),class:X(["opacity-80 hover:opacity-100 transition",{"animate-spin opacity-75 pointer-events-none":f.is_fetching_fluentcrm_meta}])},UY,2)])]),h("div",HY,[y(m(Pe),null,{default:P(()=>[B("FluentCRM Tag(s):")]),_:1}),h("div",QY,[y(m(Xo),{options:R.value,placeholder:"- Select tag -",modelValue:a.value.tags,"onUpdate:modelValue":le[12]||(le[12]=se=>a.value.tags=se),class:X({"opacity-50 pointer-events-none":f.is_fetching_fluentcrm_meta})},null,8,["options","modelValue","class"]),h("button",{onClick:Me(Q,["prevent"]),class:X(["opacity-80 hover:opacity-100 transition",{"animate-spin opacity-75 pointer-events-none":f.is_fetching_fluentcrm_meta}])},YY,2)])])]),h("div",qY,[GY,h("div",KY,[XY,m(e).errors.fluentcrm_email_mapping?(v(),C("div",JY," Please map your form's email field to FluentCRM Email before saving. ")):z("",!0),ZY,(v(!0),C(Ve,null,ft(a.value.fields_mapping,(se,Te)=>(v(),C("div",{class:"flex items-center gap-3",key:Te},[y(m($t),{size:"w-full",options:O.value,modelValue:a.value.fields_mapping[Te].from,"onUpdate:modelValue":Ye=>a.value.fields_mapping[Te].from=Ye,placeholder:"Select field",class:X(["w-full",{"opacity-75 pointer-events-none":f.is_fetching_fluentcrm_meta}])},null,8,["options","modelValue","onUpdate:modelValue","class"]),y(m($t),{size:"w-full",options:b(se),modelValue:a.value.fields_mapping[Te].to,"onUpdate:modelValue":Ye=>a.value.fields_mapping[Te].to=Ye,readonly:se.readonly,placeholder:"Select FluentCRM field",class:X(["w-full",{"opacity-75 pointer-events-none":f.is_fetching_fluentcrm_meta||se.readonly}])},null,8,["options","modelValue","onUpdate:modelValue","readonly","class"]),h("div",eq,[h("button",{onClick:Me(W,["prevent"]),class:X(["bg-gray-100 hover:bg-gray-200 rounded-full w-6 h-6 flex items-center justify-center",{"opacity-50 pointer-events-none":f.is_fetching_fluentcrm_meta}])},tq,2),se.readonly?(v(),C("div",iq)):(v(),C("button",{key:0,onClick:Me(Ye=>A(Te),["prevent"]),class:X(["text-gray-400 transition hover:text-red-500 flex-shrink-0",{"opacity-50 pointer-events-none":f.is_fetching_fluentcrm_meta}]),"aria-label":"Remove mapping"},nq,10,sq))])]))),128))])]),h("div",rq,[y(m(At),{modelValue:a.value.skip_if_exists,"onUpdate:modelValue":le[13]||(le[13]=se=>a.value.skip_if_exists=se),hints:"If enabled, existing contacts won't be updated/duplicated."},{default:P(()=>[B("Skip if contacts already exist in FluentCRM ")]),_:1},8,["modelValue"])])]))])):z("",!0)]),_:1}),y(m(_e),null,{default:P(()=>[h("div",oq,[h("div",aq,[y(m(At),{locked:t.value,modelValue:l.value.enabled,"onUpdate:modelValue":le[14]||(le[14]=se=>l.value.enabled=se),hints:"Automatically send form leads to Mailchimp for email marketing campaigns."},{default:P(()=>[B(" Send leads to Mailchimp ")]),_:1},8,["locked","modelValue"]),y(m(hu))]),lq]),l.value.enabled?(v(),C("div",cq,[S.value?(v(),C("div",uq,[h("div",dq,[hq,h("div",fq,[h("div",pq,q(S.value.title),1),h("div",mq,q(S.value.desc),1)])]),S.value.button?(v(),C("div",gq,[y(m(ct),{onClick:Me(Xe,["prevent"]),class:X(["text-sm",{"opacity-50 pointer-events-none":f.is_fetching_mailchimp_meta}])},{default:P(()=>[f.is_fetching_mailchimp_meta?(v(),C("div",vq)):(v(),C("span",yq,q(S.value.button.label),1))]),_:1},8,["class"])])):z("",!0)])):(v(),C("div",_q,[bq,h("div",wq,[h("div",xq,[y(m(Pe),null,{default:P(()=>[B("Mailchimp Audience(s):")]),_:1}),h("div",kq,[y(m(Xo),{options:E.value,placeholder:"- Select audiences -",modelValue:l.value.lists,"onUpdate:modelValue":le[15]||(le[15]=se=>l.value.lists=se),class:X({"opacity-50 pointer-events-none":f.is_fetching_mailchimp_meta})},null,8,["options","modelValue","class"]),h("button",{onClick:le[16]||(le[16]=Me(se=>be(!0),["prevent"])),class:X(["opacity-80 hover:opacity-100 transition",{"animate-spin opacity-75 pointer-events-none":f.is_fetching_mailchimp_meta}])},Sq,2)])]),h("div",Cq,[y(m(Pe),null,{default:P(()=>[B("Mailchimp Tag(s):")]),_:1}),h("div",Oq,[y(m(Xo),{options:F.value,placeholder:"- Select tags -",modelValue:l.value.tags,"onUpdate:modelValue":le[17]||(le[17]=se=>l.value.tags=se),class:X({"opacity-50 pointer-events-none":f.is_fetching_mailchimp_meta})},null,8,["options","modelValue","class"]),h("button",{onClick:le[18]||(le[18]=Me(se=>be(!0),["prevent"])),class:X(["opacity-80 hover:opacity-100 transition",{"animate-spin opacity-75 pointer-events-none":f.is_fetching_mailchimp_meta}])},Mq,2)])])]),h("div",Aq,[$q,h("div",Tq,[Pq,m(e).errors.mailchimp_email_mapping?(v(),C("div",Lq," Please map your form's email field to Mailchimp Email before saving. ")):z("",!0),Eq,(v(!0),C(Ve,null,ft(l.value.fields_mapping,(se,Te)=>(v(),C("div",{class:"flex items-center gap-3",key:Te},[y(m($t),{size:"w-full",options:O.value,modelValue:l.value.fields_mapping[Te].from,"onUpdate:modelValue":Ye=>l.value.fields_mapping[Te].from=Ye,placeholder:"Select field",class:X(["w-full",{"opacity-75 pointer-events-none":f.is_fetching_mailchimp_meta}])},null,8,["options","modelValue","onUpdate:modelValue","class"]),y(m($t),{size:"w-full",options:$(se),modelValue:l.value.fields_mapping[Te].to,"onUpdate:modelValue":Ye=>l.value.fields_mapping[Te].to=Ye,readonly:se.readonly,placeholder:"Select Mailchimp field",class:X(["w-full",{"opacity-75 pointer-events-none":f.is_fetching_mailchimp_meta||se.readonly}])},null,8,["options","modelValue","onUpdate:modelValue","readonly","class"]),h("div",Dq,[h("button",{onClick:Me(D,["prevent"]),class:X(["bg-gray-100 hover:bg-gray-200 rounded-full w-6 h-6 flex items-center justify-center",{"opacity-50 pointer-events-none":f.is_fetching_mailchimp_meta}])},Iq,2),se.readonly?(v(),C("div",Bq)):(v(),C("button",{key:0,onClick:Me(Ye=>N(Te),["prevent"]),class:X(["text-gray-400 transition hover:text-red-500 flex-shrink-0",{"opacity-50 pointer-events-none":f.is_fetching_mailchimp_meta}]),"aria-label":"Remove mapping"},Fq,10,Rq))])]))),128)),M.value?(v(),C("div",Nq,[Vq,B(" Address will be added only when all of the required fields are mapped (Street Address, City, State, Postal Code). ")])):z("",!0)])]),h("div",zq,[y(m(At),{modelValue:l.value.skip_if_exists,"onUpdate:modelValue":le[19]||(le[19]=se=>l.value.skip_if_exists=se),hints:"If enabled, existing contacts won't be updated/duplicated."},{default:P(()=>[B(" Skip if contacts already exist in Mailchimp ")]),_:1},8,["modelValue"])])]))])):z("",!0)]),_:1})]),_:1}),y(ze,{name:"form_slide"},{default:P(()=>[m(e).states.showSuccess?(v(),C("div",jq,[h("div",Wq,[(v(),C("svg",{onClick:Me(d,["prevent"]),xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-6",viewBox:"0 0 16 16"},Uq))]),h("div",Hq,[y(m(hY),{class:"w-72",autoplay:"",loop:"",src:u}),h("h2",Qq,q(m(e).currentWidget.isNew?"Setup Finished!":"Widget Updated!"),1),m(e).currentWidget.is_active?(v(),C("div",Yq,[B("Now you can use "),qq])):z("",!0),h("div",Gq,[y(m(ct),{outline:"",onClick:d,class:"text-lg h-12 px-8"},{default:P(()=>[B("Done")]),_:1}),t.value?(v(),qe(m(ct),{key:0,a:"",href:"https://go.wppool.dev/2rc7",target:"_blank",class:"text-lg h-12 px-8",color:"danger",outline:"",onClick:le[20]||(le[20]=se=>m(e).states.showSuccess=!1)},{default:P(()=>[B("Upgrade all features")]),_:1})):z("",!0)])])])):z("",!0)]),_:1})]))}},Xq={class:"w-full h-full"},Jq={class:"flex flex-col gap-10 w-full"},Zq={class:"w-full flex items-center justify-between gap-2"},eG={class:"w-16"},tG={class:"flex items-center gap-6 flex-wrap"},sG={class:"flex items-center gap-1 w-24"},nG={key:0,class:"text-gray-400"},iG={class:"flex items-center gap-3 text-slate-600 text-sm"},rG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 17.25v1.007a3 3 0 0 1-.879 2.122L7.5 21h9l-.621-.621A3 3 0 0 1 15 18.257V17.25m6-12V15a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15V5.25m18 0A2.25 2.25 0 0 0 18.75 3H5.25A2.25 2.25 0 0 0 3 5.25m18 0V12a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 12V5.25"})],-1),oG=h("span",{class:"font-medium text-xs"},"Desktop",-1),aG={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 fill-indigo-500",viewBox:"0 0 16 16"},lG=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],cG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"1.5"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})],-1),uG=h("span",{class:"font-medium text-xs"},"Mobile",-1),dG={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-4 fill-indigo-500",viewBox:"0 0 16 16"},hG=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],fG=h("div",{class:"border-b-2 border-dashed border-gray-200 rounded"},null,-1),pG={class:"w-full flex items-center justify-between gap-2"},mG={class:"w-16"},gG=h("div",{class:"border-b-2 border-dashed border-gray-200 rounded"},null,-1),vG={class:"flex items-center flex-wrap gap-5 text-slate-600 text-medium text-sm"},yG=["onClick"],_G=["src"],bG={class:"w-full text-center font-medium text-xs"},wG={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-5 fill-indigo-500 text-white absolute right-2 top-2",viewBox:"0 0 16 16"},xG=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],kG={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},SG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),CG={class:"font-medium text-[13px] tracking leading-relaxed"},OG={class:"font-bold"},MG={key:0,class:"flex items-center gap-2"},AG={key:1},$G={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},TG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),PG=h("p",{class:"font-medium text-[13px] tracking leading-relaxed"},[B(" Gravity Forms is not "),h("strong",{class:"font-bold"},"activated"),B("! Please activate it first to send unlimited messages through any of your Gravity forms ")],-1),LG={key:0},EG={key:0,class:"flex items-center gap-2"},DG={key:1},IG={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},RG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),FG={class:"font-medium text-[13px] tracking leading-relaxed"},BG={class:"font-bold"},NG={key:0,class:"flex items-center gap-2"},VG={key:1},zG={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},jG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),WG={class:"font-medium text-[13px] tracking leading-relaxed"},UG={class:"font-bold"},HG={key:0,class:"flex items-center gap-2"},QG={key:1},YG={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},qG=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),GG={class:"font-medium text-[13px] tracking leading-relaxed"},KG={class:"font-bold"},XG={key:0,class:"flex items-center gap-2"},JG={key:1},ZG={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},eK=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),tK={class:"font-medium text-[13px] tracking leading-relaxed"},sK={class:"font-bold"},nK={key:0,class:"flex items-center gap-2"},iK={key:1},rK={key:0,class:"flex items-start gap-5 px-6 py-5 bg-gray-100 border border-gray-200 rounded text-gray-700 w-full break-words"},oK=h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-10",viewBox:"0 0 16 16"},[h("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"}),h("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"})],-1),aK={class:"font-medium text-[13px] tracking leading-relaxed"},lK={class:"font-bold"},cK={key:0,class:"flex items-center gap-2"},uK={key:1},dK=h("span",{name:"cf7_id"},"Select a form",-1),hK={class:"flex items-center gap-4"},fK=["href"],pK=h("span",{name:"gravity_form_id"},"Select a form",-1),mK={class:"flex items center gap-4"},gK=h("span",{name:"wpforms_id"},"Select a form",-1),vK={class:"flex items center gap-4"},yK=h("span",{name:"fluentform_id"},"Select a form",-1),_K={class:"flex items center gap-4"},bK=h("span",{name:"forminator_id"},"Select a form",-1),wK={class:"flex items center gap-4"},xK=h("span",{name:"formidable_id"},"Select a form",-1),kK={class:"flex items center gap-4"},SK=h("span",{name:"ninja_id"},"Select a form",-1),CK={class:"flex items center gap-4"},OK={class:"flex items-center gap-3"},MK=["value"],AK={class:"text-sm text-sate-500 py-4 px-6 bg-gray-100 border border-gray-200 rounded"},$K=h("strong",{class:"text-semibold"},"Note:",-1),TK=["href"],PK=["href"],LK={class:"w-full flex items-center justify-between gap-2"},EK={class:"w-16"},DK={class:"w-full"},IK={class:"w-full"},RK={class:"flex items-center gap-3"},FK={key:0,class:"flex items-center gap-2"},BK=h("div",{class:"border-b-2 border-dashed border-gray-200 rounded"},null,-1),NK={key:0,class:"absolute left-0 top-0 w-full flex h-full z-20 items-center justify-center"},VK={class:"fixed top-1/2 -translate-y-1/2 w-full max-w-xl h-96 z-50"},zK=[h("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",class:"h-5 w-5 fill-current"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)],jK=["src"],WK={__name:"Customize",setup(s){var w,R,T,E,F,K;const e=Es({}),t=eo(),n=ie(()=>t.errors||{}),i=pe(((w=t.currentWidget.config)==null?void 0:w.whatsapp)||{}),r=pe(((R=t.currentWidget.config)==null?void 0:R.icon)||{}),o=pe(((T=t.currentWidget.config)==null?void 0:T.form)||{}),a=pe(((E=t.currentWidget.config)==null?void 0:E.cta)||{}),l=pe(((F=t.currentWidget.config)==null?void 0:F.email)||{}),c=pe(((K=t.currentWidget.config)==null?void 0:K.cf7)||{}),u=pe({small:"Small",medium:"Medium",large:"Large",custom:"Custom"}),d=pe({left:"Left",right:"Right",custom:"Custom"}),f=window.formychat_admin_vars||{},p=f.site.admin_email||"",g=f.data.forms||{},S=W=>{var D;const A=Object.keys(g).filter(N=>N!=="formychat");if(A.forEach(N=>{t.setError(N+"NotActivated",!1),t.setError(N+"NotInstalled",!1)}),W==="formychat"){o.value.mode=W,t.fetchFields();return}if(A.includes(W)){if(!f.additional[W].is_installed)return t.setError(W+"NotInstalled");if(!f.additional[W].is_active)return t.setError(W+"NotActivated");o.value[W+"_id"]||(o.value[W+"_id"]=((D=t.contents.forms[W][0])==null?void 0:D.value)||"")}o.value.mode=W,t.fetchFields()},k=ie(()=>!f.is_premium),O=W=>{if(k.value)return;const A=r.value.show_on_desktop!==!1,D=r.value.show_on_mobile!==!1;if(W==="desktop"){if(A&&!D)return;r.value.show_on_desktop=!A}else{if(D&&!A)return;r.value.show_on_mobile=!D}},$=async(W="cf7",A="install")=>{var D;e.pluginActivating=A,await Ke.get("action?action=activate_plugin&plugin="+W),f.additional[W].is_active=!0,f.additional[W].is_installed=!0,S(W),await t.fetchContents(),o.value[W+"_form_id"]=t.contents.forms[W].length>0?(D=t.contents.forms[W][0])==null?void 0:D.value:"",e.pluginActivating=!1},M=pe(""),b=f.data.forms||{};return os(()=>{c.value.form_id&&(o.value.cf7_id=c.value.form_id,c.value.form_id=""),t.fetchFields()}),(W,A)=>(v(),C("div",Xq,[h("div",Jq,[y(m(ji),{title:"Customize Icon",gap:!1},{default:P(()=>[y(m(_e),null,{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon",locked:""},{default:P(()=>[B(" Custom Icon ")]),_:1}),y(m(du),{class:X({"formychat-locked child:pointer-events-none child:opacity-60":k.value}),default:W.Image("whatsapp.svg"),modelValue:r.value.image_url,"onUpdate:modelValue":A[0]||(A[0]=D=>r.value.image_url=D),custom:r.value.image_url_custom,"onUpdate:custom":A[1]||(A[1]=D=>r.value.image_url_custom=D)},null,8,["class","default","modelValue","custom"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Icon Size ")]),_:1}),y(m(Nn),{options:u.value,locked:["custom"],width:"83px",class:"bg-gray-50",modelValue:r.value.size,"onUpdate:modelValue":A[2]||(A[2]=D=>r.value.size=D)},null,8,["options","modelValue"])]),_:1}),y(m(_e),{condition:r.value.size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom Icon Size ")]),_:1}),h("div",Zq,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":A[3]||(A[3]=D=>r.value.size_custom=D),min:"20",max:"300"},null,512),[[Ot,r.value.size_custom]]),h("span",eG,q(r.value.size_custom)+"px",1)])]),_:1},8,["condition"]),y(m(_e),null,{default:P(()=>[y(m(Pe),{hints:"Select the position of the icon"},{default:P(()=>[B(" Icon Position ")]),_:1}),y(m(Nn),{options:d.value,locked:["custom"],width:"83px",class:"bg-gray-50",modelValue:r.value.position,"onUpdate:modelValue":A[4]||(A[4]=D=>r.value.position=D)},null,8,["options","modelValue"])]),_:1}),y(m(_e),{condition:r.value.position=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the position of the icon"},{default:P(()=>[B(" Custom Icon Position ")]),_:1}),h("div",tG,[(v(),C(Ve,null,ft(["left","right","top","bottom"],D=>h("div",{key:D,class:"flex flex-col gap-2"},[y(m(Pe),{class:"capitalize text-gray-500",for:`icon_position_custom_${D}`},{default:P(()=>[B(q(D),1)]),_:2},1032,["for"]),h("div",sG,[y(m(Gt),{id:`icon_position_custom_${D}`,type:"number",class:"text-sm w-20",placeholder:"auto",modelValue:r.value.position_custom[D],"onUpdate:modelValue":N=>r.value.position_custom[D]=N},null,8,["id","modelValue","onUpdate:modelValue"]),r.value.position_custom[D]!==""?(v(),C("span",nG,"px")):z("",!0)])])),64))])]),_:1},8,["condition"]),y(m(_e),null,{default:P(()=>[y(m(Pe),{hints:"Choose where the floating widget will be visible - Desktop or Mobile."},{default:P(()=>[B(" Display floating widget on ")]),_:1}),h("div",iG,[h("div",{class:X(["bg-white px-4 py-2 flex items-center gap-2 ring rounded cursor-pointer relative transition",{"ring-indigo-600":r.value.show_on_desktop!==!1,"ring-slate-100 hover:ring-slate-300":r.value.show_on_desktop===!1,"formychat-locked":k.value}]),onClick:A[5]||(A[5]=Me(D=>O("desktop"),["prevent"]))},[rG,oG,y(ze,{name:"bounce"},{default:P(()=>[r.value.show_on_desktop!==!1?(v(),C("svg",aG,lG)):z("",!0)]),_:1})],2),h("div",{class:X(["bg-white px-4 py-2 flex items-center gap-2 ring rounded cursor-pointer relative transition",{"ring-indigo-600":r.value.show_on_mobile!==!1,"ring-slate-100 hover:ring-slate-300":r.value.show_on_mobile===!1,"formychat-locked":k.value}]),onClick:A[6]||(A[6]=Me(D=>O("mobile"),["prevent"]))},[cG,uG,y(ze,{name:"bounce"},{default:P(()=>[r.value.show_on_mobile!==!1?(v(),C("svg",dG,hG)):z("",!0)]),_:1})],2)])]),_:1})]),_:1}),fG,y(m(ji),{title:"Call to action",gap:!1},{default:P(()=>[y(m(_e),null,{default:P(()=>[y(m(At),{modelValue:a.value.enabled,"onUpdate:modelValue":A[7]||(A[7]=D=>a.value.enabled=D)},{default:P(()=>[B("Show Call to action")]),_:1},8,["modelValue"])]),_:1}),y(m(_e),{condition:a.value.enabled},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Call to action text ")]),_:1}),y(m(Gt),{placeholder:"Call to action text",modelValue:a.value.text,"onUpdate:modelValue":A[8]||(A[8]=D=>a.value.text=D)},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{condition:a.value.enabled},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon",locked:""},{default:P(()=>[B("Call to action style")]),_:1}),h("div",{class:X(["flex items-center gap-3",{"opacity-60 formychat-locked child:pointer-events-none":k.value}])},[y(m(Ns),{modelValue:a.value.color,"onUpdate:modelValue":A[9]||(A[9]=D=>a.value.color=D)},{default:P(()=>[B(" Text Color ")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:a.value.background_color,"onUpdate:modelValue":A[10]||(A[10]=D=>a.value.background_color=D)},{default:P(()=>[B(" Background ")]),_:1},8,["modelValue"])],2)]),_:1},8,["condition"]),y(m(_e),{condition:a.value.enabled},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Text Size")]),_:1}),y(m(Nn),{class:"bg-gray-50",options:u.value,width:"85px",modelValue:a.value.size,"onUpdate:modelValue":A[11]||(A[11]=D=>a.value.size=D),locked:["custom"]},null,8,["options","modelValue"])]),_:1},8,["condition"]),y(m(_e),{condition:a.value.enabled&&a.value.size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom Text Size ")]),_:1}),h("div",pG,[xt(h("input",{class:"formychat-slider",type:"range",min:"8",max:"72","onUpdate:modelValue":A[12]||(A[12]=D=>a.value.size_custom=D)},null,512),[[Ot,a.value.size_custom]]),h("span",mG,q(a.value.size_custom||8)+"px",1)])]),_:1},8,["condition"])]),_:1}),gG,i.value.agent_mode==="agents"&&i.value.click_agent_to_redirect?z("",!0):(v(),qe(m(ji),{key:0,title:"Customize Form",gap:!1,id:"customize_form"},{default:P(()=>[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Choose the source through which you want to send message to WhatsApp ")]),_:1}),h("div",vG,[(v(!0),C(Ve,null,ft(m(b),(D,N)=>(v(),C("div",{class:X(["bg-white w-28 h-24 flex flex-col items-center gap-1 justify-center ring rounded cursor-pointer relative transition",{"ring-indigo-600":o.value.mode==N,"ring-slate-100 hover:ring-slate-300":o.value.mode!==N}]),onClick:Me(Q=>S(N),["prevent"])},[h("img",{src:D.logo,class:"w-10"},null,8,_G),h("span",bG,q(D.label),1),y(ze,{name:"bounce"},{default:P(()=>[o.value.mode==N?(v(),C("svg",wG,xG)):z("",!0)]),_:2},1024)],10,yG))),256))])]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.cf7NotActivated||n.value.cf7NotInstalled?(v(),C("div",kG,[SG,h("p",CG,[B(" Contact Form 7 is not "),h("strong",OG,q(n.value.CF7NotInstalled?"installed":"activated"),1),B("! Please "+q(n.value.CF7NotInstalled?"Install & Active":"Activate")+" it first to send unlimited messages through any of your CF7 forms ",1)]),h("div",null,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[13]||(A[13]=Me(D=>$("cf7"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",MG,[B(q(n.value.cf7NotInstalled?"Installing":"Activating")+" ",1),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",AG,q(n.value.cf7NotInstalled?"Install":"Activate"),1))]),_:1},8,["class"])])])):z("",!0)]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.gravityNotActivated||n.value.gravityNotInstalled?(v(),C("div",$G,[TG,PG,!n.value.gravityNotInstalled&&n.value.gravityNotActivated?(v(),C("div",LG,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[14]||(A[14]=Me(D=>$("gravity"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",EG,[B(" Activating "),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",DG,"Activate"))]),_:1},8,["class"])])):z("",!0)])):z("",!0)]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.wpformsNotActivated||n.value.wpformsNotInstalled?(v(),C("div",IG,[RG,h("p",FG,[B(" WPForms is not "),h("strong",BG,q(n.value.WPFormsNotInstalled?"installed":"activated"),1),B("! Please "+q(n.value.WPFormsNotInstalled?"Install & Active":"Activate")+" it first to send unlimited messages through any of your WPForms. ",1)]),h("div",null,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[15]||(A[15]=Me(D=>$("wpforms"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",NG,[B(q(n.value.wpformsNotInstalled?"Installing":"Activating")+" ",1),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",VG,q(n.value.wpformsNotInstalled?"Install":"Activate"),1))]),_:1},8,["class"])])])):z("",!0)]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.forminatorNotActivated||n.value.forminatorNotInstalled?(v(),C("div",zG,[jG,h("p",WG,[B(" Forminator is not "),h("strong",UG,q(n.value.forminatorNotInstalled?"installed":"activated"),1),B("! Please "+q(n.value.forminatorNotInstalled?"Install & Active":"Activate")+" it first to send unlimited messages through any of your forminator forms. ",1)]),h("div",null,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[16]||(A[16]=Me(D=>$("forminator"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",HG,[B(q(n.value.forminatorNotInstalled?"Installing":"Activating")+" ",1),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",QG,q(n.value.forminatorNotInstalled?"Install":"Activate"),1))]),_:1},8,["class"])])])):z("",!0)]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.fluentformNotActivated||n.value.fluentformNotInstalled?(v(),C("div",YG,[qG,h("p",GG,[B(" Fluent Forms is not "),h("strong",KG,q(n.value.fluentformNotInstalled?"installed":"activated"),1),B("! Please "+q(n.value.fluentformNotInstalled?"Install & Active":"Activate")+" it first to send unlimited messages through any of your Fluent Forms. ",1)]),h("div",null,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[17]||(A[17]=Me(D=>$("fluentform"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",XG,[B(q(n.value.fluentformNotInstalled?"Installing":"Activating")+" ",1),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",JG,q(n.value.fluentformNotInstalled?"Install":"Activate"),1))]),_:1},8,["class"])])])):z("",!0)]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.formidableNotActivated||n.value.formidableNotInstalled?(v(),C("div",ZG,[eK,h("p",tK,[B(" Formidable is not "),h("strong",sK,q(n.value.formidableNotInstalled?"installed":"activated"),1),B("! Please "+q(n.value.formidableNotInstalled?"Install & Active":"Activate")+" it first to send unlimited messages through any of your Formidable forms. ",1)]),h("div",null,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[18]||(A[18]=Me(D=>$("formidable"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",nK,[B(q(n.value.formidableNotInstalled?"Installing":"Activating")+" ",1),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",iK,q(n.value.formidableNotInstalled?"Install":"Activate"),1))]),_:1},8,["class"])])])):z("",!0)]),_:1}),y(ze,{name:"no"},{default:P(()=>[n.value.ninjaNotActivated||n.value.ninjaNotInstalled?(v(),C("div",rK,[oK,h("p",aK,[B(" Ninja Forms is not "),h("strong",lK,q(n.value.ninjaNotInstalled?"installed":"activated"),1),B("! Please "+q(n.value.ninjaNotInstalled?"Install & Active":"Activate")+" it first to send unlimited messages through any of your Ninja Forms. ",1)]),h("div",null,[y(m(ct),{class:X({"opacity-60 pointer-events-none":e.pluginActivating}),onClick:A[19]||(A[19]=Me(D=>$("ninja"),["prevent"]))},{default:P(()=>[e.pluginActivating?(v(),C("span",cK,[B(q(n.value.ninjaNotInstalled?"Installing":"Activating")+" ",1),y(m(Bn),{class:"w-4 h-4"})])):(v(),C("span",uK,q(n.value.ninjaNotInstalled?"Install":"Activate"),1))]),_:1},8,["class"])])])):z("",!0)]),_:1}),y(m(_e),{condition:o.value.mode=="cf7"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[dK]),_:1}),h("div",hK,[y(m($t),{onSelect:A[20]||(A[20]=D=>(n.value.cf7_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"cf7_id",modelValue:o.value.cf7_id,"onUpdate:modelValue":A[21]||(A[21]=D=>o.value.cf7_id=D),class:X([{"ring-red-500":n.value.cf7_id},"max-w-fit min-w-max"]),cursor:!0,options:m(t).contents.forms.cf7||[]},null,8,["modelValue","class","options"])]),h("div",null,[B(" You can "),h("a",{class:"text-indigo-500",href:`${m(f).site.url}/wp-admin/admin.php?page=wpcf7&post=${o.value.cf7_id}&action=edit#formychat`},"disable email notifications",8,fK),B(" from the selected CF7 form. ")])]),_:1},8,["condition"]),y(m(_e),{condition:o.value.mode=="gravity"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[pK]),_:1}),h("div",mK,[y(m($t),{onSelect:A[22]||(A[22]=D=>(n.value.gravity_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"gravity_form_id",modelValue:o.value.gravity_id,"onUpdate:modelValue":A[23]||(A[23]=D=>o.value.gravity_id=D),class:"max-w-fit min-w-52",options:m(t).contents.forms.gravity||[]},null,8,["modelValue","options"])])]),_:1},8,["condition"]),y(m(_e),{condition:o.value.mode=="wpforms"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[gK]),_:1}),h("div",vK,[y(m($t),{onSelect:A[24]||(A[24]=D=>(n.value.wpforms_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"wp_form_id",modelValue:o.value.wpforms_id,"onUpdate:modelValue":A[25]||(A[25]=D=>o.value.wpforms_id=D),class:"max-w-fit min-w-max",options:m(t).contents.forms.wpforms||[]},null,8,["modelValue","options"])])]),_:1},8,["condition"]),y(m(_e),{condition:o.value.mode=="fluentform"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[yK]),_:1}),h("div",_K,[y(m($t),{onSelect:A[26]||(A[26]=D=>(n.value.fluentform_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"fluentform_id",modelValue:o.value.fluentform_id,"onUpdate:modelValue":A[27]||(A[27]=D=>o.value.fluentform_id=D),class:"max-w-fit min-w-max",options:m(t).contents.forms.fluentform||[]},null,8,["modelValue","options"])])]),_:1},8,["condition"]),y(m(_e),{condition:o.value.mode=="forminator"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[bK]),_:1}),h("div",wK,[y(m($t),{onSelect:A[28]||(A[28]=D=>(n.value.forminator_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"forminator_id",modelValue:o.value.forminator_id,"onUpdate:modelValue":A[29]||(A[29]=D=>o.value.forminator_id=D),class:"max-w-fit min-w-max",options:m(t).contents.forms.forminator||[]},null,8,["modelValue","options"])])]),_:1},8,["condition"]),y(m(_e),{condition:o.value.mode=="formidable"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[xK]),_:1}),h("div",kK,[y(m($t),{onSelect:A[30]||(A[30]=D=>(n.value.formidable_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"formidable_id",modelValue:o.value.formidable_id,"onUpdate:modelValue":A[31]||(A[31]=D=>o.value.formidable_id=D),class:"max-w-fit min-w-max",options:m(t).contents.forms.formidable||[]},null,8,["modelValue","options"])])]),_:1},8,["condition"]),y(m(_e),{condition:o.value.mode=="ninja"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[SK]),_:1}),h("div",CK,[y(m($t),{onSelect:A[32]||(A[32]=D=>(n.value.ninja_id=!1,m(t).fetchFields())),placeholder:"Select form",name:"ninja_id",modelValue:o.value.ninja_id,"onUpdate:modelValue":A[33]||(A[33]=D=>o.value.ninja_id=D),class:"max-w-fit min-w-max",options:m(t).contents.forms.ninja||[]},null,8,["modelValue","options"])])]),_:1},8,["condition"]),y(m(_e),{class:X({"opacity-60 pointer-events-none":e.loadingFields})},{default:P(()=>[y(m(Pe),{hints:"Message template which will be sent to WhatsApp."},{default:P(()=>[B(" Message Template ")]),_:1}),o.value.mode==="formychat"?(v(),qe(m(pu),{key:0,form:o.value.mode,modelValue:i.value.message_template,"onUpdate:modelValue":A[34]||(A[34]=D=>i.value.message_template=D),fields:m(t).fields},null,8,["form","modelValue","fields"])):(v(),qe(m(pu),{key:1,form:o.value.mode,modelValue:i.value[o.value.mode+"_message_template"],"onUpdate:modelValue":A[35]||(A[35]=D=>i.value[o.value.mode+"_message_template"]=D),fields:m(t).fields},null,8,["form","modelValue","fields"]))]),_:1},8,["class"]),o.value.mode=="formychat"?(v(),qe(m(_e),{key:0},{default:P(()=>[h("div",OK,[y(m(At),{locked:"",modelValue:l.value.enabled,"onUpdate:modelValue":A[36]||(A[36]=D=>l.value.enabled=D),hints:"Enable this option to receive all lead information to your given email address"},{default:P(()=>[B(" Receive leads via email")]),_:1},8,["modelValue"]),y(m(hu))])]),_:1})):z("",!0),o.value.mode=="formychat"?(v(),qe(m(_e),{key:1,class:"space-y-2",condition:l.value.enabled||!1},{default:P(()=>[h("label",null,[xt(h("input",{type:"checkbox",class:"bg-transparent","onUpdate:modelValue":A[37]||(A[37]=D=>l.value.admin_email=D),value:m(p)},null,8,MK),[[ou,l.value.admin_email]]),B("Use admin email to receive leads")]),l.value.admin_email?(v(),qe(m(Gt),{key:0,type:"email",placeholder:m(p),class:"pointer-events-none"},null,8,["placeholder"])):(v(),qe(m(Gt),{key:1,name:"email_address",modelValue:l.value.address,"onUpdate:modelValue":A[38]||(A[38]=D=>l.value.address=D),error:n.value.email_address,type:"email",placeholder:"Enter email address"},null,8,["modelValue","error"])),h("p",AK,[$K,B(" Please configure any SMTP e.g. "),h("a",{class:"underline",href:`${m(f).site.url}/wp-admin/plugin-install.php?s=SMTP&tab=search&type=term`,target:"_blank"},"WP Mail SMTP",8,TK),B(" or "),h("a",{class:"underline",href:`${m(f).site.url}/wp-admin/plugin-install.php?s=SMTP&tab=search&type=term`,target:"_blank"},"FluentSMTP",8,PK),B(" plugin to receive mail. ")])]),_:1},8,["condition"])):z("",!0),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Form Size ")]),_:1}),y(m(Nn),{options:u.value,modelValue:o.value.size,"onUpdate:modelValue":A[39]||(A[39]=D=>o.value.size=D),width:"85px",class:"bg-gray-50"},null,8,["options","modelValue"])]),_:1}),y(m(_e),{condition:o.value.size=="custom"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Custom Form Size ")]),_:1}),h("div",LK,[xt(h("input",{class:"formychat-slider",type:"range",min:"100",max:"1000","onUpdate:modelValue":A[40]||(A[40]=D=>o.value.size_custom=D)},null,512),[[Ot,o.value.size_custom]]),h("span",EK,q(o.value.size_custom||300)+"px",1)])]),_:1},8,["condition"]),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Form Title ")]),_:1}),y(m(Gt),{placeholder:"Form Title (Ex: Contact via WhatsApp)",modelValue:o.value.title,"onUpdate:modelValue":A[41]||(A[41]=D=>o.value.title=D),name:"form_title"},null,8,["modelValue"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),{hints:"Leave blank to disable"},{default:P(()=>[B(" Header Text ")]),_:1}),h("div",DK,[y(m(Wi),{placeholder:"Header Text (Ex: Please fill up the fields below)",class:"resize-y",name:"form_subtitle",modelValue:o.value.subtitle,"onUpdate:modelValue":A[42]||(A[42]=D=>o.value.subtitle=D)},null,8,["modelValue"])])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),{hints:"Leave blank to disable"},{default:P(()=>[B(" Footer Text ")]),_:1}),h("div",IK,[y(m(Wi),{placeholder:"Footer Text (Ex: Powered by FormyChat)",class:"resize-none",name:"form_footer",modelValue:o.value.footer,"onUpdate:modelValue":A[43]||(A[43]=D=>o.value.footer=D)},null,8,["modelValue"])])]),_:1}),y(m(_e),{condition:o.value.mode=="formychat"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B(" Submit Button Text ")]),_:1}),y(m(Gt),{placeholder:"Button Text (Ex: Send on WhatsApp)",name:"form_submit",modelValue:o.value.submit,"onUpdate:modelValue":A[44]||(A[44]=D=>o.value.submit=D)},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{class:"space-y-3",condition:o.value.mode=="formychat"},{default:P(()=>[h("div",RK,[y(m(At),{modelValue:o.value.show_country_code_field,"onUpdate:modelValue":A[45]||(A[45]=D=>o.value.show_country_code_field=D),hints:"This will add country code with number to choose.",locked:""},{default:P(()=>[B(" Allow users to select country code")]),_:1},8,["modelValue"]),y(m(hu))]),y(ze,{name:"slide"},{default:P(()=>[o.value.show_country_code_field?(v(),C("div",FK,[y(m(Pe),null,{default:P(()=>[B(" Default Country Code ")]),_:1}),y(m($t),{modelValue:o.value.country_code,"onUpdate:modelValue":A[46]||(A[46]=D=>o.value.country_code=D),class:"w-fit",options:m(t).contents.countries,placeholder:"Select country"},null,8,["modelValue","options"])])):z("",!0)]),_:1})]),_:1},8,["condition"]),y(m(_e),null,{default:P(()=>[y(m(Pe),{locked:""},{default:P(()=>[B(" Form Style ")]),_:1}),h("div",{class:X(["flex items-center gap-4",{"opacity-60 formychat-locked child:pointer-events-none":k.value}])},[y(m(Ns),{modelValue:o.value.text_color,"onUpdate:modelValue":A[47]||(A[47]=D=>o.value.text_color=D)},{default:P(()=>[B("Text Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:o.value.background_color,"onUpdate:modelValue":A[48]||(A[48]=D=>o.value.background_color=D)},{default:P(()=>[B("Background")]),_:1},8,["modelValue"])],2)]),_:1}),y(m(_e),{class:"w-full"},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Font Family")]),_:1}),y(m($t),{options:m(t).contents.fonts,modelValue:o.value.font_family,"onUpdate:modelValue":A[49]||(A[49]=D=>o.value.font_family=D),placeholder:"Select font",class:"w-56"},null,8,["options","modelValue"])]),_:1})]),_:1})),BK,y(m(ji),{title:"Form Behavior",gap:!1},{default:P(()=>[y(m(_e),{class:"space-y-3"},{default:P(()=>[y(m(At),{modelValue:o.value.open_by_default,"onUpdate:modelValue":A[50]||(A[50]=D=>o.value.open_by_default=D),hints:"Open the form by default when the page is loaded."},{default:P(()=>[B(" Open by default")]),_:1},8,["modelValue"]),y(m(At),{modelValue:o.value.close_on_submit,"onUpdate:modelValue":A[51]||(A[51]=D=>o.value.close_on_submit=D),hints:"Close the form after a successful submission."},{default:P(()=>[B("Close on Submit")]),_:1},8,["modelValue"])]),_:1})]),_:1})]),y(ze,{name:"fade"},{default:P(()=>[M.value?(v(),C("div",NK,[h("div",{class:"absolute top-0 left-0 w-full h-full bg-black opacity-50",onClick:A[52]||(A[52]=D=>M.value="")}),h("div",VK,[h("div",{onClick:A[53]||(A[53]=D=>M.value=""),class:"absolute -top-10 -right-10 cursor-pointer w-10 h-10 flex items-center justify-center text-white hover:brightness-110 hover:scale-110 transition"},zK),h("iframe",{class:"w-full h-full",src:"https://www.youtube.com/embed/"+M.value+"?autoplay=1"},null,8,jK)])])):z("",!0)]),_:1})]))}},UK={class:"w-full h-full space-y-6"},HK={class:"flex items-center gap-5 flex-wrap child:w-40"},QK=["onClick"],YK=["src"],qK={key:0,class:"rounded group-hover:flex hidden justify-center items-center absolute left-0 top-0 w-full h-full bounceIn"},GK=[h("div",{class:"bg-white absolute left-0 top-0 w-full h-full rounded z-0 opacity-50"},null,-1),h("span",{class:"bg-indigo-600 px-2 h-6 text-[12px] font-medium flex items-center justify-center rounded-2xl text-white z-10"},"Upcoming",-1)],KK={key:0,xmlns:"http://www.w3.org/2000/svg",class:"fill-indigo-500 w-4 absolute right-2 top-2",viewBox:"0 0 16 16"},XK=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],JK={class:"group-hover:font-medium text-gray-700 text-sm tracking-wide text-center capitalize"},ZK={class:"flex items-center gap-5 flex-wrap child:w-24"},eX=["onClick"],tX=["src"],sX={key:0,class:"rounded group-hover:flex hidden justify-center items-center absolute left-0 top-0 w-full h-full bounceIn"},nX=h("div",{class:"bg-white absolute left-0 top-0 w-full h-full rounded z-0 opacity-50"},null,-1),iX={key:0,xmlns:"http://www.w3.org/2000/svg",class:"fill-indigo-500 w-4 absolute right-2 top-2",viewBox:"0 0 16 16"},rX=[h("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"},null,-1)],oX={class:"group-hover:font-medium text-gray-700 text-sm tracking-wide text-center capitalize"},aX={key:0,class:"space-y-6"},lX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},cX={class:"w-full flex items-center justify-between gap-2"},uX={class:"w-16"},dX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},hX={class:"w-full flex items-center justify-between gap-2"},fX={class:"w-16"},pX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},mX={key:1,class:"space-y-6"},gX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},vX={key:0,class:"space-y-5"},yX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},_X={class:"w-full flex items-center justify-between gap-2"},bX={class:"w-16"},wX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},xX={class:"w-full flex items-center justify-between gap-2"},kX={class:"w-16"},SX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},CX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},OX=h("code",null,"png",-1),MX=h("code",null,"jpg",-1),AX=h("code",null,"svg",-1),$X={key:1,class:"space-y-5"},TX={class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},PX={class:"w-full flex items-center justify-between gap-2"},LX={class:"w-16"},EX={class:"w-full flex items-center justify-between gap-2"},DX={class:"w-16"},IX={key:0,class:"bg-slate-50 p-5 space-y-5 rounded border border-gray-100"},RX={class:"flex items-center gap-4"},FX={class:"flex flex-col gap-2.5 child:cursor-pointer"},BX=["onClick"],NX=[h("span",null,null,-1)],VX={__name:"Greetings",setup(s){const e=eo(),t=ie(()=>{var l;return((l=e.currentWidget.config)==null?void 0:l.greetings)||{}}),n=ie(()=>{var l,c,u;return((u=(c=(l=e.currentWidget.config)==null?void 0:l.greetings)==null?void 0:c.templates)==null?void 0:u.simple)||{}}),i=ie(()=>{var l,c,u;return((u=(c=(l=e.currentWidget.config)==null?void 0:l.greetings)==null?void 0:c.templates)==null?void 0:u.wave)||{}}),r={small:"Small",medium:"Medium",large:"Large",custom:"Custom"},o=ie(()=>!formychat_admin_vars.is_premium),a=l=>{l===2&o.value||(t.value.style=l,t.value.template==="wave"&&(i.value.icon_position=l===1?"before_heading":"before_cta"))};return(l,c)=>(v(),C("div",UK,[y(m(_e),null,{default:P(()=>[y(m(At),{modelValue:t.value.enabled,"onUpdate:modelValue":c[0]||(c[0]=u=>t.value.enabled=u),label:"Enable Greetings"},{default:P(()=>[B("Display Greeting Popup ")]),_:1},8,["modelValue"])]),_:1}),y(m(_e),{class:"w-full h-full space-y-6",condition:t.value.enabled==!0},{default:P(()=>[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Choose Greetings Template")]),_:1}),h("div",HK,[(v(),C(Ve,null,ft(["simple","wave","whatsapp"],u=>h("div",{class:"flex flex-col gap-2 group cursor-pointer",onClick:Me(d=>t.value.template=u=="whatsapp"?t.value.template:u,["prevent"])},[h("div",{class:X(["relative ring-[2.5px] ring-gray-200 rounded h-40 w-ful flex items-center justify-center transition",{"group-hover:ring-indigo-500":u!=="whatsapp","ring-indigo-500":t.value.template==u}])},[h("img",{class:"w-1/2",src:l.Image(`greetings/styles/${u}${u==="whatsapp"?"":"-1"}.png`)},null,8,YK),u==="whatsapp"?(v(),C("div",qK,GK)):z("",!0),y(ze,{name:"bounce"},{default:P(()=>[t.value.template==u?(v(),C("svg",KK,XK)):z("",!0)]),_:2},1024)],2),h("span",JK,q(u),1)],8,QK)),64))])]),_:1}),y(m(_e),null,{default:P(()=>[h("div",ZK,[(v(),C(Ve,null,ft([1,2],u=>h("div",{class:"flex flex-col gap-2 group cursor-pointer",onClick:d=>a(u)},[h("div",{class:X(["relative overflow-hidden ring-[2.5px] ring-gray-200 rounded group h-24 w-ful flex items-center justify-center transition group-hover:ring-indigo-500",{"ring-indigo-500":t.value.style==u,"formychat-locked":u===2&&o.value}])},[h("img",{class:"w-2/3 h-auto",src:l.Image(`greetings/styles/${t.value.template}-${u}.png`)},null,8,tX),u===2&&o.value?(v(),C("div",sX,[nX,y(m(Vt))])):z("",!0),y(ze,{name:"bounce"},{default:P(()=>[t.value.style==u?(v(),C("svg",iX,rX)):z("",!0)]),_:2},1024)],2),h("span",oX,"Style "+q(u),1)],8,eX)),64))])]),_:1}),y(m(ji),{title:"Customize Greetings",gap:!1},{default:P(()=>[t.value.template==="simple"?(v(),C("div",aX,[h("div",lX,[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting Heading")]),_:1}),y(m(Wi),{modelValue:n.value.heading,"onUpdate:modelValue":c[1]||(c[1]=u=>n.value.heading=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Heading Size")]),_:1}),y(m(Nn),{options:r,modelValue:n.value.heading_size,"onUpdate:modelValue":c[2]||(c[2]=u=>n.value.heading_size=u),locked:["custom"]},null,8,["modelValue"])]),_:1}),y(m(_e),{condition:n.value.heading_size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom Heading Size ")]),_:1}),h("div",cX,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":c[3]||(c[3]=u=>n.value.heading_size_custom=u),min:"8",max:"72"},null,512),[[Ot,n.value.heading_size_custom]]),h("span",uX,q(n.value.heading_size_custom)+"px",1)])]),_:1},8,["condition"])]),h("div",dX,[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting Message")]),_:1}),y(m(Wi),{modelValue:n.value.message,"onUpdate:modelValue":c[4]||(c[4]=u=>n.value.message=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Message Size")]),_:1}),y(m(Nn),{options:r,modelValue:n.value.message_size,"onUpdate:modelValue":c[5]||(c[5]=u=>n.value.message_size=u),locked:["custom"]},null,8,["modelValue"])]),_:1}),y(m(_e),{condition:n.value.message_size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom Message Size ")]),_:1}),h("div",hX,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":c[6]||(c[6]=u=>n.value.message_size_custom=u),min:"8",max:"72"},null,512),[[Ot,n.value.message_size_custom]]),h("span",fX,q(n.value.message_size_custom)+"px",1)])]),_:1},8,["condition"])]),h("div",pX,[y(m(_e),null,{default:P(()=>[y(m(Pe),{locked:""},{default:P(()=>[B("Greeting Colors")]),_:1}),h("div",{class:X(["flex items-center gap-4 flex-wrap",{"formychat-locked opacity-60 child:pointer-events-none":o.value}])},[y(m(Ns),{modelValue:n.value.heading_color,"onUpdate:modelValue":c[7]||(c[7]=u=>n.value.heading_color=u)},{default:P(()=>[B("Heading Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:n.value.message_color,"onUpdate:modelValue":c[8]||(c[8]=u=>n.value.message_color=u)},{default:P(()=>[B("Message Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:n.value.background_color,"onUpdate:modelValue":c[9]||(c[9]=u=>n.value.background_color=u)},{default:P(()=>[B("Background")]),_:1},8,["modelValue"])],2)]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greetings Font Family")]),_:1}),y(m($t),{modelValue:n.value.font_family,"onUpdate:modelValue":c[10]||(c[10]=u=>n.value.font_family=u),options:m(e).contents.fonts,class:"w-48"},null,8,["modelValue","options"])]),_:1})])])):z("",!0),t.value.template==="wave"?(v(),C("div",mX,[h("div",gX,[y(m(_e),{class:"space-y-3"},{default:P(()=>[y(m(At),{modelValue:i.value.show_icon,"onUpdate:modelValue":c[11]||(c[11]=u=>i.value.show_icon=u)},{default:P(()=>[B("Show Main Content")]),_:1},8,["modelValue"])]),_:1}),y(m(_e),{condition:i.value.show_icon},{default:P(()=>[i.value.show_icon?(v(),qe(m(du),{key:0,locked:"",modelValue:i.value.icon_url,"onUpdate:modelValue":c[12]||(c[12]=u=>i.value.icon_url=u),custom:i.value.icon_url_custom,"onUpdate:custom":c[13]||(c[13]=u=>i.value.icon_url_custom=u),default:l.Image("greetings/hand-wave.svg")},null,8,["modelValue","custom","default"])):z("",!0)]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_icon},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Position")]),_:1}),y(m(Nn),{width:"135px",options:t.value.style===1?{before_heading:"Before Heading",after_heading:"After Heading",after_message:"After Message"}:{before_cta:"Before CTA",after_cta:"After CTA"},locked:["after_heading","after_message"],modelValue:i.value.icon_position,"onUpdate:modelValue":c[14]||(c[14]=u=>i.value.icon_position=u)},null,8,["options","modelValue"])]),_:1},8,["condition"])]),t.value.style===1?(v(),C("div",vX,[h("div",yX,[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting Heading")]),_:1}),y(m(Wi),{modelValue:i.value.heading,"onUpdate:modelValue":c[15]||(c[15]=u=>i.value.heading=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Heading Size")]),_:1}),y(m(Nn),{options:r,modelValue:i.value.heading_size,"onUpdate:modelValue":c[16]||(c[16]=u=>i.value.heading_size=u)},null,8,["modelValue"])]),_:1}),y(m(_e),{condition:i.value.heading_size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom Heading Size ")]),_:1}),h("div",_X,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":c[17]||(c[17]=u=>i.value.heading_size_custom=u),min:"20",max:"150"},null,512),[[Ot,i.value.heading_size_custom]]),h("span",bX,q(i.value.heading_size_custom)+"px",1)])]),_:1},8,["condition"])]),h("div",wX,[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting Message")]),_:1}),y(m(Wi),{modelValue:i.value.message,"onUpdate:modelValue":c[18]||(c[18]=u=>i.value.message=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Message Size")]),_:1}),y(m(Nn),{options:r,modelValue:i.value.message_size,"onUpdate:modelValue":c[19]||(c[19]=u=>i.value.message_size=u)},null,8,["modelValue"])]),_:1}),y(m(_e),{condition:i.value.message_size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom Heading Size ")]),_:1}),h("div",xX,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":c[20]||(c[20]=u=>i.value.message_size_custom=u),min:"20",max:"150"},null,512),[[Ot,i.value.message_size_custom]]),h("span",kX,q(i.value.message_size_custom)+"px",1)])]),_:1},8,["condition"])]),h("div",SX,[y(m(_e),null,{default:P(()=>[y(m(Pe),{locked:""},{default:P(()=>[B("Greeting Colors")]),_:1}),h("div",{class:X(["flex items-center gap-4",{"formychat-locked opacity-60 child:pointer-events-none":o.value}])},[y(m(Ns),{modelValue:i.value.heading_color,"onUpdate:modelValue":c[21]||(c[21]=u=>i.value.heading_color=u)},{default:P(()=>[B("Heading Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:i.value.message_color,"onUpdate:modelValue":c[22]||(c[22]=u=>i.value.message_color=u)},{default:P(()=>[B("Message Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:i.value.background_color,"onUpdate:modelValue":c[23]||(c[23]=u=>i.value.background_color=u)},{default:P(()=>[B("Background")]),_:1},8,["modelValue"])],2)]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greetings Font Family")]),_:1}),y(m($t),{modelValue:i.value.font_family,"onUpdate:modelValue":c[24]||(c[24]=u=>i.value.font_family=u),options:m(e).contents.fonts,class:"w-48"},null,8,["modelValue","options"])]),_:1})]),h("div",CX,[y(m(_e),{class:"space-y-3"},{default:P(()=>[y(m(At),{modelValue:i.value.show_cta,"onUpdate:modelValue":c[25]||(c[25]=u=>i.value.show_cta=u)},{default:P(()=>[B("Show Greetings CTA")]),_:1},8,["modelValue"])]),_:1}),y(m(_e),{condition:i.value.show_cta},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting CTA Text")]),_:1}),y(m(Wi),{modelValue:i.value.cta_text,"onUpdate:modelValue":c[26]||(c[26]=u=>i.value.cta_text=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{class:"space-y-3",condition:i.value.show_cta},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("CTA Icon "),OX,B(", "),MX,B(", "),AX]),_:1}),y(m(du),{locked:"",modelValue:i.value.cta_icon_url,"onUpdate:modelValue":c[27]||(c[27]=u=>i.value.cta_icon_url=u),custom:i.value.cta_icon_url_custom,"onUpdate:custom":c[28]||(c[28]=u=>i.value.cta_icon_url_custom=u),default:l.Image("greetings/vector.svg")},null,8,["modelValue","custom","default"])]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_cta},{default:P(()=>[y(m(Pe),{locked:""},{default:P(()=>[B("CTA Style")]),_:1}),h("div",{class:X(["flex items-center gap-4",{"formychat-locked opacity-60 child:pointer-events-none":o.value}])},[y(m(Ns),{modelValue:i.value.cta_text_color,"onUpdate:modelValue":c[29]||(c[29]=u=>i.value.cta_text_color=u)},{default:P(()=>[B("Text Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:i.value.cta_background_color,"onUpdate:modelValue":c[30]||(c[30]=u=>i.value.cta_background_color=u)},{default:P(()=>[B("Background")]),_:1},8,["modelValue"])],2)]),_:1},8,["condition"])])])):z("",!0),t.value.style===2?(v(),C("div",$X,[h("div",TX,[y(m(_e),null,{default:P(()=>[y(m(At),{modelValue:i.value.show_cta,"onUpdate:modelValue":c[31]||(c[31]=u=>i.value.show_cta=u)},{default:P(()=>[B("Show Greeting CTA")]),_:1},8,["modelValue"])]),_:1}),y(m(_e),{condition:i.value.show_cta},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting CTA Heading")]),_:1}),y(m(Wi),{modelValue:i.value.cta_heading,"onUpdate:modelValue":c[32]||(c[32]=u=>i.value.cta_heading=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_cta},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("CTA Heading Size")]),_:1}),y(m(Nn),{options:r,modelValue:i.value.cta_heading_size,"onUpdate:modelValue":c[33]||(c[33]=u=>i.value.cta_heading_size=u)},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_cta&&i.value.cta_heading_size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom CTA Heading Size ")]),_:1}),h("div",PX,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":c[34]||(c[34]=u=>i.value.cta_heading_size_custom=u),min:"20",max:"150"},null,512),[[Ot,i.value.cta_heading_size_custom]]),h("span",LX,q(i.value.cta_heading_size_custom)+"px",1)])]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_cta},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting CTA Message")]),_:1}),y(m(Wi),{modelValue:i.value.cta_message,"onUpdate:modelValue":c[35]||(c[35]=u=>i.value.cta_message=u),placeholder:"Hi! Have any queries?",white:!0},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_cta},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("CTA Message Size")]),_:1}),y(m(Nn),{options:r,modelValue:i.value.cta_message_size,"onUpdate:modelValue":c[36]||(c[36]=u=>i.value.cta_message_size=u)},null,8,["modelValue"])]),_:1},8,["condition"]),y(m(_e),{condition:i.value.show_cta&&i.value.cta_message_size=="custom"},{default:P(()=>[y(m(Pe),{hints:"Select the size of the icon"},{default:P(()=>[B(" Custom CTA Message Size ")]),_:1}),h("div",EX,[xt(h("input",{class:"formychat-slider",type:"range","onUpdate:modelValue":c[37]||(c[37]=u=>i.value.cta_message_size_custom=u),min:"20",max:"150"},null,512),[[Ot,i.value.cta_message_size_custom]]),h("span",DX,q(i.value.cta_message_size_custom)+"px",1)])]),_:1},8,["condition"])]),y(ze,{name:"slide"},{default:P(()=>[i.value.show_cta?(v(),C("div",IX,[y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("CTA Colors")]),_:1}),h("div",RX,[y(m(Ns),{modelValue:i.value.cta_heading_color,"onUpdate:modelValue":c[38]||(c[38]=u=>i.value.cta_heading_color=u)},{default:P(()=>[B("Heading Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:i.value.cta_message_color,"onUpdate:modelValue":c[39]||(c[39]=u=>i.value.cta_message_color=u)},{default:P(()=>[B("Message Color")]),_:1},8,["modelValue"]),y(m(Ns),{modelValue:i.value.cta_background_color,"onUpdate:modelValue":c[40]||(c[40]=u=>i.value.cta_background_color=u)},{default:P(()=>[B("Background")]),_:1},8,["modelValue"])])]),_:1}),y(m(_e),null,{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("Greeting Font Family")]),_:1}),y(m($t),{modelValue:i.value.font_family,"onUpdate:modelValue":c[41]||(c[41]=u=>i.value.font_family=u),options:m(e).contents.fonts,class:"w-48"},null,8,["modelValue","options"])]),_:1})])):z("",!0)]),_:1})])):z("",!0)])):z("",!0)]),_:1}),y(m(ji),{title:"Greeting Behavior",gap:!1},{default:P(()=>[y(m(Pe),null,{default:P(()=>[B("On click Action")]),_:1}),h("div",FX,[(v(),C(Ve,null,ft({show_form:"Load The Selected Form",redirect:"Redirected to WhatsApp directly"},(u,d)=>h("label",{class:X(["flex items-center gap-4 group",{"text-indigo-500":t.value.on_click==d}]),onClick:Me(f=>o.value&&d=="redirect"?null:t.value.on_click=d,["prevent"])},[h("div",{class:X(["w-5 h-5 bg-white border-[5px] rounded-full transition",{"border-indigo-500":t.value.on_click==d,"border-gray-100":t.value.on_click!==d,"group-hover:border-indigo-500":t.value.on_click!==d&&!o.value,"formychat-locked":o.value&&d==="redirect"}])},NX,2),B(),h("span",{class:X({"opacity-60 formychat-locked":o.value&&d==="redirect"})},q(u),3),d==="redirect"?(v(),qe(m(Vt),{key:0})):z("",!0)],10,BX)),64))])]),_:1})]),_:1},8,["condition"])]))}},Ei=s=>(Ds("data-v-ebfeb423"),s=s(),Is(),s),zX={class:"w-full max-w-[480px] flex-col gap-3 items-center z-20 relative"},jX=Ei(()=>h("div",{class:"bg-slate-50 border-b border-slate-200 h-8 flex items-center gap-2 child:w-3 child:h-3 child:rounded-full px-3"},[h("span",{class:"bg-red-400"}),h("span",{class:"bg-yellow-400"}),h("span",{class:"bg-green-400"})],-1)),WX=[Ei(()=>h("path",{"fill-rule":"evenodd",d:"M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708"},null,-1))],UX={key:0,class:"formychat-header px-5 pt-3"},HX={key:0,class:"formychat-widget-agents"},QX={class:"formychat-widget-agents-agent"},YX={class:"formychat-widget-agents-agent-picture"},qX=["src"],GX={class:"formychat-widget-agents-name"},KX={class:"font-semibold text-[15px]"},XX={class:"text-[12px] text-slate-400"},JX={key:1,class:"bg-yellow-50 border border-yellow-200 px-6 py-4 rounded text-yellow-500 text-center"},ZX={key:1},eJ={class:"formychat-widget-form-fields",style:{width:"100% !important"}},tJ=["for"],sJ=["type","placeholder","name","required","minlength","maxlength","min","max","step","pattern"],nJ=["name","required","minlength","maxlength","placeholder"],iJ={key:3,class:"w-full relative flex items-center ring-1 ring-gray-300 rounded gap-0 focus:ring-gray-600",tabindex:"-1"},rJ=Ei(()=>h("input",{type:"text",tabindex:"-1",placeholder:"Enter your phone",class:"border-0 text-gray-400 ring-0 w-full pl-1 pr-2 placeholder:text-sm placeholder:text-gray-400",style:{width:"100% !important"}},null,-1)),oJ=["name","required","minlength","maxlength","placeholder"],aJ={key:0,class:"formychat-widget-form-footer"},lJ={class:"formychat-widget-form-submit"},cJ=Ei(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},[h("path",{d:"M13.601 2.326A7.85 7.85 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.9 7.9 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.9 7.9 0 0 0 13.6 2.326zM7.994 14.521a6.6 6.6 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.56 6.56 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592m3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.73.73 0 0 0-.529.247c-.182.198-.691.677-.691 1.654s.71 1.916.81 2.049c.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232"})],-1)),uJ={class:"formychat-widget-custom-form"},dJ=["src"],hJ={key:0,class:"formychat-footer mb-6 mt-0"},fJ={key:0,class:"formychat-widget-greetings"},pJ=[Ei(()=>h("svg",{viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M5.84006 0.909735C5.89007 0.861332 5.92996 0.803424 5.95742 0.739389C5.98487 0.675355 5.99934 0.606476 5.99998 0.536772C6.00061 0.467068 5.98741 0.397935 5.96112 0.333407C5.93484 0.268878 5.89601 0.210247 5.8469 0.160933C5.79779 0.11162 5.73937 0.0726119 5.67507 0.0461858C5.61077 0.0197597 5.54187 0.00644469 5.47238 0.00701731C5.40289 0.00758993 5.33422 0.0220389 5.27036 0.0495211C5.2065 0.0770034 5.14873 0.116969 5.10043 0.167085L3.00296 2.27044L0.906189 0.167085C0.858279 0.115507 0.800504 0.0741387 0.736311 0.0454462C0.672117 0.0167537 0.60282 0.00132536 0.532553 8.16984e-05C0.462287 -0.00116197 0.39249 0.0118046 0.327328 0.0382075C0.262165 0.0646105 0.202971 0.103909 0.153277 0.153759C0.103584 0.203609 0.0644082 0.262988 0.0380879 0.328355C0.0117676 0.393723 -0.00115833 0.463739 8.14426e-05 0.534226C0.00132121 0.604713 0.0167013 0.674228 0.0453039 0.738623C0.0739065 0.803018 0.115146 0.860975 0.166562 0.909036L2.26194 3.01309L0.165166 5.11645C0.0727267 5.21597 0.0224017 5.34759 0.0247938 5.4836C0.0271859 5.6196 0.0821082 5.74936 0.17799 5.84554C0.273871 5.94172 0.403226 5.99682 0.538802 5.99922C0.674377 6.00162 0.805589 5.95114 0.904793 5.85841L3.00296 3.75505L5.09974 5.85911C5.19894 5.95184 5.33015 6.00232 5.46573 5.99992C5.6013 5.99752 5.73066 5.94242 5.82654 5.84624C5.92242 5.75006 5.97734 5.6203 5.97974 5.4843C5.98213 5.34829 5.9318 5.21667 5.83936 5.11715L3.74399 3.01309L5.84006 0.909735Z",fill:"#BDBDBD"})],-1))],mJ={key:0,class:"formychat-widget-greetings-simple-cloud"},gJ=[Ei(()=>h("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M120.167 26.9229H0.444336C6.30566 11.199 21.4561 0 39.2227 0C53.7012 0 66.4424 7.43732 73.835 18.7C79.0801 16.2946 84.9141 14.9537 91.0615 14.9537C102.41 14.9537 112.692 19.5233 120.167 26.9229Z",fill:"currentColor"},null,-1))],vJ=[Ei(()=>h("svg",{viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M5.84006 0.909735C5.89007 0.861332 5.92996 0.803424 5.95742 0.739389C5.98487 0.675355 5.99934 0.606476 5.99998 0.536772C6.00061 0.467068 5.98741 0.397935 5.96112 0.333407C5.93484 0.268878 5.89601 0.210247 5.8469 0.160933C5.79779 0.11162 5.73937 0.0726119 5.67507 0.0461858C5.61077 0.0197597 5.54187 0.00644469 5.47238 0.00701731C5.40289 0.00758993 5.33422 0.0220389 5.27036 0.0495211C5.2065 0.0770034 5.14873 0.116969 5.10043 0.167085L3.00296 2.27044L0.906189 0.167085C0.858279 0.115507 0.800504 0.0741387 0.736311 0.0454462C0.672117 0.0167537 0.60282 0.00132536 0.532553 8.16984e-05C0.462287 -0.00116197 0.39249 0.0118046 0.327328 0.0382075C0.262165 0.0646105 0.202971 0.103909 0.153277 0.153759C0.103584 0.203609 0.0644082 0.262988 0.0380879 0.328355C0.0117676 0.393723 -0.00115833 0.463739 8.14426e-05 0.534226C0.00132121 0.604713 0.0167013 0.674228 0.0453039 0.738623C0.0739065 0.803018 0.115146 0.860975 0.166562 0.909036L2.26194 3.01309L0.165166 5.11645C0.0727267 5.21597 0.0224017 5.34759 0.0247938 5.4836C0.0271859 5.6196 0.0821082 5.74936 0.17799 5.84554C0.273871 5.94172 0.403226 5.99682 0.538802 5.99922C0.674377 6.00162 0.805589 5.95114 0.904793 5.85841L3.00296 3.75505L5.09974 5.85911C5.19894 5.95184 5.33015 6.00232 5.46573 5.99992C5.6013 5.99752 5.73066 5.94242 5.82654 5.84624C5.92242 5.75006 5.97734 5.6203 5.97974 5.4843C5.98213 5.34829 5.9318 5.21667 5.83936 5.11715L3.74399 3.01309L5.84006 0.909735Z",fill:"#BDBDBD"})],-1))],yJ={key:0,class:"formychat-widget-greetings-wave-1-icon"},_J=["src"],bJ={key:1,class:"formychat-widget-greetings-wave-1-icon"},wJ=["src"],xJ={key:2,class:"formychat-widget-greetings-wave-1-icon"},kJ=["src"],SJ=["src"],CJ={key:0},OJ=[Ei(()=>h("svg",{viewBox:"0 0 6 6",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[h("path",{d:"M5.84006 0.909735C5.89007 0.861332 5.92996 0.803424 5.95742 0.739389C5.98487 0.675355 5.99934 0.606476 5.99998 0.536772C6.00061 0.467068 5.98741 0.397935 5.96112 0.333407C5.93484 0.268878 5.89601 0.210247 5.8469 0.160933C5.79779 0.11162 5.73937 0.0726119 5.67507 0.0461858C5.61077 0.0197597 5.54187 0.00644469 5.47238 0.00701731C5.40289 0.00758993 5.33422 0.0220389 5.27036 0.0495211C5.2065 0.0770034 5.14873 0.116969 5.10043 0.167085L3.00296 2.27044L0.906189 0.167085C0.858279 0.115507 0.800504 0.0741387 0.736311 0.0454462C0.672117 0.0167537 0.60282 0.00132536 0.532553 8.16984e-05C0.462287 -0.00116197 0.39249 0.0118046 0.327328 0.0382075C0.262165 0.0646105 0.202971 0.103909 0.153277 0.153759C0.103584 0.203609 0.0644082 0.262988 0.0380879 0.328355C0.0117676 0.393723 -0.00115833 0.463739 8.14426e-05 0.534226C0.00132121 0.604713 0.0167013 0.674228 0.0453039 0.738623C0.0739065 0.803018 0.115146 0.860975 0.166562 0.909036L2.26194 3.01309L0.165166 5.11645C0.0727267 5.21597 0.0224017 5.34759 0.0247938 5.4836C0.0271859 5.6196 0.0821082 5.74936 0.17799 5.84554C0.273871 5.94172 0.403226 5.99682 0.538802 5.99922C0.674377 6.00162 0.805589 5.95114 0.904793 5.85841L3.00296 3.75505L5.09974 5.85911C5.19894 5.95184 5.33015 6.00232 5.46573 5.99992C5.6013 5.99752 5.73066 5.94242 5.82654 5.84624C5.92242 5.75006 5.97734 5.6203 5.97974 5.4843C5.98213 5.34829 5.9318 5.21667 5.83936 5.11715L3.74399 3.01309L5.84006 0.909735Z",fill:"#BDBDBD"})],-1))],MJ={key:0,class:"formychat-widget-greetings-wave-2-icon"},AJ=["src"],$J={key:2,class:"formychat-widget-greetings-wave-2-icon"},TJ=["src"],PJ=["src"],LJ={class:"z-0 relative mx-auto text-slate-400 flex h-10 items-center justify-center border-4 border-slate-200 bg-slate-200 child:h-full child:w-1/2 w-28 child:flex child:items-center child:justify-center cursor-pointer child:transition rounded overflow-hidden"},EJ=[Ei(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M6 12q0 1-.25 1.5H5a.5.5 0 0 0 0 1h6a.5.5 0 0 0 0-1h-.75Q10 13 10 12h4c2 0 2-2 2-2V4c0-2-2-2-2-2H2C0 2 0 4 0 4v6c0 2 2 2 2 2z"})],-1))],DJ=[Ei(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-5",viewBox:"0 0 16 16"},[h("path",{d:"M3 2a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm6 11a1 1 0 1 0-2 0 1 1 0 0 0 2 0"})],-1))],IJ=Nt({__name:"Preview",setup(s){const e=eo(),t=ie(()=>{var T,E;return((E=(T=e.currentWidget)==null?void 0:T.config)==null?void 0:E.whatsapp)||{}}),n=ie(()=>{var T,E;return((E=(T=e.currentWidget)==null?void 0:T.config)==null?void 0:E.icon)||{}}),i=ie(()=>{var T,E;return((E=(T=e.currentWidget)==null?void 0:T.config)==null?void 0:E.cta)||{}}),r=ie(()=>{var T,E;return((E=(T=e.currentWidget)==null?void 0:T.config)==null?void 0:E.form)||{}}),o=ie(()=>{var T,E;return((E=(T=e.currentWidget)==null?void 0:T.config)==null?void 0:E.greetings)||{}}),a=ie(()=>{var T,E,F;return((F=(E=(T=e.currentWidget.config)==null?void 0:T.greetings)==null?void 0:E.templates)==null?void 0:F.simple)||{}}),l=ie(()=>{var T,E,F;return((F=(E=(T=e.currentWidget.config)==null?void 0:T.greetings)==null?void 0:E.templates)==null?void 0:F.wave)||{}}),c=pe(e.isMobile?"phone":"desktop"),u=ie(()=>{var T,E,F,K,W,A,D,N;return n.value.position!=="custom"?{}:{top:(T=n.value.position_custom)!=null&&T.top?((E=n.value.position_custom)==null?void 0:E.top)+"px !important":"auto",bottom:(F=n.value.position_custom)!=null&&F.bottom?((K=n.value.position_custom)==null?void 0:K.bottom)+"px !important":"auto",left:(W=n.value.position_custom)!=null&&W.left?((A=n.value.position_custom)==null?void 0:A.left)+"px !important":"auto",right:(D=n.value.position_custom)!=null&&D.right?((N=n.value.position_custom)==null?void 0:N.right)+"px !important":"auto"}}),d={small:"16px",medium:"18px",large:"20px"},f={small:"12px",medium:"14px",large:"16px"},p={small:"45px",medium:"60px",large:"80px"},g={small:"280px",medium:"320px",large:"360px"},S=(T,E,F=f)=>F[T]||E+"px",k=Es({formLoaded:!1}),O=pe(!1),$=pe(!0);os(()=>{window.addEventListener("scroll",()=>{const T=document.getElementById("customize_form");T&&(O.value=T.getBoundingClientRect().top<window.innerHeight-500)}),document.addEventListener("click",T=>{if(T.target.dataset.name){const E=document.querySelector(`[name="${T.target.dataset.name}"]`);E&&(E.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"}),setTimeout(()=>{E.focus()},500))}})});const M=()=>{$.value=!1,setTimeout(()=>{$.value=!0},2e3)},b=ie(()=>{let T=r.value[r.value.mode+"_id"]||r.value.cf7_id;return`${formychat_admin_vars.site.url}/?formychat-form&form=${r.value.mode}&form_id=${T}&admin=true&header=${r.value.subtitle}&footer=${r.value.footer}&widget_id=${e.currentWidget.id}`});pe(null);const w=T=>{const E=T.target;if(!E)return;E.style.transition="height 0.3s ease-in-out",E.style.maxHeight="100%",E.style.height="0px",E.style.maxHeight="calc(100vh - 180px)",E.addEventListener("load",()=>{const W=E.contentWindow.document.body.querySelector(".formychat-custom-form");if(!W){k.formLoaded=!0;return}const D=W.scrollHeight+1;requestAnimationFrame(()=>{E.style.height=`${D}px`,E.style.maxHeight="calc(100vh - 180px)"});const N=E.contentWindow.document.querySelector("html");N&&(N.style.margin="0",N.style.padding="0")});const F=new ResizeObserver(W=>{const A=E.contentWindow.document.body.querySelector(".formychat-custom-form");if(A){const D=A.scrollHeight+1;E.style.height=`${D}px`}setTimeout(()=>{k.formLoaded=!0,F.disconnect()},500)}),K=E.contentWindow.document.body.querySelector(".formychat-custom-form");return K&&F.observe(K),()=>{F.disconnect()}},R=ie(()=>formychat_admin_vars.data.form_fields||[]);return(T,E)=>(v(),C("div",zX,[h("div",{class:X(["flex sm:hidden items-center mt-5 mb-10 w-full sm:w-fit gap-6 sm:justify-end sm:gap-2 z-20 bg-white",{"justify-end":m(e).isTab("whatsapp"),"justify-between":!m(e).isTab("whatsapp")}])},[m(e).isTab("whatsapp")?z("",!0):(v(),qe(m(ct),{key:0,outline:"",onClick:E[0]||(E[0]=F=>m(e).prevTab())},{default:P(()=>[B(q(m(e).isTab("whatsapp")?"Cancel":" Prev"),1)]),_:1})),y(m(ct),{onClick:E[1]||(E[1]=F=>m(e).isTab("triggers")?m(e).saveWidget():m(e).nextTab())},{default:P(()=>[B(q(m(e).isTab("triggers")?m(e).currentWidget.isNew?" Create":" Save":"Next "),1)]),_:1})],2),h("div",{class:X(["w-full space-y-6",{"md:sticky md:top-[7rem]":m(e).isTab("customize")||m(e).isTab("whatsapp")&&t.value.agent_mode==="agents"||m(e).isTab("greetings")&&m(e).currentWidget.config.greetings.enabled,"z-0":O.value}])},[h("div",{class:X(["border sm:min-h-[18rem] md:min-h-[20rem] xl:min-h-[22rem] border-slate-200 rounded shadow-sm mx-auto relative bg-gray-50",{"w-phone":c.value==="phone","w-desktop":c.value==="desktop"}])},[jX,h("div",{class:X(["absolute flex flex-col gap-3 w-fit scale-75",{"bottom-2 right-2 items-end origin-bottom-right":n.value.position==="right","bottom-2 left-2 items-start origin-bottom-left":n.value.position==="left","origin-bottom-center":n.value.position==="custom"}]),style:et(u.value)},[y(ze,{name:"form_slide"},{default:P(()=>[O.value&&m(e).isTab("customize")||m(e).isTab("whatsapp")&&t.value.agent_mode==="agents"?(v(),C("div",{key:0,class:"formychat-widget-form max-h-[19rem] overflow-scroll transition-all",style:et({fontFamily:r.value.font_family=="sans-serif"?"-apple-system, sans-serif":`font-family: '${r.value.font_family}' !important`,width:S(r.value.size,r.value.size_custom,g)})},[h("div",{class:"formychat-widget-form-title",style:et({color:r.value.text_color,background:r.value.background_color})},[h("span",null,[y(m(Vs),{modelValue:r.value.title,"onUpdate:modelValue":E[2]||(E[2]=F=>r.value.title=F),placeholder:"Contact via WhatsApp","data-name":"form_title"},null,8,["modelValue"])]),h("div",null,[(v(),C("svg",{xmlns:"http://www.w3.org/2000/svg",onClick:E[3]||(E[3]=F=>O.value=!1),viewBox:"0 0 16 16"},WX))])],4),y(ze,{name:"slide"},{default:P(()=>[r.value.mode==="formychat"&&r.value.subtitle?(v(),C("div",UX,[y(m(Vs),{modelValue:r.value.subtitle,"onUpdate:modelValue":E[4]||(E[4]=F=>r.value.subtitle=F),"data-name":"form_subtitle"},null,8,["modelValue"])])):z("",!0)]),_:1}),t.value.agent_mode==="agents"&&m(e).isTab("whatsapp")?(v(),C("div",HX,[t.value.agents.length?(v(!0),C(Ve,{key:0},ft(t.value.agents,F=>(v(),C("div",QX,[h("div",YX,[h("img",{src:F.avatar},null,8,qX)]),h("div",GX,[h("div",KX,[y(m(Vs),{modelValue:F.name,"onUpdate:modelValue":K=>F.name=K,"data-name":"agent_name",placeholder:"Agent name"},null,8,["modelValue","onUpdate:modelValue"])]),h("div",XX,[y(m(Vs),{modelValue:F.subtitle,"onUpdate:modelValue":K=>F.subtitle=K,"data-name":"agent_subtitle",placeholder:"Agent subtitle"},null,8,["modelValue","onUpdate:modelValue"])])])]))),256)):(v(),C("div",JX," Create your first agent"))])):z("",!0),r.value.mode==="formychat"&&O.value&&m(e).isTab("customize")?(v(),C("div",ZX,[h("div",eJ,[(v(!0),C(Ve,null,ft(R.value,F=>(v(),C("fieldset",{key:F.name},[F.label?(v(),C("label",{key:0,for:F.name,class:"formychat-widget-form-fields-label"},q(F.label),9,tJ)):z("",!0),["text","email","password","date","number","tel","url","color","range","search","time","week","month","image","file","submit"].includes(F.type)?(v(),C("input",{key:1,type:F.type,class:"formychat-widget-form-fields-input",placeholder:F.attributes.placeholder,name:F.name,required:F.attributes.required,minlength:F.attributes.minlength,maxlength:F.attributes.maxlength,min:F.attributes.min,max:F.attributes.max,step:F.attributes.step,pattern:F.attributes.pattern},null,8,sJ)):z("",!0),F.type==="textarea"?(v(),C("textarea",{key:2,class:"formychat-widget-form-fields-input",name:F.name,required:F.attributes.required,minlength:F.attributes.minlength,maxlength:F.attributes.maxlength,placeholder:F.attributes.placeholder},null,8,nJ)):z("",!0),r.value.show_country_code_field&&F.type==="phone"?(v(),C("div",iJ,[y(m($t),{options:m(e).contents.countries,class:"border-0 ring-0 rounded bg-white px-1 gap-1 child:gap-1",white:"",modelValue:r.value.country_code,"onUpdate:modelValue":E[5]||(E[5]=K=>r.value.country_code=K)},null,8,["options","modelValue"]),rJ])):z("",!0),!r.value.show_country_code_field&&F.type==="phone"?(v(),C("input",{key:4,type:"text",placeholder:"Enter your phone",class:"formychat-widget-form-fields-input",name:F.name,required:F.attributes.required,minlength:F.attributes.minlength,maxlength:F.attributes.maxlength},null,8,oJ)):z("",!0)]))),128)),y(ze,{name:"slide"},{default:P(()=>[r.value.footer?(v(),C("div",aJ,[y(m(Vs),{modelValue:r.value.footer,"onUpdate:modelValue":E[6]||(E[6]=F=>r.value.footer=F),"data-name":"form_footer"},null,8,["modelValue"])])):z("",!0)]),_:1})]),h("div",lJ,[h("button",{type:"submit",style:et({color:r.value.text_color,background:r.value.background_color})},[cJ,y(m(Vs),{modelValue:r.value.submit,"onUpdate:modelValue":E[7]||(E[7]=F=>r.value.submit=F),component:"span","data-name":"form_submit_text"},null,8,["modelValue"])],4)])])):(v(),C(Ve,{key:2},[O.value&&m(e).isTab("customize")?(v(),C("div",{key:0,style:et(`--form-color: ${r.value.text_color}; --form-bg: ${r.value.background_color}; --form-font: ${r.value.font_family}`)},[h("div",uJ,[b.value?(v(),C("iframe",{key:0,onLoad:w,border:"0",width:"100%",src:b.value,frameborder:"0",javascript:"disabled",scrolling:"no"},null,40,dJ)):z("",!0)]),y(ze,{name:"slide"},{default:P(()=>[r.value.mode==="formychat"&&r.value.footer?(v(),C("div",hJ,[y(m(Vs),{modelValue:r.value.footer,"onUpdate:modelValue":E[8]||(E[8]=F=>r.value.footer=F),"data-name":"form_footer"},null,8,["modelValue"])])):z("",!0)]),_:1})],4)):z("",!0)],64))],4)):z("",!0)]),_:1}),y(ze,{name:"bounce"},{default:P(()=>[m(e).isTab("greetings")&&o.value.enabled&&$.value?(v(),C("div",fJ,[o.value.template==="simple"?(v(),C("div",{key:0,class:"formychat-widget-greetings-simple",style:et(`background: ${a.value.background_color} !important; `+(a.value.font_family=="sans-serif"?"-apple-system, sans-serif":`font-family: '${a.value.font_family}' !important;`))},[h("div",{onClick:M,class:"formychat-widget-greetings-simple-close"},pJ),h("div",{class:"formychat-widget-greetings-simple-heading",style:et({color:a.value.heading_color,fontSize:S(a.value.heading_size,a.value.heading_size_custom)})},[y(m(Vs),{modelValue:a.value.heading,"onUpdate:modelValue":E[9]||(E[9]=F=>a.value.heading=F),"data-name":"simple_heading"},null,8,["modelValue"])],4),h("div",{class:"formychat-widget-greetings-simple-message",style:et({color:a.value.message_color,fontSize:S(a.value.message_size,a.value.message_size_custom)})},[y(m(Vs),{modelValue:a.value.message,"onUpdate:modelValue":E[10]||(E[10]=F=>a.value.message=F)},null,8,["modelValue"])],4),o.value.style===2?(v(),C("div",mJ,[(v(),C("svg",{width:"121",height:"27",style:et({color:a.value.background_color}),viewBox:"0 0 121 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gJ,4))])):z("",!0)],4)):z("",!0),o.value.template==="wave"?(v(),C("div",{key:1,style:et(l.value.font_family=="sans-serif"?"-apple-system, sans-serif":`font-family: '${l.value.font_family}' !important`)},[o.value.style===1?(v(),C("div",{key:0,class:"formychat-widget-greetings-wave formychat-widget-greetings-wave-1",style:et({background:l.value.background_color,color:l.value.color,fontFamily:l.value.font_family})},[h("div",{onClick:M,class:"formychat-widget-greetings-wave-close"},vJ),l.value.show_icon&&!["after_heading","after_message"].includes(l.value.icon_position)?(v(),C("div",yJ,[h("img",{src:l.value.icon_url,class:"w-full mx-auto"},null,8,_J)])):z("",!0),h("h3",{class:"formychat-widget-greetings-wave-heading","x-show":"wave.heading",style:et({color:l.value.heading_color,fontSize:S(l.value.heading_size,l.value.heading_size_custom)})},[y(m(Vs),{modelValue:l.value.heading,"onUpdate:modelValue":E[11]||(E[11]=F=>l.value.heading=F)},null,8,["modelValue"])],4),l.value.show_icon&&l.value.icon_position=="after_heading"?(v(),C("div",bJ,[h("img",{src:l.value.icon_url,class:"w-full mx-auto"},null,8,wJ)])):z("",!0),h("div",{class:"formychat-widget-greetings-wave-message",style:et({color:l.value.message_color,fontSize:S(l.value.message_size,l.value.message_size_custom)})},[y(m(Vs),{modelValue:l.value.message,"onUpdate:modelValue":E[12]||(E[12]=F=>l.value.message=F)},null,8,["modelValue"])],4),l.value.show_icon&&l.value.icon_position=="after_message"?(v(),C("div",xJ,[h("img",{src:l.value.icon_url,class:"w-full mx-auto"},null,8,kJ)])):z("",!0),l.value.show_cta?(v(),C("div",{key:3,class:"formychat-widget-greetings-wave-1-cta",style:et({background:l.value.cta_background_color,color:l.value.cta_text_color})},[h("div",null,[h("img",{src:l.value.cta_icon_url,class:"w-full mx-auto"},null,8,SJ)]),l.value.cta_text?(v(),C("div",CJ,[y(m(Vs),{modelValue:l.value.cta_text,"onUpdate:modelValue":E[13]||(E[13]=F=>l.value.cta_text=F)},null,8,["modelValue"])])):z("",!0)],4)):z("",!0)],4)):z("",!0),o.value.style===2?(v(),C("div",{key:1,class:"formychat-widget-greetings-wave formychat-widget-greetings-wave-2",style:et({background:l.value.background_color,fontFamily:l.value.font_family})},[h("div",{onClick:M,class:"formychat-widget-greetings-wave-close"},OJ),l.value.show_icon&&l.value.icon_position!=="after_cta"?(v(),C("div",MJ,[h("img",{src:l.value.icon_url,class:"w-full mx-auto"},null,8,AJ)])):z("",!0),l.value.show_cta?(v(),C("div",{key:1,class:"formychat-widget-greetings-wave-2-cta",style:et({background:l.value.cta_background_color})},[l.value.cta_heading?(v(),C("h3",{key:0,class:"formychat-widget-greetings-wave-2-cta-heading","x-text":"",style:et({color:l.value.cta_heading_color,fontSize:S(l.value.cta_heading_size,l.value.cta_heading_size_custom)})},[y(m(Vs),{modelValue:l.value.cta_heading,"onUpdate:modelValue":E[14]||(E[14]=F=>l.value.cta_heading=F)},null,8,["modelValue"])],4)):z("",!0),l.value.cta_message?(v(),C("div",{key:1,class:"formychat-widget-greetings-wave-2-cta-message",style:et({color:l.value.cta_message_color,fontSize:S(l.value.cta_message_size,l.value.cta_message_size_custom)})},[y(m(Vs),{modelValue:l.value.cta_message,"onUpdate:modelValue":E[15]||(E[15]=F=>l.value.cta_message=F)},null,8,["modelValue"])],4)):z("",!0)],4)):z("",!0),l.value.show_icon&&l.value.icon_position==="after_cta"?(v(),C("div",$J,[h("img",{src:l.value.icon_url,class:"w-full mx-auto"},null,8,TJ)])):z("",!0)],4)):z("",!0)],4)):z("",!0)])):z("",!0)]),_:1}),h("div",{class:X(["flex items-center gap-2 cursor-pointer group transition-all duration-100",{"flex-row-reverse":n.value.position==="left","opacity-60 grayscale":!m(e).currentWidget.is_active}]),onClick:E[17]||(E[17]=Me(F=>O.value=!O.value,["prevent"]))},[y(ze,{name:"bounce"},{default:P(()=>[i.value.enabled?(v(),C("div",{key:0,class:"shadow-lg drop-shadow-lg rounded-2xl px-4 py-2 transition-all duration-75",style:et({color:i.value.color,background:i.value.background_color,fontSize:S(i.value.size,i.value.size_custom,d)})},[y(m(Vs),{modelValue:i.value.text,"onUpdate:modelValue":E[16]||(E[16]=F=>i.value.text=F),component:"span"},null,8,["modelValue"])],4)):z("",!0)]),_:1}),h("div",{class:"rounded group-hover:opacity-95 overflow-hidden",style:et({width:S(n.value.size,n.value.size_custom,p),height:S(n.value.size,n.value.size_custom,p)})},[h("img",{class:"w-full h-auto",src:n.value.image_url||T.Image("whatsapp.svg")},null,8,PJ)],4)],2)],6)],2),h("div",LJ,[h("div",{onClick:E[18]||(E[18]=Me(F=>c.value="desktop",["prevent"])),class:X({"text-slate-700":c.value=="desktop"})},EJ,2),h("div",{onClick:E[19]||(E[19]=Me(F=>c.value="phone",["prevent"])),class:X({"text-slate-700":c.value=="phone"})},DJ,2),h("div",{class:X(["absolute rounded bg-white -z-10 left-0 top-0 transition duration-200",{"translate-x-full":c.value=="phone"}])},null,2)])],2)]))}},[["__scopeId","data-v-ebfeb423"]]),RJ={class:"w-full h-full flex flex-col gap-5"},FJ={key:1,class:"flex item justify-between h-full w-full flex-col sm:flex-row gap-5 xl:gap-10"},BJ={class:"w-full sm:max-w-2xl"},NJ={key:0,class:"absolute top-0 left-0 w-full h-full flex items-center justify-center z-50"},VJ=h("div",{class:"absolute top-0 left-0 w-full h-full z-0 bg-white opacity-90"},null,-1),zJ={class:"flex items-center justify-center gap-3 text-base z-50"},jJ=Object.freeze(Object.defineProperty({__proto__:null,default:{__name:"Main",setup(s){const e=eo(),t={whatsapp:JQ,triggers:Kq,customize:WK,greetings:VX},n=ie(()=>t[e.currentTab.path]),i=pe(!1);return os(async()=>{const r=Wf().params.widgetId||"new";if(r!=="new"){i.value=!0,e.widgets.length==0&&await e.fetchWidgets();const o=e.widgets.find(a=>a.id==r);o==null?e.setCurrentWidget(bc):e.setCurrentWidget(JSON.parse(JSON.stringify(o))),i.value=!1}else e.setCurrentWidget(bc)}),(r,o)=>(v(),C("div",RJ,[!i.value||r.isNew?(v(),qe(yQ,{key:0})):z("",!0),!i.value||r.isNew?(v(),C("div",FJ,[h("div",BJ,[(v(),qe(Wa(n.value)))]),y(IJ)])):z("",!0),y(ze,{name:"fade"},{default:P(()=>[i.value&&!r.isNew?(v(),C("div",NJ,[VJ,h("div",zJ,[y(m(Bn),{class:"text-indigo-500 w-5 h-5"}),B(" Please wait while we load your widget ")])])):z("",!0)]),_:1})]))}}},Symbol.toStringTag,{value:"Module"})),Eh=s=>(Ds("data-v-52ca86bc"),s=s(),Is(),s),WJ={class:"w-[300px] flex-shrink-0"},UJ={class:"bg-white rounded-lg overflow-hidden shadow sticky top-4"},HJ=Eh(()=>h("div",{class:"h-7 bg-gray-700 rounded-t-lg flex items-center px-3 gap-2"},[h("div",{class:"w-2.5 h-2.5 rounded-full bg-red-500"}),h("div",{class:"w-2.5 h-2.5 rounded-full bg-yellow-400"}),h("div",{class:"w-2.5 h-2.5 rounded-full bg-green-600"})],-1)),QJ={class:"flex items-center flex-col justify-center h-full py-6"},YJ=Fs('<div class="bg-gray-200 aspect-square rounded flex items-center justify-center w-32 h-24" data-v-52ca86bc><svg xmlns="http://www.w3.org/2000/svg" class="w-10 h-8 text-gray-400" fill="currentColor" viewBox="0 0 16 16" data-v-52ca86bc><path d="M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" data-v-52ca86bc></path><path d="M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z" data-v-52ca86bc></path></svg></div><div class="px-4 pt-3 w-full" data-v-52ca86bc><div class="h-2 bg-gray-200 rounded w-3/4 mx-auto" data-v-52ca86bc></div></div><div class="px-4 pt-2 w-full" data-v-52ca86bc><div class="h-2 bg-gray-300 rounded w-1/3 mx-auto" data-v-52ca86bc></div></div>',3),qJ={class:"px-4 py-3 space-y-3"},GJ={class:"w-32 flex flex-col items-center justify-center gap-1"},KJ=Eh(()=>h("svg",{class:"w-2 h-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),XJ={class:"text-[8px]"},JJ={key:1,class:"w-full bg-gray-300 rounded h-6 flex items-center justify-center",disabled:""},ZJ=[Eh(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-2 h-2 text-gray-700",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})],-1))],eZ=Eh(()=>h("svg",{class:"w-2 h-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),tZ={class:"text-[8px]"},sZ=Nt({__name:"ShopPagePreview",props:{settings:{type:Object,required:!0}},setup(s){const e=s,t=ie(()=>({backgroundColor:e.settings.bg_color,color:e.settings.text_color,borderRadius:e.settings.border_radius+"px","--hover-bg":e.settings.bg_hover_color,"--hover-text":e.settings.text_hover_color})),n=ie(()=>e.settings.button_position==="above"||e.settings.button_position==="above_add_to_cart"),i=ie(()=>e.settings.button_position==="below"||e.settings.button_position==="below_add_to_cart"),r=ie(()=>(e.settings.button_text||"Buy on WhatsApp").substring(0,15));return(o,a)=>(v(),C("div",WJ,[h("div",UJ,[HJ,h("div",QJ,[YJ,h("div",qJ,[h("div",GJ,[s.settings.enabled&&n.value?(v(),C("button",{key:0,style:et(t.value),class:"whatsapp-btn w-full h-6 text-sm font-medium flex items-center justify-center gap-2 transition-colors"},[KJ,h("span",XJ,q(r.value),1)],4)):z("",!0),s.settings.hide_add_to_cart?z("",!0):(v(),C("button",JJ,ZJ)),s.settings.enabled&&i.value?(v(),C("button",{key:2,style:et(t.value),class:"whatsapp-btn w-full h-6 text-sm font-medium flex items-center justify-center gap-2 transition-colors"},[eZ,h("span",tZ,q(r.value),1)],4)):z("",!0)])])])])]))}},[["__scopeId","data-v-52ca86bc"]]),Hs=s=>(Ds("data-v-4d4f3085"),s=s(),Is(),s),nZ=Hs(()=>h("div",{class:"border-b border-gray-200 pb-4 sm:pb-6"},[h("h2",{class:"text-base sm:text-lg font-semibold text-gray-900"},"WhatsApp Button for Shop Page"),h("p",{class:"text-xs sm:text-sm text-gray-500 mt-1"},"Let customers contact you or place orders via WhatsApp directly from the shop page.")],-1)),iZ={class:"flex flex-col lg:flex-row gap-6 lg:gap-8 justify-between"},rZ={class:"flex-1 space-y-4 sm:space-y-6 max-w-full lg:max-w-lg"},oZ=Hs(()=>h("label",{class:"text-sm font-medium text-gray-700 cursor-pointer"},"Show WhatsApp Button on Shop Page",-1)),aZ=Hs(()=>h("label",{class:"text-xs sm:text-sm font-medium text-gray-700"},"WhatsApp Number",-1)),lZ={class:"flex items-center gap-2 sm:gap-3"},cZ={class:"w-full relative"},uZ=[Hs(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})],-1))],dZ={key:0,class:"text-sm text-red-600"},hZ={class:"space-y-2"},fZ=Hs(()=>h("label",{class:"text-xs sm:text-sm font-medium text-gray-700"},"Button Position",-1)),pZ={class:"space-y-2"},mZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},gZ={class:"space-y-2"},vZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},yZ={key:0,class:"space-y-4 sm:space-y-6 mb-6 sm:mb-10"},_Z={class:"space-y-2"},bZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},wZ=Hs(()=>h("p",{class:"text-xs text-gray-500 mt-1"},"Customize the WhatsApp button appearance however you want.",-1)),xZ={class:"space-y-3 sm:space-y-4"},kZ={class:"flex items-center gap-2 sm:gap-3"},SZ={class:"relative cursor-pointer flex-shrink-0"},CZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},OZ={class:"flex items-center gap-2 sm:gap-3"},MZ={class:"relative cursor-pointer flex-shrink-0"},AZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},$Z={class:"flex items-center gap-2 sm:gap-3"},TZ={class:"relative cursor-pointer flex-shrink-0"},PZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},LZ={class:"flex items-center gap-2 sm:gap-3"},EZ={class:"relative cursor-pointer flex-shrink-0"},DZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},IZ={class:"flex items-center gap-6 pt-4 py-2"},RZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},FZ=Hs(()=>h("span",{class:"text-xs sm:text-sm text-gray-500"},"px",-1)),BZ={class:"flex items-center gap-3 py-2"},NZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},VZ={class:"flex items-center gap-3 py-2"},zZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},jZ={class:"space-y-2 sm:space-y-3 py-2"},WZ={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},UZ=Hs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm1 0v8h14V1zm5.5 11a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M5 14a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1H5z"})],-1)),HZ=Hs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),h("path",{d:"M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})],-1)),QZ=Hs(()=>h("div",{class:"pt-4 sm:pt-6"},null,-1)),YZ=[Hs(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1))],qZ={key:0,class:"pt-4 sm:pt-6 border-t border-gray-200 flex gap-3"},GZ=Hs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),KZ=Hs(()=>h("span",null,"Discard",-1)),XZ=Hs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),JZ=Hs(()=>h("span",null,"Save Changes",-1)),ZZ={class:"mt-6 xl-custom:mt-0 xl-custom:fixed xl-custom:right-8 xl-custom:top-1/2 xl-custom:-translate-y-1/2 xl-custom:w-96"},Rk="Hello! I'd like to ask about {product_name} (SKU: {product_sku}) on {site_title}.",eee=Object.freeze(Object.defineProperty({__proto__:null,default:Nt({__name:"ShopPage",setup(s){var W,A;const e=fl(),t=ug(),n=Tr(),i=$r(),r=ie(()=>!formychat_admin_vars.is_premium),o=pe(!1),a=pe(null),l=pe(null),c=pe(null),u=ie(()=>t.countries),d={bg_color:"#25D366",bg_hover_color:"#21bd5b",text_color:"#ffffff",text_hover_color:"#ffffff",border_radius:4,open_new_tab:!1,hide_add_to_cart:!1,display_desktop:!0,display_mobile:!0},f=ie(()=>w.value.bg_color!==d.bg_color||w.value.bg_hover_color!==d.bg_hover_color||w.value.text_color!==d.text_color||w.value.text_hover_color!==d.text_hover_color),p=async()=>{(await n.fire({title:"Reset Colors",message:"Are you sure you want to reset all colors to default?",ok:"Reset",cancel:"Cancel",okColor:"danger",cancelColor:"secondary"})).ok&&(w.value.bg_color=d.bg_color,w.value.bg_hover_color=d.bg_hover_color,w.value.text_color=d.text_color,w.value.text_hover_color=d.text_hover_color)},S=pe((()=>{var N,Q;const D=(Q=(N=window.formychat_admin_vars)==null?void 0:N.woocommerce)==null?void 0:Q.shop_settings;return D?Object.keys(d).some(H=>D[H]!==void 0&&D[H]!==d[H]):!1})()),k=(D="")=>D==null?void 0:D.match(/^\d{7,15}$/),O=ie(()=>w.value.enabled?o.value||!k(w.value.whatsapp_number):!1),$=()=>{o.value=!1},M=((A=(W=window.formychat_admin_vars)==null?void 0:W.woocommerce)==null?void 0:A.product_fields)||{},b=()=>{var D,N;return((N=(D=window.formychat_admin_vars)==null?void 0:D.woocommerce)==null?void 0:N.shop_settings)||{enabled:!1,country_code:window.formychat_country_code||"44",whatsapp_number:"",button_position:"below_add_to_cart",button_text:"Buy on WhatsApp",message_template:Rk,bg_color:"#25D366",bg_hover_color:"#21bd5b",text_color:"#ffffff",text_hover_color:"#ffffff",border_radius:4,open_new_tab:!1,hide_add_to_cart:!1,display_desktop:!0,display_mobile:!0}},w=pe(b()),R=pe(JSON.stringify(b())),T=ie(()=>JSON.stringify(w.value)!==R.value),E=ie(()=>[{value:"above_add_to_cart",label:'Above "Add to Cart" button'},{value:"below_add_to_cart",label:'Below "Add to Cart" button',locked:r.value}]),F=()=>{w.value=JSON.parse(R.value)},K=async()=>{var D;if(o.value=!1,w.value.enabled&&!k(w.value.whatsapp_number)){o.value=!0,a.value&&a.value.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{if(l.value&&l.value.$el){const N=l.value.$el.querySelector("input");N&&N.focus()}},500);return}try{const Q=await(await fetch("/wp-json/formychat/woocommerce/settings",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((D=window.formychat_admin_vars)==null?void 0:D.rest_nonce)||""},body:JSON.stringify({settings:w.value})})).json();Q.success?(e.success("Settings saved successfully!"),R.value=JSON.stringify(w.value),c.value&&c.value.scrollIntoView({behavior:"smooth",block:"start"})):e.error(Q.message||"Failed to save settings")}catch{e.error("Error saving settings. Please try again.")}};return(D,N)=>(v(),C("div",{class:"space-y-4 sm:space-y-6",ref_key:"pageTop",ref:c},[nZ,h("div",iZ,[h("div",rZ,[h("div",{class:"flex items-center gap-3 cursor-pointer",onClick:N[2]||(N[2]=Q=>w.value.enabled=!w.value.enabled)},[y(At,{modelValue:w.value.enabled,"onUpdate:modelValue":N[0]||(N[0]=Q=>w.value.enabled=Q),onClick:N[1]||(N[1]=Me(()=>{},["stop"]))},null,8,["modelValue"]),oZ]),w.value.enabled?(v(),C(Ve,{key:0},[h("div",{class:"space-y-2",ref_key:"whatsappNumberField",ref:a},[aZ,h("div",lZ,[y($t,{options:u.value,modelValue:w.value.country_code,"onUpdate:modelValue":N[3]||(N[3]=Q=>w.value.country_code=Q),cursor:!1,class:"w-20 sm:w-24 justify-center text-center flex-shrink-0",placeholder:"Select"},null,8,["options","modelValue"]),h("div",cZ,[y(Gt,{ref_key:"whatsappInput",ref:l,modelValue:w.value.whatsapp_number,"onUpdate:modelValue":N[4]||(N[4]=Q=>w.value.whatsapp_number=Q),placeholder:"1234567890",error:O.value,onInput:$},null,8,["modelValue","error"]),y(ze,{name:"bounce"},{default:P(()=>[O.value?(v(),C("div",{key:0,class:X(["absolute w-4 text-red-500 right-3 top-3 flex items-center gap-2 transition",{"bounce-enter-active":O.value}])},uZ,2)):z("",!0)]),_:1})])]),y(ze,{name:"slide-fade"},{default:P(()=>[o.value?(v(),C("p",dZ," Please enter a valid WhatsApp number (7-15 digits) ")):z("",!0)]),_:1})],512),h("div",hZ,[fZ,y($t,{modelValue:w.value.button_position,"onUpdate:modelValue":N[5]||(N[5]=Q=>w.value.button_position=Q),options:E.value,onLocked:N[6]||(N[6]=Q=>m(i).show())},null,8,["modelValue","options"])]),h("div",pZ,[h("label",mZ,[B(" Button Text "),y(Vt)]),h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(Gt,{modelValue:w.value.button_text,"onUpdate:modelValue":N[7]||(N[7]=Q=>w.value.button_text=Q),placeholder:"Buy on WhatsApp"},null,8,["modelValue"])],2)]),h("div",gZ,[h("label",vZ,[B(" Pre-filled Message "),y(Xs,null,{default:P(()=>[B("Customize what message customers send when they click.")]),_:1}),y(Vt)]),h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(pu,{modelValue:w.value.message_template,"onUpdate:modelValue":N[8]||(N[8]=Q=>w.value.message_template=Q),fields:m(M),form:"woocommerce",defaultMessage:Rk,customTags:!1},null,8,["modelValue","fields"])],2)]),y(ze,{name:"slide-fade"},{default:P(()=>[S.value?(v(),C("div",yZ,[h("div",_Z,[h("div",null,[h("label",bZ,[B(" Button Style "),y(Vt)]),wZ]),h("div",xZ,[h("div",{class:X(["bg-gray-100 rounded-lg p-4 space-y-3 sm:space-y-4 relative",{"formychat-locked opacity-60":r.value}])},[f.value?(v(),C("button",{key:0,onClick:p,class:"absolute top-3 right-3 text-xs px-2 py-1 border border-gray-300 rounded text-gray-500 hover:text-gray-700 hover:border-gray-400 transition-colors bg-white"}," Reset ")):z("",!0),h("div",kZ,[h("label",SZ,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.bg_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[9]||(N[9]=Q=>w.value.bg_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.bg_color]])]),h("label",CZ,[B(" Background color "),y(Xs,null,{default:P(()=>[B("Default button background color")]),_:1})])]),h("div",OZ,[h("label",MZ,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.bg_hover_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[10]||(N[10]=Q=>w.value.bg_hover_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.bg_hover_color]])]),h("label",AZ,[B(" Background hover color "),y(Xs,null,{default:P(()=>[B("Button background color on hover")]),_:1})])]),h("div",$Z,[h("label",TZ,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.text_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[11]||(N[11]=Q=>w.value.text_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.text_color]])]),h("label",PZ,[B(" Text color "),y(Xs,null,{default:P(()=>[B("Button text color")]),_:1})])]),h("div",LZ,[h("label",EZ,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.text_hover_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[12]||(N[12]=Q=>w.value.text_hover_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.text_hover_color]])]),h("label",DZ,[B(" Text hover color "),y(Xs,null,{default:P(()=>[B("Button text color on hover")]),_:1})])])],2)]),h("div",IZ,[h("label",RZ,[B(" Button Border Radius "),y(Vt)]),h("div",{class:X(["flex items-center gap-2",{"formychat-locked opacity-60 pointer-events-none":r.value}])},[xt(h("input",{type:"number","onUpdate:modelValue":N[13]||(N[13]=Q=>w.value.border_radius=Q),min:"0",max:"50",class:"w-16 px-2 sm:px-3 h-8 sm:h-6 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-indigo-400 focus:border-transparent"},null,512),[[Ot,w.value.border_radius,void 0,{number:!0}]]),FZ],2)]),h("div",BZ,[h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(At,{modelValue:w.value.open_new_tab,"onUpdate:modelValue":N[14]||(N[14]=Q=>w.value.open_new_tab=Q),onClick:N[15]||(N[15]=Me(()=>{},["stop"]))},null,8,["modelValue"])],2),h("label",NZ,[B(" Open WhatsApp in a new tab "),y(Vt)])]),h("div",VZ,[h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(At,{modelValue:w.value.hide_add_to_cart,"onUpdate:modelValue":N[16]||(N[16]=Q=>w.value.hide_add_to_cart=Q),onClick:N[17]||(N[17]=Me(()=>{},["stop"]))},null,8,["modelValue"])],2),h("label",zZ,[B(' Hide "Add to Cart" button '),y(Vt)])]),h("div",jZ,[h("label",WZ,[B(" Display button on "),y(Vt)]),h("div",{class:X(["flex flex-wrap gap-3 sm:gap-4",{"formychat-locked opacity-60 pointer-events-none":r.value}])},[h("button",{onClick:N[18]||(N[18]=Q=>w.value.display_desktop=!w.value.display_desktop),class:X(["flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors",w.value.display_desktop?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[UZ,B(" Desktop ")],2),h("button",{onClick:N[19]||(N[19]=Q=>w.value.display_mobile=!w.value.display_mobile),class:X(["flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors",w.value.display_mobile?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[HZ,B(" Mobile ")],2)],2)])]),QZ])):z("",!0)]),_:1}),h("div",null,[h("button",{onClick:N[20]||(N[20]=Q=>S.value=!S.value),class:"flex items-center justify-center gap-2 text-xs sm:text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors"},[h("span",null,q(S.value?"Less":"Advanced"),1),(v(),C("svg",{class:X(["w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform",{"rotate-180":S.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},YZ,2))])])],64)):z("",!0),y(ze,{name:"slide-fade"},{default:P(()=>[T.value?(v(),C("div",qZ,[y(ct,{onClick:F,color:"secondary",outline:"",class:"flex items-center justify-center gap-2 text-sm sm:text-base"},{default:P(()=>[GZ,KZ]),_:1}),y(ct,{onClick:K,color:"primary",class:"flex-1 flex items-center justify-center gap-2 text-sm sm:text-base"},{default:P(()=>[XZ,JZ]),_:1})])):z("",!0)]),_:1})]),h("div",ZZ,[y(sZ,{settings:w.value},null,8,["settings"])])])],512))}},[["__scopeId","data-v-4d4f3085"]])},Symbol.toStringTag,{value:"Module"})),Di=s=>(Ds("data-v-c8bb3ab6"),s=s(),Is(),s),tee={class:"w-[300px] flex-shrink-0"},see={class:"bg-white rounded-lg overflow-hidden shadow sticky top-4"},nee=Di(()=>h("div",{class:"h-7 bg-gray-700 rounded-t-lg flex items-center px-3 gap-2"},[h("div",{class:"w-2.5 h-2.5 rounded-full bg-red-500"}),h("div",{class:"w-2.5 h-2.5 rounded-full bg-yellow-400"}),h("div",{class:"w-2.5 h-2.5 rounded-full bg-green-600"})],-1)),iee={class:"flex gap-4 p-4"},ree=Di(()=>h("div",{class:"bg-gray-200 rounded flex items-center justify-center w-24 h-24 flex-shrink-0"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-10 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"}),h("path",{d:"M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1z"})])],-1)),oee={class:"flex-1 space-y-2"},aee=Fs('<div class="space-y-1" data-v-c8bb3ab6><div class="h-3 bg-gray-200 rounded w-full" data-v-c8bb3ab6></div><div class="h-3 bg-gray-200 rounded w-3/4" data-v-c8bb3ab6></div></div><div class="h-3 bg-gray-300 rounded w-1/3" data-v-c8bb3ab6></div><div class="space-y-1 pt-1" data-v-c8bb3ab6><div class="h-2 bg-gray-100 rounded w-full" data-v-c8bb3ab6></div><div class="h-2 bg-gray-100 rounded w-5/6" data-v-c8bb3ab6></div></div>',3),lee=Di(()=>h("svg",{class:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),cee={class:"text-[8px] whitespace-nowrap"},uee=Di(()=>h("svg",{class:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),dee={class:"text-[8px] whitespace-nowrap"},hee={class:"flex items-center gap-2 pt-2"},fee=Di(()=>h("svg",{class:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),pee={class:"text-[8px] whitespace-nowrap"},mee={key:1,class:"bg-gray-300 rounded h-6 px-3 flex items-center justify-center",disabled:""},gee=[Di(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3 text-gray-700",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M0 1.5A.5.5 0 0 1 .5 1H2a.5.5 0 0 1 .485.379L2.89 3H14.5a.5.5 0 0 1 .49.598l-1 5a.5.5 0 0 1-.465.401l-9.397.472L4.415 11H13a.5.5 0 0 1 0 1H4a.5.5 0 0 1-.491-.408L2.01 3.607 1.61 2H.5a.5.5 0 0 1-.5-.5zM3.102 4l.84 4.479 9.144-.459L13.89 4H3.102zM5 12a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm7 0a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm-7 1a1 1 0 1 1 0 2 1 1 0 0 1 0-2zm7 0a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})],-1))],vee=Di(()=>h("svg",{class:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),yee={class:"text-[8px] whitespace-nowrap"},_ee=Di(()=>h("svg",{class:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),bee={class:"text-[8px] whitespace-nowrap"},wee=Di(()=>h("div",{class:"space-y-1 pt-2 border-t border-gray-100"},[h("div",{class:"h-2 bg-gray-100 rounded w-1/2"}),h("div",{class:"h-2 bg-gray-100 rounded w-2/3"})],-1)),xee=Di(()=>h("svg",{class:"w-3 h-3 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24"},[h("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})],-1)),kee={class:"text-[8px] whitespace-nowrap"},See=Nt({__name:"ProductPagePreview",props:{settings:{type:Object,required:!0}},setup(s){const e=s,t=ie(()=>({backgroundColor:e.settings.bg_color,color:e.settings.text_color,borderRadius:e.settings.border_radius+"px","--hover-bg":e.settings.bg_hover_color,"--hover-text":e.settings.text_hover_color})),n=ie(()=>e.settings.button_position==="inline_before_add_to_cart"||e.settings.button_position==="before_add_to_cart"),i=ie(()=>e.settings.button_position==="inline_after_add_to_cart"||e.settings.button_position==="after_add_to_cart"),r=ie(()=>(e.settings.button_text||"Order on WhatsApp").substring(0,18));return(o,a)=>(v(),C("div",tee,[h("div",see,[nee,h("div",iee,[ree,h("div",oee,[aee,s.settings.enabled&&s.settings.button_position==="after_short_description"?(v(),C("button",{key:0,style:et(t.value),class:"whatsapp-btn h-6 px-3 mt-2 text-sm font-medium flex items-center justify-center gap-1.5 transition-colors w-fit"},[lee,h("span",cee,q(r.value),1)],4)):z("",!0),s.settings.enabled&&s.settings.button_position==="above_add_to_cart"?(v(),C("button",{key:1,style:et(t.value),class:"whatsapp-btn h-6 px-3 mt-2 text-sm font-medium flex items-center justify-center gap-1.5 transition-colors w-fit"},[uee,h("span",dee,q(r.value),1)],4)):z("",!0),h("div",hee,[s.settings.enabled&&n.value?(v(),C("button",{key:0,style:et(t.value),class:"whatsapp-btn h-6 px-3 text-sm font-medium flex items-center justify-center gap-1.5 transition-colors"},[fee,h("span",pee,q(r.value),1)],4)):z("",!0),s.settings.hide_add_to_cart?z("",!0):(v(),C("button",mee,gee)),s.settings.enabled&&i.value?(v(),C("button",{key:2,style:et(t.value),class:"whatsapp-btn h-6 px-3 text-sm font-medium flex items-center justify-center gap-1.5 transition-colors"},[vee,h("span",yee,q(r.value),1)],4)):z("",!0)]),s.settings.enabled&&s.settings.button_position==="below_add_to_cart"?(v(),C("button",{key:2,style:et(t.value),class:"whatsapp-btn h-6 px-3 mt-2 text-sm font-medium flex items-center justify-center gap-1.5 transition-colors w-fit"},[_ee,h("span",bee,q(r.value),1)],4)):z("",!0),wee,s.settings.enabled&&s.settings.button_position==="after_product_meta"?(v(),C("button",{key:3,style:et(t.value),class:"whatsapp-btn h-6 px-3 mt-2 text-sm font-medium flex items-center justify-center gap-1.5 transition-colors w-fit"},[xee,h("span",kee,q(r.value),1)],4)):z("",!0)])])])]))}},[["__scopeId","data-v-c8bb3ab6"]]),Qs=s=>(Ds("data-v-0d666c8c"),s=s(),Is(),s),Cee=Qs(()=>h("div",{class:"border-b border-gray-200 pb-4 sm:pb-6"},[h("h2",{class:"text-base sm:text-lg font-semibold text-gray-900"},"WhatsApp Button for Single Product Page"),h("p",{class:"text-xs sm:text-sm text-gray-500 mt-1"},"Let customers contact you or place orders via WhatsApp directly from the single product page.")],-1)),Oee={class:"flex flex-col lg:flex-row gap-6 lg:gap-8 justify-between"},Mee={class:"flex-1 space-y-4 sm:space-y-6 max-w-full lg:max-w-lg"},Aee=Qs(()=>h("label",{class:"text-sm font-medium text-gray-700 cursor-pointer"},"Show WhatsApp Button on Single Product Page",-1)),$ee=Qs(()=>h("label",{class:"text-xs sm:text-sm font-medium text-gray-700"},"WhatsApp Number",-1)),Tee={class:"flex items-center gap-2 sm:gap-3"},Pee={class:"w-full relative"},Lee=[Qs(()=>h("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current",viewBox:"0 0 16 16"},[h("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5m.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2"})],-1))],Eee={key:0,class:"text-sm text-red-600"},Dee={class:"space-y-2"},Iee=Qs(()=>h("label",{class:"text-xs sm:text-sm font-medium text-gray-700"},"Button Position",-1)),Ree={class:"space-y-2"},Fee={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},Bee={class:"space-y-2"},Nee={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},Vee={key:0,class:"space-y-4 sm:space-y-6 mb-6 sm:mb-10"},zee={class:"space-y-2"},jee={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},Wee=Qs(()=>h("p",{class:"text-xs text-gray-500 mt-1"},"Customize the WhatsApp button appearance however you want.",-1)),Uee={class:"space-y-3 sm:space-y-4"},Hee={class:"flex items-center gap-2 sm:gap-3"},Qee={class:"relative cursor-pointer flex-shrink-0"},Yee={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},qee={class:"flex items-center gap-2 sm:gap-3"},Gee={class:"relative cursor-pointer flex-shrink-0"},Kee={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},Xee={class:"flex items-center gap-2 sm:gap-3"},Jee={class:"relative cursor-pointer flex-shrink-0"},Zee={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},ete={class:"flex items-center gap-2 sm:gap-3"},tte={class:"relative cursor-pointer flex-shrink-0"},ste={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},nte={class:"flex items-center gap-6 pt-4 py-2"},ite={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},rte=Qs(()=>h("span",{class:"text-xs sm:text-sm text-gray-500"},"px",-1)),ote={class:"flex items-center gap-3 py-2"},ate={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},lte={class:"flex items-center gap-3 py-2"},cte={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},ute={class:"space-y-2 sm:space-y-3 py-2"},dte={class:"text-xs sm:text-sm font-medium text-gray-700 flex items-center gap-2"},hte=Qs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M0 1a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm1 0v8h14V1zm5.5 11a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5M5 14a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1H5z"})],-1)),fte=Qs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 16 16"},[h("path",{d:"M11 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM5 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"}),h("path",{d:"M8 14a1 1 0 1 0 0-2 1 1 0 0 0 0 2"})],-1)),pte=Qs(()=>h("div",{class:"pt-4 sm:pt-6"},null,-1)),mte=[Qs(()=>h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1))],gte={key:0,class:"pt-4 sm:pt-6 border-t border-gray-200 flex gap-3"},vte=Qs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),yte=Qs(()=>h("span",null,"Discard",-1)),_te=Qs(()=>h("svg",{class:"w-3.5 h-3.5 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[h("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),bte=Qs(()=>h("span",null,"Save Changes",-1)),wte={class:"mt-6 xl-custom:mt-0 xl-custom:fixed xl-custom:right-8 xl-custom:top-1/2 xl-custom:-translate-y-1/2 xl-custom:w-96"},Fk="Hello! I'd like to order {product_name} (SKU: {product_sku}) on {site_title}.",xte=Object.freeze(Object.defineProperty({__proto__:null,default:Nt({__name:"ProductPage",setup(s){var W,A;const e=fl(),t=ug(),n=Tr(),i=$r(),r=ie(()=>!formychat_admin_vars.is_premium),o=pe(!1),a=pe(null),l=pe(null),c=pe(null),u=ie(()=>t.countries),d={bg_color:"#25D366",bg_hover_color:"#21bd5b",text_color:"#ffffff",text_hover_color:"#ffffff",border_radius:4,open_new_tab:!1,hide_add_to_cart:!1,display_desktop:!0,display_mobile:!0},f=ie(()=>w.value.bg_color!==d.bg_color||w.value.bg_hover_color!==d.bg_hover_color||w.value.text_color!==d.text_color||w.value.text_hover_color!==d.text_hover_color),p=async()=>{(await n.fire({title:"Reset Colors",message:"Are you sure you want to reset all colors to default?",ok:"Reset",cancel:"Cancel",okColor:"danger",cancelColor:"secondary"})).ok&&(w.value.bg_color=d.bg_color,w.value.bg_hover_color=d.bg_hover_color,w.value.text_color=d.text_color,w.value.text_hover_color=d.text_hover_color)},S=pe((()=>{var N,Q;const D=(Q=(N=window.formychat_admin_vars)==null?void 0:N.woocommerce)==null?void 0:Q.product_settings;return D?Object.keys(d).some(H=>D[H]!==void 0&&D[H]!==d[H]):!1})()),k=(D="")=>D==null?void 0:D.match(/^\d{7,15}$/),O=ie(()=>w.value.enabled?o.value||!k(w.value.whatsapp_number):!1),$=()=>{o.value=!1},M=((A=(W=window.formychat_admin_vars)==null?void 0:W.woocommerce)==null?void 0:A.product_fields)||{},b=()=>{var D,N;return((N=(D=window.formychat_admin_vars)==null?void 0:D.woocommerce)==null?void 0:N.product_settings)||{enabled:!1,country_code:window.formychat_country_code||"44",whatsapp_number:"",button_position:"below_add_to_cart",button_text:"Buy on WhatsApp",message_template:Fk,bg_color:"#25D366",bg_hover_color:"#21bd5b",text_color:"#ffffff",text_hover_color:"#ffffff",border_radius:4,open_new_tab:!1,hide_add_to_cart:!1,display_desktop:!0,display_mobile:!0}},w=pe(b()),R=pe(JSON.stringify(b())),T=ie(()=>JSON.stringify(w.value)!==R.value),E=ie(()=>[{value:"above_add_to_cart",label:'Above "Add to Cart" button'},{value:"below_add_to_cart",label:'Below "Add to Cart" button',locked:r.value},{value:"after_product_meta",label:"After product meta",locked:r.value},{value:"after_short_description",label:"After product short description",locked:r.value}]),F=()=>{w.value=JSON.parse(R.value)},K=async()=>{var D;if(o.value=!1,w.value.enabled&&!k(w.value.whatsapp_number)){o.value=!0,a.value&&a.value.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>{if(l.value&&l.value.$el){const N=l.value.$el.querySelector("input");N&&N.focus()}},500);return}try{const Q=await(await fetch("/wp-json/formychat/woocommerce/product-settings",{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":((D=window.formychat_admin_vars)==null?void 0:D.rest_nonce)||""},body:JSON.stringify({settings:w.value})})).json();Q.success?(e.success("Settings saved successfully!"),R.value=JSON.stringify(w.value),c.value&&c.value.scrollIntoView({behavior:"smooth",block:"start"})):e.error(Q.message||"Failed to save settings")}catch{e.error("Error saving settings. Please try again.")}};return(D,N)=>(v(),C("div",{class:"space-y-4 sm:space-y-6",ref_key:"pageTop",ref:c},[Cee,h("div",Oee,[h("div",Mee,[h("div",{class:"flex items-center gap-3 cursor-pointer",onClick:N[2]||(N[2]=Q=>w.value.enabled=!w.value.enabled)},[y(At,{modelValue:w.value.enabled,"onUpdate:modelValue":N[0]||(N[0]=Q=>w.value.enabled=Q),onClick:N[1]||(N[1]=Me(()=>{},["stop"]))},null,8,["modelValue"]),Aee]),w.value.enabled?(v(),C(Ve,{key:0},[h("div",{class:"space-y-2",ref_key:"whatsappNumberField",ref:a},[$ee,h("div",Tee,[y($t,{options:u.value,modelValue:w.value.country_code,"onUpdate:modelValue":N[3]||(N[3]=Q=>w.value.country_code=Q),cursor:!1,class:"w-20 sm:w-24 justify-center text-center flex-shrink-0",placeholder:"Select"},null,8,["options","modelValue"]),h("div",Pee,[y(Gt,{ref_key:"whatsappInput",ref:l,modelValue:w.value.whatsapp_number,"onUpdate:modelValue":N[4]||(N[4]=Q=>w.value.whatsapp_number=Q),placeholder:"1234567890",error:O.value,onInput:$},null,8,["modelValue","error"]),y(ze,{name:"bounce"},{default:P(()=>[O.value?(v(),C("div",{key:0,class:X(["absolute w-4 text-red-500 right-3 top-3 flex items-center gap-2 transition",{"bounce-enter-active":O.value}])},Lee,2)):z("",!0)]),_:1})])]),y(ze,{name:"slide-fade"},{default:P(()=>[o.value?(v(),C("p",Eee," Please enter a valid WhatsApp number (7-15 digits) ")):z("",!0)]),_:1})],512),h("div",Dee,[Iee,y($t,{modelValue:w.value.button_position,"onUpdate:modelValue":N[5]||(N[5]=Q=>w.value.button_position=Q),options:E.value,onLocked:N[6]||(N[6]=Q=>m(i).show())},null,8,["modelValue","options"])]),h("div",Ree,[h("label",Fee,[B(" Button Text "),y(Vt)]),h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(Gt,{modelValue:w.value.button_text,"onUpdate:modelValue":N[7]||(N[7]=Q=>w.value.button_text=Q),placeholder:"Buy on WhatsApp"},null,8,["modelValue"])],2)]),h("div",Bee,[h("label",Nee,[B(" Pre-filled Message "),y(Xs,null,{default:P(()=>[B("Customize what message customers send when they click.")]),_:1}),y(Vt)]),h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(pu,{modelValue:w.value.message_template,"onUpdate:modelValue":N[8]||(N[8]=Q=>w.value.message_template=Q),fields:m(M),form:"woocommerce",defaultMessage:Fk,customTags:!1},null,8,["modelValue","fields"])],2)]),y(ze,{name:"slide-fade"},{default:P(()=>[S.value?(v(),C("div",Vee,[h("div",zee,[h("div",null,[h("label",jee,[B(" Button Style "),y(Vt)]),Wee]),h("div",Uee,[h("div",{class:X(["bg-gray-100 rounded-lg p-4 space-y-3 sm:space-y-4 relative",{"formychat-locked opacity-60":r.value}])},[f.value?(v(),C("button",{key:0,onClick:p,class:"absolute top-3 right-3 text-xs px-2 py-1 border border-gray-300 rounded text-gray-500 hover:text-gray-700 hover:border-gray-400 transition-colors bg-white"}," Reset ")):z("",!0),h("div",Hee,[h("label",Qee,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.bg_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[9]||(N[9]=Q=>w.value.bg_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.bg_color]])]),h("label",Yee,[B(" Background color "),y(Xs,null,{default:P(()=>[B("Default button background color")]),_:1})])]),h("div",qee,[h("label",Gee,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.bg_hover_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[10]||(N[10]=Q=>w.value.bg_hover_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.bg_hover_color]])]),h("label",Kee,[B(" Background hover color "),y(Xs,null,{default:P(()=>[B("Button background color on hover")]),_:1})])]),h("div",Xee,[h("label",Jee,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.text_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[11]||(N[11]=Q=>w.value.text_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.text_color]])]),h("label",Zee,[B(" Text color "),y(Xs,null,{default:P(()=>[B("Button text color")]),_:1})])]),h("div",ete,[h("label",tte,[h("div",{class:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-4 border-white shadow-md ring-1 ring-gray-200",style:et({background:w.value.text_hover_color})},null,4),xt(h("input",{type:"color","onUpdate:modelValue":N[12]||(N[12]=Q=>w.value.text_hover_color=Q),class:"absolute w-0 h-0 opacity-0"},null,512),[[Ot,w.value.text_hover_color]])]),h("label",ste,[B(" Text hover color "),y(Xs,null,{default:P(()=>[B("Button text color on hover")]),_:1})])])],2)]),h("div",nte,[h("label",ite,[B(" Button Border Radius "),y(Vt)]),h("div",{class:X(["flex items-center gap-2",{"formychat-locked opacity-60 pointer-events-none":r.value}])},[xt(h("input",{type:"number","onUpdate:modelValue":N[13]||(N[13]=Q=>w.value.border_radius=Q),min:"0",max:"50",class:"w-16 px-2 sm:px-3 h-8 sm:h-6 text-sm border border-gray-200 rounded focus:ring-2 focus:ring-indigo-400 focus:border-transparent"},null,512),[[Ot,w.value.border_radius,void 0,{number:!0}]]),rte],2)]),h("div",ote,[h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(At,{modelValue:w.value.open_new_tab,"onUpdate:modelValue":N[14]||(N[14]=Q=>w.value.open_new_tab=Q),onClick:N[15]||(N[15]=Me(()=>{},["stop"]))},null,8,["modelValue"])],2),h("label",ate,[B(" Open WhatsApp in a new tab "),y(Vt)])]),h("div",lte,[h("div",{class:X({"formychat-locked opacity-60 pointer-events-none":r.value})},[y(At,{modelValue:w.value.hide_add_to_cart,"onUpdate:modelValue":N[16]||(N[16]=Q=>w.value.hide_add_to_cart=Q),onClick:N[17]||(N[17]=Me(()=>{},["stop"]))},null,8,["modelValue"])],2),h("label",cte,[B(' Hide "Add to Cart" button '),y(Vt)])]),h("div",ute,[h("label",dte,[B(" Display button on "),y(Vt)]),h("div",{class:X(["flex flex-wrap gap-3 sm:gap-4",{"formychat-locked opacity-60 pointer-events-none":r.value}])},[h("button",{onClick:N[18]||(N[18]=Q=>w.value.display_desktop=!w.value.display_desktop),class:X(["flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors",w.value.display_desktop?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[hte,B(" Desktop ")],2),h("button",{onClick:N[19]||(N[19]=Q=>w.value.display_mobile=!w.value.display_mobile),class:X(["flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded text-xs sm:text-sm font-medium transition-colors",w.value.display_mobile?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[fte,B(" Mobile ")],2)],2)])]),pte])):z("",!0)]),_:1}),h("div",null,[h("button",{onClick:N[20]||(N[20]=Q=>S.value=!S.value),class:"flex items-center justify-center gap-2 text-xs sm:text-sm font-medium text-gray-600 hover:text-gray-800 transition-colors"},[h("span",null,q(S.value?"Less":"Advance"),1),(v(),C("svg",{class:X(["w-3.5 h-3.5 sm:w-4 sm:h-4 transition-transform",{"rotate-180":S.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},mte,2))])])],64)):z("",!0),y(ze,{name:"slide-fade"},{default:P(()=>[T.value?(v(),C("div",gte,[y(ct,{onClick:F,color:"secondary",outline:"",class:"flex items-center justify-center gap-2 text-sm sm:text-base"},{default:P(()=>[vte,yte]),_:1}),y(ct,{onClick:K,color:"primary",class:"flex-1 flex items-center justify-center gap-2 text-sm sm:text-base"},{default:P(()=>[_te,bte]),_:1})])):z("",!0)]),_:1})]),h("div",wte,[y(See,{settings:w.value},null,8,["settings"])])])],512))}},[["__scopeId","data-v-0d666c8c"]])},Symbol.toStringTag,{value:"Module"})),kte={},Ste={class:"flex items-center justify-center min-h-[400px]"},Cte=[Fs('<div class="text-center max-w-sm"><div class="mx-auto w-16 h-16 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl flex items-center justify-center mb-6"><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-amber-50 text-amber-700 text-xs font-medium mb-4"><span class="w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse"></span> Coming Soon </span><h2 class="text-xl font-semibold text-gray-900 mb-2">Cart Page Button</h2><p class="text-sm text-gray-500 leading-relaxed"> We&#39;re working on WhatsApp integration for the cart page. Stay tuned for updates! </p></div>',1)];function Ote(s,e){return v(),C("div",Ste,Cte)}const Mte=Object.freeze(Object.defineProperty({__proto__:null,default:Nt(kte,[["render",Ote]])},Symbol.toStringTag,{value:"Module"})),Ate={},$te={class:"flex items-center justify-center min-h-[400px]"},Tte=[Fs('<div class="text-center max-w-sm"><div class="mx-auto w-16 h-16 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl flex items-center justify-center mb-6"><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><span class="inline-flex items-center gap-1.5 px-3 py-1 rounded-full bg-amber-50 text-amber-700 text-xs font-medium mb-4"><span class="w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse"></span> Coming Soon </span><h2 class="text-xl font-semibold text-gray-900 mb-2">Checkout Page Button</h2><p class="text-sm text-gray-500 leading-relaxed"> We&#39;re working on WhatsApp integration for the checkout page. Stay tuned for updates! </p></div>',1)];function Pte(s,e){return v(),C("div",$te,Tte)}const Lte=Object.freeze(Object.defineProperty({__proto__:null,default:Nt(Ate,[["render",Pte]])},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=admin.min.js.map
