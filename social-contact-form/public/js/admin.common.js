(function(){"use strict";(()=>{const e=async()=>{const d="formychat_ip_data",n=r=>{delete r.success,window.formychat_ip=r,window.dispatchEvent(new CustomEvent("formychat_ip_loaded",{detail:r}))};try{const r=localStorage.getItem(d);if(r){const{timestamp:l,data:c}=JSON.parse(r);if(Date.now()-l<864e5)return n(c),c}const f=await fetch("https://ipwhois.app/json/");if(!f.ok)throw new Error("Failed to fetch IP data");const s=await f.json();if(!s||typeof s!="object")throw new Error("Invalid IP data");return localStorage.setItem(d,JSON.stringify({timestamp:Date.now(),data:s})),n(s),s}catch{return window.formychat_ip=null,null}};document.addEventListener("DOMContentLoaded",e),window.addEventListener("formychat_ip_loaded",d=>{var i,n;window.formychat_country_code=((n=(i=d.detail)==null?void 0:i.country_phone)==null?void 0:n.replace("+",""))||"44"})})(),window.initFormyChatDropDown=()=>{const e=document.querySelector(".formychat-dropdown");if(!e)return;const d=e.querySelector(".formychat-dropdown-placeholder"),i=e.querySelector(".formychat-dropdown-content-search"),n=e.querySelector(".formychat-dropdown-input"),r=()=>{document.addEventListener("click",o=>{if(o.target.closest(".formychat-dropdown-placeholder"))return f(o);if(!o.target.closest(".formychat-dropdown")&&!o.target.closest(".formychat-dropdown-placeholder"))return l();if(o.target.closest(".formychat-dropdown-content-item")||o.target.classList.contains("formychat-dropdown-content-item"))return c(o)}),document.addEventListener("keyup",o=>{if(o.target.closest(".formychat-dropdown")){if(o.target.closest(".formychat-dropdown-content-search")){h(o.target.value.toLowerCase().trim());return}if(o.key==="Escape"){l();return}}});const t=e.querySelector(".formychat-dropdown-content-item.selected");t&&c({target:t})};window.addEventListener("DOMContentLoaded",r);const f=t=>{if(t.preventDefault(),t.stopPropagation(),e.classList.contains("open")){l();return}s()},s=()=>{e.classList.add("active"),i.focus();const t=e.querySelector(".formychat-dropdown-content-item.selected");t&&t.scrollIntoView({behavior:"smooth",block:"center"})},l=()=>{console.log("closing"),e.classList.remove("active")},c=t=>{e.querySelectorAll(".formychat-dropdown-content-item").forEach(a=>{a.classList.remove("selected")}),t.target.classList.add("selected"),d&&(d.querySelector("span").textContent=t.target.dataset.placeholder),n.value=t.target.dataset.value,i.value="",h(),l()},h=(t="")=>{e.querySelectorAll(".formychat-dropdown-content-item").forEach(a=>{let m=!t||t.length===0;t&&t.length&&(m=t.length===0||a.dataset.tags.toLowerCase().includes(t)),a.style.display=m?"block":"none"})};if(!n.value||n.value.length===0)if(window.formychat_country_code){const t=e.querySelectorAll(".formychat-dropdown-content-item"),o=Array.from(t).find(a=>a.dataset.value===window.formychat_country_code);o&&c({target:o})}else window.addEventListener("formychat_ip_loaded",t=>{var u,y;const o=((y=(u=t.detail)==null?void 0:u.country_phone)==null?void 0:y.replace("+",""))||"44",a=e.querySelectorAll(".formychat-dropdown-content-item"),m=Array.from(a).find(p=>p.dataset.value===o);m&&c({target:m})});else{let t=e.querySelector('.formychat-dropdown-content-item[data-value="'+n.value+'"]');t&&c({target:t})}window.dispatchEvent(new Event("formychat_dropdown_initialized"))},document.addEventListener("DOMContentLoaded",initFormyChatDropDown);const w=()=>{if(window.location.href.includes("page=wpcf7")&&window.location.hash==="#formychat"){const e=document.querySelector("#formychat-tab");e&&e.click()}};document.addEventListener("DOMContentLoaded",w)})();
//# sourceMappingURL=admin.common.js.map
